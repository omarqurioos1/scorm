"use strict";(()=>{var MT=Object.defineProperty;var Tu=(e,t)=>{for(var o in t)MT(e,o,{get:t[o],enumerable:!0})};var V=class e{static log(t,...o){console.log(t,...o)}static warn(t,...o){console.warn(t,...o)}static error(t,...o){console.error(t,...o)}static assert(t,o){t||e.error("Assertion failed"+(o?": "+o:""))}};function B(e,t){return V.assert(e,t),e}function $e(e){return e!==void 0}function ua(e){let t=typeof e;return t=="object"&&e!=null||t=="function"}function fa(e){return typeof e=="function"}function so(e){return typeof e=="string"}function Du(e){return Array.isArray(e)}var $o=e=>e!=null,O=(e,t=`Unhandled value: ${JSON.stringify(e,null," ")}`)=>V.error(t);function zg(e,t,o){return function(...r){o&&o(...r);let n=e(...r);return t(this,n,...r),n}}var at=Function("return this")(),AT=()=>!0;function zs(e,t){if(AT()){if(t){V.error(e);return}V.warn(e)}}function wu(e,t){let o=e.stack||e.toString();String(o).indexOf(e.message)<0&&zs(e.message,t),zs(o,t)}var VT=Object.getPrototypeOf({});function Eu(e){e&&(B(!e.disposed),!1&&setTimeout(()=>{let t=e.owner?e.owner.constructor.name:null,o=e.owner?e.ownerPropertyName():null;if(e.owner=null,e.ownerPropertyName=null,e instanceof $t){let i=t?`[${t}].${o} have active signals`:void 0;B(e.handlersCount()==0,i)}let r=e,n=new Set;for(;(r=B(Object.getPrototypeOf(r)))!=VT;)Object.getOwnPropertyNames(r).forEach(i=>{i!="constructor"&&n.add(i)});n.forEach(i=>{fa(e[i])&&(e[i]=zg(e[i].bind(e),()=>{zs(`using method ${i} from disposed object ${e.constructor.name}`,!0)}))})},100),fa(e.dispose)&&e.dispose(),e.disposed=!0)}function Ng(e,t){let o=e.split("."),r=at;!(o[0]in r)&&typeof r.execScript!="undefined"&&r.execScript("var "+o[0]);for(let n;o.length&&(n=o.shift());)!o.length&&$e(t)?r[n]=t:r[n]&&r[n]!==Object.prototype[n]?r=r[n]:r=r[n]={}}!1||(at.onerror=function(...e){let[t,,,,o]=e;return o?wu(o,!0):zs(t,!0),!0});var FT=0,Ns=class{constructor(t,o,r,n,i=null){this.listener=t,this.src=o,this.type=r,this.capture=!!n,this.handler=i,this.key=++FT}};var Qs=class extends Ns{constructor(t,o,r,n,i,a){super(t,r,n,i,a),this.proxy=o,this.callOnce=!1,this.removed=!1}markAsRemoved(){this.removed=!0,this.listener=null,this.proxy=null,this.src=null,this.handler=null}};function Qg(e,t,o){for(let r in e)if(t.call(o,e[r],r,e))return!0;return!1}function Hg(e,t,o){if(e){for(let r in e)if(t.call(o,e[r],r,e))return r}}function Hs(e,t){for(let o in e)if(!(o in t)||e[o]!==t[o])return!1;for(let o in t)if(!(o in e))return!1;return!0}function Ug(e,t,o){let r={};if(e)for(let n in e)t.call(o,e[n],n,e)&&(r[n]=e[n]);return r}function da(e,t,o){for(let r in e)e.hasOwnProperty(r)&&t.call(o,e[r],r,e)}function Zr(e,t){let o={};for(let r of Object.keys(e))o[r]=t(e[r]);return o}function zo(e,t){let o=t(e);if(o!==void 0)return o;if(typeof e!="object"||e==null)return e;if(Array.isArray(e))return e.map(n=>zo(n,t));let r={};for(let n of Object.keys(e))r[n]=zo(e[n],t);return r}function Wg(e,t){for(let o of Object.keys(t))e[o]=t[o]}function Dt(e){return e&&JSON.parse(JSON.stringify(e))}var ga=class{constructor(t){this.src=t,this.listeners={},this._typeCount=0}getTypeCount(){return this._typeCount}getListenerCount(){let t=0;for(let o of Object.keys(this.listeners))t+=this.listeners[o].length;return t}add(t,o,r,n,i){let a=t.toString(),s=this.listeners[a];s||(s=this.listeners[a]=[],this._typeCount++);let c,l=this._findListenerIndex(s,o,n,i);return l>-1?(c=s[l],r||(c.callOnce=!1)):(c=new Qs(o,null,this.src,a,!!n,i),c.callOnce=r,s.push(c)),c}remove(t,o,r,n){let i=t.toString();if(!(i in this.listeners))return!1;let a=this.listeners[i],s=this._findListenerIndex(a,o,r,n);return s>-1?(a[s].markAsRemoved(),a.splice(s,1),a.length==0&&(delete this.listeners[i],this._typeCount--),!0):!1}removeByKey(t){let o=t.type;if(!(o in this.listeners))return!1;let r=this.listeners[o],n=r.indexOf(t),i=n>=0;return i&&(r.splice(n,1),t.markAsRemoved(),this.listeners[o].length==0&&(delete this.listeners[o],--this._typeCount)),i}getListeners(t,o){let r=this.listeners[t.toString()],n=[];if(r)for(let i=0;i<r.length;++i){let a=r[i];a.capture==o&&n.push(a)}return n}getListener(t,o,r,n){let i=this.listeners[t.toString()],a=-1;return i&&(a=this._findListenerIndex(i,o,r,n)),a>-1?i[a]:null}hasListener(t="",o){let r=$e(t),n=r?t.toString():"",i=$e(o);return Qg(this.listeners,a=>{for(let s=0;s<a.length;++s)if((!r||a[s].type==n)&&(!i||a[s].capture==o))return!0;return!1})}_findListenerIndex(t,o,r,n){for(let i=0;i<t.length;++i){let a=t[i];if(!a.removed&&a.listener==o&&a.capture==!!r&&a.handler==n)return i}return-1}};var Ru="ispring_lm_"+(Math.random()*1e6|0),Pu;function OT(){if(!at.addEventListener||!Object.defineProperty)return!1;let e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return at.addEventListener("test",Function.prototype,t),at.removeEventListener("test",Function.prototype,t),e}function LT(){return $e(Pu)||(Pu=OT()),Pu}function Iu(e){let t=e[Ru];return t instanceof ga?t:null}function wt(e){let t=e;if(!t||t.removed)return!1;let o=t.src,r=t.type,n=t.proxy;o.removeEventListener&&o.removeEventListener(r,n,t.capture);let i=Iu(o);return i?(i.removeByKey(t),i.getTypeCount()==0&&(o[Ru]=null)):t.markAsRemoved(),!0}function KT(e){let{listener:t,handler:o,callOnce:r}=e,n=o?t.bind(o):t;return r?(...i)=>{n(...i),wt(e)}:n}function st(e,t,o,r,n=null){let i=ua(r)?B(r).capture:!!r,a=Iu(e);a||(a=new ga(e),e[Ru]=a);let s=!!(r&&r.once),c=a.add(t,o,s,i,n);if(c.proxy)return c;let l=KT(c);if(c.proxy=l,e.addEventListener){let m=LT()?r:i;$e(m)||(m=!1),e.addEventListener(t.toString(),l,m)}else throw new Error("addEventListener is unavailable.");return c}function qg(e,t,o,r,n){r=!!r;let i=Iu(e);return i?i.getListener(t,o,r,n):null}var Us=class{dispose(){}};var $T=0,ar=class extends Us{constructor(){super(),this._listenersKeys=null,this._activeSignals=null,this._disposables=null,this._customDestructHandlers=null}addDestructHandler(t){this._customDestructHandlers=this._customDestructHandlers||[],this._customDestructHandlers.push(t)}dispose(){if(this._destruct(),this._customDestructHandlers)for(let t of this._customDestructHandlers)t();if(this._disposables)for(let t of this._disposables)Eu(t);if(this._listenersKeys){for(let t of this._listenersKeys)wt(t);this._listenersKeys=null}if(this._activeSignals)for(let t of Object.keys(this._activeSignals))this._removeSignalByKey(t)}_listen(t,o,r,n){this._listenersKeys=this._listenersKeys||[];let i=st(this._getEventTarget(t),o,r,n,this);return this._listenersKeys.push(i),i}_unlisten(t,o,r){let n=qg(this._getEventTarget(t),o,r,!1);return!!n&&this._unlistenByKey(n)}_unlistenByKey(t){let o=B(this._listenersKeys),r=o.indexOf(t);return r>=0&&o.splice(r,1),wt(t)}_addSignal(t,o,r){this._activeSignals=this._activeSignals||{},t.add(o,this,r);let n=++$T;return this._activeSignals[n]={dispatcher:t,fn:o,priority:r},n}_addSignalCallOnce(t,o,r){let n=(...i)=>{o.apply(this,i),this._removeSignal(t,n,r)};this._addSignal(t,n,r)}_removeSignal(t,o,r){let n=Hg(this._activeSignals,i=>Hs(i,{dispatcher:t,fn:o,priority:r}));n?this._removeSignalByKey(n):!1&&V.warn("unknown signal")}_removeSignalByKey(t){if(!(this._activeSignals&&this._activeSignals[t])){V.warn("unknown signal key");return}let{dispatcher:o,fn:r,priority:n}=this._activeSignals[t];o.remove(r,this,n),delete this._activeSignals[t]}_removeAllEvents(t){if(t){if(this._activeSignals){let o=Ug(this._activeSignals,r=>r.dispatcher.eventOwner()==t);for(let r of Object.keys(o))this._removeSignalByKey(r)}if(this._listenersKeys){let o=this._getEventTarget(t),r=this._listenersKeys.filter(n=>n.src==o);for(let n of r)this._unlistenByKey(n)}}}_name(){let t=this,o=t.owner,r=`[${this.constructor.name}]`;return o&&(r+=` in [${o.constructor.name}].${t.ownerPropertyName()}`),r}_addDisposable(t){if(this._disposables=this._disposables||[],!t||this._disposables.includes(t))return t;if(!1){let o=t;B(this._disposables.indexOf(t)<0),B(!o.owner),o.owner=this,o.ownerPropertyName=()=>{let r=this;for(let n of Object.keys(r))if(r[n]==o)return n;return"unknown"}}return this._disposables.push(t),t}_removeDisposable(...t){if(this._disposables){for(let o of t)if(o){this._cleanItemDependencies(o);let r=this._disposables.indexOf(o);r>=0&&(this._disposables.splice(r,1),Eu(o))}}}_cleanItemDependencies(t){this._removeAllEvents(t)}_cleanDependencies(...t){for(let o of t)o&&this._cleanItemDependencies(o)}_getEventTarget(t){return t}_destruct(){}};function Mu(e,t){return e>t?1:e<t?-1:0}function Gg(e,t){if(!e)return!1;let o=e.indexOf(t),r=o>=0;return r&&e.splice(o,1),r}function zT(e,t,o,r,n){let i=0,a=e.length,s;for(;i<a;){let c=i+a>>1,l;o?l=t.call(n,e[c],c,e):l=t(r,e[c]),l>0?i=c+1:(a=c,s=!l)}return s?i:~i}function NT(e,t,o=Mu){return zT(e,o,!1,t)}function Yg(e,t,o){let r=NT(e,t,o);return r<0?(e.splice(-(r+1),0,t),!0):!1}function co(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;++o)if(e[o]!==t[o])return!1;return!0}function jg(e,t,o){return e.reduce((r,n,i)=>(r[t(n,i)]=o?o(n,i):n,r),{})}function Ws(e,t){let o=(t%e.length+e.length)%e.length;return e[o]}function sr(e){return e.filter(t=>t)}function No(e){for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}}function Zg(e,t,o){let r=e[t];e[t]=e[o],e[o]=r}var qs=class{constructor(){this._priorities=null,this._values=null,this._zeroPriorityValues=null}push(t,o){this._addPriority(o);let r=this._getPriorityValues(o);r?r.push(t):V.warn("Priority array values are zero")}remove(t,o){let r=this._getPriorityValues(o);r&&Gg(r,t)}removeAt(t,o){let r=this._getPriorityValues(o);r&&r.splice(t,1)}getValuesWithPriority(t){if(t==0)return this._zeroPriorityValues||[];if(!this._values)return V.warn("Priority array values are zero"),[];if(!(t in this._values))return[];let o=this._getPriorityValues(t);return o||(V.warn("Priority array values are zero"),[])}getAllValues(){if(!this._values)return this._zeroPriorityValues?this._zeroPriorityValues.slice():[];let t=[],o=B(this._priorities);for(let r=0;r<o.length;++r){let n=o[r],i=this._getPriorityValues(n);i&&t.push(...i)}return t}_addPriority(t){if(t==0){this._zeroPriorityValues=this._zeroPriorityValues||[];return}this._priorities=this._priorities||[0],this._values=this._values||{},t in this._values||(this._values[t]=[],Yg(this._priorities,t))}_getPriorityValues(t){return t==0?this._zeroPriorityValues:B(this._values)[t]}};var $t=class extends ar{constructor(t=null){super(),this._handlers=null,this._owner=t}eventOwner(){return this._owner}add(t,o,r=0){this._handlers=this._handlers||new qs,this._handlers.push({fn:t,context:o},r)}addCallOnce(t,o,r=0){let n=i=>{t.call(o,i),this.remove(n,o,r)};this.add(n,o,r)}remove(t,o,r=0){if(!this._handlers){V.warn("Signal has no handlers!");return}let n=this._handlers.getValuesWithPriority(r),i=n.length;for(let a=0;a<i;++a){let s=n[a];if(s.fn==t&&s.context==o){this._handlers.removeAt(a,r);break}}}has(t,o,r=0){if(!this._handlers)return!1;let n=this._handlers.getValuesWithPriority(r),i=n.length;for(let a=0;a<i;++a){let s=n[a];if(s.fn==t&&s.context==o)return!0}return!1}dispatch(t){if(!this._handlers)return;let o=this._handlers.getAllValues(),r=o.length;for(let n=0;n<r;++n){let i=o[n];if(this._handlers.getAllValues().indexOf(i)!=-1)if(!1)i.fn.apply(i.context,[t]);else try{i.fn.apply(i.context,[t])}catch(a){wu(a,!0)}}}toFn(){return t=>this.dispatch(t)}handlersCount(){return this._handlers?this._handlers.getAllValues().length:0}};var Gs=class extends ar{addDisposable(t){return this._addDisposable(t)}addSignal(t,o,r){return this._addSignal(t,o,r)}addSignalCallOnce(t,o,r){return this._addSignalCallOnce(t,o,r)}listen(t,o,r,n){return this._listen(t,o,r,n)}};var cr=class extends ar{_createDependencyGroup(){return this._addDisposable(new Gs)}_createSignal(t){let o=new $t(this);if(this._addDisposable(o),t)if(Array.isArray(t))for(let r of t)this._addSignal(r,n=>o.dispatch(n));else this._addSignal(t,r=>o.dispatch(r));return o}_createSignalProxy({signal:t,checkDispatchFn:o,modifyDataFn:r}){let n=new $t(this);return this._addDisposable(n),this._addSignal(t,i=>{if(!o||o(i)){let a=r?r(i):i;n.dispatch(a)}}),n}};function Ct(e,t,o){return Math.max(t,Math.min(o,e))}function Xg(e){return e>0?1:e==0?0:-1}function ha(e,t=0){return parseFloat(e.toFixed(t))}function QT(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function Au(e){let t=document.createElement("span");return t.innerText=e,t.innerHTML}function HT(e,t,o,r="g"){return e.replace(new RegExp(QT(t),r),o)}function Jg(e,t,o){let r=e;for(let n of Object.keys(t)){let i=t[n],a=o(n);r=HT(r,a,i)}return r}function eh(e,t){return e.slice(0,t).replace(/[^\s]*\s*$/,"").length}function th(e,t){let o=/^\s*[^\s]*/i.exec(e.slice(t)),r=o?o[0].length:0;return t+r}var oh=["Learn.Reports.SendReportOnSchedulePopup.Schedule.Month.Day","Learn.EditContent.CompletionTab.ReenrollmentAfterCourseCompletion.Part1","Learn.EditContent.CompletionTab.ReenrollmentBeforeCertExpires.Part1","Learn.EditContent.CompletionTab.ReenrollmentAfterCourseCompletion.Part2","Studio.SideBar.StorageBar.Progress.Part1","Studio.SideBar.StorageBar.Progress.Part2"];var Ys=class extends cr{constructor(t){super(),this._messages=t}addMessages(t){this._messages={...this._messages,...t}}getMessage(t,o){if(!this._messages.hasOwnProperty(t))return t;let r=B(this._messages[t]||oh.includes(t));return typeof r!="string"&&(r=""),o&&(r=Jg(r,o,this._generateKey)),r}messages(){return this._messages}hasMessage(t){return this._messages.hasOwnProperty(t)}_generateKey(t){return"{"+t.toLowerCase()+"}"}};var Yn;function UT(e){if(Yn){V.warn("i18n has already been declared");return}Yn=e}function rh(e){if(Yn){Yn.addMessages(e);return}let t=new Ys(e);UT(t)}function T(e,t){let o=typeof e=="string"?e:e.value;return Yn?Yn.getMessage(o,t):(V.warn("i18n is not initialized"),o)}function lr(e){return{value:e}}function nh(e){return T("Common.Colon",{text:e})}function Ue(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function tt(e){return Object.freeze({initialValue:e})}function js(e,t,o){let r=e.get(t);if(!(r&&r.value===o)){if(Vu.set(t,!0),r){r.value=o;return}e.set(t,{value:o})}}function ih(e,t){return e.has(t)?e.get(t).value:t.initialValue}function ah(){Vu.clear()}var Vu=new Map;function sh(e){for(let t of e.keys())if(Vu.has(t))return!0;return!1}var ch=[],lh=[];function mh(e){for(let t of e){t.clear&&t.clear();try{let o=t.callback();typeof o=="function"?t.clear=o:o&&(V.error("useEffect's callback should return a function"),t.clear=void 0)}catch(o){console.log(o)}}e.length=0}function ph(){mh(lh)}function Zs(){mh(ch)}function uh(e){e.clear&&(e.clear(),e.clear=null),e.sync?ch.push(e):lh.push(e)}var Yt=at.requestAnimationFrame||at.mozRequestAnimationFrame||at.webkitRequestAnimationFrame||at.msRequestAnimationFrame||setTimeout,WT=at.cancelAnimationFrame||at.mozCancelAnimationFrame||at.webkitCancelAnimationFrame||at.msCancelAnimationFrame||clearTimeout,UF=at.requestIdleCallback||qT,WF=at.cancelIdleCallback||GT;function qT(e){let t=Date.now();return setTimeout(()=>{e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)}function GT(e){clearTimeout(e)}function Xs(e,t){let o=t?e.bind(t):e,r;function n(){WT(r),r=null}function i(){r&&n(),r=Yt(o)}function a(){return r!=null}return{call:i,cancel:n,isSheduled:a}}var Fu=null,Lu=new Map;function Ku(){if(!Fu){let{call:e}=Xs($u);Fu=e}Fu()}var Ou=!1,Js=!1;function $u(){if(Ou)return;if(Ou=!0,ph(),Ou=!1,Js){V.error("render was already started"),Ku();return}Js=!0,ah();let e=Lu;Lu=new Map;for(let t of e.keys())try{t()}catch(o){console.log(o)}Zs(),Js=!1}function ec(e){Lu.set(e,!0),Ku()}function fh(){return Js}function zu(e){uh(e),e.sync||Ku()}var mr=new Map,Xr=[];function dh(e,t){if(Xr.push({redrawFn:e,contextMap:t}),mr.has(e)){let o=B(mr.get(e));o.hookIndex=0,o.effectIndex=0}}function gh(e){let t=B(Xr.pop()),o=mr.get(t.redrawFn);if(o){if(V.assert(e instanceof Element),o.connected)V.assert(o.firstRenderHooksCount==o.hookData.length,`Incorrect hooks count
expected: ${o.firstRenderHooksCount}
actual: ${o.hookData.length}`),V.assert(o.firstRenderEffectsCount==o.effects.length,`Incorrect effects count
expected: ${o.firstRenderEffectsCount}
actual: ${o.effects.length}`);else{o.connected=!0;for(let r of o.effects)zu(r);o.firstRenderHooksCount=o.hookData.length,o.firstRenderEffectsCount=o.effects.length}return!0}return!1}function hh(e){let t=mr.get(e);if(t){for(let o of t.effects)o.clear&&o.clear();mr.delete(e)}}function Nu(){if(!Xr.length)throw new Error("Hooks can be used only in render functions");let e=B(Xr[Xr.length-1]).redrawFn;return mr.has(e)||mr.set(e,{hookIndex:0,hookData:[],effectIndex:0,effects:[],redraw:e,connected:!1}),B(mr.get(e))}var z=e=>{!1&&e!=null&&typeof e=="object"&&V.error("useState: you should use lazy initialization for complex types");let t=Nu(),o=t.hookIndex;if(t.hookData.length==o){let r=i=>{typeof i=="function"&&(i=i(t.hookData[o][0])),t.hookData[o][0]=i,ec(t.redraw)},n=fa(e)?e():e;!1&&typeof n=="function"&&V.error("useState: do not store functions in state"),t.hookData.push([n,r])}return++t.hookIndex,t.hookData[o]};function E(e){let t=Nu(),o=t.hookIndex;if(t.hookData.length==o){let n={current:e};t.hookData.push(n)}let r=t.hookData[o];return++t.hookIndex,r}function yh(e,t,o){let r=Nu(),n=r.effectIndex;if(r.effects.length==n){let a={callback:e,sync:o,clear:null,deps:t};r.effects.push(a)}else{let a=r.effects[n];a.callback=e}let i=r.effects[n];r.connected&&(!t||!co(B(i.deps),t))&&zu(i),i.deps=t,++r.effectIndex}function P(e,t){yh(e,t,!1)}function ee(e,t){yh(e,t,!0)}function ya(e){let t=E();return P(()=>{t.current=e},[e]),t.current}function I(e,t){let o=E(),r=ya(t);return(!r||!co(r,t))&&(o.current=e()),o.current}function w(e,t){return I(()=>e,t)}function ae(e){return ih(Xr[Xr.length-1].contextMap,e)}function Qo(...e){}function Et(){let e=[];return{add(t){return e.push(t),()=>{let o=e.indexOf(t);o>=0&&e.splice(o,1)}},dispatch(t){for(let o of e)o(t)}}}function xh(e,t){e.push(t),e.length>3&&(e[e.length-3-1].markedAsRemoved=!0)}function _h(e,t){if(!e.length)return[t];let o=e.findIndex(l=>l.important),r=e.findIndex(l=>!l.important),n=r==-1,i=o==-1,a=e.filter(l=>l.important),s=e.filter(l=>!l.important);t.important?xh(a,t):xh(s,t);let c;return i?c=[...s,...a]:n?c=[...a,...s]:o<r?c=[...a,...s]:c=[...s,...a],c}function Sh(e,t){return e.filter(o=>o.id!==t)}var tc=Et(),kh=Et();function jn(e){let t=Ue();switch(e.type){case"basic":case"warning":case"critical":tc.dispatch({id:t,type:e.type,important:e.important,text:e.text,onClose:e.onClose});break;case"withLoad":tc.dispatch({id:t,type:e.type,important:e.important,text:e.text,operationCompletePromise:e.operationCompletePromise,onClose:e.onClose});break;case"withLoadAndCancel":tc.dispatch({id:t,type:e.type,important:e.important,text:e.text,operationCompletePromise:e.operationCompletePromise,cancelButtonLabel:e.cancelButtonLabel,onCancel:e.onCancel,onClose:e.onClose});break;default:O(e);break}}function oc(e){kh.dispatch(e)}function Ch(){let[e,t]=z(()=>[]),{unsubAdd:o,unsubRemove:r}=I(()=>({unsubAdd:tc.add(n=>t(i=>_h(i,n))),unsubRemove:kh.add(n=>t(i=>Sh(i,n)))}),[]);return ee(()=>()=>{o(),r()},[o,r]),e}var Qu;function xa(e,t){return o=>{let r=Qu==null?void 0:Qu[e];r?r(o):t(o)}}var Hu=xa("showCriticalToast",({text:e,important:t=!1})=>{jn({type:"critical",important:t,text:e})});var bh=xa("showBasicToast",({text:e,important:t=!1,onClose:o})=>{jn({type:"basic",important:t,text:e,onClose:o})});var jT=xa("showWarningToast",({text:e,important:t=!1})=>{jn({type:"warning",important:t,text:e})});var _O=xa("showToastWithLoad",({text:e,operationCompletePromise:t})=>{jn({type:"withLoad",text:e,important:!0,operationCompletePromise:t})});var SO=xa("showToastWithLoadAndCancel",({text:e,operationCompletePromise:t,onCancel:o})=>{jn({type:"withLoadAndCancel",text:e,important:!0,operationCompletePromise:t,cancelButtonLabel:T("Common.Toasts.CancelButtonLabel"),onCancel:o})});function ZT(e,t){if(typeof e.className=="string"){e.className=t;return}e.className.baseVal=t}function XT(e){return typeof e.className=="string"?e.className:e.className.baseVal}function JT(e){if(e.classList)return e.classList;let t=e.className;return so(t)&&t.match(/\S+/g)||[]}function e4(e,t){return e.classList?e.classList.contains(t):JT(e).includes(t)}function Bh(e,t){if(e instanceof Element){if(e.classList){e.classList.add(t);return}if(!e4(e,t)){let o=XT(e),r="";o&&(r=`${o} `),ZT(e,r+t)}}}var Ho=new Map,Uu=null;function vh(){return Uu||(Uu=new MutationObserver(e=>{for(let t of e){for(let o of t.removedNodes)for(let r of Ho.keys()){let n=B(Ho.get(r));n.remove&&o.contains&&o.contains(r)&&n.remove()}for(let o of t.addedNodes)for(let r of Ho.keys()){let n=B(Ho.get(r));n.add&&o.contains&&o.contains(r)&&n.add()}}})),Uu}function Th(e,t){let o=Ho.size==0;return V.assert(!Ho.has(e)),Ho.set(e,t),o&&vh().observe(document,{subtree:!0,childList:!0}),()=>{Ho.delete(e),Ho.size==0&&vh().disconnect()}}var Dh={},t4=Math.pow(2,24);function qu(){let e;for(;e===void 0||Dh.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*t4).toString(32);return Dh[e]=!0,e}var Wu=new WeakMap;function wh(e){return Wu.has(e)||Wu.set(e,qu()),Wu.get(e)}var Eh="renderBinding",g=(e,t=void 0,o=void 0)=>{let r=()=>[e,t,o];return r._meta=Eh,r},le=(e,t,o=void 0,r=void 0)=>({id:typeof e=="string"?e:wh(e),binding:g(t,o,r)});function Ph(e){return typeof e=="function"&&e._meta==Eh}function o4(e,t={}){t.current=e}hyperHTML.define("save-ref",o4);var Rh=new WeakMap;function r4(e,t){let o=Rh.get(e)||Rh.set(e,{}).get(e);for(let r of Object.keys(t))if(r.slice(0,2)==="on"&&o[r]!==t[r]){let i=r.slice(2);o[r]&&e.removeEventListener(i,o[r]),o[r]=t[r],o[r]&&e.addEventListener(i,o[r],{passive:!0})}return""}hyperHTML.define("passive-events",r4);var Pt=hyperHTML.wire;if(!1){let e=new WeakMap;Pt=(t,o="__default__")=>{t=t||{},e.has(t)||e.set(t,{});let r=e.get(t);if(!r[o]){let n=hyperHTML.wire(t,o),i;r[o]=function(a,...s){return i||(i=a),i!=a&&a.join("_")==i.join("_")&&(a=i),B(r)[o].__tmp.history.push([a,...s]),n(a,...s)},r[o].__tmp={obj:t,id:o,history:[]}}return r[o]}}var RO=hyperHTML.bind;var Gu=new Map,rc=new WeakMap;function n4(e,t){return e===t?!0:typeof e=="object"&&typeof t=="object"&&Hs(e,t)}function Jr(e,t,o=new Map,r,n="html"){let i=t?`${t}`:"__root";Gu.has(e)||Gu.set(e,{});let a=Gu.get(e);if(!a[i]){let s=Pt(void 0,n),c=0,l=new Map(o),m=0,p=[],f=[],d=null,x=new Map,_=new Map,k=(S,...C)=>{if(Ph(S)||S==null){let v=C[0];return k.switch(()=>S,v)}else if(typeof S=="function"){let v=C[0],D=C[1];return k._getHtmlWireResultWithOptimizations(`_c${++c}`,S,v,D)}d&&!Object.is(S,d)&&V.warn("Template literal was changed"),d=S;let y=s(S,...C);return y.__clearCache=()=>{s=Pt(void 0,n)},k._finishRender(),r&&(r.current=y),y};k.contextMap=o,k.switch=(S,C)=>{p[m]||(p[m]=new Map);let y=p[m],v=f[m],D=S();if(!D)return++m,null;let[A,$,H]=D();if(!y.get(A)){let ye=y.has(A)?[...y.keys()].indexOf(A):y.size;y.set(A,ju(A,k._createChild(`_u${m}_${ye}`,n),l,C,H))}return++m,v&&v.delete(A),B(y.get(A))($)},k.renderAll=(S,C)=>{let y=[],v=new Set;return S.forEach((D,A)=>{let $=C(D,A);if($){let{id:H,binding:oe}=$,ye=H;for(;v.has(H);)H=`${H}_copy`;v.add(H),ye!=H&&V.error(`duplicated child id: ${ye}`);let[xe,Tt,jr]=oe();H||(V.error("unexpected error: empty id in render all"),H=`_c${++c}`),y.push(k._getHtmlWireResultWithOptimizations(H,xe,Tt,jr))}}),y},k.toSvgMode=()=>{let S=k._createChild(`_c${++c}`,"svg");return k._finishRender(),S},k.setRenderTypeForChildren=S=>{n=S},k._createChild=(S,C)=>Jr(e,(t||"")+S,l,void 0,C),k._getHtmlWireResultWithOptimizations=(S,C,y,v)=>{let D=k._createChild(S,n);if(x.has(D))_.delete(D);else{let $=ju(C,D,l,v);x.set(D,$)}return B(x.get(D))(y)},k._finishRender=()=>{if(_.size)for(let S of _.keys()){let C=x.get(S);C?(C.clean(),x.delete(S)):V.warn("clean child error")}for(let S=0;S<f.length;++S){let C=f[S];for(let y of C.keys()){let v=C.get(y);v?(v.clean(),p[S].set(y,null)):v!==null&&V.warn("clean child error")}}_=new Map(x),f=p.map(S=>new Map(S)),c=0,m=0},k.renderIf=function(S,C,y){let v=C();return v?k(S,v,y):(++c,null)},k.setContext=(S,C)=>(js(l,S,C),k),k.clean=function(){k.clean=()=>console.log("clean already complete"),a[i]=null;for(let S of x.values())S.clean();for(let S of p)for(let C of S.values())C&&C.clean();x.clear(),_.clear()},a[i]=k}return a[i]}function be(e,t,o){let[r,n,i]=t(),a=r(e,n);return a instanceof Element&&Yu(a,i),o&&(o.current=a),a}function Yu(e,t){if(!t)return;let o=String(t);if(o.includes(" ")){V.error(`multiple classNames not allowed: ${o}`);return}Bh(e,o)}function ju(e,t,o=new Map,r="",n=""){let i,a=null,s=typeof r=="string"||r.___css?{className:String(r)}:r,c=!1;function l(){if(c)return;dh(l,B(o));let p=e(t,i),f=gh(p);return a&&f?a!=p&&window.console.error(`[${e.name}] dom element was changed`):a=p,a instanceof Element&&(Yu(a,s.className),Yu(a,n)),s.ref&&(s.ref.current=a),p}function m(p){return!sh(B(o))&&n4(i,p)&&a?a:(i=p,B(l()))}return m.clean=function(){c=!0,hh(l),t.clean()},m}function i4(e,t,o=Jr(t),r=new Map){let n=rc.has(o);n||rc.set(o,ju(e,o,r));let i=rc.get(o),a=i(t);if(!n){let s=Th(a,{remove:()=>{document.body.contains(a)||(i.clean(),s(),rc.delete(o))}})}return Yt(Zs),a}function en(e){return(o,r)=>{let n=r&&r.contextMap;return i4(e,o,r,n)}}function Ih(e,t,o=t){let r=en(e),n=Jr(o),i=!0;return a=>{if(i){let s=r(a,n);t(s),i=!1}else ec(()=>{r(a,n)})}}function pr(e){throw new Error(e)}function tn(e){return e!==void 0}function Zu(e){return e===void 0}function a4(e){return e!==null}function _a(e){return e===null}function Xu(e){return Zu(e)||_a(e)}function nc(e){return!s4(e)}function s4(e){return e===!1||Xu(e)}function Mh(e){return typeof e=="boolean"}function Ah(e){return typeof e=="string"}function ic(e){return typeof e=="object"&&a4(e)}function Vh(e,t="assert failed"){e||pr(t)}function Ie(e,t="verify failed"){return Xu(e)&&pr(t),e}function Sa(e,t=`checkNever failed, received '${String(e)}'`){pr(t)}function Fh({type:e,edge:t,fn:o,timeout:r}){let n,i;Vh(!(e==="debounce"&&t==="leading"));function a(m){tn(n)&&(clearTimeout(n),n=void 0),m&&(n=setTimeout(m,r))}function s(){if(!i)return;let m;try{m=o(...i.params),i.resolve(m)}catch(p){a(),Ie(i).reject(p)}finally{i=void 0}return m}function c(){i==null||i.resolve(void 0),i=void 0}let l=(...m)=>{c();let p=tn(n);if(!p||e==="debounce"){let f=()=>{a(i&&t==="leading"?f:void 0),s()};a(f)}return new Promise((f,d)=>{i={params:m,resolve:f,reject:d},t==="leading"&&!p&&s()})};return l.isPending=()=>!!i,l.flush=()=>(a(),s()),l.force=(...m)=>(l.cancel(),o(...m)),l.cancel=()=>{a(),c()},l}var ac=(e,t,o="trailing")=>Fh({type:"throttle",fn:e,timeout:t,edge:o});function W(e){return`${e}px`}function Ju(e,t=0){return`${Number(e.toFixed(t))}%`}function Oh(e){return e.replace(/-\w/g,t=>t.charAt(1).toUpperCase())}function Lh(e,t){let o={};return Object.keys(e).forEach(r=>{let n=e[r];tn(n)&&t(n,r)&&(o[r]=n)}),o}function sc(e){return Lh(e,nc)}function Kh(e){return Object.keys(e)}function $h(e,t){Kh(e).forEach(o=>{t(e[o],o)})}function zh(e,t,o){if(!t.hasOwnProperty(e)){if(o)return o(e);pr(`switchEnum() failed, received '${e}'`)}return t[e]}function c4(e,t){return(o,r,...n)=>{let i=t?Oh(o):o,a=[i];r&&Object.entries(r).forEach(([c,l])=>{Mh(l)?l&&a.push(`${i}_${c}`):Ah(l)?a.push(`${i}_${c}_${l}`):pr(`invalid mod type: {${c}: ${String(l)}}`)});let s=a.map(c=>e[c]);return l4(...s,...n)}}function l4(...e){return e.filter(nc).join(" ")}function u(e){let t=c4(e),o={};return $h(e,(r,n)=>{let[i,a]=n.split("_",2);if(!i)return;let s=o[i];!a&&Zu(s)?o[i]=r:a&&!ic(s)&&(o[i]={withMods:c=>t(i,c)})}),o}var cc={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};function Nh(e,t){return e?e.closest(`div[data-wrapper-key="${t}"]`):null}function Qh(e,t={}){return new Promise((o,r)=>{let n=new XMLHttpRequest;B(t),n.open(t.method||"get",e,!0);for(let a in t.headers)t.headers.hasOwnProperty(a)&&n.setRequestHeader(a,t.headers[a]);n.withCredentials=t.credentials=="include",n.onload=()=>{o(i())},n.onerror=r,n.send(t.body);function i(){let a=[],s=[],c={},l;return n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(m,p,f)=>(a.push(p=p.toLowerCase()),s.push([p,f]),l=c[p],c[p]=l?`${l},${f}`:f,"")),{ok:(n.status/100|0)==2,status:n.status,statusText:n.statusText,url:n.responseURL,clone:i,text:()=>Promise.resolve(n.responseText),json:()=>Promise.resolve(n.responseText).then(m=>JSON.parse(m)),blob:()=>Promise.resolve(new Blob([n.response])),headers:{keys:()=>a,entries:()=>s,get:m=>c[m.toLowerCase()],has:m=>m.toLowerCase()in c}}}})}async function ef(e){let t=await Qh(e);return t.ok?t.json():null}function Hh(e){return new Promise((t,o)=>{let r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){let n=r.response;t(new Blob([n]))},r.onerror=o,r.send(null)})}var lc=null;function Uh(e){if(lc){V.warn("direction has already been declared");return}m4(e)}function m4(e){lc=e,document.documentElement.dir=e}function ho(){return lc||(V.warn("direction is not initialized"),"ltr")}function Zn(){return ho()==="rtl"}function M(){return E()}function ur(){return E()}var ka="id";var Wh="state";var qh="comp";function X(e){if(e)return typeof e=="string"&&(e={[ka]:e}),Object.entries(e).filter(([t,o])=>$o(o)).map(([t,o])=>`${t}=${o}`).join(";")}var G=(e,t,o)=>{let r=E(o);r.current=o;let n=o===null;P(()=>{if(n)return;let i=st(e.current,t,a=>B(r.current)(a));return()=>wt(i)},[e,t,n])};function mc(e,t){let o;function r(){o&&(clearTimeout(o.id),o=void 0)}function n(){if(o){let s=o.handler;r(),s()}}function i(...s){r();let c=()=>{r(),e(...s)};o={id:setTimeout(c,t),handler:c}}function a(...s){r(),e(...s)}return{isPending:()=>$e(o),cancel:r,flush:n,call:i,forceCall:a}}function Gh(e,t,o=200){let r=I(()=>mc(()=>{},o),[o]);G(e,"touchstart",()=>{r.call()}),G(e,"touchend",n=>{r.isPending()&&(n.preventDefault(),t&&t()),r.cancel()})}function Yh(e){return e`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m4.5 11.5 7-7m0 7-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}var p4=u({$:"$",toast:"x923b3__toast",text:"x923b3__text"});function pc(e,{text:t}){return e`
<div class=${p4.text}>
	${{html:t}}
</div>`}var u4=u({$:"$",toast:"x923b3__toast",text:"x923b3__text"}),jh=u({$:"$",toast_type_critical:"x2006c__toast_type_critical",toast_type_basic:"x2006c__toast_type_basic",toast_type_warning:"x2006c__toast_type_warning",closeIcon:"x2006c__close-icon"});function Zh(e,{type:t,text:o,onClose:r}){let n=M();ee(()=>{n.current.setAttribute("data-at",X(`toast-${t}-close-button`)||"")},[n,t]),G(n,"click",r),Gh(n,r);let i=jh.toast.withMods({type:t});return e`
<div
	class=${`${u4.toast} ${i}`}
	data-at=${X(`toast-${t}`)}
>
	${e.switch(()=>typeof o=="function"?o(r):g(pc,{text:o}))}
	${e(Yh,{},{ref:n,className:jh.closeIcon})}
</div>`}function f4(){return window.navigator.platform.includes("Mac")}function d4(){return window.navigator.userAgent.includes("Chrome")}function Xh(){return f4()&&!d4()}function Jh(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)}function uc(){return/Firefox/.test(navigator.userAgent)}function fc(){return window.navigator.userAgent.includes("MSIE")||window.navigator.userAgent.includes("Trident")}function fr(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(window.navigator.userAgent)}var g4=['link[href*="bundle"]','link[href*="legacy_components_customization"]'],h4={include:g4.join(","),silent:!0};var ey={};function Rt(e,t,o){Me(e,{[t]:o})}function Me(e,t,o=window){(e instanceof o.HTMLElement||e instanceof o.SVGElement)&&(fc()?(Object.keys(t).forEach(r=>{let n=t[r];n=n===null?"":n.toString(),ey[r]=n}),cssVars({...h4,variables:ey})):Object.keys(t).forEach(r=>{let n=t[r];n!=null&&(n=n.toString()),e.style.setProperty(r,n)}))}function on(e){Me(document.documentElement,e)}function Xn(e){return B(getComputedStyle(document.documentElement)).getPropertyValue(e)}function ty(e){let t=window.getComputedStyle(e),o=t&&t.transform?t.transform:"";return o=="none"&&(o=""),o}function se(...e){return e.filter(t=>t).join(" ")}var y4=u({$:"$",fadeInAnimation:"xabef6__fade-in-animation",fadeInWithShift:"xabef6__fadeInWithShift",fadeOutAnimation:"xabef6__fade-out-animation",fadeOutWithShift:"xabef6__fadeOutWithShift"});function dc(e){ee(()=>{on({"--toast-fade-in-duration":`${240}ms`,"--toast-fade-out-duration":`${120}ms`}),Rt(e.current,"--shift-animation-height",`-${e.current.clientHeight+e.current.style.marginBottom}px`),e.current.classList.add(y4.fadeInAnimation)},[e])}var x4=u({$:"$",fadeInAnimation:"xabef6__fade-in-animation",fadeInWithShift:"xabef6__fadeInWithShift",fadeOutAnimation:"xabef6__fade-out-animation",fadeOutWithShift:"xabef6__fadeOutWithShift"});function _4(e,t,o){let r=E(void 0),n=E(void 0),i=!o.important,a=w(()=>{r.current!==void 0&&clearTimeout(r.current),n.current!==void 0&&clearTimeout(n.current)},[]),s=w(()=>{a(),e.current.classList.add(x4.fadeOutAnimation),n.current=setTimeout(()=>oc(t),120)},[t,e,a]),c=w(()=>{r.current=setTimeout(()=>s(),4e3)},[s]);return P(()=>(i&&(c(),e.current.onmouseenter=a,e.current.onmouseleave=c),()=>a()),[e,c,a,i]),P(()=>{o.markedAsRemoved&&s()},[s,o.markedAsRemoved]),s}function ry(e,{toastId:t,toastData:o}){let r=M();dc(r);let n=_4(r,t,o);return be(e,g(Zh,{type:o.type,text:o.text,onClose:()=>{n(),o.onClose&&o.onClose()}}),r)}function jt(e){let[t,o]=z(()=>({width:0,height:0}));return P(()=>{let r=B(e.current),n=new ResizeObserver(([i])=>{o(i.contentRect)});return n.observe(r),()=>{n.disconnect()}},[e]),[t.width,t.height]}var S4=[];function Jn(e,t=S4){let[o,r]=z(!1),[n,i]=z(!1),[a,s]=jt(e);return P(()=>{let c=e.current.scrollWidth>e.current.clientWidth;c!=o&&r(c);let l=e.current.scrollHeight>e.current.clientHeight;l!=n&&i(l),Qo(a,s,...t)},[e,o,n,a,s,t]),[o,n]}function ei(e,t){let[o]=Jn(e,t);return o}function rn(e){return{x:e.left,y:e.top}}function Ca(e){return{x:e.width,y:e.height}}function nn(e,t){return{x:e.x*t.x,y:e.y*t.y}}function ny(e,t){return{x:e.x/t.x,y:e.y/t.y}}function Uo(e,t){return{x:e.x+t.x,y:e.y+t.y}}function gc(e){return{x:e,y:e}}function iy(e){return{width:e.offsetWidth,height:e.offsetHeight}}function ti(e){return{width:e.right-e.left,height:e.bottom-e.top}}function Wo(e,t){return{left:e.x,top:e.y,right:e.x+t.width,bottom:e.y+t.height}}function ay(e){let t=rn(e),o=ti(e),r=Ca(o);return Uo(t,ny(r,gc(2)))}function k4(e,t){return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom}function sy(e,t){if(!k4(e,t))return null;let o=Math.max(e.left,t.left),r=Math.max(e.top,t.top),n=Math.min(e.right,t.right),i=Math.min(e.bottom,t.bottom),a=n-o,s=i-r;return a*s}function cy(e){return{width:e.right-e.left,height:e.bottom-e.top}}function ba({elementSize:e={width:0,height:0},popoverSize:t,side:o,align:r,offsetX:n=0,offsetY:i=0}){let a={x:0,y:0};switch(o){case"top":a.y=-t.height-i;break;case"bottom":a.y=e.height+i;break;case"left":a.x=-t.width-n;break;case"right":a.x=e.width+n;break;default:O(o)}switch(r){case"start":switch(o){case"top":case"bottom":a.x=n;break;case"right":case"left":a.y=i;break;default:O(o)}break;case"center":switch(o){case"top":case"bottom":a.x=(e.width-t.width)/2;break;case"right":case"left":a.y=(e.height-t.height)/2;break;default:O(o)}break;case"end":switch(o){case"top":case"bottom":a.x=e.width-t.width-n;break;case"right":case"left":a.y=e.height-t.height-i;break;default:O(o)}break;default:O(r)}return a}function tf(e,t,o){let r=0;switch(e){case"top":r=o.top-t.top;break;case"right":r=t.right-o.right;break;case"bottom":r=t.bottom-o.bottom;break;case"left":r=o.left-t.left;break;default:O(e)}return Math.max(0,r)}function of(e,t,o,r){let n=0;switch(t){case"start":switch(e){case"top":case"bottom":n=o.right-r.right;break;case"right":case"left":n=o.bottom-r.bottom;break;default:O(e)}break;case"center":switch(e){case"top":case"bottom":n=Math.max(o.right-r.right,r.left-o.left);break;case"right":case"left":n=Math.max(o.bottom-r.bottom,r.top-o.top);break;default:O(e)}break;case"end":switch(e){case"top":case"bottom":n=r.left-o.left;break;case"right":case"left":n=r.top-o.top;break;default:O(e)}break;default:O(t)}return Math.max(0,n)}function rf(e){switch(e){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right";default:throw O(e),new Error}}function nf(e){switch(e){case"start":return"end";case"center":throw new Error;case"end":return"start";default:throw O(e),new Error}}function ly(e,t,o){switch(e){case"top":case"bottom":if(t.right>=o.right)return"end";if(t.left<=o.left)return"start";break;case"right":case"left":if(t.bottom>o.bottom)return"end";if(t.top<o.top)return"start";break;default:O(e)}return"center"}function my(e,t){switch(e){case"right":case"left":return{side:rf(e),align:t};case"top":case"bottom":return{side:e,align:t==="center"?t:nf(t)};default:throw O(e),new Error}}function J(e,t,o){if(!t.hasOwnProperty(e)){if(o)return o(e);throw new Error(`getValueByCheckedKey(${e})`)}return t[e]}function oi(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.707 5.707a1 1 0 0 0-1.414-1.414L10 8.586 5.707 4.293a1 1 0 0 0-1.414 1.414L8.586 10l-4.293 4.293a1 1 0 1 0 1.414 1.414L10 11.414l4.293 4.293a1 1 0 0 0 1.414-1.414L11.414 10l4.293-4.293z" fill="currentColor"/></svg>
`}function py(e,t){ee(()=>{for(let o in t)t.hasOwnProperty(o)&&e.current.setAttributeNS(null,o,t[o].toString())},[e,...Object.keys(t),...Object.keys(t).map(o=>t[o])])}function te(e){let t=E();return t.current=e,t}var an=8;function hc(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left";default:throw O(e),new Error}}function C4(e){switch(e){case"start":return"end";case"center":return"center";case"end":return"start";default:throw O(e),new Error}}function dr(e){switch(e){case"start":return 0;case"center":return-.5;case"end":return-1;default:throw O(e),new Error}}function b4(e,t){switch(e){case"top":return{x:dr(t),y:-1};case"bottom":return{x:dr(t),y:0};case"left":return{x:-1,y:dr(t)};case"right":return{x:0,y:dr(t)};default:throw O(e),new Error}}function B4(e,t){switch(e){case"top":return{x:-dr(t),y:0};case"bottom":return{x:-dr(t),y:1};case"left":return{x:0,y:-dr(t)};case"right":return{x:1,y:-dr(t)};default:throw O(e),new Error}}function af({component:e,overlaySize:t,side:o,align:r,offset:n}){let i=ti(e),a=nn(Ca(t),b4(o,r)),s=nn(Ca(i),B4(o,r)),c=Uo(rn(e),a);return c=Uo(c,n),c=Uo(c,s),c}function sf(e){switch(e.side){case"top":case"bottom":return nn(e.offset,{x:1,y:-1});case"left":case"right":return nn(e.offset,{x:-1,y:1});default:throw O(e.side),new Error}}function uy(e,t,o){function r([n,i],[a,s]){return a<n||i<s}switch(e){case"top":case"bottom":return r([t.top,t.bottom],[o.top,o.bottom]);case"left":case"right":return r([t.left,t.right],[o.left,o.right]);default:throw O(e),new Error}}function v4({viewPort:e,component:t,overlaySize:o,side:r,align:n,offset:i}){return uy(r,e,Wo(af({side:r,component:t,overlaySize:o,align:n,offset:i}),o))&&!uy(hc(r),e,Wo(af({side:hc(r),component:t,overlaySize:o,align:n,offset:sf({side:r,offset:i})}),o))}function T4({side:e,viewPort:t,overlay:o}){let r=([n,i],[a,s])=>{n+=an,i-=an;let c=s-a;return Math.max(n,Math.min(i,s)-c)};switch(e){case"top":case"bottom":return{x:r([t.left,t.right],[o.left,o.right]),y:o.top};case"left":case"right":return{x:o.left,y:r([t.top,t.bottom],[o.top,o.bottom])};default:throw O(e),new Error}}function D4(e,t,o){let r=Zn()?w4(e,t):{side:e,align:t},n=r.side===e?o:sf({side:r.side,offset:o});return{side:r.side,align:r.align,offset:n}}function cf(e){let t=D4(e.side,e.align,e.offset);return e.side=t.side,e.align=t.align,e.offset=t.offset,v4(e)?hc(e.side):e.side}function fy(e){let t=cf(e);return T4({viewPort:e.viewPort,side:t,overlay:Wo(af({...e,offset:t===e.side?e.offset:sf(e),side:t}),e.overlaySize)})}function w4(e,t){switch(e){case"right":case"left":return{side:hc(e),align:t};case"top":case"bottom":return{side:e,align:t==="center"?t:C4(t)};default:throw O(e),new Error}}var E4=u({$:"$",pointer:"x5fb24__pointer",pointer_color_purple:"x5fb24__pointer_color_purple",pointer_color_dark:"x5fb24__pointer_color_dark"}),yc=22;function P4({targetRect:e,hintRect:t}){if(t.left>=e.right)return"right";if(t.right<=e.left)return"left";if(t.top>=e.bottom)return"bottom";if(t.bottom<=e.top)return"top";throw new Error("Never")}function R4({hintSide:e,hintRect:t,targetRect:o}){let r=ay(o);switch(e){case"left":case"right":return r.y-t.top-yc/2;case"top":case"bottom":return r.x-t.left-yc/2;default:throw O(e),new Error}}function I4({hintSide:e,shift:t}){let o={left:"",right:"",top:"",bottom:""},r=J(e,{left:"top",right:"top",top:"left",bottom:"left"});return{...o,[e]:"calc(100% - 3px)",[r]:W(t-.5)}}function M4(e){return J(e,{left:"translateX(-6px) translateY(6px) rotate(90deg)",right:"translateX(6px) translateY(6px) rotate(-90deg)",top:"scaleY(-1)",bottom:""})}function dy(e,{color:t,getHintRect:o,getTargetRect:r}){let n=E(),i=te(o),a=te(r);return py(n,{width:yc,height:10,viewBox:`0 0 ${yc} 10`}),P(()=>{let s=i.current(),c=a.current(),l=P4({hintRect:s,targetRect:c}),m=R4({hintSide:l,hintRect:s,targetRect:c}),p=I4({hintSide:l,shift:m});n.current.style.left=p.left,n.current.style.right=p.right,n.current.style.top=p.top,n.current.style.bottom=p.bottom,n.current.style.transform=M4(l)},[i,a,n]),e`
<svg
	xmlns="http://www.w3.org/2000/svg"
	save-ref=${n}
	class=${E4.pointer.withMods({color:t})}
>
	<path
		fill-rule="evenodd"
		clip-rule="evenodd"
		d="M10 0C13 0 15.9999 8 20 8H0C3.9749 8 7 0 10 0Z"
	/>
	<rect x="0" y="8" width="20" height="2"></rect>
</svg>
`}var xc=u({$:"$",tooltip:"x17678__tooltip",content:"x17678__content",closeButton:"x17678__close-button",tooltip_text:"x17678__tooltip_text",tooltip_size_small:"x17678__tooltip_size_small",tooltip_size_large:"x17678__tooltip_size_large",tooltip_type_default:"x17678__tooltip_type_default",tooltip_type_onboarding:"x17678__tooltip_type_onboarding",text:"x17678__text"});function _c(e,t){let o=M(),{onClose:r=null,getPointerTargetRect:n,size:i="small",type:a="default",autotestData:s}=t,c=M();G(c,"mousedown",m=>m.stopPropagation());let l=t.contentType==="text"?g(V4,t.text):t.content;return G(o,"mousedown",r),e`
<div class=${xc.tooltip.withMods({type:a,text:t.contentType==="text",size:i})}
	save-ref=${c}
	data-at=${X(s)}
>
	${e.renderIf(dy,()=>n&&{color:A4(a),getTargetRect:n,getHintRect:()=>c.current.getBoundingClientRect()})}
	${e(l,xc.content)}
	${e.renderIf(oi,()=>!!r,{className:xc.closeButton,ref:o})}
</div>`}function A4(e){return J(e,{default:"dark",onboarding:"purple"})}function V4(e,t){return e`<div class=${xc.text}>${t}</div>`}function F4(e,t,o,r){e.current!==void 0&&(clearTimeout(e.current),e.current=void 0),r<=0?t(o):e.current=setTimeout(()=>{e.current=void 0,t(o)},r)}function ri(e){let[t,o]=z(typeof e=="function"?e:()=>e),r=E(void 0),n=w((i,a)=>F4(r,s=>o(s),i,a),[]);return[t,n]}function gy(e){return{animate:t=>{e.forEach(o=>o.animate(t))},complete:()=>{e.forEach(t=>t.complete())},changedProperties:[]}}var O4=!1;function hy({propName:e,defaultValue:t,units:o,element:r,getCurrentValue:n}){let i=window.getComputedStyle(r),a=i&&i.getPropertyValue(e),s=a?parseFloat(a):t,c=r.style.getPropertyValue(e);return{animate:l=>{r.style.setProperty(e,`${n(l,s)}${o||""}`)},complete:()=>{r.style.setProperty(e,c)},changedProperties:[e]}}function L4(e,t){return hy({propName:"opacity",defaultValue:1,element:e,getCurrentValue:t})}function K4(e,t){return hy({propName:"max-height",defaultValue:0,units:"px",element:e,getCurrentValue:t})}function $4(e,t,o){let r=e.style.transform,n=ty(e);return{animate:i=>{let a=[n],s=o&&o(i);if(s!=null){let[l,m]=s;a.push(`translate(${l}px, ${m}px)`)}let c=t&&t(i);if(c!=null)if(typeof c=="number")a.push(`scale(${c})`);else{let[l,m]=c;l!=null&&a.push(`scaleX(${l})`),m!=null&&a.push(`scaleY(${m})`)}e.style.transform=a.join(" ")},complete:()=>{e.style.transform=r},changedProperties:["transform"]}}function z4({reducer:e,duration:t,abortSignal:o,before:r,after:n}){return new Promise(i=>{let a=Date.now(),s=!1,c=o?o.add(()=>{s=!0}):()=>{};function l(){let m=Ct(Date.now()-a,0,t),p=m/t;e.animate(p),s||m>=t?(c(),e.complete(),i(),n&&n()):requestAnimationFrame(l)}r&&r(),l()})}function Sc({opacity:e,maxHeight:t,scale:o,translate:r,duration:n,before:i,after:a}){return O4?{play:()=>Promise.resolve()}:{play:(s,c)=>z4({reducer:gy([e?L4(s,e):null,t?K4(s,t):null,o||r?$4(s,o,r):null].filter($o)),duration:n,abortSignal:c,before:i&&(()=>B(i)(s)),after:a&&(()=>B(a)(s))})}}function kc(e,t,o){let r=t-e;return n=>(o&&(n=o(n)),n>=1?t:e+r*n)}function Cc(e,t,o){let r=t[0]-e[0],n=t[1]-e[1];return i=>(o&&(i=o(i)),i>=1?t:[e[0]+r*i,e[1]+n*i])}function ni(e,t){let o=e.getBoundingClientRect(),r=!1;function n(){if(r)return;let i=e.getBoundingClientRect();(Math.round(i.top)!=Math.round(o.top)||Math.round(i.left)!=Math.round(o.left)||i.width!=o.width||i.height!=o.height)&&(o=i,t()),requestAnimationFrame(n)}return requestAnimationFrame(n),()=>{r=!0}}function bc(e,t){let o=te(t);P(()=>{if(e)return ni(e,o.current)},[e,o])}var yy={};function Bc(e,t){yy[e]=t}function gr(e){return yy[e]||document.body}function vc({html:e,layer:t,createBinding:o,show:r,appearAnimation:n,hideAnimation:i}){let a=E(null),s=E(null),c=w(()=>{s.current&&(s.current.parentElement==t&&t.removeChild(s.current),s.current=null)},[t]),l=w(()=>{c();let f=a.current;f&&f.parentElement===t&&t.removeChild(f)},[c,t]);P(()=>l,[l]);let m=r?o():null,p=e(m);return ee(()=>{a.current!=p&&(p?(c(),p.style.position="absolute",V.assert(a.current==null),t.appendChild(p),n&&n(p)):a.current&&(s.current=a.current,i?i(a.current).then(c):c()),a.current=p)}),a}function xy({getPopoverRect:e,side:t,align:o,rootElementRect:r,args:n,offset:i}){let a=e(i),s=tf(t,a,r);if(s){let l=rf(t),m=ba({...n,side:l}),p=e(m);tf(l,p,r)<s&&(n.side=l,i=m)}let c=of(n.side,o,a,r);if(c){let l=o=="center"?ly(n.side,a,r):nf(o),m=ba({...n,align:l}),p=e(m);of(n.side,l,p,r)<c&&(n.align=l,i=m)}return i}function N4(e,t){let o=e?e.getBoundingClientRect():{top:0,right:document.body.scrollHeight-document.body.offsetHeight?document.body.offsetWidth:window.innerWidth,bottom:document.body.offsetHeight,left:0};return{top:o.top+t.y,right:o.right+t.x,bottom:o.bottom+t.y,left:o.left+t.x}}function Tc({element:e,popover:t,isTopLayer:o,side:r,align:n,getOffset:i,autoInvert:a,rootElement:s}){let c=o?{x:window.pageXOffset,y:window.pageYOffset}:{x:0,y:0},l=N4(s,c),m=e.getBoundingClientRect(),p={width:m.width,height:m.height},f=iy(t);function d(C){let y=C.x+m.left+c.x,v=C.y+m.top+c.y;return{left:y,top:v,right:y+f.width,bottom:v+f.height}}let x=i&&i()||{x:0,y:0},_=Zn()?my(r,n):{side:r,align:n},k={elementSize:p,popoverSize:f,side:_.side,align:_.align,offsetX:x.x,offsetY:x.y},S=ba(k);return a&&(S=xy({getPopoverRect:d,side:_.side,align:_.align,rootElementRect:l,args:k,offset:S})),o&&(S.x+=m.left+c.x,S.y+=m.top+c.y),S}var _y=500;function Q4({tooltipElement:e,elementRef:t,position:o,setVisible:r,ignoreIsElementWithinViewport:n}){if(e.style.left="0",e.style.top="0",e.style.transform=`translateX(${o.x}px) translateY(${o.y}px)`,!n&&!H4(e))return e.style.display="none",r(!1,0),Promise.resolve();let i=o.y>t.current.getBoundingClientRect().top?-5:5;return Sc({opacity:kc(0,1),translate:Cc([0,i],[0,0]),duration:150}).play(e)}function Sy({html:e,elementRef:t,container:o,show:r=!0,stayOnHover:n=!1,side:i="top",align:a="center",offset:s={x:0,y:8},appearDelay:c=_y,hideDelay:l=n?_y:0,isPreventDefaultClick:m=!1,ignoreIsElementWithinViewport:p=!1}){let f=E(null),d=E(null),[x,_]=ri(!1);P(()=>{Qo(r),r||_(!1,l)},[l,_,r]),G(t,"mouseover",()=>_(!0,c)),G(t,"mouseout",()=>_(!1,l)),G(t,"click",S=>m&&S.preventDefault());let k=vc({html:e,layer:gr("tooltip"),createBinding:()=>o,show:r&&x,appearAnimation:S=>{function C(){return Tc({element:t.current,popover:S,side:i,align:a,isTopLayer:!0,getOffset:()=>s,autoInvert:!0})}return f.current=ni(t.current,()=>_(!1,0)),Q4({elementRef:t,tooltipElement:S,position:C(),setVisible:_,ignoreIsElementWithinViewport:!!p}).then(()=>{d.current=new ResizeObserver(()=>{let y=C();S.style.transform=`translateX(${y.x}px) translateY(${y.y}px)`}),d.current.observe(S)})},hideAnimation:()=>(f.current&&(f.current(),f.current=null),d.current&&(d.current.disconnect(),d.current=null),Promise.resolve())});return ee(()=>{let S=k.current;if(!n||!S)return;let C=()=>_(!0,0),y=()=>_(!1,l);return S.addEventListener("mouseover",C),S.addEventListener("mouseout",y),()=>{S.removeEventListener("mouseover",C),S.removeEventListener("mouseout",y)}}),{visible:x,setVisible:_}}function H4(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function ky(e){Sy({...e,container:g(_c,{contentType:"text",text:e.text,size:e.size,autotestData:e.autotestData})})}function It(e){ky(e)}var U4=u({$:"$",text:"xa4fb1__text"});function Zt(e,{text:t,disableTooltip:o,autotestData:r}){let n=M(),i=ei(n,[typeof t=="string"?t:t.html]);return It({html:e,elementRef:n,text:t,show:!o&&i}),e`
<div
	class=${U4.text}
	save-ref=${n}
	data-at=${X(r)}
>
	${t}
</div>`}var lf="data-focus-visible-added",mf="focus-visible";function yo(e,{focused:t,onFocusedChange:o}){if($e(t)&&!$e(o))throw new Error("useFocusProps: `focused` requires `onFocusedChange`");P(()=>{if(!$e(t))return;let r=e.current,n=r===document.activeElement;t&&!n?(r.focus(),r.setAttribute(lf,""),r.classList.add(mf)):!t&&n&&(r.blur(),r.removeAttribute(lf),r.classList.remove(mf))},[t,e]),G(e,"focus",()=>{o&&o(!0)}),G(e,"blur",()=>{o&&o(!1)})}var W4=u({$:"$",preloader:"x03a12__preloader",spin:"x03a12__spin",preloader_size_tiny:"x03a12__preloader_size_tiny",preloader_size_small:"x03a12__preloader_size_small",preloader_size_medium:"x03a12__preloader_size_medium",preloader_color_accent:"x03a12__preloader_color_accent",preloader_color_subdued:"x03a12__preloader_color_subdued",preloader_color_onColor:"x03a12__preloader_color_onColor"});function hr(e,{size:t="medium",color:o="accent"}){return e`
<div
	class=${W4.preloader.withMods({size:t,color:o})}
>
	<svg
		viewBox="0 0 32 32"
		xmlns="http://www.w3.org/2000/svg"
	>
		<path
			d="M30 16C30 23.732 23.732 30 16 30C8.26801 30 2 23.732 2 16C2 8.26801 8.26801 2 16 2"
			stroke="currentColor"
			stroke-width="2.5"
			stroke-linecap="round"
			fill="none"
		/>
	</svg>
</div>
`}var Ba=u({$:"$",button:"x0f558__button",button_radius_default:"x0f558__button_radius_default",button_radius_circle:"x0f558__button_radius_circle",button_cursor_pointer:"x0f558__button_cursor_pointer",button_cursor_grab:"x0f558__button_cursor_grab",button_cursor_grabbing:"x0f558__button_cursor_grabbing",button_size_xSmall:"x0f558__button_size_xSmall",button_spacing_none:"x0f558__button_spacing_none",button_size_small:"x0f558__button_size_small",button_size_medium:"x0f558__button_size_medium",button_size_large:"x0f558__button_size_large",button_size_xLarge:"x0f558__button_size_xLarge",button_spacing_default:"x0f558__button_spacing_default","button_min-width":"x0f558__button_min-width",button_spacing_icon:"x0f558__button_spacing_icon",icon:"x0f558__icon",text:"x0f558__text",button_bold:"x0f558__button_bold",button_loading:"x0f558__button_loading",preloader:"x0f558__preloader"}),q4=u({$:"$",button:"x5aa00__button",icon:"x5aa00__icon",text:"x5aa00__text",button_pressed:"x5aa00__button_pressed",preloader:"x5aa00__preloader"}),G4=u({$:"$",button:"x1b0be__button",icon:"x1b0be__icon",text:"x1b0be__text",button_pressed:"x1b0be__button_pressed",preloader:"x1b0be__preloader"}),Y4=u({$:"$",button:"x3c8b0__button",text:"x3c8b0__text",icon:"x3c8b0__icon",button_pressed:"x3c8b0__button_pressed",preloader:"x3c8b0__preloader"}),j4=u({$:"$",button:"x24b47__button",icon:"x24b47__icon",text:"x24b47__text",button_pressed:"x24b47__button_pressed",preloader:"x24b47__preloader"}),Z4=u({$:"$",button:"x239be__button",icon:"x239be__icon",text:"x239be__text",button_pressed:"x239be__button_pressed",preloader:"x239be__preloader"}),X4=u({$:"$",button:"x727b8__button",icon:"x727b8__icon",text:"x727b8__text",button_pressed:"x727b8__button_pressed",preloader:"x727b8__preloader"}),J4=u({$:"$",button:"xde852__button",text:"xde852__text",icon:"xde852__icon",button_pressed:"xde852__button_pressed",preloader:"xde852__preloader"}),eD=u({$:"$",button:"x24cca__button",text:"x24cca__text",icon:"x24cca__icon",button_pressed:"x24cca__button_pressed",preloader:"x24cca__preloader"}),tD=u({$:"$",button:"x9ab0e__button",text:"x9ab0e__text",icon:"x9ab0e__icon",button_pressed:"x9ab0e__button_pressed",preloader:"x9ab0e__preloader"}),oD=u({$:"$",button:"x5300a__button",text:"x5300a__text",icon:"x5300a__icon",button_pressed:"x5300a__button_pressed",preloader:"x5300a__preloader"}),rD=u({$:"$",button:"x231cf__button",text:"x231cf__text",icon:"x231cf__icon",button_pressed:"x231cf__button_pressed",preloader:"x231cf__preloader"}),nD=u({$:"$",button:"x22668__button",text:"x22668__text",icon:"x22668__icon",button_pressed:"x22668__button_pressed",preloader:"x22668__preloader"}),iD=u({$:"$",button:"xc2aa4__button",text:"xc2aa4__text",icon:"xc2aa4__icon",button_pressed:"xc2aa4__button_pressed",preloader:"xc2aa4__preloader"}),aD=u({$:"$",button:"x206a3__button",text:"x206a3__text",icon:"x206a3__icon",button_pressed:"x206a3__button_pressed",preloader:"x206a3__preloader"}),sD=u({$:"$",button:"xe9f99__button",text:"xe9f99__text",icon:"xe9f99__icon",button_pressed:"xe9f99__button_pressed",preloader:"xe9f99__preloader"});function je(e,t){let o=M(),{size:r="medium",state:n="default",minWidth:i=!0,tooltip:a,cursor:s="pointer",radius:c="default",spacing:l="default",autotestData:m}=t,{iconLeft:p,text:f,iconRight:d}=mD(t),x=n==="loading",_=x||n==="disabled";function k(y){!_&&!y.defaultPrevented&&(y.preventDefault(),t.onClick&&t.onClick())}let S=J(t.style,{primary:q4,secondary:G4,destructive:j4,ghostDestructive:Z4,warning:X4,ghost:J4,ghostInversed:eD,link:tD,linkInversed:oD,linkSecondary:rD,linkSecondaryAlpha:nD,complementary:iD,secondaryInversed:Y4,promo:aD,aiPrimary:sD}),C=se(Ba.button.withMods({size:r,spacing:t.structure==="icon"&&l==="default"?"icon":l,"min-width":t.structure!=="icon"&&i,loading:x,bold:uD(t.style),radius:c,cursor:s}),S.button.withMods({pressed:n==="pressed"}));return It({html:e,elementRef:o,show:!!a,text:typeof a=="string"?a:typeof a=="object"?a.text:"",size:typeof a=="object"?a.size:void 0,side:typeof a=="object"?a.side:void 0,align:typeof a=="object"?a.align:void 0,offset:typeof a=="object"?a.offset:void 0}),yo(o,t),e`
<button
	class=${C}
	disabled=${_}
	onclick=${k}
	save-ref=${o}
	data-at=${X(m)}
>
	${e.renderIf(Cy,()=>!!p&&{className:se(Ba.icon,S.icon),tooltip:a,icon:p})}
	${e.renderIf(cD,()=>!!f&&{className:se(Ba.text,S.text),text:f,disableTooltip:!!a})}
	${e.renderIf(Cy,()=>!!d&&{className:se(Ba.icon,S.icon),icon:d})}
	${e.renderIf(lD,()=>x&&{className:se(Ba.preloader,S.preloader),color:pD(t.style)})}
</button>
`}function Cy(e,{className:t,icon:o}){return e`
<div class=${t}>
	${e(o)}
</div>
`}function cD(e,{className:t,text:o,disableTooltip:r}){return e`
<div class=${t}>
	${e(Zt,{text:o,disableTooltip:r})}
</div>
`}function lD(e,{className:t,color:o}){return e`
<div class=${t}>
	${e(hr,{size:"small",color:o})}
</div>
`}function mD(e){switch(e.structure){case"icon":return{iconLeft:e.icon,text:null,iconRight:null};case"text":return{iconLeft:null,text:e.text,iconRight:null};case"iconAndText":return{iconLeft:e.icon,text:e.text,iconRight:null};case"textAndIcon":return{iconLeft:null,text:e.text,iconRight:e.icon};case"iconAndTextAndIcon":return e;default:throw O(e),new Error}}function pD(e){return J(e,{primary:"onColor",secondary:"subdued",destructive:"onColor",ghostDestructive:"subdued",warning:"onColor",ghost:"subdued",ghostInversed:"onColor",link:"subdued",linkInversed:"onColor",linkSecondary:"subdued",linkSecondaryAlpha:"subdued",complementary:"subdued",secondaryInversed:"onColor",promo:"onColor",aiPrimary:"onColor"})}function uD(e){return J(e,{primary:!0,secondary:!0,destructive:!0,ghostDestructive:!0,warning:!0,ghost:!0,ghostInversed:!0,link:!1,linkInversed:!1,linkSecondary:!1,linkSecondaryAlpha:!1,complementary:!0,secondaryInversed:!0,promo:!0,aiPrimary:!0})}var fD=u({$:"$",toast:"x923b3__toast",text:"x923b3__text"}),pf=u({$:"$",toast:"x4b3bf__toast","toast_with-cancel":"x4b3bf__toast_with-cancel",content:"x4b3bf__content",cancelButton:"x4b3bf__cancel-button"});function by(e,{text:t,cancelButtonInfo:o}){let r=pf.toast.withMods({"with-cancel":o!==void 0});return e`
<div class=${`${fD.toast} ${r}`}>
	${e(hr,{size:"small",color:"onColor"})}
	${e.switch(()=>typeof t=="function"?t(o==null?void 0:o.onClick):g(pc,{text:t}),pf.content)}
	${e.renderIf(je,()=>o&&{style:"secondaryInversed",structure:"text",text:o.label,onClick:o.onClick,size:"small"},pf.cancelButton)}
</div>`}var dD=u({$:"$",fadeInAnimation:"xabef6__fade-in-animation",fadeInWithShift:"xabef6__fadeInWithShift",fadeOutAnimation:"xabef6__fade-out-animation",fadeOutWithShift:"xabef6__fadeOutWithShift"});function gD(e,t,o){let r=w(()=>{e.current.classList.add(dD.fadeOutAnimation),setTimeout(()=>oc(t),120)},[t,e]);return P(()=>{o.operationCompletePromise.then(r)},[r,o.operationCompletePromise]),P(()=>{o.markedAsRemoved&&r()},[r,o.markedAsRemoved]),r}function uf(e,{toastId:t,toastData:o}){let r=M();dc(r);let n=gD(r,t,o),i=o.type==="withLoad"?{text:o.text,cancelButtonInfo:void 0}:{text:o.text,cancelButtonInfo:{onClick:()=>{n(),o.onClose&&o.onClose()},label:o.cancelButtonLabel}};return be(e,g(by,i),r)}var Dc=u({$:"$",container:"x077e0__container",container_dir_ltr:"x077e0__container_dir_ltr",container_dir_rtl:"x077e0__container_dir_rtl",toast:"x077e0__toast"});function By(e){let t=Ch(),o=ho();return e`
<div class=${Dc.container.withMods({dir:o})}>
	${e.renderAll(t,r=>{switch(r.type){case"basic":case"warning":case"critical":return le(r.id,ry,{toastId:r.id,toastData:{type:r.type,text:r.text,important:r.important,markedAsRemoved:r.markedAsRemoved,onClose:r.onClose}},Dc.toast);case"withLoad":return le(r.id,uf,{toastId:r.id,toastData:{type:"withLoad",text:r.text,important:r.important,operationCompletePromise:r.operationCompletePromise,markedAsRemoved:r.markedAsRemoved,onClose:r.onClose}},Dc.toast);case"withLoadAndCancel":return le(r.id,uf,{toastId:r.id,toastData:{type:"withLoadAndCancel",text:r.text,important:r.important,operationCompletePromise:r.operationCompletePromise,cancelButtonLabel:r.cancelButtonLabel,onCancel:r.onCancel,markedAsRemoved:r.markedAsRemoved,onClose:r.onClose}},Dc.toast);default:return O(r),null}})}
</div>`}function vy(e){let t=!1,o;return r=>(t||(o=e(r),t=!0),o)}immer.enableAllPlugins();var Ae=immer.produce,Ty=immer.applyPatches;!1&&immer.setAutoFreeze(!0);var Dy=e=>Hu({text:e,important:!0});var wy=e=>bh({text:e});function ff(e,t,o){let r=e/255,n=t/255,i=o/255,a=Math.max(r,n,i),s=Math.min(r,n,i),c=0,l=0,m=.5*(a+s);return a!=s&&(a==r?c=60*(n-i)/(a-s):a==n?c=60*(i-r)/(a-s)+120:a==i&&(c=60*(r-n)/(a-s)+240),m>0&&m<=.5?l=(a-s)/(2*m):l=(a-s)/(2-2*m)),[Math.round(c+360)%360,l,m]}function we(e){let t=parseInt(e.substr(1,2),16),o=parseInt(e.substr(3,2),16),r=parseInt(e.substr(5,2),16);return[t,o,r]}function ii(e){let t=we(e);return ff(t[0],t[1],t[2])}function ai(e,t){let o=t[3];return[(1-o)*e[0]+o*t[0],(1-o)*e[1]+o*t[1],(1-o)*e[2]+o*t[2]]}var yr={accent:"#2972E0",link:"#2972E0",topPanelBackground:"#FFFFFF",topPanelText:"#42484E"};function va(e,t){let[o,r,n]=we(e);return`rgba(${o}, ${r}, ${n}, ${t})`}function Ey(e,t){let[o,r,n]=ii(e);return`hsl(${o}, ${r*100}%, ${(n+t)*100}%)`}function Py(e=yr){return{"--color-accent-default":e.accent,"--color-accent-8":va(e.accent,.08),"--color-accent-16":va(e.accent,.16),"--color-accent-30":va(e.accent,.3),"--color-accent-60":va(e.accent,.6),"--color-accent-80":va(e.accent,.8),"--color-accent-dark":Ey(e.accent,-.08),"--color-link-default":e.link,"--color-link-dark":Ey(e.link,-.08),"--color-top-panel-background-default":e.topPanelBackground,"--color-top-panel-text-default":e.topPanelText}}var df={headerFontFamily:"Roboto",contentFontFamily:"Roboto"};function Ry(e=df){return{"--header-font-family":e.headerFontFamily,"--content-font-family":e.contentFontFamily}}var Te=null;function ct(){if(!Te)throw new Error("semanticColors not initialized");return Te}function Iy({element:e,customColors:t,windowContext:o=window}){Te={...t,actionCriticalDefault:"#EB5B47",actionCriticalDisabled:"#FCB6AC",actionCriticalHovered:"#E2422C",actionCriticalPressed:"#CB3420",actionPrimaryDefault:t.customAccent,actionPrimaryDisabled:"#C4C7CA",actionPrimaryHovered:_r(t.customAccent,0,-1,-4),actionPrimaryPressed:_r(t.customAccent,0,-1,-8),actionSliderDefault:"#32353729",actionSliderDisabled:"#C4C7CA",actionToggleDepressedDefault:"#D6D7D7",actionToggleDepressedDisabled:"#EFEFEF",actionToggleDepressedHovered:"#BDBEBF",actionTogglePressedDisabled:xr(t.customAccent,.36),actionWarningDefault:"#FB8B28",actionWarningDisabled:"#FEC897",actionWarningHovered:"#EE7B17",actionWarningPressed:"#DF6316",backgroundActive:"#3235370F",backgroundBlue:"#ECEDEE",backgroundDefault:"#F6F6F7",backgroundHovered:"#3235370A",borderAccentDefault:t.customAccent,borderAccentDisabled:"#C4C7CA",borderAccentHovered:_r(t.customAccent,0,-1,-4),borderAccentPressed:_r(t.customAccent,0,-1,-8),borderCritical:"#EB5B47",borderCriticalActive:"#FCB6AC",borderCriticalSubdued:"#FFD6D1",borderDefault:"#D6D7D7",borderDisabled:"#E6E6E7",borderHovered:"#BDBEBF",borderInfoActive:"#99C9FA",borderInfoSubdued:"#C7E3FF",borderMediaDefault:"#3235371F",borderMediaDisabled:"#32353714",borderMediaHovered:"#32353729",borderNewActive:"#BCAEF7",borderNewSubdued:"#DED6FC",borderOncolorDefault:"#FFFFFF",borderOncolorSecondary:"#FFFFFF66",borderSuccessActive:"#9CE0B8",borderSuccessSubdued:"#C5ECD5",borderWarningActive:"#FEC897",borderWarningSubdued:"#FFDEC2",customPanelHovered:xr(t.customTextDefault,.12),customPanelSubdued:xr(t.customTextDefault,.08),customTextSubdued:xr(t.customTextDefault,.72),decorativeChartEight:"#323537",decorativeChartEleven:"#517CE9",decorativeChartFive:"#CB3420",decorativeChartFour:"#983484",decorativeChartFourteen:"#BDBEBF",decorativeChartNine:"#5DC9B5",decorativeChartOne:"#2984E0",decorativeChartSeven:"#EE5091",decorativeChartSix:"#745CDE",decorativeChartStatusBackground:"#EFEFEF",decorativeChartStatusBackgroundHovered:"#DEDEDFB8",decorativeChartStatusCritical:"#E86856",decorativeChartStatusCriticalHovered:"#E2422C3D",decorativeChartStatusInProgress:"#549DE6",decorativeChartStatusInProgressHovered:"#2985E03D",decorativeChartStatusNew:"#A695F1",decorativeChartStatusPromoBackground:"#DED6FC",decorativeChartStatusSubdued:"#ADAEAF",decorativeChartStatusSuccess:"#63C38B",decorativeChartStatusSuccessHovered:"#3CB46E3D",decorativeChartStatusWarning:"#FFCE74",decorativeChartStatusWarningHovered:"#FFC2527A",decorativeChartTen:"#EEA811",decorativeChartThirteen:"#33AFBD",decorativeChartThree:"#80B43C",decorativeChartTwelve:"#3CB46E",decorativeChartTwo:"#FB8B28",decorativeCollaborationEight:"#FFB9A3",decorativeCollaborationFive:"#FFB87A",decorativeCollaborationFour:"#FFA8CC",decorativeCollaborationNine:"#99E4FF",decorativeCollaborationOne:"#B19FFF",decorativeCollaborationSeven:"#A0E9BE",decorativeCollaborationSix:"#B19FFF",decorativeCollaborationTen:"#FEDC71",decorativeCollaborationThree:"#B1E868",decorativeCollaborationTwo:"#D594E4",decorativeIndicatorAmberYellow:"#FFE6C1",decorativeIndicatorBlue:"#D8EBFF",decorativeIndicatorCarrotOrange:"#FFDEC2",decorativeIndicatorIndigo:"#DED6FC",decorativeIndicatorRed:"#FFD6D1",decorativeReactionsOne:"#FEE9F1",decorativeReviewsStar:"#FB8B28",dividerBackground:"#32353714",dividerDefault:"#E6E6E7",dividerOncolor:"#FFFFFF33",editorBlueLight:"#D6E2FF",editorEmeraldLight:"#D9F6E5",editorGreenLight:"#E3F7C9",editorIndigoLight:"#E0D9FF",editorOrangeLight:"#FFE3CA",editorPinkLight:"#FFDCEB",editorPurpleLight:"#EED4F4",editorRedLight:"#FFE3DA",editorSkyLight:"#DEF6FF",editorTealLight:"#DBFCE5",editorYellowLight:"#FFF3CF",focusCritical:"#FFD6D1",focusDefault:xr(t.customAccent,.4),focusOncolor:"#FFFFFF",focusSuccess:"#D1F0DE",focusWarning:"#FFDEC2",iconAccentDefault:t.customAccent,iconAccentHovered:_r(t.customAccent,0,-1,-4),iconAccentPressed:_r(t.customAccent,0,-1,-8),iconAlphaDefault:"#323537",iconAlphaDisabled:"#32353752",iconAlphaPlaceholder:"#32353799",iconAlphaSubdued:"#030E1B94",iconCritical:"#E2422C",iconCriticalDisabled:"#FCB6AC",iconDefault:"#323537",iconDisabled:"#BDBEBF",iconInfo:"#2078CF",iconInfoDisabled:"#99C9FA",iconNew:"#654BD8",iconNewDisabled:"#BCAEF7",iconOncolorDefault:"#FFFFFF",iconOncolorDisabled:"#FFFFFF66",iconOncolorSecondary:"#FFFFFFA3",iconPlaceholder:"#848687",iconSubdued:"#6C737B",iconSuccess:"#389F62",iconSuccessDisabled:"#9CE0B8",iconTertiary:"#99A2AD",iconWarning:"#FB8B28",iconWarningDisabled:"#FEC897",indicatorOncolor:"#FFFFFF",indicatorPrimary:t.customAccent,indicatorSpecial:"#EB5B47",indicatorSubdued:"#B2B8BD",overlayCritical:"#CB3420",overlayDark:"#323537",overlayGlass:"#99A2AD8F",overlayHovered:"#FFFFFF66",overlayModalsActions:"#00000066",overlayModalsDark:"#000000B8",overlayModalsDefault:"#32353766",overlayModalsHovered:"#32353799",overlayModalsLight:"#FFFFFFE5",overlayNew:"#654BD8",overlayPressed:"#FFFFFF",overlayRipple:"#FFFFFF14",overlaySemidark:"#323537DE",overlaySubdued:"#FFFFFF33",surfaceAccentDefault:xr(t.customAccent,.16),surfaceAccentHovered:xr(t.customAccent,.2),surfaceAccentSubdued:xr(t.customAccent,.12),surfaceCriticalDefault:"#FEE4DF",surfaceCriticalHovered:"#FFD6D1",surfaceCriticalSubdued:"#FFF5F5",surfaceDefault:"#FFFFFF",surfaceDisabled:"#3235370A",surfaceHovered:"#3235371F",surfaceInfoDefault:"#D8ECFF",surfaceInfoHovered:"#C7E3FF",surfaceInfoSubdued:"#ECF5FF",surfaceNeutralDefault:"#EFEFEF",surfaceNeutralHovered:"#E6E6E7",surfaceNeutralSubdued:"#F7F7F7",surfaceNewDefault:"#E7E2FE",surfaceNewHovered:"#DED6FC",surfaceNewSubdued:"#F3F0FF",surfacePressed:"#32353729",surfaceSubdued:"#3235370F",surfaceSuccessDefault:"#DFF4E8",surfaceSuccessHovered:"#C5ECD5",surfaceSuccessSubdued:"#EFF9F3",surfaceWarningDefault:"#FFEED4",surfaceWarningHovered:"#FFE6C1",surfaceWarningSubdued:"#FFF6E9",textAccentDefault:t.customAccent,textAccentHovered:_r(t.customAccent,0,-1,-4),textAccentPressed:_r(t.customAccent,0,-1,-8),textAlphaDefault:"#323537",textAlphaDisabled:"#32353752",textAlphaPlaceholder:"#32353766",textAlphaSubdued:"#030E1B94",textCritical:"#E2422C",textCriticalDisabled:"#FCB6AC",textDefault:"#323537",textDisabled:"#BDBEBF",textInfo:"#2078CF",textInfoDisabled:"#99C9FA",textLinkDefault:"#295DE0",textLinkPressed:"#214FC4",textNew:"#654BD8",textNewDisabled:"#BCAEF7",textOncolorDefault:"#FFFFFF",textOncolorDisabled:"#FFFFFF66",textOncolorSecondary:"#FFFFFFA3",textPlaceholder:"#ADAEAF",textSubdued:"#6C737B",textSuccess:"#389F63",textSuccessDisabled:"#9CE0B8",textTertiary:"#99A2AD",textWarning:"#FB8B28",textWarningDisabled:"#FEC897"};let r={"--color-action-primary-default":Te.actionPrimaryDefault,"--color-action-primary-hovered":Te.actionPrimaryHovered,"--color-action-primary-pressed":Te.actionPrimaryPressed,"--color-action-toggle-pressed-disabled":Te.actionTogglePressedDisabled,"--color-border-accent-default":Te.borderAccentDefault,"--color-border-accent-hovered":Te.borderAccentHovered,"--color-border-accent-pressed":Te.borderAccentPressed,"--color-custom-accent":Te.customAccent,"--color-custom-panel-default":Te.customPanelDefault,"--color-custom-panel-hovered":Te.customPanelHovered,"--color-custom-panel-subdued":Te.customPanelSubdued,"--color-custom-text-default":Te.customTextDefault,"--color-custom-text-subdued":Te.customTextSubdued,"--color-focus-default":Te.focusDefault,"--color-icon-accent-default":Te.iconAccentDefault,"--color-icon-accent-hovered":Te.iconAccentHovered,"--color-icon-accent-pressed":Te.iconAccentPressed,"--color-indicator-primary":Te.indicatorPrimary,"--color-surface-accent-default":Te.surfaceAccentDefault,"--color-surface-accent-hovered":Te.surfaceAccentHovered,"--color-surface-accent-subdued":Te.surfaceAccentSubdued,"--color-text-accent-default":Te.textAccentDefault,"--color-text-accent-hovered":Te.textAccentHovered,"--color-text-accent-pressed":Te.textAccentPressed};e?Me(e,r,o):on(r)}function xr(e,t){let[o,r,n]=we(e);return`rgba(${o}, ${r}, ${n}, ${t})`}function _r(e,t,o,r){let[n,i,a]=ii(e),s=(n+t).toFixed(2),c=(i*100+o).toFixed(2),l=(a*100+r).toFixed(2);return`hsl(${s}, ${c}%, ${l}%)`}var wc={accent:yr.accent,link:yr.link,topPanelBackground:yr.topPanelBackground,topPanelText:yr.topPanelText};function My(e){wc.accent=e.accent,wc.link=e.link,wc.topPanelBackground=e.topPanelBackground,wc.topPanelText=e.topPanelText}function Ay(e){let t=(e==null?void 0:e.baseFonts)||df,o=Ry(t);e!=null&&e.element?Me(e.element,o,e.windowContext):on(o)}function Vy(e){var n;let t=(n=e==null?void 0:e.windowContext)!=null?n:window,o={...yr,...e==null?void 0:e.baseColors};My(o),Iy({element:e==null?void 0:e.element,customColors:{customAccent:o.accent,customPanelDefault:o.topPanelBackground,customTextDefault:o.topPanelText},windowContext:t});let r=Py(o);e!=null&&e.element?Me(e.element,r,t):on(r)}var Fy="";function Oy(e){return Fy&&e?`${Fy}${e}`:e}var Ec=u({$:"$",topLayer:"x97476__top-layer",popupLayer:"x97476__popup-layer",popupLayerMobile:"x97476__popup-layer-mobile",uploaderLayer:"x97476__uploader-layer"});function hD(e,t){let o=[Ec.topLayer];e==="popup"&&(o.push(Ec.popupLayer),fr()&&o.push(Ec.popupLayerMobile)),e==="uploader"&&o.push(Ec.uploaderLayer),t.classList.add(...o)}function Ta(e){let t=document.createElement("div");return hD(e,t),Bc(e,t),t}function Sr(e){return e.order.length}function Pc(e,t,o){e.order.includes(t)||e.order.push(t),e.blocks[t]=o}function ze(e){let t=[];return ce(e,o=>{t.push(o)}),t}function kr(){return{order:[],blocks:{}}}function Ve(e,t){let o=kr();for(let r of e){let n=t(r);o.order.push(n),o.blocks[n]=r}return o}function yD(e,t){if(t<0||t>=e.order.length)return null;let o=e.order[t];return e.blocks[o]}function We(e){return yD(e,0)}function si(e,t){if(t<0||t>=e.order.length)return null;let o=e.order[t];return e.blocks[o]}function Ly(e){return si(e,0)}function Ky(e){return si(e,e.order.length-1)}function $y(e,t){let o=e.order.indexOf(t);return si(e,o-1)}function zy(e,t){let o=e.order.indexOf(t);return si(e,o+1)}function ce(e,t){e.order.forEach((o,r)=>{t(e.blocks[o],r)})}function me(e,t){let o=kr();return e.order.forEach(r=>{let n=t(e.blocks[r]);o.order.push(r),o.blocks[r]=n}),o}function Ny(e,t){e.order.forEach(o=>{t(e.blocks[o])})}function Qy(e,t,o){let r=e.order.indexOf(t);e.order.splice(r+1,0,o.key),e.blocks[o.key]=o}function Da(e,t){e.order.push(t.id),e.blocks[t.id]=t}function gf(e,t){e.order.push(t.key),e.blocks[t.key]=t}function Cr(e,t){let o=e.order.indexOf(t);e.order.splice(o,1),delete e.blocks[t]}function Hy(e,t,o){e.order.includes(t)&&(delete e.blocks[t],e.order[e.order.indexOf(t)]=o.key,e.blocks[o.key]=o)}var Uy="#E73018",Wy="#FF8400",qy="#FFC252";var Gy="#3CB46E";var Yy="#7C46B9";var wa="#323537",Rc="#818181";var Xt="noColor";function ci(e){if(e&&e.color&&e.color!==Xt){let t=we(e.color),o=e.opacity;return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${o})`}return""}function br(){let[,e]=z(!0);return w(()=>e(t=>!t),[])}var jy=reatom.createStore,hf=reatom.declareAtom,Ic=reatom.declareAction,Mc=reatom.combine,Zy=reatom.map,N7=reatom.initAction,Q7=reatom.getTree,H7=reatom.getDepsShape;var xD=u({$:"$",container:"xbae93__container"});function Xy(e,t){return e`
<div
	class=${xD.container}
	data-at=${X(t.autotestData)}
>
	${e(hr,t)}
</div>`}var qe={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};function Ze({target:e,onResize:t,ignoreObservationStart:o=!1},r=[]){let n=te(t);ee(()=>{let i=e instanceof Element?e:e&&e.current;if(!i)return;let a=o,s=new ResizeObserver(([c])=>{if(a){a=!1;return}n.current&&n.current(c.contentRect)});return s.observe(i),()=>{s.disconnect()}},[e,n,o,...r])}function _D(){let e=!1;try{e=!!window.Animation}catch{}return e}function yf({element:e,createKeyframes:t,abortSignal:o}){if(!_D())return Promise.resolve();let r=new Animation(t(e));return new Promise(n=>{let i=e.style.pointerEvents;e.style.pointerEvents="none";function a(){c(),n()}function s(){c(),n("aborted")}function c(){e.style.pointerEvents=i,o&&o.removeEventListener("abort",s),r.removeEventListener("cancel",s),r.removeEventListener("finish",a)}o&&o.addEventListener("abort",s),r.addEventListener("cancel",s),r.addEventListener("finish",a),r.play()})}function li({element:e,getAppearKeyframes:t,getHideKeyframes:o,onAppeared:r,onHidden:n}){let[i,a]=z(!1),s=br(),c=E(new AbortController),l=E(e),m=E(null);e!==l.current&&(m.current=l.current),l.current=e;let p=te({getAppearKeyframes:t,getHideKeyframes:o,onAppeared:r||(()=>{}),onHidden:n||(()=>{})});return ee(()=>{if(!e)return;c.current.abort(),c.current=new AbortController;let f=c.current.signal,d=p.current.getAppearKeyframes,x=p.current.getHideKeyframes;return d?(a(!0),yf({element:e,createKeyframes:d,abortSignal:f}).then(()=>{a(!1),p.current.onAppeared()})):p.current.onAppeared(),()=>{if(!x||f.aborted){m.current=null,s(),p.current.onHidden();return}a(!0),yf({element:e,createKeyframes:x,abortSignal:f}).then(()=>{m.current=null,a(!1),p.current.onHidden()})}},[p,e,s]),{animating:i,element:m.current||e}}function Jy(e){let t=Math.abs(e.scrollTop),o=B(getComputedStyle(e)),n=o.overflowY==="auto"||o.overflowY==="scroll"?e.scrollHeight-e.clientHeight:0;return t===n}function SD(e,t){for(;e!==t&&t.parentElement;){if(!Jy(t))return!1;t=t.parentElement}return Jy(t)}function xf(e){let t=st(e,"wheel",o=>{let r=o.deltaY>0;SD(e,o.srcElement)&&r&&o.preventDefault()});return()=>wt(t)}function ex(e){P(()=>{if(e)return xf(e)},[e])}function mi({layer:e,element:t,onAppend:o,beforeAppend:r,beforeUnmount:n,position:i="absolute"}){let a=E(null),s=te(n),c=w(()=>{let l=a.current;l&&(B(l.parentElement==e,`useExternalLayer(): layer "${e}" doesn't contain element`),s.current&&s.current(),e.removeChild(l),a.current=null)},[e,s]);ee(()=>c,[c]),t!=a.current&&(c(),t&&(r&&r(t),t.style.position=i,e.appendChild(t),o&&o(t)),a.current=t)}function Ea(e){return e.current?e.current.getBoundingClientRect():{left:0,top:0,right:0,bottom:0,width:0,height:0}}function ox(){return{x:window.pageXOffset,y:window.pageYOffset}}function _f(){let e=Ea({current:document.body}),t=rn(e),o=nn(ox(),gc(2));return Wo(Uo(t,o),e)}function tx(e){let t=Ea(e);return Wo(Uo(rn(t),ox()),t)}function Sf({rootRef:e,overlayRef:t,relatedRef:o}){return{viewPort:e?tx(e):_f(),component:tx(o),overlaySize:Ea(t)}}function Ac({overlay:e,getPosition:t}){kD(e);let o=t(),r=_f(),n=Wo(o,Ea({current:e})),i=r.top+an,a=r.bottom-an,s=n.top<i,c=n.bottom>a;(s||c)&&(e.style.width||(e.style.width=W(ti(n).width)),e.style.overflowY="auto"),s?(e.style.top=W(an),e.style.maxHeight=W(n.bottom-an)):(e.style.top=W(n.top),e.style.maxHeight=W(a-n.top)),e.style.left=W(n.left)}function kD(e){e.style.maxHeight="",e.style.left="",e.style.top="",e.style.overflowY=""}function rx({html:e,layer:t,getOverlayPosition:o,getAppearKeyframes:r,getHideKeyframes:n,beforeMount:i,afterMount:a,opened:s,onClose:c,createOverlay:l,anchorTracking:m}){let p=e(s?l():null),{animating:f,element:d}=li({element:p,getAppearKeyframes:r,getHideKeyframes:n});mi({layer:t,element:d,beforeAppend:i,onAppend:_=>{Ac({overlay:_,getPosition:()=>o(_)}),a&&a(_)}}),ex(d);let x=I(()=>({current:d}),[d]);return Ze({target:x,onResize:()=>{d&&Ac({overlay:d,getPosition:()=>o(B(d))})}}),Ze({target:document.body,onResize:()=>!f&&(m==null?void 0:m.action)!=="move"&&c(),ignoreObservationStart:!0}),bc(d&&m?m.anchorRef.current:null,d&&m?J(m.action,{close:c,move:()=>Ac({overlay:d,getPosition:()=>o(d)})}):()=>{}),d}function CD(e,t){switch(e){case"top":return[0,-t];case"bottom":return[0,t];case"right":return[t,0];case"left":return[-t,0];default:throw O(e),new Error}}function nx([e,t]){return`translate(${e}px, ${t}px)`}function ix({element:e,side:t}){return new KeyframeEffect(e,[{opacity:0,transform:nx(CD(t,5))},{opacity:1,transform:nx([0,0])}],{duration:150,fill:"forwards"})}var Vc=9,ax=8;function Fc(e){return J(e,{start:-ax,center:0,end:ax})}function bD(e,t){return J(e,{left:{x:-Vc,y:Fc(t)},right:{x:Vc,y:Fc(t)},top:{x:Fc(t),y:-Vc},bottom:{x:Fc(t),y:Vc}})}function sx({html:e,anchorRef:t,tooltipProps:o,side:r,align:n,offset:i,onClose:a,anchorTrackingAction:s,disablePointer:c}){let[l,m]=z(!!o),p=n||"center",f=r||"top",d=i||bD(f,p);return P(()=>{m(!!o)},[o]),rx({html:e,opened:l,layer:gr("tooltip"),onClose:a,createOverlay:()=>o&&g(_c,{...o,getPointerTargetRect:c?void 0:()=>t.current.getBoundingClientRect()}),getAppearKeyframes:x=>ix({element:x,side:cf({...Sf({relatedRef:t,overlayRef:{current:x}}),offset:d,align:p,side:f})}),getOverlayPosition:x=>fy({...Sf({relatedRef:t,overlayRef:{current:x}}),offset:d,align:p,side:f}),anchorTracking:s&&{anchorRef:t,action:s}})}function Lc(e,t,o){let r=t[e];return r?so(r)?{keyValue:r,newKeys:t}:{keyValue:(pi(r)||r)._,newKeys:r}:(V.error(`key not found: ${e}, path: ${o.join(".")}`),{keyValue:e,newKeys:t})}function Kc(e,t,o){for(let r of Object.keys(t)){let{keyValue:n,newKeys:i}=Lc(r,t,o);if(n===e&&r!=="_")return{key:r,newKeys:i}}return V.error(`cant find value: ${e}, path: ${o.join(".")}`),{key:e,newKeys:t}}var Oc=class{constructor(t){this.keys=t}};function b(e){return new Oc(e)}function pi(e){return e instanceof Oc?e.keys:null}function xo(e,t,o){if(Du(e))return e.map(n=>xo(n,t,o));let r=pi(t);if(r)return Zr(e,n=>xo(n,B(r),o));if(ua(e)){let n={};return da(e,(i,a)=>{let{keyValue:s,newKeys:c}=Lc(a,t,o);n[s]=xo(i,c,[...o,a])}),n}return e}function zt(e,t,o){if(Du(e))return e.map(n=>zt(n,t,o));let r=pi(t);if(r)return Zr(e,n=>zt(n,B(r),o));if(ua(e)){let n={};return da(e,(i,a)=>{let{key:s,newKeys:c}=Kc(a,t,o);n[s]=zt(i,c,[...o,s])}),n}return e}function F(){return qu()}function lt(e,t){return e.find(o=>o.name===t)}function lo(e,t){let o=[...e],r=o.findIndex(n=>n.name===t.name);return r>=0?o[r]=t:o.push(t),o}function $c(e,t){return e.filter(o=>!t.includes(o.name))}function cx(e,t){return e.some(o=>o.name===t)}var BD="$",Re={create(e){return e},add(e,t){return t.reduce((o,r)=>lo(o,r),e)},compareTextStyles(e,t){return Re.serializeStyles(e)===Re.serializeStyles(t)},serializeStyles(e){return[...e].sort((t,o)=>Mu(t.name,o.name)).map(t=>JSON.stringify(t)).join(BD)},compareSingleTextStyles(e,t){return JSON.stringify(e)===JSON.stringify(t)},remove(e,t){return $c(e,t)},has(e,t){return cx(e,t)},getAlignment(e){let t=lt(e,"alignment");return t&&t.name==="alignment"?t.type:null},getFontSize(e){let t=lt(e,"fontSize");return t&&t.name==="fontSize"?t.size:null},getFontColor(e){let t=lt(e,"fontColor");return t&&t.name==="fontColor"?t.color:null},getTextHighlightColor(e){let t=lt(e,"textHighlightColor");return t&&t.name==="textHighlightColor"?t.color:null},getTextHighlightOpacity(e){let t=lt(e,"textHighlightOpacity");return t&&t.name==="textHighlightOpacity"?t.opacity:null}};var vD=Rc,TD=.1;var ne={create(e={}){let{url:t=null,style:o=Re.create([])}=e;return{url:t,style:o}},applyStyle(e,t){return ne.create({...e,style:Re.add(e.style,t)})},removeStyles(e,t){return ne.create({...e,style:Re.remove(e.style,t)})},hasStyle(e,t){return Re.has(e.style,t)},hasUrl(e){return!!e.url},compare(e,t){return e.url===t.url&&Re.compareTextStyles(e.style,t.style)},setUrl(e,t){return ne.create({...e,url:t})},removeUrl(e){return ne.create({...e,url:null})},isInlineCodeMeta(e){return e.style.some(t=>t.name==="code")},getInlineCodeAdditionStyles(e=vD){return[{name:"code"},{name:"fontColor",color:e},{name:"textHighlightColor",color:e},{name:"textHighlightOpacity",opacity:TD}]},getInlineCodeAdditionStylesNames(){return this.getInlineCodeAdditionStyles().map(e=>e.name)}};var h={PARAGRAPH:"p",IMAGE:"i",COLLAGE:"c",EMBED:"e",EXERCISE:"E",QUIZ:"Q",ATTACHMENT:"a",NOTE:"n",TABLE:"t",FLIP_CARDS:"fc",DIVIDER:"d",CONTINUE:"ct",VIDEO:"v",SNIPPET:"s",LAYOUT:"l",CODE:"cd",LIST_ITEM:"li"};function Mt(e){return{...e,background:e.background&&{...e.background}}}function lx(e){return e.length===2}function mx({offset:e,textLength:t,getCharacterByIndex:o}){let r=0,n=0;for(;r<t;++r,++n)if(lx(o(r))&&++n,n>=e)return r;return r}function px({offset:e,textLength:t,getCharacterByIndex:o}){let r=0,n=0;for(;r<t;++r,++n){if(r>=e)return n;lx(o(r))&&++n}return n}function kf(e,t){return e[t].meta.url}var Oe={isEmpty(e){return e.characters.length===0},extendHyperlinksSelection(e,t,o=e.characters.length){let{characters:r}=e,n=kf.bind(null,r),i=n(t);if(i)for(;t>0&&i==n(t-1);)--t;let a=n(o-1);if(a)for(;o<r.length&&a==n(o);)++o;return{start:t,end:o}},hasHyperlink(e,t,o=e.characters.length){for(let r=t;r<o;++r)if(kf(e.characters,r))return!0;return!1},getHyperlinksInfo(e){let t=[],o=null;for(let r=0;r<e.length;++r){let n=kf(e,r);o&&o.url!=n&&(t.push({start:o.start,end:r,url:o.url}),o=null),n&&!o&&(o={start:r,url:n})}return o&&t.push({start:o.start,end:e.length,url:o.url}),t},getCharactersText(e){return e.characters.reduce((t,o)=>t+o.text,"")},getCharacters(e){return e.characters.map(t=>t.text)},getWordStartIndex(e,t){return eh(Oe.getCharactersText(e),t)},getWordEndIndex(e,t){return th(Oe.getCharactersText(e),t)},getLastCharacterMeta(e){let t=e.characters,o=t[t.length-1];return o&&o.meta},convertBrowserToModelOffset(e,t){return mx({offset:t,textLength:e.characters.length,getCharacterByIndex:o=>e.characters[o].text})},convertModelToBrowserOffset(e,t){return px({offset:t,textLength:e.characters.length,getCharacterByIndex:o=>e.characters[o].text})}};function re(e){return!e||e.type!==h.PARAGRAPH?null:e}var ux=["blockquote","pullquote"],fx=["h1","h2","h3"],DD=[...fx,...ux,"text"];var K={create(e={}){!1&&B(e.viewType==null||DD.includes(e.viewType));let t=e.characters||[];typeof t=="string"&&(t=K.createCharacters(t,ne.create()));let o={type:h.PARAGRAPH,key:e.key||F(),viewType:e.viewType||"text",textAlign:e.textAlign||"left",characters:t};return e.designSettings&&(o.designSettings=e.designSettings),e.defaultCharactersMeta&&(o.defaultCharactersMeta=e.defaultCharactersMeta),o},clone(e,t={}){return{...Dt(e),key:F(),...t}},createCharacters(e,t){return[...e].map(o=>({text:o,meta:t}))},getBlockViewType(e){return e.viewType},isQuote(e){let t=re(e);return!!t&&ux.includes(t.viewType)},isHeading(e){let t=re(e);return!!t&&fx.includes(t.viewType)},isEmptyParagraph(e){let t=re(e);return!!t&&Oe.isEmpty(t)},getTextRuns(e,t){t||(t=n=>n);let o=e.characters;if(o.length==0)return[];let r=[{text:o[0].text,styles:t(o[0].meta),isLast:!1}];for(let n=1;n<o.length;++n){let i=o[n],a=t(i.meta),s=r.length-1,c=r[s].styles;ne.compare(a,c)?r[s].text+=i.text:r.push({text:i.text,styles:a,isLast:!1})}return r[r.length-1].isLast=!0,r}};var wD="javascript",ED=16,bt={create(e={}){let t=e.key||F();return{type:h.CODE,key:t,paragraph:e.paragraph||K.create(),language:e.language||wD,fontSize:e.fontSize||"auto",designSettings:e.designSettings}},clone(e){return bt.create({...e,key:F(),paragraph:{...e.paragraph,key:F()},designSettings:e.designSettings&&Mt(e.designSettings)})},toCodeBlock(e){return e&&e.type===h.CODE?e:null},getLanguage(e){return e.language},getFontSize(e){return e.fontSize==="auto"?ED:e.fontSize},getBlockType(e){return"code"},changeCodeLanguage(e,t){e.language=t},changeCodeFontSize(e,t){e.fontSize=t}};var gt={CLICK:"click",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",CHANGE:"change",SELECTION_CHANGE:"selectionchange",INPUT:"input",TEXT_INPUT:"textInput",KEY_DOWN:"keydown",KEY_PRESS:"keypress",PASTE:"paste",CUT:"cut",COPY:"copy",BLUR:"blur",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",LOAD:"load",LOAD_END:"loadend",LOADED_METADATA:"loadedmetadata",UNLOAD:"unload",BEFOREUNLOAD:"beforeunload",ERROR:"error",DRAG_START:"dragstart",DRAG_OVER:"dragover",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DROP:"drop",RESIZE:"resize",SCROLL:"scroll",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",ORIENTATIONCHANGE:"orientationchange",CUSTOM_CONNECTED:"connected",CUSTOM_DISCONNECTED:"disconnected",TRANSITIONEND:"transitionend",TOUCHSTART:"touchstart",VISIBILITYCHANGE:"visibilitychange"};function zc(e,t){let o=t&&t.crossOrigin;return new Promise((r,n)=>{let i=document.createElement("img");i.addEventListener(gt.LOAD,a),i.addEventListener(gt.ERROR,s),o&&(i.crossOrigin="Anonymous"),i.src=e;function a(){c(),r(i)}function s(){c(),n()}function c(){i.removeEventListener(gt.LOAD,a),i.removeEventListener(gt.ERROR,s)}})}var Br="rectangle";var dx={top:0,right:0,bottom:0,left:0};function sn(){return{...dx}}function PD(e,t){return e&&t&&e.top===t.top&&e.right===t.right&&e.bottom===t.bottom&&e.left===t.left}function Cf(e){return!!PD(e,dx)}function ht({width:e,height:t,crop:o,src:r,clip:n}){return{src:r,clip:n!=null?n:Br,crop:o!=null?o:sn(),width:o?e-o.left-o.right:e,height:o?t-o.top-o.bottom:t}}function gx(e){let{width:t,height:o}=e,r=ht(e),n=t-r.width,i=o-r.height,a=n===0?0:r.crop.left/t*(t/n)*100,s=i===0?0:r.crop.top/o*(o/i)*100;return{width:t/r.width*100,height:o/r.height*100,positionX:a,positionY:s}}function bf(e){return e.crop?{src:e.src,width:e.width,height:e.height}:e}async function RD(e,t,o,r){let n=await zc(e);return new Promise((i,a)=>{let s=document.createElement("canvas"),c=B(s.getContext("2d")),l=cy(t);s.width=o?Math.min(l.width,o):l.width,s.height=r?Math.min(l.height,r):l.height,c.drawImage(n,t.left,t.top,l.width,l.height,0,0,s.width,s.height),s.toBlob(m=>m?i(m):a())})}function hx({src:e,crop:t,width:o,height:r}){let n=ID(t,o,r);return RD(e,n)}function ID(e,t,o){return{left:e.left,right:t-e.right,top:e.top,bottom:o-e.bottom}}function yx(e){return!!e.crop&&!Cf(e.crop)}var MD="collage",AD=3,xx="inner",VD=960,q={create({key:e,images:t=[],alignment:o,designSettings:r}){let n=e||F(),i=t.map(a=>({...a,parentCollageKey:n}));return{key:n,type:h.COLLAGE,images:i,alignment:o||"inner",designSettings:r}},clone(e){let t=F();return{...e,key:t,images:e.images.map(o=>({...o,key:F(),parentCollageKey:t})),designSettings:e.designSettings&&Mt(e.designSettings)}},cloneImage(e){return{...e,key:F()}},toCollageBlock(e){return e&&e.type===h.COLLAGE?e:null},getBlockType(e){return MD},isCollageBlock(e){return!!e&&e.type===h.COLLAGE},getCollagedImage(e,t){return e.images.find(o=>o.key===t)||null},getCaptionParagraphs(e){return e.images.map(t=>t)},getCollagedImageIndex(e,t){return e.images.findIndex(o=>o.key===t)},supportFullAlign(e){return e.images.length>1?!0:ht(e.images[0]).width>=VD},supportFloat(e){return e.images.length>1?!1:!!e.images[0].width},supportAlignment(e,t){switch(t){case"float-left":return q.supportFloat(e);case"full":case"outer":return q.supportFullAlign(e);case"inner":return!0}},isOneImageCollage(e){return e.images.length===1},canAddImage(e){return e.images.length<AD}};var mt={basicPaletteCrimson:"#B8195B",basicPaletteDeepSpace:"#02318A",basicPaletteSpaceBlue:"#0047CB",black60:"#00000099",black8:"#00000014",black80:"#000000CC",blackDefault:"#000000",blue16:"#4A90E229",blue30:"#4A90E24D",blue8:"#4A90E214",blue80:"#4A90E2CC",blueBlack:"#0D2E53",blueDark:"#287BDC",blueDarker:"#1E67BD",blueDefault:"#4A90E2",dark12:"#42484E1F",dark14:"#42484E24",dark16:"#42484E29",dark20:"#42484E33",dark28:"#42484E47",dark40:"#42484E66",dark60:"#42484E99",dark72:"#42484EB8",dark8:"#42484E14",dark80:"#42484ECC",dark87:"#42484EDE",darkDark:"#2F3337",darkDefault:"#42484E",grayDark:"#D0D0D1",grayDarker:"#C0C0C1",grayDefault:"#EFEFF0",grayLight:"#F2F2F3",grayLighter:"#F6F6F7",green16:"#3CB46E29",green30:"#3CB46E4D",green8:"#3CB46E14",green80:"#3CB46ECC",greenBlack:"#091B10",greenDark:"#32955B",greenDarker:"#287748",greenDefault:"#3CB46E",orange16:"#FF9F3329",orange30:"#FF9F334D",orange8:"#FF9F3314",orange80:"#FF9F33CC",orangeBlack:"#603506",orangeDark:"#F08713",orangeDarker:"#CE720D",orangeDefault:"#FF9F33",purple16:"#6257BA29",purple30:"#6257BA4D",purple8:"#6257BA14",purple80:"#6257BACC",purpleBlack:"#262150",purpleDark:"#4F44A6",purpleDarker:"#413889",purpleDefault:"#6257BA",red16:"#F0513D29",red30:"#F0513D4D",red8:"#F0513D14",red80:"#F0513DCC",redBlack:"#5A1007",redDark:"#EE2F17",redDarker:"#CC250F",redDefault:"#F15541",slate10:"#8D98A21A",slate20:"#8D98A233",slate40:"#8D98A266",slate5:"#8D98A20D",slate60:"#8D98A299",slate80:"#8D98A2CC",slateDefault:"#8D98A2",white16:"#FFFFFF29",white30:"#FFFFFF4D",white60:"#FFFFFF99",white80:"#FFFFFFCC",whiteDefault:"#FFFFFF",yellow16:"#F9C60E29",yellow30:"#F9C60E4D",yellow8:"#F9C60E14",yellow80:"#F9C60ECC",yellowBlack:"#473800",yellowDark:"#E5B406",yellowDarker:"#C29800",yellowDefault:"#F9C60E"};var FD="";function cn(){return FD}var OD="1",Bf={rounded:ne.create({style:Re.create([{name:"fontColor",color:mt.whiteDefault}])}),squared:ne.create({style:Re.create([{name:"fontColor",color:mt.whiteDefault},{name:"bold"}])})};function _x(e){let t=e==="squared"?T("Roll.Editor.Divider.Default.Rectangle.Paragraph.Text"):OD,o=K.createCharacters(t,Bf[e]);return K.create({characters:o,textAlign:"center"})}function ui(e){return e==="line"?{color:mt.darkDefault,opacity:1}:{color:cn(),opacity:1}}var Se={createLineDivider(e={}){return{type:h.DIVIDER,key:e.key||F(),dividerType:"line",alignment:e.alignment||"inner",dividerColor:e.dividerColor||ui("line"),style:e.style||"solid",designSettings:e.designSettings}},createLineWithTextDivider(e){let t=e.key||F();return{type:h.DIVIDER,key:t,dividerType:"line-with-text",alignment:e.alignment||"inner",dividerColor:e.dividerColor||ui("line-with-text"),style:e.style||"solid",paragraph:e.paragraph||_x(e.paragraphStyle),paragraphStyle:e.paragraphStyle,meta:e.meta||[{name:"charactersMeta",data:Bf[e.paragraphStyle]}],designSettings:e.designSettings}},createDividerFromContinue(e){var t,o;return Se.createLineWithTextDivider({...e,dividerColor:e.continueColor,paragraphStyle:"squared",designSettings:{background:{color:(o=(t=e.designSettings)==null?void 0:t.background)==null?void 0:o.color}}})},createQuoteDivider(e={}){return{type:h.DIVIDER,key:e.key||F(),dividerType:"quotes",dividerColor:e.dividerColor||ui("quotes"),style:e.quoteStyle||"quote_1",designSettings:e.designSettings}},createDiamondsDivider(e={}){return{type:h.DIVIDER,key:e.key||F(),dividerType:"diamonds",dividerColor:e.dividerColor||ui("diamonds"),style:"default",designSettings:e.designSettings}},createArrowDivider(e={}){return{type:h.DIVIDER,key:e.key||F(),dividerType:"arrow",dividerColor:e.dividerColor||ui("arrow"),style:"default",designSettings:e.designSettings}},changeDividerType(e,t){if(e.dividerType===t)return e;let o=e.dividerType==="line-with-text"||e.dividerType==="line",r=e.dividerType==="line-with-text";switch(t){case"arrow":return Se.createArrowDivider({key:e.key,dividerColor:e.dividerColor,designSettings:e.designSettings});case"diamonds":return Se.createDiamondsDivider({key:e.key,dividerColor:e.dividerColor,designSettings:e.designSettings});case"quotes":return Se.createQuoteDivider({key:e.key,dividerColor:e.dividerColor,designSettings:e.designSettings});case"line":return Se.createLineDivider({key:e.key,dividerColor:e.dividerColor,alignment:o?e.alignment:void 0,style:o?e.style:void 0,designSettings:e.designSettings});case"line-with-rectangle":case"line-with-circle":return Se.createLineWithTextDivider({key:e.key,dividerColor:e.dividerColor,paragraphStyle:t==="line-with-circle"?"rounded":"squared",alignment:o?e.alignment:void 0,style:o?e.style:void 0,paragraph:r?e.paragraph:void 0,designSettings:e.designSettings});default:throw new Error(`unknown divider view type ${t}`)}},changeDividerColor(e,t){e.dividerColor=t},changeDividerLineStyle(e,t){e.style=t},changeQuoteStyle(e,t){e.style=t},addMeta(e,t){e.meta=lo(e.meta,t)},changeDividerAlignment(e,t){e.alignment=t},clone(e,t=F()){let o={...e.dividerColor},r=e.designSettings&&Mt(e.designSettings);switch(e.dividerType){case"line-with-text":return Se.createLineWithTextDivider({...e,key:t,paragraph:{...e.paragraph,key:t},dividerColor:o,designSettings:r});case"line":return Se.createLineDivider({...e,key:t,dividerColor:o,designSettings:r});case"arrow":return Se.createArrowDivider({...e,key:t,dividerColor:o,designSettings:r});case"diamonds":return Se.createDiamondsDivider({...e,key:t,dividerColor:o,designSettings:r});case"quotes":return Se.createQuoteDivider({...e,key:t,dividerColor:o,designSettings:r})}},toFigureDividerBlock(e){switch(e.dividerType){case"quotes":case"arrow":case"diamonds":return!0}return!1},toDividerWithLineBlock(e){switch(e.dividerType){case"line":case"line-with-text":return!0}return!1},toDividerBlock(e){return e&&e.type===h.DIVIDER?e:null},getBlockType(e){return`divider-${e.dividerType}`},getCommonBlockType(e){return"divider"},getCharactersMeta(e){let t=lt(e.meta,"charactersMeta");return(t==null?void 0:t.name)==="charactersMeta"?t.data:null}};function Sx(e){if(e.type==="image")return null;let t=lt(e.meta,"charactersMeta");return t&&t.name==="charactersMeta"?t.data:null}var ln={create({key:e,fileName:t,fileExtension:o,fileSize:r,src:n,isLoading:i,designSettings:a}){return{key:e||F(),type:h.ATTACHMENT,fileName:t||"",fileExtension:o||"pdf",fileSize:r||0,src:n,isLoading:i||!1,designSettings:a}},clone(e){let t=F();return{...e,key:t}},toAttachmentBlock(e){return e&&e.type===h.ATTACHMENT?e:null},getBlockType(e){return"attachment"}};var mn=class{static create(t){return{codeTextSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.codeTextSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.codeTextSelected}};var Nc=class{static create({itemKey:t,captionSelected:o}){return{collageSelectedItemKey:t||"",collageItemCaptionSelected:o||!1}}};var pn=class{static create(t){return{continueTextSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.continueTextSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.continueTextSelected}};var un=class{static create(t){return{dividerTextSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.dividerTextSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.dividerTextSelected}};var qo=class{static createBlockSelection(){return{type:"flipCardBlock"}}static createCardTextSelection(t,o){return{type:"flipCardText",cardKey:t,cardSide:o}}static isBlockSelection(t){return t.customSelection&&t.customSelection.type==="flipCardBlock"}static isCardTextSelection(t){return t.customSelection&&t.customSelection.type==="flipCardText"}};function kx(e){let t=kr();return ce(e,o=>{let r=L.cloneBlock(o);Pc(t,r.key,r)}),t}function Cx({sizesMap:e}){let t=0,o=Object.keys(e).length+1,r={...e};return Object.keys(r).forEach(n=>{let i=Math.floor(r[n]/o),a=r[n]-i>bx?i:0;r[n]-=a,t+=a}),{newSizesMap:r,newColumnSize:t}}var Jt={PARAGRAPH:h.PARAGRAPH,LIST_ITEM:h.LIST_ITEM,COLLAGE:h.COLLAGE,EMBED:h.EMBED,NOTE:h.NOTE,DIVIDER:h.DIVIDER,VIDEO:h.VIDEO,SNIPPET:h.SNIPPET,CODE:h.CODE};var vf=["layout-column-2","layout-column-3","layout-column-4"],Bx=["layout-column-1",...vf];function vx(e,t){let o=Object.keys(e).length,r={},n=Math.floor(t/o),i=t%o;for(let[s,c]of Object.entries(e))r[s]=c+n;let a=Object.keys(r);return a.length>0&&(r[a[0]]+=i),r}var LD=Object.values(Jt),KD=4;var $D=2,zD=1,Tf=24,bx=1;function ND(e,t=[]){let o={};for(let r in e){let n=t[r]?t[r]:[K.create()],i=e[r];o[i]=Q.createColumnData(n,Tf/e.length)}return o}function Tx(e,t,o=[K.create({textAlign:e.horizontalTextAlign})]){let r=F(),{newSizesMap:n,newColumnSize:i}=Cx({sizesMap:Q.getColumnsSizesMap(e)});return Q.transformColumnsSizes(e,n),e.colsMap[r]=Q.createColumnData(o,i),t(r,e.colsOrder),r}var Q={create(e={}){let t=e.colsOrder||Array.from(new Array(e.columnCount),F),o=e.colsMap||ND(t,e.fillBlocks),r={type:h.LAYOUT,layoutType:e.layoutType||"column",key:e.key||F(),alignment:"inner",horizontalTextAlign:"left",verticalBlockAlign:e.verticalBlockAlign||"top",colsOrder:t,colsMap:o};return e.designSettings&&(r.designSettings=e.designSettings),r},createFromBlock(e){let t=[F()],o={[t[0]]:Q.createColumnData([L.cloneBlock(e)],Tf)};return Q.create({key:e.key,colsMap:o,colsOrder:t})},createBlocksMap(e){let t={order:[],blocks:{}};for(let o of e)t.order.push(o.key),t.blocks[o.key]=o;return t},createColumnData(e,t){return{blockMap:Q.createBlocksMap(e),width:t}},toLayoutBlock(e){return e&&e.type===h.LAYOUT?e:null},getBlock(e,t,o){return e.colsMap[t].blockMap.blocks[o]},getColumn(e,t){return e.colsMap[t]},getMinColumns(e){switch(e.layoutType){case"column":return $D;case"column-background":return zD;default:throw new Error("Unsupported layout type")}},isBackgroundLayoutBlock(e){return e.layoutType==="column-background"},getColumnBlockTypes(e){switch(e.layoutType){case"column":return vf;case"column-background":return Bx;default:throw new Error("Unsupported layout type")}},getColumnType(e){if(e.colsOrder.length===1&&Q.isBackgroundLayoutBlock(e))return"layout-column-1";switch(e.colsOrder.length){case 2:return"layout-column-2";case 3:return"layout-column-3";case 4:return"layout-column-4";default:throw new Error(`Layout unsupported columns ${e.colsOrder.length}`)}},getColumnCount(e){switch(e){case"layout-column-1":return 1;case"layout-column-2":return 2;case"layout-column-3":return 3;case"layout-column-4":return 4;default:throw O(e),new Error(`unknown layout block type: ${e}`)}},getBlockType(e){return`layout-${e.layoutType}`},getFirstBlockContext(e){return{blockKey:e.key,colKey:e.colsOrder[0],key:e.colsMap[e.colsOrder[0]].blockMap.order[0]}},addColumnToStart(e,t){return Tx(e,(o,r)=>r.unshift(o),t)},addColumnToEnd(e,t){return Tx(e,(o,r)=>r.push(o),t)},addColumns(e,t){let o=e.colsOrder.length;for(let r=0;r<t-o;r++)Q.addColumnToEnd(e)},getAllBlocks(e){let t=[];for(let o=0;o<e.colsOrder.length;o++)t.push(...ze(e.colsMap[e.colsOrder[o]].blockMap));return t},insertBlockInColumn(e,t,o){e.colsMap[t].blockMap.order.push(o.key),e.colsMap[t].blockMap.blocks[o.key]=o},changeAlignment(e,t){e.alignment=t},changeVerticalAlign(e,t){e.verticalBlockAlign=t},changeHorizontalAlign(e,t){e.horizontalTextAlign=t,Object.values(e.colsMap).forEach(o=>{Object.values(o.blockMap.blocks).forEach(r=>{let n=re(r);n&&(n.textAlign=t)})})},reduceColumnsCount(e,t){let o={order:[],blocks:{}},r=0;for(let n=t;n<e.colsOrder.length;n++){let i=e.colsOrder[n],a=e.colsMap[i];r+=a.width,L.isOneEmptyParagraph(a)||(o.order.push(...a.blockMap.order),o.blocks={...o.blocks,...Dt(a.blockMap.blocks)}),delete e.colsMap[i]}return e.colsOrder.splice(t),this.transformColumnsSizesAfterDeleting(e,r),o},transformColumnsSizes(e,t){Object.keys(t).forEach(o=>{e.colsMap[o].width=t[o]})},getColumnsSizesMap(e){let t={};return e.colsOrder.forEach(o=>{t[o]=e.colsMap[o].width}),t},getColumnsSizesSum(e){let t=Q.getColumnsSizesMap(e);return Q.getColumnsSizesMapSum(t)},getColumnsSizesMapSum(e){return Object.keys(e).map(t=>e[t]).reduce((t,o)=>t+o)},validateColumnsNewSizes(e,t){let o=Q.getColumnsSizesMap(e),r=Q.getColumnsSizesMapSum(o),n=Q.getColumnsSizesMapSum(t),i=r===n,a=Object.keys(o).every(s=>!!t[s]);return i&&a},transformColumnsSizesAfterDeleting(e,t){let o=vx(this.getColumnsSizesMap(e),t);this.transformColumnsSizes(e,o)},deleteColumn(e,t){let o=e.colsMap[t].width;delete e.colsMap[t],e.colsOrder=e.colsOrder.filter(r=>r!==t),this.transformColumnsSizesAfterDeleting(e,o)},cloneColumn(e,t){return{blockMap:kx(e.blockMap),width:e.width||t}},isLayoutColumnBlock(e){let t=q.toCollageBlock(e);return t&&q.isOneImageCollage(t)?!0:LD.includes(e.type)},canInsertColumn(e){return e.colsOrder.length<KD},getBeforeColumnBlock(e,t){let o=Q.getBeforeColumnKey(e,t);if(!o)return null;let{order:r,blocks:n}=e.colsMap[o].blockMap;return{block:n[r[r.length-1]],colKey:o}},getAfterColumnBlock(e,t){let o=Q.getAfterColumnKey(e,t);if(!o)return null;let{order:r,blocks:n}=e.colsMap[o].blockMap;return{block:n[r[0]],colKey:o}},getBeforeColumnKey(e,t){let o=e.colsOrder.indexOf(t);return o===0?null:e.colsOrder[o-1]},getAfterColumnKey(e,t){let o=e.colsOrder.indexOf(t);return o===e.colsOrder.length-1?null:e.colsOrder[o+1]},getColumnBlocks(e,t){let o=e.colsMap[t].blockMap,r=[];return o.order.forEach(n=>{r.push(o.blocks[n])}),r},clone(e){let t=kr(),o=Tf/e.colsOrder.length;return e.colsOrder.forEach(r=>{let n=F();Pc(t,n,Q.cloneColumn(e.colsMap[r],o))}),{...e,key:F(),colsOrder:t.order,colsMap:t.blocks}}};var Qc=class{static create({listItemBlockSelected:t}){return{listItemBlockSelected:t||!1}}static isBlockSelected(t){return t.customSelection&&t.customSelection.listItemBlockSelected}};var fi={create(e={}){return{...ot.create(e),type:h.EMBED,width:e.width||0,height:e.height||0,src:e.src||""}},clone(e){let t=F();return{...Dt(e),key:t}},toEmbedBlock(e){return e&&e.type===h.EMBED?e:null}};var vr={create({type:e="none"}){return{type:e}},hasFrameProperty(e){return!!_o.toImageBlock(e)},setFrame(e,t){e.type=t},toBlockWithFrame(e){return e&&vr.hasFrameProperty(e)?e:null},getFrameType(e){return e.type}};var eo={create({url:e,enabled:t=!1}){return{enabled:t,value:e||""}},toggle(e){e.enabled=!e.enabled},setState(e,t){e.enabled=t},hasLinkProperty(e){return!!_o.toImageBlock(e)},toBlockWithLink(e){return e&&eo.hasLinkProperty(e)?e:null},setUrl(e,t){e.value=t},getUrl(e){return e.value},isEnabled(e){return e.enabled}};var Tr={create({radius:e="none"}){return{radius:e}},setRadius(e,t){e.radius=t},getRadius(e){return e.radius},hasRoundingProperty(e){return!!_o.toImageBlock(e)},toBlockWithRounding(e){return e&&Tr.hasRoundingProperty(e)?e:null}};var to={create({enabled:e=!1}){return{enabled:e}},toggle(e){e.enabled=!e.enabled},setState(e,t){e.enabled=t},hasZoomProperty(e){return!!_o.toImageBlock(e)},toBlockWithZoom(e){return e&&to.hasZoomProperty(e)?e:null},isEnabled(e){return e.enabled}};var QD=200,_o={create(e={}){let{enabledZoom:t}=e,o=e.width!==void 0&&e.height!==void 0&&Math.min(e.width,e.height),r=!!o&&o<QD,n={enabled:t===void 0?!r:t},i={enabled:!!e.enabledLink,url:e.linkUrl},a={type:e.frame||"none"},s={radius:e.rounding||"none"},c={...ot.create(e),type:h.IMAGE,src:e.src||"",isBlob:e.isBlob||!1,zoom:to.create(n),link:eo.create(i),frame:vr.create(a),rounding:Tr.create(s)};return e.crop&&(c.crop=e.crop),e.clip&&(c.clip=e.clip),e.editedSrc&&(c.editedSrc=e.editedSrc),c},toImageBlock(e){return e&&e.type===h.IMAGE?e:null}};var HD="video",Nt={create(e){return{...ot.create(e),type:h.VIDEO,src:e.src,isLoading:e.isLoading||!1,posterSrc:e.posterSrc,designSettings:e.designSettings}},changeAlignment(e,t){e.alignment=t},changePoster(e,t){e.posterSrc=t||void 0},clone(e){let t=F();return{...e,key:t}},toVideoBlock(e){return e&&e.type===h.VIDEO?e:null},getBlockType(e){return HD}};var Ge={create({text:e,enabled:t=!1}){let o=e||[];return typeof o=="string"&&(o=K.createCharacters(o,ne.create())),{enabled:t,value:o}},toggle(e){e.enabled=!e.enabled},setState(e,t){e.enabled=t},hasCaptionProperty(e){return!!Nt.toVideoBlock(e)||!!_o.toImageBlock(e)||!!fi.toEmbedBlock(e)},toBlockWithCaption(e){return e&&Ge.hasCaptionProperty(e)?e:null},setText(e,t){e.value=t},getText(e){return e.value||[]},isEnabled(e){return e.enabled}};var Dr={create(e={}){let t={type:"",key:e.key||F(),alignment:e.alignment||"inner"};return e.designSettings&&(t.designSettings=e.designSettings),t},toAbstractMediaBlock(e){let t=e;return!e||t.type!==h.EMBED&&t.type!==h.IMAGE&&t.type!==h.COLLAGE&&t.type!==h.TABLE?null:t},getBlockType(e){return e.type===h.COLLAGE?`collage-${e.alignment}`:`media-${e.alignment}`}};var ot={create(e={}){return{...Dr.create(e),caption:Ge.create({text:e.characters,enabled:e.enabledCaption||!1}),width:e.width||0,height:e.height||0}},toMediaBlock(e){return!e||![h.IMAGE,h.EMBED,h.VIDEO].includes(e.type)?null:e},getBlockType(e){return`media-${e.alignment}`},supportFullAlign(e){return e.type===h.EMBED||e.width>=960||!e.width}};var UD="info";function Dx(e){switch(e){case"incorrect":case"minus":return Uy;case"correct":case"plus":return Gy;case"info":return Xn("--roll-player-accent-color");case"question":return Yy;case"warning":return Wy;case"bulb":return qy;case"withoutIcon":return Xn("--color-icon-disabled");default:throw O(e,`Unknown note type: ${e}`),new Error(`Unknown note type: ${e}`)}}var WD=1;function qD(e){return{color:Dx(e),opacity:WD}}function GD(e){switch(e){case"bulb":return Rc;case"withoutIcon":return wa;default:return Dx(e)}}var YD=.1;function jD(e){return{color:GD(e),opacity:YD}}var Pa={defaultType:UD,getIconColorData:qD,getBackgroundColorData:jD};var At={create(e={}){let t=e.characters||[];typeof t=="string"&&(t=K.createCharacters(t,ne.create()));let o=e.noteType||Pa.defaultType;return{type:h.NOTE,key:e.key||F(),noteType:o,characters:t,customIconColor:e.customIconColor||null,customBackgroundColor:e.customBackgroundColor||null,designSettings:e.designSettings}},clone(e){let t=F();return{...Dt(e),key:t}},toNoteBlock(e){return e&&e.type===h.NOTE?e:null},getBlockType(e){return"note"},setNoteType(e,t){e.noteType=t,e.customIconColor=null,e.customBackgroundColor=null},setNoteBackgroundColor(e,t){e.customBackgroundColor=t},setNoteIconColor(e,t){e.customIconColor=t}};var Hc=class{static create(t={}){return{noteTextSelected:t.noteTextSelected||!1}}static textSelected(t){return t.customSelection&&t.customSelection.noteTextSelected}};var Uc=class{static create({blockSelected:t}){return{blockSelected:t||!1}}static isBlockSelected(t){return t.customSelection&&t.customSelection.blockSelected}};function wx(e={}){let{title:t=L.create(),attachment:o=null,description:r=L.create(),visible:n=!0}=e;return{title:t,attachment:o,description:r,visible:n}}function Xe(e){let t=[];for(let o of e)t.push({text:o,meta:ne.create()});return t}function Wc(){return{type:"correctIncorrect",correct:L.create([K.create({characters:Xe(T("Quiz.Editor.Question.Feedback.CorrectText"))})]),incorrect:L.create([K.create({characters:Xe(T("Quiz.Editor.Question.Feedback.IncorrectText"))})]),answered:L.create([K.create({characters:Xe(T("Quiz.Editor.Question.Feedback.Answered"))})])}}function ZD(e,t,o){return{id:o,text:L.create([K.create({characters:Xe(e)})]),correct:t}}function wr(e,t){return ZD(e,t,Ue())}function XD(e,t){return{id:e,text:L.create([K.create({characters:Xe(t)})])}}function Ex(e){return XD(Ue(),e)}function qc(e,t){return{id:Ue(),left:Ex(e),right:Ex(t)}}function JD(e,t){return{id:t,text:L.create([K.create({characters:Xe(e)})])}}function Gc(e){return JD(e,Ue())}function Px(e={}){let{id:t=Ue(),text:o=""}=e;return{id:t,text:o}}function Rx(e={}){let{caseSensitive:t=!1,answers:o=[]}=e;return{caseSensitive:t,answers:Ve(o,r=>r.id)}}function ew(){return Ve([wr(T("Quiz.Editor.Choices.DefaultAnswer",{index:1}),!0),wr(T("Quiz.Editor.Choices.DefaultAnswer",{index:2}),!1),wr(T("Quiz.Editor.Choices.DefaultAnswer",{index:3}),!1)],e=>e.id)}function tw(){return Ve([Gc(T("Quiz.Editor.SequenceElements.DefaultAnswer",{index:1})),Gc(T("Quiz.Editor.SequenceElements.DefaultAnswer",{index:2})),Gc(T("Quiz.Editor.SequenceElements.DefaultAnswer",{index:3}))],e=>e.id)}function ow(){return Rx({caseSensitive:!1,answers:[Px({text:`${T("Quiz.Editor.TypeIn.Answer")} 1`})]})}function Df(e){return[T("Quiz.Editor.Matching.DefaultElement",{index:e}),T("Quiz.Editor.Matching.DefaultMatch",{index:e})]}function rw(){return{matches:Ve([qc(...Df(1)),qc(...Df(2)),qc(...Df(3))],e=>e.id),distractors:Ve([],e=>e.id)}}function nw(e){switch(e){case"mc":case"mr":return{type:e,content:ew()};case"sq":return{type:e,content:tw()};case"ti":return{type:e,content:ow()};case"mt":return{type:e,content:rw()};default:O(e)}throw new Error("invalid question type "+e)}function Ix({type:e,description:t,feedback:o}){return{id:Ue(),description:t,attachment:null,feedback:o,...nw(e)}}function wf({titleText:e,messageText:t,visibility:o="titleAndMessage"}){let r=L.create([K.create({characters:Xe(e)})]),n=L.create([K.create({characters:Xe(t)})]);return{title:r,message:n,visibility:o}}function Ef(e={}){let{displayType:t="showResults",visible:o=!0,passed:r=wf({titleText:T("Quiz.Editor.Results.Passed.Title"),messageText:T("Quiz.Editor.Results.Passed.Message")}),failed:n=wf({titleText:T("Quiz.Editor.Results.Failed.Title"),messageText:T("Quiz.Editor.Results.Failed.Message")}),completed:i=wf({titleText:T("Quiz.Editor.Results.Completed.Title"),messageText:T("Quiz.Editor.Results.Completed.Message")})}=e;return{displayType:t,visible:o,passed:r,failed:n,completed:i}}var Yc=class{constructor({initialVersion:t,upgraders:o,fixers:r=[]}){this._initialVersion=t,this._upgraders=new Map,o.forEach((n,i)=>{this._validateUpgrader(t,n,i),this._upgraders.set(n.targetVersion,n.upgradeFn)}),this._fixers=new Map,r.forEach(n=>this._fixers.set(n.targetVersion,n.fixFn))}upgradeDocument(t,o){let r=!1;if(o.from===o.to){let i=this._fixDocument(t,o.to);return{upgradedDocument:i.document,isDocumentFixed:i.fixed}}if(o.from<this._initialVersion||o.to>this._initialVersion+this._upgraders.size)throw new Error;let n=this._fixDocument(t,o.from);t=n.document,r=n.fixed;for(let i=o.from+1;i<=o.to;++i)t=B(this._upgraders.get(i))(t),n=this._fixDocument(t,i),t=n.document,r=r||n.fixed;return{upgradedDocument:t,isDocumentFixed:r}}_fixDocument(t,o){let r=this._fixers.get(o),n={document:t,fixed:!1};return r&&(n=r(t)),{document:n.document,fixed:n.fixed}}_validateUpgrader(t,{targetVersion:o},r){if(t!=o-r-1)throw new Error}};function oo(e){return e}function Er({document:e,initialVersion:t,versionFrom:o,versionTo:r,upgraders:n,fixers:i}){return new Yc({initialVersion:t,upgraders:n,fixers:i}).upgradeDocument(e,{from:o,to:r})}function Mx(e){let t={"Exo 2":"exo2","IBM Plex Sans":"ibm-plex-sans",Inter:"inter",Lato:"lato",Merriweather:"merriweather",Montserrat:"montserrat","Nunito Sans":"nunito-sans","Open Sans":"open-sans","PT Serif":"pt-serif",Roboto:"roboto","Roboto Slab":"roboto-slab","exo-2":"exo2"};return Object.values(t).includes(e)?e:J(e,t)}function Ax(e){return{accentColor:e.accentColor,headerFont:{type:"builtIn",id:Mx(e.headerFont)},contentFont:{type:"builtIn",id:Mx(e.contentFont)}}}var jc=-1;function Rf(e){return{attempts:jc,passingScore:80,timeLimit:20*6e4,timeLimitEnabled:!1,shuffleAnswersEnabled:e,shuffleQuestionsEnabled:!1,showCorrectAnswersEnabled:e,showFeedbackEnabled:!0,isGraded:e}}function Zc(e,t){return t===jc||e<t}function Vx(e={}){let{visible:t=!0}=e,o=T("Roll.Editor.QuizBlock.DefaultTitle");return wx({title:L.create([K.create({characters:Xe(o)})]),visible:t})}function iw(){let e=kr(),t=Ix({type:"mc",description:L.create(),feedback:Wc()});return Da(e,t),e}var pt={create(e={}){var l;let{key:t=F(),longreadQuizId:o=null,questions:r=iw(),settings:n={},designSettings:i,alignment:a="inner",isLoading:s=!1}=e,c={key:t,longreadQuizId:o||null,type:h.QUIZ,state:{intro:n.isGraded?Vx():null,questions:r,results:n.isGraded?Ef():null},isLoading:s,settings:{main:{...Rf((l=n==null?void 0:n.isGraded)!=null?l:!1),...n}},alignment:a};return i&&(c.designSettings=i),c},clone(e){let t=F();return{...Dt(e),key:t}},setQuizId(e,t){e.longreadQuizId=t},changeIsGraded(e,t){let o=e.settings.main.isGraded;o&&!t?(e.state.intro=null,e.state.results=null):!o&&t&&(e.state.intro=Vx({visible:!1}),e.state.results=Ef({visible:!1})),e.settings.main=Rf(t)},toQuizBlock(e){return e&&e.type===h.QUIZ?e:null},getBlockType(e){return"quiz"},getConvertableType(e){return e.settings.main.isGraded?"graded-quiz":"survey"},addQuestions(e,t){t.forEach(o=>{Da(e.state.questions,o)})}};var fU=ne.create();function aw(e,t){let o={};for(let r of e){o[r]={colsMap:{}};let i=o[r].colsMap;for(let a of t)i[a]=de.createCell()}return o}function Fx(e,t,o){let r=F();e.rowsOrder.splice(t,0,r);let n={};for(let i of e.colsOrder){let a=o&&o(i),s=re(a==null?void 0:a.content);n[i]=de.createCell({horizontalTextAlign:s==null?void 0:s.textAlign,verticalTextAlign:a==null?void 0:a.verticalTextAlign,meta:a==null?void 0:a.meta})}return e.rowsMap[r]={colsMap:n},r}function sw(e,t,o){if(t.length!==e.rowsOrder.length)throw new Error("new rows count must be equal to original table rows count");let r={};for(let n=0;n<e.rowsOrder.length;n++){let i=t[n],a=e.rowsOrder[n];r[i]={colsMap:Lx(e,a,o)}}return r}function Lx(e,t,o){if(o.length!==e.colsOrder.length)throw new Error("new cols count must be equal to original table cols count");let r={};for(let n=0;n<e.colsOrder.length;n++){let i=o[n],a=e.colsOrder[n],s=e.rowsMap[t].colsMap[a];r[i]=de.cloneCell(s)}return r}function Ox(e,t,o){let r=F();e.colsOrder.splice(t,0,r);for(let n of e.rowsOrder){let i=o&&o(n),a=re(i==null?void 0:i.content),s=e.rowsMap[n];s.colsMap[r]=de.createCell({horizontalTextAlign:a==null?void 0:a.textAlign,verticalTextAlign:i==null?void 0:i.verticalTextAlign,meta:i==null?void 0:i.meta})}return r}function If(e,t){return e.colsOrder[0]===t}function cw(e,t,o){for(let r of t){let{colsMap:n}=e[r];for(let i of o)if(!n[i])throw new Error(`rowsMap is invalid: ${JSON.stringify(e)}`)}return e}var de={create(e={}){let t=e.rowsOrder||[F(),F(),F()],o=e.colsOrder||[F(),F(),F()];if(!o.length||!t.length)throw new Error("try to create table with 0 length of rowsCount or colsCount");return{type:h.TABLE,key:e.key||F(),alignment:e.alignment||"inner",rowsOrder:t,colsOrder:o,rowsMap:e.rowsMap?cw(e.rowsMap,t,o):aw(t,o),meta:e.meta||[],designSettings:e.designSettings}},addColumnBefore(e,t){If(e,t)&&de.removeTableMeta(e,"isHeaderColumnPinned");let o=e.colsOrder.indexOf(t);return Ox(e,o,r=>this.getCell(e,r,t))},addColumnAfter(e,t){let o=e.colsOrder.indexOf(t)+1;return Ox(e,o,r=>this.getCell(e,r,t))},addLastColumn(e){let t=e.colsOrder[e.colsOrder.length-1];return this.addColumnAfter(e,t)},addRowBefore(e,t){let o=e.rowsOrder.indexOf(t);return Fx(e,o,r=>this.getCell(e,t,r))},addRowAfter(e,t){let o=e.rowsOrder.indexOf(t)+1;return Fx(e,o,r=>this.getCell(e,t,r))},addLastRow(e){let t=e.rowsOrder[e.rowsOrder.length-1];return this.addRowAfter(e,t)},duplicateRow(e,t){let o=e.rowsOrder.indexOf(t)+1,r=F();return e.rowsMap[r]={colsMap:Lx(e,t,e.colsOrder)},e.rowsOrder.splice(o,0,r),r},moveColumnLeft(e,t){e.colsOrder.length>=2&&e.colsOrder[1]===t&&de.removeTableMeta(e,"isHeaderColumnPinned");let o=e.colsOrder.indexOf(t);if(o<=0)return;let r=o-1,n=e.colsOrder;[n[o],n[r]]=[n[r],n[o]]},moveColumnRight(e,t){If(e,t)&&de.removeTableMeta(e,"isHeaderColumnPinned");let o=e.colsOrder.indexOf(t);if(o>=e.colsOrder.length-1)return;let r=o+1,n=e.colsOrder;[n[o],n[r]]=[n[r],n[o]]},removeColumn(e,t){If(e,t)&&de.removeTableMeta(e,"isHeaderColumnPinned"),e.colsOrder=e.colsOrder.filter(o=>o!==t),e.rowsOrder.forEach(o=>{delete e.rowsMap[o].colsMap[t]})},moveRowUp(e,t){let o=e.rowsOrder.indexOf(t);if(o<=0)return;let r=o-1,n=e.rowsOrder;[n[o],n[r]]=[n[r],n[o]]},moveRowDown(e,t){let o=e.rowsOrder.indexOf(t);if(o>=e.rowsOrder.length-1)return;let r=o+1,n=e.rowsOrder;[n[o],n[r]]=[n[r],n[o]]},duplicateColumn(e,t){let o=e.colsOrder.indexOf(t)+1,r=F();for(let n of e.rowsOrder){let i=e.rowsMap[n],a=i.colsMap[t];i.colsMap[r]=de.cloneCell(a)}return e.colsOrder.splice(o,0,r),r},removeRow(e,t){e.rowsOrder=e.rowsOrder.filter(o=>o!==t),delete e.rowsMap[t]},createCell(e={}){return{key:e.key||F(),content:e.paragraph||K.create({textAlign:e.horizontalTextAlign}),verticalTextAlign:e.verticalTextAlign||"top",meta:e.meta||[]}},toTableBlock(e){return e&&e.type===h.TABLE?e:null},getBlockType(e){return"table"},getCell(e,t,o){var r;return(r=e.rowsMap[t])==null?void 0:r.colsMap[o]},cloneTable(e){let t=F(),o=[];for(let i=0;i<e.rowsOrder.length;i++)o.push(F());let r=[];for(let i=0;i<e.colsOrder.length;i++)r.push(F());let n=sw(e,o,r);return{type:h.TABLE,key:t,alignment:e.alignment,rowsOrder:o,colsOrder:r,rowsMap:n,meta:e.meta,designSettings:e.designSettings&&Mt(e.designSettings)}},cloneCell(e){return{key:F(),content:{...e.content,key:F()},verticalTextAlign:e.verticalTextAlign,meta:e.meta}},addCellMeta(e,t){e.meta=lo(e.meta,t)},addTableMeta(e,t){e.meta=lo(e.meta,t)},removeTableMeta(e,t){e.meta=$c(e.meta,[t])},setCellVerticalAlign(e,t){e.verticalTextAlign=t},setCellHorizontalAlign(e,t){let o=re(e.content);o&&(o.textAlign=t)}};var Qt=class e{static createCellSelection(t){return{type:"cell",cellKey:t.cellKey,rowKey:t.rowKey,colKey:t.colKey}}static createRowSelection(t){return{type:"row",rowKey:t.rowKey}}static createColumnSelection(t){return{type:"column",colKey:t.columnKey}}static createTableSelection(){return{type:"table"}}static isCellSelected(t){return t.customSelection&&t.customSelection.type==="cell"}static isColumnSelected(t){return t.customSelection&&t.customSelection.type==="column"}static isRowSelected(t){return t.customSelection&&t.customSelection.type==="row"}static isTableSelected(t){return t.customSelection&&t.customSelection.type==="table"}static isPartOfTableSelected(t){return e.isRowSelected(t)||e.isColumnSelected(t)||e.isCellSelected(t)}};var Xc=class{static create(t){return{captionSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.captionSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.captionSelected}};var R={isTextSelection(e){return(e==null?void 0:e.type)==="text"},isBlockSelection(e){return e.type==="block"},isCollapsed(e){return R.isTextSelection(e)?e.startKey===e.endKey&&e.startOffset===e.endOffset:e.startKey===e.endKey},isOneBlocKOrTextSelected(e){return e.startKey===e.endKey},isOneBlockSelected(e){return R.isBlockSelection(e)&&R.isOneBlocKOrTextSelected(e)},isOneTextBlockSelected(e){return R.isTextSelection(e)&&R.isOneBlocKOrTextSelected(e)},isEqual(e,t){return e===t?!0:!e||!t?!1:JSON.stringify(e)===JSON.stringify(t)},isContextBlockSelected(e){var t;return!R.hasContext(e)||!R.isCollapsed(e)?!1:e.startKey===((t=e.context)==null?void 0:t.blockKey)},hasContext(e){return!!e&&!!e.context},hasContextKey(e){return R.hasContext(e)&&!!(e!=null&&e.context)},createContext(e,t){return{blockKey:e,colKey:t}},getBlockFromContext(e,t){let o=Q.toLayoutBlock(e);if(o&&t&&t.context&&t.context.colKey){let{colKey:r}=t.context;return Q.getBlock(o,r,t.startKey)}return null},getContextContentState(e,t){if(!t||!t.context)return null;let{blockKey:o,colKey:r}=t.context,n=e.blockMap.blocks[o],i=Q.toLayoutBlock(n);return i&&t.context&&r?Q.getColumn(i,r):null},getSelectionContextFromEditorState(e){let t=e.selection();return t&&t.context||void 0},fromBlockToText(e,t){return!!(e!=null&&e.customSelection)&&(t==null?void 0:t.customSelection)===null||(e==null?void 0:e.type)==="block"&&(t==null?void 0:t.type)==="text"},fromTextToBlock(e,t){return!(e!=null&&e.customSelection)&&!!(t!=null&&t.customSelection)||(e==null?void 0:e.type)==="text"&&(t==null?void 0:t.type)==="block"},fromBlockToBlock(e,t){return(e==null?void 0:e.startKey)!==(t==null?void 0:t.startKey)&&!!(e!=null&&e.customSelection)&&!!(t!=null&&t.customSelection)},isChangeContext(e,t){var o,r;return((o=e==null?void 0:e.context)==null?void 0:o.blockKey)!==((r=t==null?void 0:t.context)==null?void 0:r.blockKey)},createTextSelection(e={}){return{type:"text",startKey:e.startKey||"",startOffset:e.startOffset||0,endKey:e.endKey||"",endOffset:e.endOffset||0,isBackward:e.isBackward||!1,customSelection:e.customSelection||null,context:e.context||void 0}},createCollapsed({key:e,offset:t,customSelection:o,context:r}){return R.createTextSelection({startKey:e,startOffset:t,endKey:e,endOffset:t,customSelection:o,context:r})},createBlockSelection(e){return{type:"block",startKey:e.startKey||"",endKey:e.endKey||"",customSelection:e.customSelection||null,context:e.context||void 0}},createCollapsedTextSelection({key:e,offset:t,customSelection:o}){return R.createTextSelection({startKey:e,startOffset:t,endKey:e,endOffset:t,customSelection:o})},createCollapsedTextSelectionNoContext(e={}){return R.createTextSelection({...e,context:void 0})},createCollapsedBlockSelection({key:e,customSelection:t,context:o}){return R.createBlockSelection({startKey:e,endKey:e,customSelection:t,context:o})},createAttachmentBlockSelection(e,t=void 0){return R.createCollapsedBlockSelection({key:e,context:t})},createQuizBlockSelection(e){return R.createCollapsedBlockSelection({key:e})},createParagraphBlockSelection(e,t=void 0){return R.createCollapsedBlockSelection({key:e,customSelection:Uc.create({blockSelected:!0}),context:t})},createMediaBlockSelection(e,t=void 0){return R.createCollapsedBlockSelection({key:e,customSelection:{captionSelected:!1},context:t})},createCollageBlockSelection(e,t=void 0){return R.createCollapsedBlockSelection({key:e,customSelection:Nc.create({}),context:t})},createNoteBlockSelection(e,t=void 0){return R.createCollapsedBlockSelection({key:e,customSelection:Hc.create(),context:t})},createTableBlockSelection(e){return R.createCollapsedBlockSelection({key:e,customSelection:Qt.createTableSelection()})},createTableRowSelection(e,t){return R.createCollapsedBlockSelection({key:e,customSelection:Qt.createRowSelection({rowKey:t})})},createTableColumnSelection(e,t){return R.createCollapsedBlockSelection({key:e,customSelection:Qt.createColumnSelection({columnKey:t})})},createFlipCardsBlockSelection(e){return R.createCollapsedBlockSelection({key:e,customSelection:qo.createBlockSelection()})},createDividerBlockSelection(e,t=void 0){return R.createCollapsedBlockSelection({key:e,customSelection:un.create(!1),context:t})},createContinueBlockSelection(e){return R.createCollapsedBlockSelection({key:e,customSelection:pn.create(!1)})},createCodeBlockSelection(e,t=void 0){return R.createCollapsedBlockSelection({key:e,customSelection:mn.create(!1),context:t})},createVideoBlockSelection(e,t=void 0){return R.createCollapsedBlockSelection({key:e,customSelection:Xc.create(!1),context:t})},createSnippetBlockSelection(e,t){return R.createCollapsedBlockSelection({key:e,context:t})},createListItemBlockSelection(e,t){return R.createCollapsedBlockSelection({key:e,context:t,customSelection:Qc.create({listItemBlockSelected:!0})})},createLayoutBlockSelection(e,t=void 0){return R.createBlockSelection({startKey:e,endKey:e,context:t?{blockKey:e,colKey:t}:void 0})},createSelectionFromBlockData(e,t){return de.toTableBlock(e)?R.createTableBlockSelection(e.key):Z.toFlipCardsBlock(e)?R.createFlipCardsBlockSelection(e.key):Se.toDividerBlock(e)?R.createDividerBlockSelection(e.key,t):Be.toContinueBlock(e)?R.createContinueBlockSelection(e.key):q.toCollageBlock(e)?R.createCollageBlockSelection(e.key,t):ot.toMediaBlock(e)?R.createMediaBlockSelection(e.key,t):Nt.toVideoBlock(e)?R.createVideoBlockSelection(e.key,t):At.toNoteBlock(e)?R.createNoteBlockSelection(e.key,t):ln.toAttachmentBlock(e)?R.createAttachmentBlockSelection(e.key):pt.toQuizBlock(e)?R.createQuizBlockSelection(e.key):R.createCollapsed({key:e.key,offset:0,context:t})}};var Jc=class e{static _getAllFlipCardsBlocksFromSelection(t,o){return sr(L.getAllBlocksFromSelection(t,o).map(r=>Z.toFlipCardsBlock(r)))}static _getFlipCardsBlock(t,o){let r=t.blockMap.blocks[o];return r?Z.toFlipCardsBlock(r):null}static _getFlipCardsActiveSide(t,o){return o(t)||"front"}static getFirstCard(t){return B(We(t.cardsBlockMap))}static changeSideContentType(t,o,r,n){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(i=>{ce(i.cardsBlockMap,a=>{Z.changeFlipCardContentType(a,e._getFlipCardsActiveSide(i.key,n),r)})}),{selection:o}}static changeRowMaxCardsCount(t,o,r){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(n=>{Z.changeRowMaxCardsCount(n,r)}),{selection:o}}static changeBlockLayout(t,o,r){let n=e._getFlipCardsBlock(t,o);return n?(Z.changeLayout(n,r),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}static addCard(t,o){let r=e._getFlipCardsBlock(t,o);return r?(Z.addFlipCard(r),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}static changeSideVerticalAlignment(t,o,r,n){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(i=>{i.cardsBlockMap.order.forEach(a=>Z.changeCardSideVerticalAlignment(i,a,e._getFlipCardsActiveSide(i.key,n),r))}),{selection:o}}static changeCardTextVerticalAlignment(t,o,r){let{startKey:n}=o,{cardKey:i,cardSide:a}=o.customSelection,s=e._getFlipCardsBlock(t,n);return s?(Z.changeCardSideVerticalAlignment(s,i,a,r),{selection:o}):{selection:R.createTextSelection()}}static removeCard(t,o,r){let n=e._getFlipCardsBlock(t,o);return n?(Z.removeFlipCard(n,r),Z.getFlipCardsCount(n)?{selection:R.createFlipCardsBlockSelection(o)}:(Cr(t.blockMap,o),{selection:null})):{selection:R.createTextSelection()}}static duplicateCard(t,o,r){let n=e._getFlipCardsBlock(t,o);return n?(Z.duplicateCard(n,r),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}static moveCard({contentState:t,blockKey:o,cardKey:r,toCardKey:n,insertBefore:i}){let a=e._getFlipCardsBlock(t,o);return a?(Z.moveFlipCard({flipCardsBlock:a,cardKey:r,toCardKey:n,insertBefore:i}),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}static changeCardImage(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(Z.changeFlipCardBackgroundImage({block:i,cardKey:r.key,sideType:r.sideType,image:n}),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}static changeCardsSideBackground(t,o,r,n){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(i=>{ce(i.cardsBlockMap,a=>{Z.changeFlipCardBackgroundColor(i,a.key,e._getFlipCardsActiveSide(i.key,n),r)})}),{selection:o}}static changeCardBackgroundImage(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(Z.changeFlipCardBackgroundImage({block:i,cardKey:r.key,sideType:r.sideType,image:n}),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}static changeCardsSideBackgroundImage(t,o,r,n){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(i=>{ce(i.cardsBlockMap,a=>{Z.changeFlipCardBackgroundImage({block:i,cardKey:a.key,sideType:e._getFlipCardsActiveSide(i.key,n),image:r})})}),{selection:o}}static changeCardBackgroundColor(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(Z.changeFlipCardBackgroundColor(i,r.key,r.sideType,n),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}static changeCardBackgroundImageOverlay(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(Z.changeCardImageOverlay({block:i,cardKey:r.key,sideType:r.sideType,overlay:n}),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}static changeCardsSideBackgroundImageOverlay(t,o,r,n){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(i=>{ce(i.cardsBlockMap,a=>{Z.changeCardImageOverlay({block:i,cardKey:a.key,sideType:e._getFlipCardsActiveSide(i.key,n),overlay:r})})}),{selection:o}}static changeCardImageOverlay(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(Z.changeFlipCardBackgroundImageOverlay({block:i,cardKey:r.key,sideType:r.sideType,overlay:n}),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}static cropCardImage(t,o,{key:r,sideType:n,crop:i,clip:a,editedSrc:s}){let c=e._getFlipCardsBlock(t,o);return c?(Z.cropFlipCardImage({block:c,cardKey:r,sideType:n,crop:i,clip:a,editedSrc:s}),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}static cropCardBackgroundImage(t,o,{key:r,sideType:n,crop:i,clip:a,editedSrc:s}){let c=e._getFlipCardsBlock(t,o);return c?(Z.cropFlipCardBackgroundImage({block:c,cardKey:r,sideType:n,crop:i,clip:a,editedSrc:s}),{selection:R.createFlipCardsBlockSelection(o)}):{selection:R.createTextSelection()}}};var Ra={defaultMaxCardsInRow:3,defaultCardsLayout:"outer",defaultActiveSide:"front",maxCardsInRowInnerLayout:3,maxCardsInRowOuterLayout:4,maxCardsInRowFullLayout:5},Ia={text:{frontSide:{getBackgroundColor:cn,opacity:1},backSide:{getBackgroundColor:()=>mt.blackDefault,opacity:.1},defaultOverlayColor:{color:wa,opacity:.3}},imageWithText:{frontSide:{getBackgroundColor:cn,opacity:1},backSide:{getBackgroundColor:()=>mt.blackDefault,opacity:.1},defaultOverlayColor:{color:Xt,opacity:.3}},image:{defaultOverlayColor:{color:wa,opacity:.3}}},Vf={front:ne.create({style:Re.create([{name:"fontColor",color:mt.whiteDefault},{name:"fontSize",size:"auto"},{name:"bold"}])}),back:ne.create({style:Re.create([{name:"fontColor",color:mt.darkDefault},{name:"fontSize",size:"auto"}])})};function Ff(e={}){return{type:"image",image:e.image?bf(e.image):null}}function Ux(e){if(!e)return;let t=lt(e,"charactersMeta");if(t&&t.name==="charactersMeta")return t.data}function Wx(e,t){return[{name:"charactersMeta",data:t||Vf[e]}]}function Ma(e){let t=e.characterMeta||Ux(e.meta),o=J(e.sideType,{front:Gx(t),back:Yx(t)});return{type:"text",background:e.background||qx(e.sideType),text:K.create({key:e.paragraphKey,textAlign:e.textAlign||"center",characters:e.characters||o}),verticalTextAlign:e.verticalTextAlign||"middle",meta:e.meta||Wx(e.sideType,t)}}function Of(e){let t=J(e.sideType,{front:Ia.imageWithText.frontSide,back:Ia.imageWithText.backSide}),o=e.characterMeta||Ux(e.meta),r=J(e.sideType,{front:Gx(o),back:Yx(o)});return{type:"imageWithText",background:e.background||{type:"color",color:t.getBackgroundColor(),opacity:t.opacity},image:e.image?bf(e.image):null,text:K.create({key:e.paragraphKey,textAlign:e.textAlign||"center",characters:e.characters||r}),verticalTextAlign:e.verticalTextAlign||"middle",meta:e.meta||Wx("front",o)}}function qx(e){let t=J(e,{front:Ia.text.frontSide,back:Ia.text.backSide});return{type:"color",color:t.getBackgroundColor(),opacity:t.opacity}}function Gx(e){let t=e||Vf.front;return K.createCharacters(T("Roll.Editor.FlipCardsBlock.DefaultText.FrontTextSide"),t)}function Yx(e){let t=e||Vf.back;return K.createCharacters(T("Roll.Editor.FlipCardsBlock.DefaultText.BackTextSide"),t)}function Mf(e){let{contentType:t}=e;switch(t){case"image":return Ff(e);case"text":return Ma(e);case"imageWithText":return Of(e);default:throw O(t),new Error(`Unknown card content type: ${t}`)}}function lw(e,t){return e.cardsBlockMap.blocks[t]||null}function el(e,t,o){let r=lw(e,t);if(!r)return null;switch(o){case"front":return r.frontSide;case"back":return r.backSide;default:throw O(o),Error()}}function di(e,t,o){switch(t){case"front":e.frontSide=o;break;case"back":e.backSide=o;break}}function mw({cardData:e,sideData:t,sideType:o,contentType:r}){r==="image"&&di(e,o,Ff({image:t.image})),r==="text"&&di(e,o,Ma({verticalTextAlign:t.verticalTextAlign,characters:t.text.characters,textAlign:t.text.textAlign,background:t.background,meta:t.meta,sideType:o}))}function pw({cardData:e,sideData:t,sideType:o,contentType:r}){r==="imageWithText"&&di(e,o,Of({image:t.image,sideType:o})),r==="text"&&di(e,o,Ma({sideType:o}))}function uw({cardData:e,sideData:t,sideType:o,contentType:r}){r==="image"&&di(e,o,Ff()),r==="imageWithText"&&di(e,o,Of({verticalTextAlign:t.verticalTextAlign,characters:t.text.characters,textAlign:t.text.textAlign,background:t.background&&t.background.type==="color"?t.background:null,meta:t.meta,sideType:o}))}function Kx({block:e,cardKey:t,sideType:o,overlay:r}){let n=el(e,t,o);n&&((n.type==="image"||n.type==="imageWithText")&&n.image&&(n.image.overlay=r),n.type==="text"&&n.background.type==="image"&&(n.background.overlay=r))}function $x({block:e,cardKey:t,sideType:o,image:r}){var i;let n=el(e,t,o);n&&((n.type==="image"||n.type==="imageWithText")&&(n.image=r?{...r,overlay:(i=n.image)==null?void 0:i.overlay}:null),n.type==="text"&&(n.background.type==="image"&&!r&&(n.background=qx(o)),n.background.type==="image"&&r&&(n.background.image=r),n.background.type==="color"&&r&&(n.background={type:"image",image:r,overlay:Ia.text.defaultOverlayColor})))}function zx({block:e,cardKey:t,sideType:o,crop:r,clip:n,editedSrc:i}){let a=el(e,t,o);a&&(a.type!=="text"?a.image&&(a.image.crop=r,a.image.clip=n,a.image.editedSrc=i!=null?i:void 0):a.background.type==="image"&&(a.background.image.crop=r,a.background.image.clip=n,a.background.image.editedSrc=i!=null?i:void 0))}function Af(){return{key:F(),frontSide:Ma({sideType:"front"}),backSide:Ma({sideType:"back"})}}function fw(){return Ve([Af(),Af(),Af()],e=>e.key)}function Nx(e){let t=Dt(e);switch(e.type){case"image":return t;case"imageWithText":case"text":return{...t,text:{...e.text,key:F()}}}}function jx(e){return{key:F(),frontSide:Nx(e.frontSide),backSide:Nx(e.backSide)}}function dw(e){let t={blocks:{},order:[]};return ce(e.cardsBlockMap,o=>{let r=jx(o);gf(t,r)}),t}function Qx(e){switch(e.contentType){case"image":return Mf({contentType:"image"});case"text":return Mf({contentType:"text",sideType:e.sideType,meta:e.meta,verticalTextAlign:e.verticalTextAlign,textAlign:e.horizontalTextAlign,background:e.background,characterMeta:e.characterMeta});case"imageWithText":return Mf({contentType:"imageWithText",sideType:e.sideType,meta:e.meta,verticalTextAlign:e.verticalTextAlign,textAlign:e.horizontalTextAlign,background:e.background.type==="color"?e.background:void 0,characterMeta:e.characterMeta})}}function Hx(e,t){let{frontSideType:o,backSideType:r}=Z.getFlipCardsSideTypes(e),n=J(t,{front:o,back:r});if(n==="image")return Qx({contentType:n});let i=B(Z.getFlipCardsStyles(e,t));return Qx({contentType:n,sideType:t,horizontalTextAlign:i.horizontalTextAlign,verticalTextAlign:i.verticalTextAlign,background:i.background,meta:i.meta,characterMeta:ne.create({style:i.styles})})}var Z={create(e={}){return{type:h.FLIP_CARDS,key:e.key||F(),cardsBlockMap:e.cardsBlockMap||fw(),maxCardsInRow:e.maxCardsInRow||Ra.defaultMaxCardsInRow,cardsLayout:e.cardsLayout||Ra.defaultCardsLayout,designSettings:e.designSettings}},clone(e){return{type:h.FLIP_CARDS,key:F(),cardsLayout:e.cardsLayout,maxCardsInRow:e.maxCardsInRow,cardsBlockMap:dw(e),designSettings:e.designSettings&&Mt(e.designSettings)}},getCardParagraph(e,t,o){let r=Z.getFlipCardSideData(e,t,o);return r.type!=="image"?r.text:null},getCardData(e,t){return e.cardsBlockMap.blocks[t]||null},changeCardSideVerticalAlignment(e,t,o,r){let n=Z.getFlipCardSideData(e,t,o);n.type!=="image"&&(n.verticalTextAlign=r)},addFlipCard(e){let t=Hx(e,"front"),o=Hx(e,"back"),r={key:F(),frontSide:t,backSide:o};gf(e.cardsBlockMap,r)},duplicateCard(e,t){let o=e.cardsBlockMap.blocks[t],r=jx(o);Qy(e.cardsBlockMap,t,r)},removeFlipCard(e,t){Cr(e.cardsBlockMap,t);let o=Sr(e.cardsBlockMap);o<e.maxCardsInRow&&Z.changeRowMaxCardsCount(e,o)},moveFlipCard({cardKey:e,insertBefore:t,flipCardsBlock:o,toCardKey:r}){let n=o.cardsBlockMap.order;if(e===r)return;let i=n.indexOf(e);n.splice(i,1);let a=n.indexOf(r),s=t?a:a+1;n.splice(s,0,e)},changeFlipCardImage(e){$x(e)},changeFlipCardBackgroundImage(e){$x(e)},cropFlipCardImage(e){zx(e)},cropFlipCardBackgroundImage(e){zx(e)},getFlipCardSideData(e,t,o){let r=Z.getCardData(e,t);return J(o,{front:r.frontSide,back:r.backSide})},getFlipCardsSideTypes(e){let t=e.cardsBlockMap.order[0],o=e.cardsBlockMap.blocks[t];return{frontSideType:o.frontSide.type,backSideType:o.backSide.type}},getFlipCardsSideType(e,t){let o=Z.getFlipCardsSideTypes(e);return J(t,{front:o.frontSideType,back:o.backSideType})},getBlockType(e){return"flip-cards"},toFlipCardsBlock(e){return e&&e.type===h.FLIP_CARDS?e:null},changeFlipCardBackgroundColor(e,t,o,{color:r,opacity:n}){let i=el(e,t,o);i&&(i.type==="text"||i.type==="imageWithText")&&(i.background={type:"color",color:r,opacity:n})},changeFlipCardBackgroundImageOverlay(e){Kx(e)},changeCardImageOverlay(e){Kx(e)},changeFlipCardContentType(e,t,o){let r=J(t,{front:e.frontSide,back:e.backSide});r.type==="image"&&pw({cardData:e,sideData:r,sideType:t,contentType:o}),r.type==="imageWithText"&&mw({cardData:e,sideData:r,sideType:t,contentType:o}),r.type==="text"&&uw({cardData:e,sideData:r,sideType:t,contentType:o})},changeRowMaxCardsCount(e,t){e.maxCardsInRow=t},changeLayout(e,t){e.cardsLayout=t;let o=J(t,{inner:Ra.maxCardsInRowInnerLayout,outer:Ra.maxCardsInRowOuterLayout,"full-width":Ra.maxCardsInRowFullLayout}),r=Sr(e.cardsBlockMap),n=Math.min(r,o);n<e.maxCardsInRow&&Z.changeRowMaxCardsCount(e,n)},getFlipCardsCount(e){return Sr(e.cardsBlockMap)},addFlipCardSideMeta(e,t){e.type!=="image"&&(e.meta=lo(e.meta,t))},getFlipCardsStyles(e,t){var a;let o=Jc.getFirstCard(e),r=J(t,{front:o.frontSide,back:o.backSide});if(r.type==="image")return null;let n,i=r.text.characters;return i.length===0?n=((a=Sx(r))==null?void 0:a.style)||[]:n=i[0].meta.style,{styles:n,verticalTextAlign:r.verticalTextAlign,horizontalTextAlign:r.text.textAlign,background:r.background,meta:r.meta}}};function tl(e){let t=Se.toDividerBlock(e);if(t&&Se.toDividerWithLineBlock(t))return t.alignment;let o=de.toTableBlock(e);if(o)return o.alignment;let r=Z.toFlipCardsBlock(e);if(r)return r.cardsLayout==="full-width"?"full":r.cardsLayout;let n=q.toCollageBlock(e);if(n)return n.alignment;let i=Nt.toVideoBlock(e);if(i)return i.alignment;let a=ot.toMediaBlock(e);if(a)return a.alignment;let s=Q.toLayoutBlock(e);if(s)return s.alignment;let c=pt.toQuizBlock(e);return c?c.alignment:null}var Zx=0,Xx={x:50,y:50},Jx={color:"#000000",opacity:.3};function gw(e){return!!e&&e.indent!==void 0}function ol(e){let t=Q.toLayoutBlock(e);return!!(t&&Q.isBackgroundLayoutBlock(t))}function hw(e){return ol(e)}function e_(e){return gw(e.designSettings)}function rl(e){var t,o;return(o=(t=e.designSettings)==null?void 0:t.background)==null?void 0:o.mediaResource}function t_(e){let t=rl(e);return t==null?void 0:t.position}function yw(e){var t,o;return(o=(t=e.designSettings)==null?void 0:t.size)==null?void 0:o.minHeight}function o_(e){if(!hw(e))return"";let t=yw(e);return t?`${t}vh`:""}function mo(e){var o,r;let t=(r=(o=e.designSettings)==null?void 0:o.indent)!=null?r:Zx;switch(t){case 0:case 1:case 2:return t;default:V.error(`invalid indentation: ${t}`)}return Zx}function nl(e,t){e.designSettings||(e.designSettings={}),e.designSettings.indent=t}var xw=[h.LAYOUT,h.CONTINUE,h.FLIP_CARDS,h.EXERCISE,h.QUIZ];function r_(e){let t=tl(e),o=!t||t==="inner";return!xw.includes(e.type)&&o}function n_(e,t){let o={...e.designSettings};return r_(t)||(o.indent=void 0),o}var Lf=ne.create({style:Re.create([{name:"fontColor",color:mt.whiteDefault}])});function Kf(e){let t=K.createCharacters(e||T("Roll.Editor.Continue.DefaultText"),Lf);return K.create({characters:t,textAlign:"center"})}function i_(){return{color:cn(),opacity:1}}var Be={create(e={}){let t=e.key||F();return{type:h.CONTINUE,key:t,paragraph:e.paragraph||Kf(),continueColor:e.continueColor||i_(),meta:e.meta||[{name:"charactersMeta",data:Lf}],designSettings:e.designSettings}},createFromDivider(e){let t=e.dividerType==="line-with-text"?e.meta.filter(i=>i.name==="charactersMeta"):void 0,o=e.dividerType==="line-with-text"?Oe.getCharactersText(e.paragraph):void 0,r=Kf(o),n=Be.create({...e,meta:t,paragraph:r});return e.designSettings&&(n.designSettings=n_(e,n)),n},clone(e){return Be.create({...e,key:F(),paragraph:{...e.paragraph,key:F()},designSettings:e.designSettings&&Mt(e.designSettings)})},toContinueBlock(e){return e&&e.type===h.CONTINUE?e:null},getBlockType(e){return"continue"},getCharactersMeta(e){let t=lt(e.meta,"charactersMeta");return(t==null?void 0:t.data)||null},addMeta(e,t){e.meta=lo(e.meta,t)},changeContinueColor(e,t){e.continueColor=t}};function a_(e){var r;let t=e.key||F(),o=e.characters||[];return typeof o=="string"&&(o=K.createCharacters(o,ne.create())),{type:h.LIST_ITEM,key:t,characters:o,listViewType:e.viewType,designSettings:e.designSettings,defaultCharactersMeta:(r=e.defaultCharactersMeta)!=null?r:void 0}}var ge={create(e){if(e.listType==="ol")return ge.createOrderedListItemBlock(e);if(e.listType==="ul")return ge.createUnorderedListItemBlock(e);throw new Error(`Unknown listType: ${e.listType}`)},createOrderedListItemBlock(e){var t;return{...a_(e),listType:"ol",counterReset:(t=e.counterReset)!=null?t:null}},createUnorderedListItemBlock(e){return{...a_(e),listType:"ul"}},toListItemBlock(e){return e&&e.type===h.LIST_ITEM?e:null},toOrderedListItemBlock(e){let t=ge.toListItemBlock(e);return t&&t.listType==="ol"?t:null},toUnorderedListItemBlock(e){let t=ge.toListItemBlock(e);return t&&t.listType==="ul"?t:null},toDefaultListItemBlock(e){let t=ge.toListItemBlock(e);return t&&t.listViewType==="default"?e:null},toCustomListItemBlock(e){let t=ge.toListItemBlock(e);return t&&t.listViewType==="custom"?e:null},isEmptyListItem(e){let t=ge.toListItemBlock(e);return!!t&&Oe.isEmpty(t)},clone(e,t={}){return{...Dt(e),key:F(),...t}},getBlockType(e){return`${e.listViewType}-${e.listType}-item`}};var Pr={create(e={}){let t=e.key||F();return{type:h.SNIPPET,key:t,url:e.url||"",title:e.title||"",imageSrc:e.imageSrc||null,iconSrc:e.iconSrc||null,description:e.description||null,designSettings:e.designSettings}},clone(e){return Pr.create({...e,key:F()})},toSnippetBlock(e){return e&&e.type===h.SNIPPET?e:null},getBlockType(e){return"snippet"}};function s_(e){return!!re(e)||!!ge.toListItemBlock(e)||!!At.toNoteBlock(e)||!!bt.toCodeBlock(e)||!!Se.toDividerBlock(e)||!!Be.toContinueBlock(e)||!!Q.toLayoutBlock(e)||!!pt.toQuizBlock(e)}var _w=/^\s*https?:\/\/\S+\s*$/;function c_(e){return _w.test(e)}function il(e,t,o,r){return Hy(e.blockMap,t,o),{selection:R.createSelectionFromBlockData(o,r)}}var ve={getBlockByIndex(e,t){return si(e,t)},getFirstBlock(e){return B(Ly(e))},getLastBlock(e){return B(Ky(e))},getBlockBefore(e,t){return $y(e,t)},getBlockAfter(e,t){return zy(e,t)},forEach(e,t){Ny(e,t)},getBlocksArray(e){return e.order.map(t=>e.blocks[t])},hasBlock(e,t){return e.blocks.hasOwnProperty(t)}};var l_={create(e){return{...K.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign}),codeBlockKey:e.codeBlockKey}},toCodeParagraph(e){return e&&e.type===h.PARAGRAPH&&e.codeBlockKey?e:null}};function $f(e,t,o){let{insertionKey:r,insertBefore:n}=o,i=e.blockMap,a=i.order.findIndex(c=>c===r);n||(a+=1);let s=t.map(c=>c.key);return i.order.splice(a,0,...s),t.forEach(c=>{i.blocks[c.key]=c}),{selection:R.createCollapsed({key:Ws(t,-1).key,offset:0})}}function m_(e,t,o){return $f(e,[t],o)}function p_(e,t){e_(e)&&t!=="inner"&&nl(e,0)}var Aa=class e{static _getLayoutBlock(t,o){let r=t.blockMap.blocks[o];return r?Q.toLayoutBlock(r):null}static changeAlignment(t,o,r){let n=e._getLayoutBlock(t,o);return n?(Q.changeAlignment(n,r),{selection:R.createLayoutBlockSelection(o)}):{selection:R.createTextSelection()}}static changeVerticalAlign(t,o,r){let n=e._getLayoutBlock(t,o);return n?(Q.changeVerticalAlign(n,r),{selection:R.createLayoutBlockSelection(o)}):{selection:R.createTextSelection()}}static changeHorizontalAlign(t,o,r){let n=e._getLayoutBlock(t,o);return n?(Q.changeHorizontalAlign(n,r),{selection:R.createLayoutBlockSelection(o)}):{selection:R.createTextSelection()}}static changeColumnCount(t,o,r){let n=e._getLayoutBlock(t,o);if(!n)return{selection:R.createTextSelection()};if(r>n.colsOrder.length)Q.addColumns(n,r);else if(r<n.colsOrder.length){let i=Q.reduceColumnsCount(n,r);L.insertBlocksAfter(t,n,i)}return{selection:R.createLayoutBlockSelection(o)}}static changeColumnsSizes(t,o,r){let n=e._getLayoutBlock(t,o);return n?(Q.validateColumnsNewSizes(n,r)&&Q.transformColumnsSizes(n,r),{selection:R.createLayoutBlockSelection(o)}):{selection:R.createTextSelection()}}static insertBlocksInNewColumn(t,o,{targetBlockKey:r,position:n,blocks:i}){let a=t.blockMap.blocks[r],s=Q.toLayoutBlock(a);if(!s&&!Q.isLayoutColumnBlock(a))return V.warn("Can not convert block to layout"),{selection:o};let c=s||Q.createFromBlock(a);return n==="start"?Q.addColumnToStart(c,i):Q.addColumnToEnd(c,i),t.blockMap.blocks[r]=c,{selection:R.createLayoutBlockSelection(c.key)}}static deleteColumn(t,o,r){let n=e._getLayoutBlock(t,o);if(!n)return{selection:R.createTextSelection()};if(Q.deleteColumn(n,r),n.colsOrder.length<Q.getMinColumns(n)){let i=n.colsOrder.length?Q.getColumnBlocks(n,n.colsOrder[0]):[K.create()];return $f(t,i,{insertionKey:o,insertBefore:!1}),L.deleteBlocks(t,[o]),{selection:R.createCollapsedBlockSelection({key:i[0].key})}}return{selection:R.createLayoutBlockSelection(o)}}};function u_({contentState:e,targetBlockKey:t,insertBefore:o,blocks:r}){let n=kw({contentState:e,targetBlockKey:t,insertBefore:o}),i=e.blockMap.blocks[n];Sw(i,r)}function Sw(e,t){if(!ge.toListItemBlock(e))return;let r=mo(e);t.forEach(n=>{nl(n,r)})}function kw({contentState:e,targetBlockKey:t,insertBefore:o}){let r=e.blockMap.order,n=r.findIndex(a=>a===t);return o&&n>0?r[n-1]:t}var al=class e{static _getContextCollageBlock(t,o){let r=L.getBlockContextContentState(t,o.context),n=q.toCollageBlock(r.blockMap.blocks[o.collageKey]),i=o.context?{blockKey:o.context.contextKey,colKey:o.context.richtextKey}:void 0;return{block:n,context:i}}static _createNewCollageBlock(t,o){let r=q.create({images:[o],designSettings:t.designSettings});return r.alignment=q.supportAlignment(r,t.alignment)?t.alignment:xx,r}static _deleteMovedImage(t,o,r){let n=L.getBlockContextContentState(t,r.context);q.isOneImageCollage(o)?(Cr(n.blockMap,o.key),r.context&&r.context.richtextKey&&n.blockMap.order.length===0&&Aa.deleteColumn(t,r.context.contextKey,r.context.richtextKey)):e.deleteImage(n,o.key,r.imageKey)}static _getImageInsertPosition(t,o,r){let n=t.images.findIndex(i=>i.key===o);return r||(n+=1),n}static _inheritImageProperties(t,o){let r=Ge.isEnabled(t.caption),n=to.isEnabled(t.zoom),i=Tr.getRadius(t.rounding),a=vr.getFrameType(t.frame);Ge.setState(o.caption,r),to.setState(o.zoom,n),Tr.setRadius(o.rounding,i),vr.setFrame(o.frame,a),n&&eo.setState(o.link,!1)}static deleteImage(t,o,r){let n=q.toCollageBlock(t.blockMap.blocks[o]);if(!n||!n.images.map(a=>a.key).includes(r))return V.warn("Block must exist in contentState and must have collaged image with id:"+r),{selection:R.createTextSelection()};if(n.images.length<=1)return il(t,o,K.create({key:o}));let i=q.getCollagedImageIndex(n,r);return i>-1&&(n.images.splice(i,1),q.isOneImageCollage(n)&&n.images[0].width<=960&&(n.alignment="inner")),{selection:R.createCollageBlockSelection(o)}}static addImage(t,o,r,n){let i=o.startKey,a=q.toCollageBlock(t.blockMap.blocks[i]);if(!a||!R.isCollapsed(o)||!q.isCollageBlock(a))return V.warn("Selection must be collapsed and block must be an collage"),{selection:o};let s=a.images[0];e._inheritImageProperties(s,r);let c=n||n===0?n:a.images.length;return a.images.splice(c,0,r),a.images[c].parentCollageKey=i,{selection:R.createCollageBlockSelection(i)}}static replaceImageInCollage({collageKey:t,contentState:o,imageBlock:r,oldImageKey:n,context:i}){let a=q.toCollageBlock(o.blockMap.blocks[t]);if(!a||!a.images.map(c=>c.key).includes(n))return V.warn("Block must exist in contentState and must have collaged image with id:"+n),{selection:R.createTextSelection()};let s=q.getCollagedImageIndex(a,n);return s>-1&&(r.caption=a.images[s].caption,r.link=a.images[s].link,r.rounding=a.images[s].rounding,r.frame=a.images[s].frame,a.images[s]=r,a.images[s].parentCollageKey=t),{selection:R.createCollageBlockSelection(t,i)}}static editImage(t,o,{collageKey:r,imageKey:n,crop:i,clip:a,isSingleImage:s,editedSrc:c}){let l=q.toCollageBlock(t.blockMap.blocks[r]);if(!l)return V.warn(`Block collage ${r} not exist!`),{selection:R.createTextSelection()};let m=q.getCollagedImageIndex(l,n);return m>-1&&(l.images[m].crop=i,l.images[m].clip=a,l.images[m].editedSrc=c,ht(l.images[m]).width<=960&&s&&l.alignment!=="float-left"&&(l.alignment="inner")),{selection:R.createCollageBlockSelection(r,o==null?void 0:o.context)}}static moveImageInCollage(t,o,{imageKey:r,toImageKey:n,beforeImage:i}){let a=q.toCollageBlock(t.blockMap.blocks[o]);if(!a)return V.warn(`Block collage ${o} not exist!`),{selection:R.createTextSelection()};let s=q.getCollagedImage(a,r);if(!s)return{selection:R.createCollageBlockSelection(o)};let c=a.images.findIndex(m=>m.key===r);a.images.splice(c,1);let l=e._getImageInsertPosition(a,n,i);return a.images.splice(l,0,s),{selection:R.createCollageBlockSelection(o)}}static moveCollagedImageToCollage(t,o,r){let n=L.getBlockContextContentState(t,o.context),i=q.toCollageBlock(n.blockMap.blocks[o.collageKey]),a=q.toCollageBlock(t.blockMap.blocks[r.collageKey]),s=o.context?{blockKey:o.context.contextKey,colKey:o.context.richtextKey}:void 0;if(!i||!a)return{selection:R.createCollageBlockSelection(o.collageKey,s)};let c=B(q.getCollagedImage(i,o.imageKey)),l=q.cloneImage(c),m=R.createCollageBlockSelection(r.collageKey),p=e._getImageInsertPosition(a,r.imageKey,r.insertBefore);return e.addImage(t,m,l,p),e._deleteMovedImage(t,i,o),{selection:m}}static moveCollagedImageToRichtext(t,o,r){let{block:n,context:i}=e._getContextCollageBlock(t,o);if(!n)return{selection:R.createCollageBlockSelection(o.collageKey,i)};let a=B(q.getCollagedImage(n,o.imageKey)),s=q.cloneImage(a),c=e._createNewCollageBlock(n,s),l=L.getBlockContextContentState(t,r.context);u_({contentState:l,targetBlockKey:r.blockKey,insertBefore:r.insertBefore,blocks:[c]});let m=r.context?{blockKey:r.context.contextKey,colKey:r.context.richtextKey}:void 0,{selection:p}=m_(l,c,{insertionKey:r.blockKey,insertBefore:r.insertBefore});return e._deleteMovedImage(t,n,o),{selection:{...B(p),context:m}}}static moveCollagedImageToNewColumn(t,o,r){let{block:n,context:i}=e._getContextCollageBlock(t,o);if(!n||q.isOneImageCollage(n)&&r.blockKey===n.key)return{selection:R.createCollageBlockSelection(o.collageKey,i)};let a=B(q.getCollagedImage(n,o.imageKey)),s=q.cloneImage(a),c=e._createNewCollageBlock(n,s),{selection:l}=Aa.insertBlocksInNewColumn(t,R.createBlockSelection({}),{targetBlockKey:r.blockKey,position:r.side,blocks:[c]});return e._deleteMovedImage(t,n,o),{selection:l}}static changeAlignment(t,o,r){let n=B(q.toCollageBlock(t.blockMap.blocks[o]));return p_(n,r),n.alignment=r,{selection:R.createCollageBlockSelection(o)}}};var f_={create(e){return{...K.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign}),continueBlockKey:e.continueBlockKey}},toContinueParagraph(e){return e&&e.type===h.PARAGRAPH&&e.continueBlockKey?e:null}};function gi(e){return{...e,characters:Ge.getText(e.caption)}}var sl={create(e){return{...K.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign}),tableKey:e.tableKey,rowKey:e.rowKey,colKey:e.colKey,cellKey:e.cellKey,meta:e.meta||[]}},toCellParagraph(e){if(e&&e.type===h.PARAGRAPH){let t=e;if(t.tableKey&&t.rowKey&&t.colKey&&t.cellKey&&t.meta)return e}return null}};function Cw(e,t){let o=B(t.customSelection),r=q.getCollagedImage(e,o.collageSelectedItemKey);return r||null}function bw(e,t){let o=t.customSelection,r=de.getCell(e,o.rowKey,o.colKey),n=re(r.content);return n?sl.create({...n,tableKey:e.key,colKey:o.colKey,rowKey:o.rowKey,cellKey:r.key}):null}function Bw(e,t){let o=t.customSelection,r=Z.getCardParagraph(e,o.cardKey,o.cardSide);return r||null}function Vt(e,t){let o=re(e);if(o)return o;let r=ge.toListItemBlock(e);if(r)return r;let n=ot.toMediaBlock(e);if(n)return gi(n);let i=At.toNoteBlock(e);if(i)return i;let a=Se.toDividerBlock(e);if(a&&a.dividerType==="line-with-text"&&t&&un.isTextSelection(t))return a.paragraph;let s=Be.toContinueBlock(e);if(s&&t&&pn.isTextSelection(t))return s.paragraph;let c=bt.toCodeBlock(e);if(c&&t&&mn.isTextSelection(t))return c.paragraph;let l=q.toCollageBlock(e);if(l&&t&&t.customSelection&&t.customSelection.collageItemCaptionSelected){let f=Cw(l,t);if(f)return gi(f)}let m=de.toTableBlock(e);if(m&&t&&Qt.isCellSelected(t))return bw(m,t);let p=Z.toFlipCardsBlock(e);return p&&t&&qo.isCardTextSelection(t)?Bw(p,t):null}function d_(e){let{contentState:t,selection:o}=e,n=t.blockMap.blocks[o.startKey];return!!re(n)||ge.toListItemBlock(n)||Aw(e)?Vt(n,o):null}function cl(e){return Tw(e)||Dw(e)}function vw(e){let{contentState:t,selection:{startKey:o,customSelection:r}}=e;return!!At.toNoteBlock(t.blockMap.blocks[o])&&!!r&&r.noteTextSelected}function Tw({contentState:e,selection:t}){let{startKey:o,customSelection:r}=t;return!!ot.toMediaBlock(e.blockMap.blocks[o])&&!!r&&r.captionSelected}function Dw({contentState:e,selection:t}){let{startKey:o,customSelection:r}=t;return!!q.toCollageBlock(e.blockMap.blocks[o])&&!!r&&r.collageItemCaptionSelected}function ww({contentState:e,selection:t}){let{startKey:o}=t;return!!Z.toFlipCardsBlock(e.blockMap.blocks[o])&&!!qo.isCardTextSelection(t)}function Ew({contentState:e,selection:t}){let{startKey:o}=t;return!!de.toTableBlock(e.blockMap.blocks[o])&&!!Qt.isCellSelected(t)}function Pw({contentState:e,selection:t}){let{startKey:o}=t;return!!Se.toDividerBlock(e.blockMap.blocks[o])&&!!un.isTextSelection(t)}function Rw({contentState:e,selection:t}){let{startKey:o}=t;return!!Be.toContinueBlock(e.blockMap.blocks[o])&&!!pn.isTextSelection(t)}function Iw({contentState:e,selection:t}){let{startKey:o}=t;return!!bt.toCodeBlock(e.blockMap.blocks[o])&&!!mn.isTextSelection(t)}function Mw({contentState:e,selection:t}){if(R.isTextSelection(t))return!1;let o=t.startKey;return!!Q.toLayoutBlock(e.blockMap.blocks[o])}function Aw(e){return[vw,cl,Ew,ww,Pw,Rw,Iw,Mw].some(t=>t(e))}var g_={create(e){return{...K.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign}),dividerBlockKey:e.dividerBlockKey,paragraphStyle:e.paragraphStyle,meta:e.meta}},toDividerParagraph(e){return e&&e.type===h.PARAGRAPH&&e.dividerBlockKey?e:null}};var h_={create(e){return{...K.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign}),flipCardsBlockKey:e.flipCardsBlockKey,cardKey:e.cardKey,cardSide:e.cardSide,meta:e.meta||[]}},toFlipCardParagraph(e){if(e&&e.type===h.PARAGRAPH){let t=e;if(t.flipCardsBlockKey&&t.cardKey&&t.cardSide&&t.meta)return e}return null}};var ll=class{static create(t){return{captionSelected:t}}};var L={createBlocks(e){let t={order:[],blocks:{}};for(let o of e)t.order.push(o.key),t.blocks[o.key]=o;return t},cloneBlock(e){let t=re(e);if(t)return K.clone(t);let o=q.toCollageBlock(e);if(o)return q.clone(o);let r=de.toTableBlock(e);if(r)return de.cloneTable(r);let n=Z.toFlipCardsBlock(e);if(n)return Z.clone(n);let i=Se.toDividerBlock(e);if(i)return Se.clone(i);let a=Be.toContinueBlock(e);if(a)return Be.clone(a);let s=bt.toCodeBlock(e);if(s)return bt.clone(s);let c=Nt.toVideoBlock(e);if(c)return Nt.clone(c);let l=Pr.toSnippetBlock(e);if(l)return Pr.clone(l);let m=pt.toQuizBlock(e);if(m)return pt.clone({...m,isLoading:!0});let p=Q.toLayoutBlock(e);return p?Q.clone(p):{...e,designSettings:e.designSettings&&Mt(e.designSettings),key:F()}},replaceBlocksFragment(e,t,o,r=[]){let n=e.order.indexOf(t),i=e.order.indexOf(o);if(n<0||i<0){V.warn("incorrect block keys");return}let a=[...e.order],s=a.splice(n,i-n+1);for(let l of s)delete e.blocks[l];let c=[];for(let l of r)c.push(l.key),e.blocks[l.key]=l;a.splice(n,0,...c),e.order.splice(0,e.order.length,...a)},deleteBlocks(e,t){e.blockMap.order=e.blockMap.order.filter(o=>!t.includes(o)),t.forEach(o=>{delete e.blockMap.blocks[o]})},replaceBlockWithFragment(e,t,o){return L.replaceBlocksFragment(e,t,t,o)},updateBlockWithKey(e,t,o){let r=e.blockMap.blocks[t];r&&Wg(r,o)},updateCollageBlockWithKey(e,t,o){let r=q.toCollageBlock(e.blockMap.blocks[t]);if(r){let n=q.getCollagedImage(r,o.key);if(!n)return;for(let i of Object.keys(o))n[i]=o[i]}},removeCollagedImage(e,t,o){al.deleteImage(e,t,o)},getCollageImageBlock(e,t,o){let r=q.toCollageBlock(e.blockMap.blocks[t]);return r?q.getCollagedImage(r,o):null},removeBlocks(e,t){for(let o of t)il(e,o,K.create({key:o}))},insertBlocksAfter(e,t,o){let r=e.blockMap.order.indexOf(t.key)+1;e.blockMap.blocks={...e.blockMap.blocks,...o.blocks},e.blockMap.order.splice(r,0,...o.order)},isOneEmptyParagraph(e){let t=e.blockMap;if(e.blockMap.order.length===1){let o=t.blocks[t.order[0]];return K.isEmptyParagraph(o)}return!1},create(e=[K.create()]){return{blockMap:L.createBlocks(e)}},createFromBlockMap(e){return e},getDefaultSelection(e){let t=e.blockMap.order[0],o=e.blockMap.blocks[t],r=null;return ot.toMediaBlock(o)&&(r=ll.create(!1)),R.createTextSelection({startKey:o.key,startOffset:0,endKey:o.key,endOffset:0,customSelection:r})},getAllBlocksFromSelection(e,t){let{startKey:o,endKey:r}=t,{order:n,blocks:i}=e.blockMap,a=n.indexOf(o),s=n.indexOf(r);return a<0||s<0?(V.warn("incorrect selection"),[]):n.slice(a,s+1).map(c=>i[c])},getAllTableCellsCharactersBlocks(e){let t=[];return e.rowsOrder.forEach(o=>{e.colsOrder.forEach(r=>{let n=de.getCell(e,o,r),i=n&&re(n.content);i&&t.push({paragraph:i,location:{tableKey:e.key,colKey:r,rowKey:o,cellKey:n.key},meta:n.meta})})}),t},getAllFlipCardsCharactersBlocks(e,t){let o=[];return e.cardsBlockMap.order.forEach(r=>{let n=Z.getFlipCardSideData(e,r,t);n.type!=="image"&&o.push({paragraph:n.text,location:{flipCardsBlockKey:e.key,cardKey:r,cardSide:t},meta:n.meta})}),o},getTableRowCellsCharactersBlocks(e,t){let o=[];return e.colsOrder.forEach(r=>{let n=de.getCell(e,t,r),i=n&&re(n.content);i&&o.push({paragraph:i,location:{tableKey:e.key,colKey:r,rowKey:t,cellKey:n.key},meta:n.meta})}),o},getTableColumnCellsCharactersBlocks(e,t){let o=[];return e.rowsOrder.forEach(r=>{let n=de.getCell(e,r,t),i=n&&re(n.content);i&&o.push({paragraph:i,location:{tableKey:e.key,colKey:t,rowKey:r,cellKey:n.key},meta:n.meta})}),o},getSelectedTableCharactersBlocks(e,t){if(Qt.isCellSelected(t)){let o=t.customSelection,r=de.getCell(e,o.rowKey,o.colKey);return[{paragraph:B(re(r.content)),location:{tableKey:e.key,colKey:o.colKey,rowKey:o.rowKey,cellKey:r.key},meta:r.meta}]}if(Qt.isRowSelected(t)){let{rowKey:o}=t.customSelection;return L.getTableRowCellsCharactersBlocks(e,o)}if(Qt.isColumnSelected(t)){let{colKey:o}=t.customSelection;return L.getTableColumnCellsCharactersBlocks(e,o)}return L.getAllTableCellsCharactersBlocks(e)},getSelectedFlipCardsParagraphBlocks(e,t,o){if(qo.isCardTextSelection(t)){let n=t.customSelection,i=Z.getFlipCardSideData(e,n.cardKey,n.cardSide);if(i.type!=="image")return[{paragraph:i.text,location:{flipCardsBlockKey:e.key,cardKey:n.cardKey,cardSide:n.cardSide},meta:i.meta}]}let r=o&&o(e.key)||"front";return r?L.getAllFlipCardsCharactersBlocks(e,r):[]},getSelectedLayoutCharactersBlocks(e){return L._getBlocksFromLayoutFilter(e,t=>this.convertLayoutBlockToCharactersBlock(t,!0))},getSelectedLayoutParagraphBlocks(e){return L._getBlocksFromLayoutFilter(e,t=>this.convertLayoutBlockToCharactersBlock(t,!1))},_getBlocksFromLayoutFilter(e,t){return Q.getAllBlocks(e).map(t).reduce((o,r)=>r?[...o,...r]:o,[])},convertLayoutBlockToCharactersBlock(e,t){let o=re(e);if(o)return[o];let r=ge.toListItemBlock(e);if(r)return[r];let n=ot.toMediaBlock(e);if(n&&t)return[gi(n)];let i=At.toNoteBlock(e);if(i)return[i];let a=Se.toDividerBlock(e);if(a&&a.dividerType==="line-with-text")return[a.paragraph];let s=q.toCollageBlock(e);return s&&t?q.getCaptionParagraphs(s).map(l=>gi(l)):null},getContextContentState(e,t){if(t&&t.context){let o=R.getContextContentState(e,t);if(o)return o}return e},getBlockContextContentState(e,t){let o=R.createBlockSelection({context:t?{blockKey:t.contextKey,colKey:t.richtextKey}:void 0});return L.getContextContentState(e,o)},getCharactersBlockFromSelection(e,t,o){let r=L.getAllBlocksFromSelection(e,t).filter(i=>!!Vt(i,t)||!!q.toCollageBlock(i)||!!de.toTableBlock(i)||!!Z.toFlipCardsBlock(i)||!!Se.toDividerBlock(i)||!!Q.toLayoutBlock(i)||!!bt.toCodeBlock(i)||!!Be.toContinueBlock(i)),n=[];for(let i=0;i<r.length;i++){let a=q.toCollageBlock(r[i]);if(a&&cl({contentState:e,selection:t})){let k,S=t.customSelection.collageSelectedItemKey,C=q.getCollagedImage(a,S);C&&(k=Vt(C)),n.push(k||r[i]);continue}if(a&&!cl({contentState:e,selection:t})){a.images.forEach(k=>{let S=B(Vt(k));n.push(S)});continue}let s=ot.toMediaBlock(r[i]);if(s){let k=B(Vt(s));n.push(k);continue}let c=At.toNoteBlock(r[i]);if(c){let k=B(Vt(c));n.push(k);continue}let l=ge.toListItemBlock(r[i]);if(l){let k=B(Vt(l));n.push(k);continue}let m=Se.toDividerBlock(r[i]);if(m){m.dividerType==="line-with-text"&&n.push(g_.create({...m.paragraph,dividerBlockKey:m.key,paragraphStyle:m.paragraphStyle,meta:m.meta}));continue}let p=Be.toContinueBlock(r[i]);if(p){n.push(f_.create({...p.paragraph,continueBlockKey:p.key}));continue}let f=bt.toCodeBlock(r[i]);if(f){n.push(l_.create({...f.paragraph,codeBlockKey:f.key}));continue}let d=de.toTableBlock(r[i]);if(d){let S=this.getSelectedTableCharactersBlocks(d,t).map(C=>sl.create({...C.paragraph,...C.location,meta:C.meta}));n.push(...S);continue}let x=Q.toLayoutBlock(r[i]);if(x){let k=this.getSelectedLayoutCharactersBlocks(x);k.length&&n.push(...k);continue}let _=Z.toFlipCardsBlock(r[i]);if(_){let S=this.getSelectedFlipCardsParagraphBlocks(_,t,o).map(C=>h_.create({...C.paragraph,...C.location,meta:C.meta}));n.push(...S);continue}n.push(r[i])}return n},getFlatBlocksFromSelection(e,t,o){let r=L.getAllBlocksFromSelection(e,t),n=[],i=r.reduce((a,s)=>{let c=q.toCollageBlock(s);return c?c.images.forEach(l=>a.push(o(l))):a.push(o(s)),a},n);return sr(i)},getParagraphBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!re(o))},getMediaBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!ot.toMediaBlock(o))},getEmbedBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!fi.toEmbedBlock(o))},getCollageBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!q.toCollageBlock(o))},getTableBlockFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!de.toTableBlock(o))},getAttachmentBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!ln.toAttachmentBlock(o))},getNoteBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!At.toNoteBlock(o))},getTableBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!de.toTableBlock(o))},getFlipCardsBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!Z.toFlipCardsBlock(o))},getDividerBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!Se.toDividerBlock(o))},getContinueBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!Be.toContinueBlock(o))},getVideoBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!Nt.toVideoBlock(o))},getSnippetBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!Pr.toSnippetBlock(o))},getCodeBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!bt.toCodeBlock(o))},getListItemBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!ge.toListItemBlock(o))},getLayoutBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>!!Q.toLayoutBlock(o))},getTextBlockTypeFromSelection(e,t){let o=L.getAllBlocksFromSelection(e,t),r="text",n=re(o[0]);n&&(r=n.viewType);let i=ge.toListItemBlock(o[0]);return i&&(r=ge.getBlockType(i)),r},getParagraphsFromSelection(e,t,o){let r=L.getAllBlocksFromSelection(e,t),n=[];return r.forEach(i=>{let a=re(i);if(a){n.push({paragraph:a,parentBlockType:"none"});return}let s=de.toTableBlock(i);if(s){let m=this.getSelectedTableCharactersBlocks(s,t).map(p=>({paragraph:p.paragraph,parentBlockType:"table"}));n.push(...m)}let c=Z.toFlipCardsBlock(i);if(c){let m=this.getSelectedFlipCardsParagraphBlocks(c,t,o).map(p=>({paragraph:p.paragraph,parentBlockType:"flip-card"}));n.push(...m)}let l=Q.toLayoutBlock(i);if(l){let m=this.getSelectedLayoutParagraphBlocks(l).map(p=>({paragraph:p,parentBlockType:"layout"}));n.push(...m)}}),n},getConvertableBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(o=>s_(o))},getBlockBefore(e,t,o=void 0){let r=o&&o.colKey?{contextKey:o.blockKey,richtextKey:o.colKey}:null,{order:n,blocks:i}=r?L.getBlockContextContentState(e,r).blockMap:e.blockMap,a=n.indexOf(t);if(a===0&&o)return L.getBlockInBeforeContext(e,o);if(a<0)return V.warn("incorrect key"),{blockBefore:null};if(a===0)return{blockBefore:null};let s=n[a-1];return{blockBefore:i[s],newContext:o}},getBlockAfter(e,t,o=void 0){let r=o&&o.colKey?{contextKey:o.blockKey,richtextKey:o.colKey}:null,{order:n,blocks:i}=r?L.getBlockContextContentState(e,r).blockMap:e.blockMap,a=n.indexOf(t);if(a===n.length-1&&o)return L.getBlockInAfterContext(e,o);if(a<0)return V.warn("incorrect key"),{blockAfter:null};if(a===n.length-1)return{blockAfter:null};let s=n[a+1];return{blockAfter:i[s],newContext:o}},getBlockInBeforeContext(e,t){if(!t.colKey)return{blockBefore:null};let o=e.blockMap.blocks[t.blockKey],r=Q.toLayoutBlock(o);if(r){let n=Q.getBeforeColumnBlock(r,t.colKey);return n?{blockBefore:n.block,newContext:{...t,colKey:n.colKey}}:L.getBlockBefore(e,t.blockKey)}return{blockBefore:null}},getBlockInAfterContext(e,t){if(!t.colKey)return{blockAfter:null};let o=e.blockMap.blocks[t.blockKey],r=Q.toLayoutBlock(o);if(r){let n=Q.getAfterColumnBlock(r,t.colKey);return n?{blockAfter:n.block,newContext:{...t,colKey:n.colKey}}:L.getBlockAfter(e,t.blockKey)}return{blockAfter:null}},getQuizBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(n=>!!pt.toQuizBlock(n))},atLeastOneNotEmptyCharactersBlockSelected(e,t,o){return L.getCharactersBlockFromSelection(e,t,o).some(r=>r.characters.length>0)},convertBrowserToModelSelection(e,t){let o=e.blockMap.blocks,r=Vt(o[t.startKey],t),n=r?Oe.convertBrowserToModelOffset(r,t.startOffset):t.startOffset,i=Vt(e.blockMap.blocks[t.endKey],t),a=i?Oe.convertBrowserToModelOffset(i,t.endOffset):t.endOffset;return{...t,startOffset:n,endOffset:a}},convertModelToBrowserSelection(e,t){if(R.isBlockSelection(t))return R.createTextSelection({startKey:t.startKey,endKey:t.endKey,customSelection:t.customSelection});let o=Vt(e.blockMap.blocks[t.startKey],t),r=o?Oe.convertModelToBrowserOffset(o,t.startOffset):t.startOffset,n=Vt(e.blockMap.blocks[t.endKey],t),i=n?Oe.convertModelToBrowserOffset(n,t.endOffset):t.endOffset;return{...t,startOffset:r,endOffset:i}},isValidSelection(e,t){return[t.startKey,t.endKey].every(o=>ve.hasBlock(e.blockMap,o))},getSelectedBlockKeys(e,t){let o=e.blockMap.order,r=o.findIndex(i=>i===t.startKey),n=o.findIndex(i=>i===t.endKey);return o.slice(r,n+1)},getSelectedBlockKeysWithContext(e,t){if(!R.hasContext(t))return this.getSelectedBlockKeys(e,t);if(R.isContextBlockSelected(t))return[t.startKey];let o=R.getContextContentState(e,t);return o?this.getSelectedBlockKeys(o,t):(V.warn("Invalid context in selection"),[])},isUrlSelected(e,t){if(t.startKey!==t.endKey)return!1;let o=e.blockMap.blocks[t.startKey],r=re(o);if(!r)return!1;let n=Oe.getCharactersText(r);return R.isTextSelection(t)&&(n=n.slice(t.startOffset,t.endOffset)),c_(n)},getCharactersBeforeCursor(e,t){let o=d_({contentState:e,selection:t});if(!o||t.type==="block")return null;let{startOffset:r}=t;return o.characters.slice(0,r)}};function Rr(e){e.inlineStyleRanges&&e.inlineStyleRanges.forEach(t=>{t.style={name:t.style}}),e.urls&&e.urls.forEach(t=>{let o={start:t.start,end:t.end,style:{name:"underline"}};e.inlineStyleRanges?e.inlineStyleRanges.push(o):e.inlineStyleRanges=[o]})}function Vw(e){Rr(e),e.textAlign=e.viewType==="pullquote"?"center":"left"}function zf(e){let t=null;return e.forEach(o=>{if(o.type===h.PARAGRAPH){Vw(o);let r=o;r.viewType==="ol"&&(!t||t!=="ol")&&(r.isOrderedListFirstItem=!0),t=r.viewType}else if(o.type===h.IMAGE)Rr(o),t=null;else if(o.type===h.EMBED)Rr(o),t=null;else if(o.type===h.EXERCISE){let r=o;r.questions&&r.questions.forEach(n=>{Rr(n.description),(n.type==="mc"||n.type==="mr")&&n.content.choices&&n.content.choices.forEach(i=>Rr(i.text)),Rr(n.feedback.answered),Rr(n.feedback.correct),Rr(n.feedback.incorrect)}),t=null}else t=null}),e}function y_(e){switch(e){case"header":return"h1";case"subheader":return"h2";default:return e}}function hi({text:e,inlineStyleRanges:t,urls:o}){let r=ne.create(),n=[...e].map(i=>({text:i,meta:r}));return t&&t.forEach(i=>{for(let a=i.start;a<i.end;++a){if(a>=n.length){V.warn("incorrect style ranges");break}n[a].meta=ne.applyStyle(n[a].meta,[i.style])}}),o&&o.forEach(i=>{for(let a=i.start;a<i.end;++a){if(a>=n.length){V.warn("incorrect url ranges");break}n[a].meta=ne.setUrl(n[a].meta,i.url)}}),n}var x_={create({type:e,width:t,height:o,src:r,crop:n,title:i,previewSrc:a}){let s={type:e,width:t,height:o,src:r};return n&&(s={...s,crop:n}),i&&(s={...s,title:i}),a&&(s={...s,previewSrc:a}),s}};function ml(e){let t=re(We(e.blockMap));return t?Oe.getCharactersText(t):(V.error("first block is not text pararaph"),"")}var yi={create(e={}){let{key:t=F(),correct:o=!1,text:r=[]}=e;return{key:t,correct:o,content:L.create([K.create({characters:r})])}},getChoiceText(e){return B(ml(e.content))}};var pl={create(e={}){let{choices:t=[yi.create({correct:!0,text:Xe(`${T("Roll.Exercise.Question.Content.PossibleAnswer")} 1`)}),yi.create({text:Xe(`${T("Roll.Exercise.Question.Content.PossibleAnswer")} 2`)}),yi.create({text:Xe(`${T("Roll.Exercise.Question.Content.PossibleAnswer")} 3`)})]}=e;return{choices:t}}};var ul={create(e={}){let{key:t=F(),text:o=""}=e;return{key:t,text:o}}};var fl={create(e={}){let{caseSensitive:t=!1,answers:o=[ul.create({text:`${T("Roll.Exercise.TypeIn.Answer")} 1`})]}=e;return{caseSensitive:t,answers:o}}};var __={ANSWERED:"answered",CORRECT_INCORRECT:"correctIncorrect"};var dl={create(e={}){let{type:t=__.CORRECT_INCORRECT,answered:o=[],correct:r=[],incorrect:n=[]}=e;return{type:t,answered:L.create([K.create({characters:o})]),correct:L.create([K.create({characters:r})]),incorrect:L.create([K.create({characters:n})])}}};function Fw(e){switch(e){case"mc":case"mr":return pl.create();case"ti":return fl.create();default:throw O(e),new Error(`Unknown question type: ${e}`)}}var gl={create(e){let{key:t=F(),type:o,attachment:r=null,description:n="",content:i=Fw(e.type),feedback:a=dl.create()}=e;return{key:t,type:o,attachment:r,description:L.create([K.create({characters:n})]),content:i,feedback:a}},getDescriptionText(e){return ml(e.description)}};var hl={create(e={}){let{includeInProgress:t=!1,shuffleAnswers:o=!1,showCorrectAnswers:r=!0}=e;return{includeInProgress:t,shuffleAnswers:o,showCorrectAnswers:r}}};var S_={create(e={}){let{key:t=F(),settings:o=hl.create(),questions:r=[gl.create({type:"mc"})]}=e;return{key:t,type:h.EXERCISE,settings:o,questions:r}},toExerciseBlock(e){return e&&e.type===h.EXERCISE?e:null}};function k_(e){switch(e){case"right":return"left";case"left":return"right";case"center":case"bottom":return e;default:throw O(e),new Error}}var Va=220,fn="cubic-bezier(.24,.84,.26,.99)",Ow=40,b_=480,Lw=360;function Nf(e){return e<=b_?Lw:440}function Qf(e){return e<=b_?280:320}function B_(e,t){return J(e,{center:{appearDuration:Va,hideDuration:Va,hideTranslate:[0,Ow],appearTranslate:[0,0],fade:!0,easing:fn},right:{appearDuration:Nf(t.getBoundingClientRect().width),hideDuration:Qf(t.getBoundingClientRect().width),hideTranslate:[t.getBoundingClientRect().width,0],appearTranslate:[0,0],fade:!1,easing:fn},bottom:{appearDuration:Nf(t.getBoundingClientRect().height),hideDuration:Qf(t.getBoundingClientRect().height),hideTranslate:[0,t.getBoundingClientRect().height],appearTranslate:[0,0],fade:!1,easing:fn},left:{appearDuration:Nf(t.getBoundingClientRect().height),hideDuration:Qf(t.getBoundingClientRect().height),hideTranslate:[-t.getBoundingClientRect().width,0],appearTranslate:[0,0],fade:!1,easing:fn}})}function C_([e,t]){return`translate(${e}px, ${t}px)`}function v_({element:e,transformStart:t,transformEnd:o,opacity:r,duration:n,easing:i}){return new KeyframeEffect(e,[{transform:C_(t),...r?{opacity:r[0]}:{}},{transform:C_(o),...r?{opacity:r[1]}:{}}],{duration:n,easing:i,fill:"forwards"})}function T_(e,t){let{hideTranslate:o,appearTranslate:r,fade:n,appearDuration:i,easing:a}=B_(e,t);return v_({element:t,duration:i,transformStart:o,transformEnd:r,opacity:n?[0,1]:void 0,easing:a})}function D_(e,t,o){let{hideTranslate:r,fade:n,appearTranslate:i,easing:a,hideDuration:s}=B_(e,t);return v_({element:t,easing:a,duration:s,transformStart:i,transformEnd:r,opacity:n?[1,0]:void 0})}var Kw=u({$:"$",layer:"xfc886__layer",layer_type_default:"xfc886__layer_type_default",layer_type_dark:"xfc886__layer_type_dark",layer_type_light:"xfc886__layer_type_light"});function w_(e,{type:t,onClick:o}){return e`
<div
	class=${Kw.layer.withMods({type:t})}
	onclick=${o}
>
</div>`}var $w=e=>new KeyframeEffect(e,[{opacity:0},{opacity:1}],{duration:Va,easing:fn,fill:"forwards"}),zw=e=>new KeyframeEffect(e,[{opacity:1},{opacity:0}],{duration:Va,easing:fn,fill:"forwards"}),E_=Nw();function P_({html:e,layer:t,props:o}){let r=e.renderIf(w_,()=>o),{element:n}=li({element:r,getAppearKeyframes:$w,getHideKeyframes:zw});mi({layer:t,element:n}),ee(()=>{if(r)return t.style.pointerEvents="auto",E_.increment(t),()=>{E_.decrement(t)===0&&(t.style.pointerEvents="")}},[r,t])}function Nw(){let e=new Map;function t(r){var i;let n=(i=e.get(r))!=null?i:0;return e.set(r,++n),n}function o(r){var i;let n=(i=e.get(r))!=null?i:0;return e.set(r,--n),n}return{increment:t,decrement:o}}function Qw(e,t,o){switch(e){case"center":return{left:Math.round((t.offsetWidth-o.clientWidth)*.5),top:Math.round((t.offsetHeight-o.clientHeight)*.5)};case"right":return{top:0,bottom:0,right:0};case"bottom":return{bottom:0,left:0,right:0};case"left":return{top:0,bottom:0,left:0};default:throw O(e),new Error}}function yl(e,t,o){let{left:r,top:n,bottom:i,right:a}=Qw(e,t,o),s=c=>$e(c)?W(c):"";o.style.top=s(n),o.style.right=s(a),o.style.bottom=s(i),o.style.left=s(r)}var Hf=new Map;function R_({type:e,element:t,onModalOverlayClick:o}){let r=E(null),n=br(),i=te(o),a=I(()=>(Hf.has(e)||Hf.set(e,[]),B(Hf.get(e))),[e]);t&&r.current===null&&(r.current=a.push({idRef:r,redraw:n,onModalOverlayClick:()=>i.current&&i.current()})-1,r.current&&r.current>=1&&a[r.current-1].redraw()),!t&&r.current===a.length-1&&(r.current&&r.current>=1&&a[r.current-1].redraw(),a.pop(),r.current=null),ee(()=>()=>{r.current!==null&&(a.splice(r.current),r.current=null)},[a]);let s=w(()=>{if(a.length){let c=a[a.length-1];c.onModalOverlayClick&&c.onModalOverlayClick()}},[a]);return{isFirst:r.current===0,activeElement:r.current===a.length-1?t:null,onModalOverlayClick:s}}function I_(e,t){P(()=>{if(t){let o=e.style.overflow;return e.style.overflow="hidden",()=>{e.style.overflow=o}}},[t,e])}function M_(e){I_(window.document.body,e)}function xi({html:e,side:t,createModal:o,close:r,beforeUnmount:n,modalOverlayType:i="default",layer:a=gr("popup")}){let s=e(o()),c=Zn()?k_(t):t,{isFirst:l,activeElement:m,onModalOverlayClick:p}=R_({type:c==="center"?"popup":"sidePanel",element:s,onModalOverlayClick:r});M_(l),P_({html:e,layer:a,props:l?{type:i,onClick:p}:null});let{element:f}=li({element:m,getAppearKeyframes:d=>T_(c,d),getHideKeyframes:d=>D_(c,d)});mi({layer:a,element:f,onAppend:d=>yl(c,a,d),beforeUnmount:n}),Ze({target:document.body,onResize:()=>s&&yl(c,a,s)}),Ze({target:s,onResize:()=>s&&yl(c,a,s)})}function A_(e){let t=te(e);return w((...o)=>t.current(...o),[t])}function V_(e){let t=e?-5:5;return Sc({opacity:kc(0,1),translate:Cc([0,t],[0,0]),duration:150})}var xl=8;function F_({popover:e,position:t}){let o=window.pageYOffset+window.innerHeight,r=window.pageYOffset,i=t.y+e.offsetHeight>o,a=t.y<r+xl;if(a||i){let s;a?(s=e.offsetHeight-Math.abs(t.y-r-xl),t.y=r+xl):s=o-t.y-xl,e.style.width=W(e.offsetWidth),e.style.maxHeight=W(s),e.style.overflowY="auto"}e.style.left=W(t.x),e.style.top=W(t.y)}var Ir=[];function O_(e){let t=Ir.pop();for(;t&&e(t,Ir.length);)t.closePopover(),t=Ir.pop();t&&Ir.push(t),Ir.length||L_().clearHandler()}function Hw(e){let t=Ir.indexOf(e);if(~t)O_((o,r)=>r>=t);else throw new Error("PopoverStackItem must be in popover stack")}function Uw(e){return Ir.length||L_().registerHandler(),Ir.push(e),e}var L_=vy(()=>{function e(t){let o=t.target;O_(({relatedRef:r,popover:n})=>!r.current.contains(o)&&!n.contains(o))}return{registerHandler:()=>window.addEventListener("mousedown",e),clearHandler:()=>window.removeEventListener("mousedown",e)}});function K_({relatedRef:e,popoverRef:t,onClose:o}){let r=E(null);P(()=>{let n=t.current;n&&r.current===null&&(r.current=Uw({popover:n,relatedRef:e,closePopover:()=>{r.current=null,o()}})),!n&&r.current!==null&&Hw(r.current)})}var Ww=8,qw=tt(null);function Gw(){let e=E([]);return{register:t=>{e.current.push(t)},clean:()=>{e.current.forEach(t=>t()),e.current=[]}}}function Yw({elementRef:e,beforeShow:t,afterShow:o,onHide:r}){return{appearAnimation:n=>{t(n);let i=n.getBoundingClientRect().top>e.current.getBoundingClientRect().top;return V_(i).play(n).then(()=>o(n))},hideAnimation:n=>Promise.resolve().then(()=>r(n))}}function $_({html:e,elementRef:t,createPopover:o,opened:r,setOpened:n,prepareList:i,offset:a,suppressOpenOnElementClick:s,keepOpenedOnAnchorMove:c,side:l="bottom",align:m="start"}){let p=Gw(),f=A_(n),d=ae(qw),x=k=>F_({popover:k,position:Tc({element:t.current,popover:k,side:l,align:m,isTopLayer:!0,getOffset:()=>({x:a&&a.x||0,y:a&&a.y||Ww}),autoInvert:!0,rootElement:d&&d.current})}),_=vc({html:e,createBinding:o,show:r,layer:gr("popover"),...Yw({elementRef:t,beforeShow:k=>{i&&i(k),x(k),c?p.register(ni(t.current,()=>x(k))):p.register(ni(t.current,()=>f(!1))),p.register(xf(k))},afterShow:k=>{let S=new ResizeObserver(()=>x(k));S.observe(k),p.register(()=>S.disconnect())},onHide:p.clean})});K_({relatedRef:t,popoverRef:_,onClose:()=>f(!1)}),G(t,"click",s?null:()=>f(!r))}function yt(e,t,o,r,n=!1,i=!0){let a=r||{};G(e,"keydown",n?null:s=>{s.defaultPrevented||s.keyCode===t&&(a.ctrl===void 0||s.ctrlKey===a.ctrl)&&(a.shift===void 0||s.shiftKey===a.shift)&&(a.metaKey===void 0||s.metaKey===a.metaKey)&&(i&&s.preventDefault(),o(s))})}function z_(e){let t=Vt(e);return t?t.characters.length:0}function N_(e){let t=lt(e.meta,"charactersMeta");return t&&t.name==="charactersMeta"?t.data:null}function jw(e,t){return lt(e.meta,t)}function Q_(e){let t=jw(e,"isHeaderColumnPinned");return!!t&&t.name==="isHeaderColumnPinned"}var po={NBSP:String.fromCharCode(160),ZERO_WIDTH_SPACE:String.fromCharCode(8203),ELLIPSIS:"\u2026",NDASH:"\u2013",GREATER_THAN_OR_EQUAL_TO:String.fromCharCode(8805),LESS_THAN:String.fromCharCode(60),LESS_THAN_OR_EQUAL_TO:String.fromCharCode(8804),PERCENT:String.fromCharCode(37),LTR_DIRECTION:"\u200E",RTL_QUESTION_SIGN:"\u2E2E"};var Go={SPAN:"SPAN",DIV:"DIV",SVG:"SVG",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",UL:"UL",OL:"OL",LI:"LI",P:"P",BR:"BR",B:"B",STRONG:"STRONG",I:"I",EM:"EM",A:"A",U:"U",S:"S",STRIKE:"STRIKE",SUP:"SUP",SUB:"SUB",IMG:"IMG",IFRAME:"IFRAME",BLOCKQUOTE:"BLOCKQUOTE",Q:"Q",FIGURE:"FIGURE",FIGCAPTION:"FIGCAPTION",LINK:"LINK",CANVAS:"CANVAS",INPUT:"INPUT",BUTTON:"BUTTON",TABLE:"TABLE",TD:"TD",HR:"HR",PRE:"PRE",CODE:"CODE"};function H_(e){return e`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m4 6 4 4 4-4" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function U_(e){return e`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 10 8 6l-4 4" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function W_(e,{createControl:t,createPopover:o,opened:r,setOpened:n,useControlWidth:i=!1,offset:a,suppressOpenOnElementClick:s,keepOpenedOnAnchorMove:c,side:l,align:m}){let p=M();return $_({html:e,elementRef:p,createPopover:o,opened:r,setOpened:n,prepareList:f=>{if(i){let d=W(p.current.clientWidth);f.style.minWidth=d,f.style.maxWidth=d,f.style.width=d}},offset:a,suppressOpenOnElementClick:s,keepOpenedOnAnchorMove:c,side:l,align:m}),be(e,t(),p)}function G_(e,t){let o=t.state=="pressed";return W_(e,{...t,createControl:()=>g(je,{...t.chevron?Zw(t,o):t,onClick:()=>{t.onClick&&t.onClick(),t.setState(o?"default":"pressed")}}),createPopover:t.createPopover,opened:o,setOpened:r=>t.setState(r?"pressed":"default"),suppressOpenOnElementClick:!0})}function Zw(e,t){switch(e.structure){case"icon":case"iconAndTextAndIcon":case"textAndIcon":return e;case"iconAndText":return{...e,structure:"iconAndTextAndIcon",iconLeft:e.icon,iconRight:q_(t)};case"text":return{...e,structure:"textAndIcon",icon:q_(t)};default:throw O(e),new Error}}function q_(e){return e?g(U_):g(H_)}var Xw=u({$:"$",group:"x10c7f__group"});function Y_(e,{buttons:t,size:o,spacing:r}){return e`
<div class=${Xw.group}>
	${e.renderAll(t,n=>n.withPopover?le(n.id,G_,{...n,size:o,spacing:r}):le(n.id,je,{...n,size:o,spacing:r}))}
</div>`}function j_({ref:e,onIntersect:t,onLeave:o,disabled:r=!1,threshold:n}){let i=te(t),a=te(o);P(()=>{if(r)return;let s=new IntersectionObserver(c=>{let l=a.current,m=i.current;c.some(p=>p.isIntersecting)?m&&m():l&&l()},{threshold:n});return s.observe(e.current),()=>s.disconnect()},[a,i,e,r,n])}function Jw({overlayRef:e,anchorRef:t,enabled:o,stayOnHover:r,onInstantlyShow:n,onDeferredShow:i,onInstantlyHide:a,onDeferredHide:s}){let c=te(n),l=te(s);G(t,"mouseenter",o?i:null),G(t,"mouseleave",o?r?s:a:null),ee(()=>{if(!o)return;let m=e.current,p=c.current,f=l.current;if(!(!r||!m||!p||!f))return m.addEventListener("mouseenter",p),m.addEventListener("mouseleave",f),()=>{m.removeEventListener("mouseenter",p),m.removeEventListener("mouseleave",f)}},[e.current,r])}function eE({hideDelay:e,appearDelay:t}){let[o,r]=ri(!1),n=w(()=>r(!1,0),[r]),i=w(()=>r(!1,e),[e,r]),a=w(()=>r(!0,0),[r]),s=w(()=>r(!0,t),[t,r]);return{opened:o,deferredShow:s,showInstantly:a,hideInstantly:n,deferredHide:i}}function Z_({overlayRef:e,anchorRef:t,stayOnHover:o,appearDelay:r,hideDelay:n}){let{opened:i,deferredShow:a,showInstantly:s,hideInstantly:c,deferredHide:l}=eE({appearDelay:r,hideDelay:n});return Jw({overlayRef:e,anchorRef:t,enabled:!0,stayOnHover:o,onInstantlyShow:s,onDeferredShow:a,onInstantlyHide:c,onDeferredHide:l}),{opened:i,hideInstantly:c,deferredHide:l}}var tE=500,oE=500;function _l({html:e,anchorRef:t,tooltipProps:o,side:r,align:n,offset:i,stayOnHover:a=!1,show:s=!0,appearDelay:c=tE,hideDelay:l=oE}){let m=E(),{opened:p,hideInstantly:f}=Z_({overlayRef:m,anchorRef:t,stayOnHover:a,appearDelay:c,hideDelay:a?l:0});return m.current=sx({html:e,anchorRef:t,tooltipProps:p&&s?o:null,side:r,align:n,offset:i,onClose:f}),bc(p&&s?t.current:null,f),m.current}function X_(e){let t=()=>e.current.scrollTop;return{onScroll:Et(),getDomObject:()=>e.current,getRelativeElementOffset:o=>{let r=e.current,n=r.getBoundingClientRect(),i=o.getBoundingClientRect();return{x:r.scrollLeft+i.left-n.left,y:r.scrollTop+i.top-n.top}},getScrollLeft:()=>e.current.scrollLeft,getScrollTop:t,getClientWidth:()=>e.current.clientWidth,getClientHeight:()=>e.current.clientHeight,getMaxScrollX:()=>e.current.scrollWidth-e.current.clientWidth,getMaxScrollY:()=>e.current.scrollHeight-e.current.clientHeight,scroll:(o,r,n)=>{e.current.scrollTo({top:r,left:o,behavior:n})},scrollBy:(o,r)=>e.current.scroll(e.current.scrollLeft+o,e.current.scrollTop+r)}}function J_(e,t,o,r){if(t<0&&e==0||t>0&&e==o-1||t==0)return e;let n=Xg(t),i=l=>l+n;t=Math.abs(t);let a=e,s=r(i(a)),c=s/2;for(;c<t&&a<o&&a>=0;)c+=s/2,a=i(a),a>0&&a<o-1&&(s=r(i(a)),c+=s/2);return Ct(a,0,o-1)}function eS({items:e,listRef:t,deps:o=[]}){let r=E(new Map);return P(()=>{let n=new ResizeObserver(()=>{let i=t.current.children;for(let a=0;a<i.length;++a){let s=i[a];if(s instanceof HTMLElement){let c=window.getComputedStyle(s),l=parseInt(c.marginTop,10)||0,m=parseInt(c.marginBottom,10)||0,p=l+s.offsetHeight+m;r.current.set(e[a],p)}}});return Array.from(t.current.children).forEach(i=>{n.observe(i)}),()=>{n.disconnect()}},[r,e,t,...o]),r}var tS=15,oS={current:window};function rE({items:e,item:t,heightsMapRef:o,gap:r}){var i;let n=0;for(let a of e){if(a===t)break;n+=((i=o.current.get(a))!=null?i:0)+r}return n}function nE(e,t,o){let r=e[t],n=e.slice();return t<o?(n.splice(o+1,0,r),n.splice(t,1)):(n.splice(t,1),n.splice(o,0,r)),n}function rS({scrollController:e,listRef:t,draggedItemRef:o,items:r,getItemId:n,onItemsChange:i,gap:a=0,deps:s=[]}){let c=eS({items:r,listRef:t,deps:s}),[l,m]=z(()=>null),p=E(!1),f=E(0),d=w(k=>e.getDomObject()instanceof Window?k:k+e.getScrollTop(),[e]),x=te(n),_=w((k,S,C)=>{S.preventDefault();let y=r.findIndex(ye=>x.current(ye)===k);if(y===-1)throw new Error("invalid dragged item id");let v=r[y],D=t.current,A=B(window.getComputedStyle(D)),$=parseInt(A.paddingTop,10)||0,H=parseInt(A.paddingBottom,10)||0,oe=$+rE({items:r,item:v,heightsMapRef:c,gap:a});m({item:v,startIndex:y,startOffset:oe,startMouseY:d(S.pageY),listOffset:e.getRelativeElementOffset(D).y,listPaddingTop:$,listPaddingBottom:H,currItems:r,currIndex:y,onDragEnd:C}),p.current=!0},[r,t,c,a,d,e,x]);return G(oS,"pointermove",l?k=>{var H;if(!p.current)return;k.preventDefault();let S=t.current,C=o.current,y=d(k.pageY)-l.startMouseY,v=(H=c.current.get(l.item))!=null?H:0,D=Ct(l.startOffset+y,l.listPaddingTop,S.offsetHeight-l.listPaddingBottom-v);C.style.top=W(D);let A=l.listOffset+D;A<e.getScrollTop()&&f.current>D?e.scrollBy(0,-tS):A+v>e.getScrollTop()+e.getClientHeight()&&f.current<D&&e.scrollBy(0,+tS),f.current=D;let $=J_(l.startIndex,D-l.startOffset,r.length,oe=>{var ye;return((ye=c.current.get(r[oe]))!=null?ye:0)+a});$!==l.currIndex&&m(oe=>({...B(oe),currItems:nE(l.currItems,l.currIndex,$),currIndex:$}))}:null),G(oS,"pointerup",l?()=>{let k=l.currIndex===l.startIndex?null:l.currItems;k&&i(k,l.item),m(null),p.current=!1,l.onDragEnd&&l.onDragEnd()}:null),{renderItems:l?l.currItems:r,renderIndex:l&&l.currIndex,startIndex:l&&l.startIndex,startOffset:l&&l.startOffset,startDrag:_,isDragging:!!l}}var Uf=tt({});function Sl(){return ae(Uf)}var nS=u({$:"$",container:"xdf1e8__container",draggedItem:"xdf1e8__dragged-item"});function kl(e,{items:t,getItemId:o,onItemsChange:r,getItemBinding:n,scrollController:i,gap:a,autotestData:s}){let c=M(),l=M(),{renderItems:m,renderIndex:p,startIndex:f,startOffset:d,startDrag:x,isDragging:_}=rS({scrollController:i,listRef:c,draggedItemRef:l,items:t,getItemId:o,onItemsChange:r,gap:a});return e.setContext(Uf,x),e`
<div
	save-ref=${c}
	class=${nS.container}
	data-at=${X(s)}
>
	${e.renderAll(m,(k,S)=>n(k,S,p===S?"hidden":"normal",_))}
	${e.renderIf(iE,()=>p!==null&&d!==null&&f!==null&&{ref:l,binding:n(t[f],p,"dragged",_).binding,startOffset:d})}
</div>
`}function iE(e,{ref:t,binding:o,startOffset:r}){return ee(()=>{t.current.style.top=W(r)},[t,r]),e`
<div
	save-ref=${t}
	class=${nS.draggedItem}
>
	${e(o)}
</div>`}function _i(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 4a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm0 6a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm1.5 7.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM11 4a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm0 6a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm1.5 7.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" fill="currentColor"/></svg>
`}function iS(e){return e`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m3 9 3 3 7-8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}var Fa=u({$:"$",wrapper:"x7d86a__wrapper",wrapper_size_small:"x7d86a__wrapper_size_small",wrapper_size_medium:"x7d86a__wrapper_size_medium",wrapper_size_large:"x7d86a__wrapper_size_large",wrapper_disabled:"x7d86a__wrapper_disabled",checkbox:"x7d86a__checkbox",input:"x7d86a__input",checkbox_size_small:"x7d86a__checkbox_size_small",checkbox_size_medium:"x7d86a__checkbox_size_medium",checkbox_size_large:"x7d86a__checkbox_size_large",checkbox_indeterminate:"x7d86a__checkbox_indeterminate",wrapper_hovered:"x7d86a__wrapper_hovered",checkIcon:"x7d86a__check-icon",indeterminate:"x7d86a__indeterminate"});function aE(e){return e`
<div class=${Fa.indeterminate}></div>`}function aS(e,{id:t,checked:o,size:r,onCheckedRequest:n,disabled:i=!1,hovered:a=!1,onFocusedChange:s,autotestData:c}){let l=M(),m=ur(),p=w(d=>{d.preventDefault(),n(!o,d)},[o,n]);ee(()=>{m.current.checked=!!o},[m,o]),G(m,"click",d=>{d.defaultPrevented||p(d)}),G(l,"click",d=>{!i&&!d.defaultPrevented&&p(d)}),yo(m,{onFocusedChange:s});let f=o===null;return e`
<div
	class=${Fa.wrapper.withMods({disabled:i,size:r,hovered:a})}
	save-ref=${l}
>
	<div
		class=${Fa.checkbox.withMods({size:r,indeterminate:f})}
	>
		<input
			id=${t}
			save-ref=${m}
			type="checkbox"
			class=${Fa.input}
			disabled=${i}
			data-at=${X(c)}
		>
		${e.switch(()=>o?g(iS,{},Fa.checkIcon):f?g(aE,{}):null)}
	</div>
</div>`}function sS(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 10a2 2 0 1 0 4 0 2 2 0 0 0-4 0zm6 0a2 2 0 1 0 4 0 2 2 0 0 0-4 0zm8 2a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill="currentColor"/></svg>
`}var Wf=new WeakMap,cS=(e,t)=>{let[,o]=z(()=>({})),r=E(),n=ya(t);return(!n||!co(n,t))&&(r.current=e()),Wf.has(o)||Wf.set(o,i=>{r.current=i,o({})}),[r.current,Wf.get(o)]};function lS(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#System20dpEyeClosed__a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.731 7.704c-.259.273-.53.529-.808.772-.172.153-.352.293-.531.435-.076.059-.148.125-.225.183l.819 1.031a1.04 1.04 0 0 1-.116 1.411.916.916 0 0 1-1.338-.123l-1.013-1.274a11.718 11.718 0 0 1-4.566 1.331v1.537c0 .554-.425 1.003-.949 1.003-.525 0-.949-.449-.949-1.003V11.47a11.728 11.728 0 0 1-4.567-1.331l-1.012 1.274a.915.915 0 0 1-1.337.123 1.038 1.038 0 0 1-.117-1.411l.819-1.031c-.077-.058-.149-.123-.224-.183-.179-.142-.36-.282-.532-.435a11.96 11.96 0 0 1-.807-.772 1.04 1.04 0 0 1 0-1.417.913.913 0 0 1 1.342 0c1.973 2.081 4.594 3.228 7.384 3.228 2.789 0 5.411-1.147 7.384-3.228a.914.914 0 0 1 1.343 0c.37.391.37 1.026 0 1.417z" fill="currentColor"/></g><defs><clipPath id="System20dpEyeClosed__a"><path fill="#fff" transform="translate(1 6)" d="M0 0h18v8H0z"/></clipPath></defs></svg>
`}function mS(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.68 7.797a1 1 0 0 1-1.36 1.466c-3.283-3.05-6.345-3.568-8.832-3.125-2.55.453-4.625 1.942-5.78 3.099a1 1 0 0 1-1.415-1.414C2.637 6.48 5.063 4.716 8.137 4.17c3.138-.558 6.826.174 10.544 3.628zM8 11.03a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm2-4a4 4 0 1 0 0 8 4 4 0 0 0 0-8z" fill="currentColor"/></svg>
`}var sE=u({$:"$",counter:"x3a7bc__counter"});function pS(e,{maxCount:t,count:o}){return e`
<div class=${sE.counter}>
	${`${o}/${t}`}
</div>`}function qf(e,{component:t,tooltipText:o,size:r,stayOnHover:n,show:i,side:a,align:s,isPreventDefaultClick:c}){let l=E();return It({html:e,elementRef:l,text:o,size:r,stayOnHover:n,show:i,side:a,align:s,isPreventDefaultClick:c}),be(e,t,l)}function uS(e){switch(e){case"bash":return"Bash";case"c":return"C";case"cpp":return"C++\u200E";case"csharp":return"C#\u200E";case"css":return"CSS";case"dart":return"Dart";case"delphi":return"Delphi";case"diff":return"Diff";case"go":return"Go";case"groovy":return"Groovy";case"html":return"HTML";case"ini":return"Ini";case"java":return"Java";case"javascript":return"Javascript";case"json":return"Json";case"kotlin":return"Kotlin";case"latex":return"Latex";case"less":return"Less";case"lua":return"Lua";case"makefile":return"Makefile";case"markdown":return"Markdown";case"matlab":return"Matlab";case"objectivec":return"Objective C";case"pascal":return"Pascal";case"perl":return"Perl";case"php":return"Php";case"php-template":return"Php Template";case"plaintext":return"PlainText";case"python":return"Python";case"python-repl":return"Python repl";case"r":return"R";case"ruby":return"Ruby";case"rust":return"Rust";case"scss":return"SCSS";case"shell":return"Shell";case"sql":return"Sql";case"swift":return"Swift";case"typescript":return"Typescript";case"vbnet":return"VBNet";case"xml":return"XML";case"yaml":return"YAML";default:return O(e,`unknown code language: "${e}"`),""}}var Oa="#",ko={[Oa]:Oa},fS=1,dS=2,gS=4,hS=8,yS=16,So={FONT_SIZE:2,FONT_COLOR:3,TEXT_HIGHLIGHT_COLOR:4,TEXT_HIGHLIGHT_OPACITY:5,ALIGNMENT:6},xS="#";function Yo(e){return e===xS}function Cl(e){let t=e;if(t&&t.style&&t.url!==void 0){let o=[...t.style],r=t.url,n=[],i=null,a=null,s=null,c=null,l=null;if(o.length){let m=0;for(let p of o)switch(p.name){case"bold":m|=fS;break;case"italic":m|=dS;break;case"underline":m|=gS;break;case"strikethrough":m|=hS;break;case"code":m|=yS;break;case"alignment":l=p.type;break;case"fontSize":i=p.size;break;case"fontColor":a=p.color;break;case"textHighlightColor":s=p.color;break;case"textHighlightOpacity":c=p.opacity;break}n.push(m)}r&&n.push(r),i&&(n[So.FONT_SIZE]=i),a&&(n[So.FONT_COLOR]=a),s&&(n[So.TEXT_HIGHLIGHT_COLOR]=s),c&&(n[So.TEXT_HIGHLIGHT_OPACITY]=c),l&&(n[So.ALIGNMENT]=l);for(let m=0;m<n.length;m++)n[m]==null&&(n[m]=xS);return{[Oa]:n}}}function Si(e){if(typeof e=="object"&&e&&e.hasOwnProperty(Oa)){let t=e[Oa],o=[],r=t.length&&!Yo(t[0])&&typeof t[0]=="number"&&!isNaN(t[0])?t[0]:void 0,n=t.length&&!Yo(t[0])&&so(t[0])?t[0]:t.length>1&&!Yo(t[1])&&so(t[1])?t[1]:void 0,i=t[So.FONT_SIZE],a=t[So.FONT_COLOR],s=t[So.TEXT_HIGHLIGHT_COLOR],c=t[So.TEXT_HIGHLIGHT_OPACITY],l=t[So.ALIGNMENT];return!Yo(r)&&typeof r=="number"&&!isNaN(r)&&(r&fS&&o.push({name:"bold"}),r&dS&&o.push({name:"italic"}),r&gS&&o.push({name:"underline"}),r&hS&&o.push({name:"strikethrough"}),r&yS&&o.push({name:"code"})),!Yo(i)&&(typeof i=="number"||i==="auto")&&o.push({name:"fontSize",size:i}),!Yo(a)&&so(a)&&o.push({name:"fontColor",color:a}),!Yo(s)&&so(s)&&o.push({name:"textHighlightColor",color:s}),!Yo(c)&&typeof c=="number"&&!isNaN(c)&&o.push({name:"textHighlightOpacity",opacity:c}),!Yo(l)&&(l==="superscript"||l==="subscript")&&o.push({name:"alignment",type:l}),ne.create({style:Re.create(o),url:n})}}var Ft={crop:{_:"cp",top:"tp",left:"lf",right:"rt",bottom:"bm"}};var Co={src:"s",editedSrc:"eS",width:"w",height:"h",...Ft,clip:"cl"};var La={color:"c",opacity:"o"},bl={src:"s",width:"w",height:"h",overlay:{_:"o",...La},...Ft},Gf={...bl,...Co},Bl={type:"t",image:{_:"i",...bl},overlay:{_:"O",...La},...La},Yf={...Bl,image:{_:"i",...Gf}};var _S={_:"ds",background:{_:"b",color:"c",opacity:"o"},paddingTop:"pt",paddingBottom:"pb"},jf={_:"ds",background:{_:"bg",color:{_:"cl",color:"c",opacity:"o"},mediaResource:{_:"mr",type:"t",resource:{_:"rs",src:"s",width:"w",height:"h",...Ft},position:{_:"p",x:"x",y:"y"},overlay:{_:"k",...La}}},padding:{_:"p",bottom:"pb",top:"pt"},size:{_:"s",minHeight:"mh"}},Ka={...jf,indent:"it"},SS={...Ka,background:{...Ka.background,mediaResource:{...Ka.background.mediaResource,resource:{_:"rs",...Co}}}};var rt={key:"k",type:"t"},ue={key:"k",type:"t",designSettings:{..._S}},ke={key:"k",type:"t",designSettings:{...jf}},he={key:"k",type:"t",designSettings:{...Ka}},_e={key:"k",type:"t",designSettings:{...SS}};var Ee={...rt,src:"s",fileName:"fn",fileExtension:"fe",fileSize:"fs",isLoading:"iL"},ro={...Ee,...ue},dn={...Ee,...ke},$a={...dn,...he},kS={...$a,..._e};var Ot={text:"t",meta:{_:"m",...ko},length:"l"};var CS={defaultCharactersMeta:{_:"dCM",textStyles:{_:"tS",bold:"b",italic:"i",underline:"u",strikethrough:"s",alignment:"a",fontSize:"fs",fontColor:"fc",textHighlightColor:"thc",textHighlightOpacity:"tho"}}},ki={defaultCharactersMeta:{_:"dCM",textStyles:{_:"tS",bold:"b",italic:"i",underline:"u",strikethrough:"s",code:"c",alignment:"a",fontSize:"fs",fontColor:"fc",textHighlightColor:"thc",textHighlightOpacity:"tho"}}};var fe={...rt,viewType:"v",textAlign:"tA",characters:{_:"c",...Ot},isOrderedListFirstItem:"iO"},Qe={...fe,...ue},ut={...Qe,...CS},He={...ut,...ki},Le={...He,...ke},Ye={...he,...ki,viewType:"v",textAlign:"tA",characters:{_:"c",...Ot}},xt={...Ye,..._e};var Ci={...ue,paragraph:{_:"p",...He},language:"l",fontSize:"fz"},bo={...ke,paragraph:{_:"p",...Le},language:"l",fontSize:"fz"},Mr={...bo,...he,paragraph:{_:"p",...Ye}},vl={...Mr,..._e,paragraph:{_:"p",...xt}};var bS={enabled:"e"};function bi(e){return e?{...bS,value:{_:"v",...e}}:bS}var Bi={...bi(Ot)};var BS={type:"t"};var vS={...bi({})};var TS={radius:"rd"};var DS={...bi()};var Ar={...rt,src:"s",width:"w",height:"h",alignment:"a",characters:{_:"c",...Ot},isBlob:"iB"},vi={...Ar,...ue},wS={...Ar,...ke},Zf={src:"s",width:"w",height:"h",alignment:"a",isBlob:"iB",caption:{_:"ca",...Bi},zoom:{_:"z",...DS},link:{_:"l",...vS},...Ft,...ke},ES={...Zf,...Co,..._e,rounding:{_:"rn",...TS},frame:{_:"fr",...BS}};var cE={...Ar,parentCollageKey:"cK"},PS={...vi,parentCollageKey:"cK"},lE={parentCollageKey:"cK",...Zf},mE={parentCollageKey:"cK",...ES},Tl={...rt,alignment:"a",images:{_:"is",...cE,length:"l"}},Fe={...Tl,images:{...Tl.images,...Ft}},_t={...Fe,...ue,images:{...Fe.images,...PS}},Bo={...Fe,...ke,images:{...Fe.images,...PS}},za={...Bo,...he},Na={...za,...he,images:{_:"is",...lE,length:"l"}},Dl={...Na,..._e,images:{_:"is",...mE,length:"l"}};var pE={...ue,paragraph:{_:"p",...Qe},continueColor:{_:"cC",color:"c",opacity:"o"},meta:{_:"m",name:"n",data:{_:"md",...ko}}},Xf={...pE,paragraph:{_:"p",...ut}},Qa={...Xf,paragraph:{_:"p",...He}},gn={...Qa,...ke,paragraph:{_:"p",...Le}},Ha={...gn,...he,paragraph:{_:"p",...Ye}},Jf={...Ha,..._e,paragraph:{_:"p",...xt}},Ti=Jf;var jo={...rt,alignment:"a",dividerType:"dT",dividerColor:{_:"dC",color:"c",opacity:"o"},style:"st",paragraph:{_:"p",...fe},paragraphStyle:"pS",meta:{_:"m",name:"n",data:{_:"md",...ko}}},Zo={...jo,...ue,paragraph:{_:"p",...Qe}},Ua={...Zo,paragraph:{_:"p",...ut}},hn={...Ua,paragraph:{_:"p",...He}},vo={...hn,...ke,paragraph:{_:"p",...Le}},Vr={...vo,...he,paragraph:{_:"p",...Ye}},wl={...Vr,..._e,paragraph:{_:"p",...xt}};var Pe={...rt,src:"s",width:"w",height:"h",alignment:"a",characters:{_:"c",...Ot}},St={...Pe,...ue},To={...Pe,...ke},El={...To,...he},Wa={...he,src:"s",width:"w",height:"h",alignment:"a",caption:{_:"ca",...Bi}},Pl={...Wa,..._e};var ed={type:"t",image:{_:"i",...bl},text:{_:"rt",...fe},verticalTextAlign:"vta",background:{_:"b",...Bl}},td={...ed,meta:{_:"m",name:"n",data:{_:"md",...ko}}},od={...td,text:{_:"rt",...Qe}},rd={...od,text:{_:"rt",...ut}},nd={...rd,text:{_:"rt",...He}},id={...nd,text:{_:"rt",...Le}},ad={...id,text:{_:"rt",...Ye}},RS={...ad,image:{_:"i",...Gf},background:{_:"b",...Yf},text:{_:"rt",...xt}},Or={key:"k",frontSide:{_:"fs",...ed},backSide:{_:"bs",...ed}},uE={...Or,frontSide:{_:"fs",...td},backSide:{_:"bs",...td}},fE={...Or,frontSide:{_:"fs",...od},backSide:{_:"bs",...od}},dE={...Or,frontSide:{_:"fs",...rd},backSide:{_:"bs",...rd}},gE={...Or,frontSide:{_:"fs",...nd},backSide:{_:"bs",...nd}},hE={...Or,frontSide:{_:"fs",...id},backSide:{_:"bs",...id}},yE={...Or,frontSide:{_:"fs",...ad},backSide:{_:"bs",...ad}},xE={...Or,frontSide:{_:"fs",...RS},backSide:{_:"bs",...RS}},Rl={key:"k",type:"t",cardsBlockMap:{_:"cbm",order:{_:"o",length:"l"},blocks:b({_:"B",...Or})},maxCardsInRow:"mcir",cardsLayout:"cl",background:{_:"b",...Bl}},no={...Rl,cardsBlockMap:{...Rl.cardsBlockMap,blocks:b({_:"B",...uE})}},Fr={...no,...ue,cardsBlockMap:{...no.cardsBlockMap,blocks:b({_:"B",...fE})}},qa={...Fr,cardsBlockMap:{...Fr.cardsBlockMap,blocks:b({_:"B",...dE})}},Ga={...qa,cardsBlockMap:{...qa.cardsBlockMap,blocks:b({_:"B",...gE})}},Do={...Ga,...ke,cardsBlockMap:{...qa.cardsBlockMap,blocks:b({_:"B",...hE})}},Il={...Do,...he,cardsBlockMap:{...Do.cardsBlockMap,blocks:b({_:"B",...yE})}},IS={...Do,..._e,cardsBlockMap:{...Do.cardsBlockMap,blocks:b({_:"B",...xE})},background:{_:"b",...Yf}};var yn={characters:{_:"c",...Ot},listType:"lT",listViewType:"lVT",counterReset:"cR",...ki,...he},Ml={characters:{_:"c",...Ot},listType:"lT",listViewType:"lVT",counterReset:"cR",...ki,..._e};var Ht={key:"k",type:"t",characters:{_:"c",...Ot},noteType:"nT"},Ya={...Ht,customIconColor:{_:"cIC",color:"c",opacity:"o"},customBackgroundColor:{_:"cBC",color:"c",opacity:"o"}},ft={...Ya,...ue},wo={...ft,...ke},Lr={...wo,...he},Al={...Lr,..._e};var Bt={url:"u",title:"tl",description:"dsc",iconSrc:"icS",imageSrc:"imS",...ue},Eo={...Bt,...ke},Po={...Eo,...he},MS={...Po,..._e};var AS={...rt,src:"s",width:"w",height:"h",alignment:"a",isLoading:"iL",posterSrc:"pSc",paragraph:{_:"p",...fe}},Xo={...ue,src:"s",width:"w",height:"h",alignment:"a",isLoading:"iL",posterSrc:"pSc",paragraph:{_:"p",...Qe}},ja={...Xo,paragraph:{_:"p",...ut}},xn={...ja,paragraph:{_:"p",...He}},Ro={...xn,...ke,paragraph:{_:"p",...Le}},Vl={...Ro,...he,paragraph:{_:"p",...Ye}},Za={...he,src:"s",width:"w",height:"h",alignment:"a",isLoading:"iL",posterSrc:"pSc",caption:{_:"ca",...Bi}},Fl={...Za,..._e,paragraph:{_:"p",...xt}};var sd={...ue,alignment:"a",horizontalTextAlign:"hta",verticalBlockAlign:"vba",colsOrder:{_:"cO",length:"l"},colsMap:b({_:"cM",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Qe,...St,...ft,...Zo,...Xo,..._t,...Bt})}})},cd={...sd,colsMap:b({_:"cM",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...ut,...St,...ft,...Ua,...ja,..._t,...Bt})}})},Xa={...cd,colsMap:b({_:"cM",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...He,...St,...ft,...hn,...xn,..._t,...Bt,...Ci})}})},Ja={...Xa,...ke,layoutType:"lt",colsMap:b({_:"cM",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Le,...To,...wo,...vo,...Ro,...Bo,...Eo,...bo})}})},ld={...Ja,colsMap:b({_:"cM",width:"wh",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Le,...To,...wo,...vo,...Ro,...Bo,...Eo,...bo})}})},md={...ld,...he,layoutType:"lt",colsMap:b({_:"cM",width:"wh",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Ye,...El,...Lr,...Vr,...Vl,...za,...Po,...Mr,...yn})}})},pd={...md,colsMap:b({_:"cM",width:"wh",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Ye,...Wa,...Lr,...Vr,...Za,...Na,...Po,...Mr,...yn})}})},VS={...pd,..._e,colsMap:b({_:"cM",width:"wh",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...xt,...Pl,...Al,...wl,...Fl,...Dl,...MS,...vl,...Ml})}})};var Ol={src:"s",type:"t",width:"w",height:"h",title:"T",previewSrc:"p"},Ll={...Ol,...Ft},ud={...Ll,...Co};var Kl={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe})}},fd={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Qe})}},$l={blockMap:{...fd.blockMap,blocks:b({_:"B",...ut})}},dt={blockMap:{...$l.blockMap,blocks:b({_:"B",...He})}},FS={blockMap:{...$l.blockMap,blocks:b({_:"B",...Le})}};var OS={type:"t",answered:{_:"a",...dt},correct:{_:"c",...dt},incorrect:{_:"i",...dt}};var LS={shuffleAnswers:"s"};var zl={title:{_:"t",...dt},message:{_:"m",...dt},visibility:"v"};var _E={id:"i",text:{_:"t",...dt},correct:"c"},dd={caseSensitive:"cs",answers:{_:"a",id:"i",text:"t",length:"l"}},gd={id:"i",type:"t",description:{_:"d",...dt},length:"l",attachment:{_:"a",...Ol},settings:{_:"s",...LS},content:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",..._E}),...dd},feedback:{_:"f",...OS}},Di={intro:{_:"i",title:{_:"t",...dt},attachment:{_:"a",...Ol},description:{_:"d",...dt}},questions:{_:"q",order:{_:"o",length:"l"},blocks:b({_:"B",...gd})},results:{_:"r",displayType:"d",passed:{_:"p",...zl},failed:{_:"f",...zl},completed:{_:"c",...zl}}},KS={main:{_:"m",attempts:"a",passingScore:"ps",timeLimit:"tl",timeLimitEnabled:"tle",shuffleAnswersEnabled:"sae",shuffleQuestionsEnabled:"sqe",showCorrectAnswersEnabled:"scae"},design:{_:"d",accentColor:"ac",headerFont:"hf",contentFont:"cf"}};var hd={...gd,attachment:{_:"a",...Ll}},$S={...Di,intro:{...Di.intro,attachment:{_:"a",...Ll}},questions:{...Di.questions,blocks:b({_:"B",...hd})}},zS=KS;var NS=hd,QS=$S,HS={...zS,advanced:{_:"a",direction:"d"}};var US=NS,Nl=QS,yd=HS;var Ql=US,es={...Nl,intro:{...Nl.intro,visible:"v"},results:{...Nl.results,visible:"v"}},ts={...yd,main:{...yd.main,isGraded:"ig"}};var SE={...dd,answers:{_:"a",blocks:b({_:"b",id:"i",text:"t"}),order:{_:"o",length:"l"}}},kE={id:"i",text:{_:"t",...dt}},xd={id:"i",text:{_:"t",...dt}},CE={matches:{_:"ms",blocks:b({_:"b",id:"i",left:{_:"l",...xd},right:{_:"r",...xd}}),order:{_:"o",length:"l"}},distractors:{_:"ds",blocks:b({_:"b",...xd}),order:{_:"o",length:"l"}}},_d={...Ql,content:{...Ql.content,blocks:b({...Ql.content.blocks.keys,...kE}),...SE,...CE}},os={...es,questions:{...es.questions,blocks:b({_:"B",..._d})}},Hl={...ts,main:{...ts.main,showFeedbackEnabled:"sfe"}};var bE={..._d,attachment:{_:"a",...ud}},WS={...os,intro:{...os.intro,attachment:{_:"a",...ud}},questions:{...Di.questions,blocks:b({_:"B",...bE})}},Xte={...Hl};var Sd={...ue,longreadQuizId:"lqI",alignment:"a",isLoading:"iL",state:{_:"dt",...es},settings:{_:"ss",main:ts.main}},kd={...Sd,...ke},rs={...kd,state:{_:"dt",...os},settings:{_:"ss",main:Hl.main}},ns={...rs,...he},qS={...ns,..._e,state:{_:"dt",...WS}};function GS({styles:e,ignoreInlineStyles:t}){return t?ne.create({url:e.url}):e}function YS({characters:e,ignoreInlineStyles:t=!1}){if(e.length==0)return[];let o=[{text:e[0].text,styles:GS({styles:e[0].meta,ignoreInlineStyles:t})}];for(let r=1;r<e.length;++r){let n=e[r],i=GS({styles:n.meta,ignoreInlineStyles:t}),a=o.length-1,s=o[a].styles;ne.compare(i,s)?o[a].text+=n.text:o.push({text:n.text,styles:i})}return o}var jS={name:"n",color:"c",opacity:"o"},BE={...jS,data:{_:"md",...ko}},ZS={key:"k",content:{_:"C",...fe,...Ar},meta:{_:"m",...jS}},XS={...ZS,verticalTextAlign:"vta",meta:{_:"m",...BE}},JS={...XS,content:{_:"C",...Qe,...vi}},Cd={...JS,content:{_:"C",...ut,...vi}},vE={...Cd,content:{_:"C",...He,...vi}},ek={...Cd,content:{_:"C",...Le,...wS}},tk={...ek,content:{_:"C",...Ye}},TE={...tk,content:{_:"C",...xt}},DE={colsMap:b({_:"cM",...ZS})},wE={colsMap:b({_:"cM",...XS})},EE={colsMap:b({_:"cM",...JS})},PE={colsMap:b({_:"cM",...Cd})},RE={colsMap:b({_:"cM",...vE})},IE={colsMap:b({_:"cM",...ek})},ME={colsMap:b({_:"cM",...tk})},AE={colsMap:b({_:"cM",...TE})},is={...rt,alignment:"a",colsOrder:"cO",rowsOrder:"rO",rowsMap:b({_:"rM",...DE}),meta:{_:"m",name:"n"}},uo={...is,rowsMap:b({_:"rM",...wE})},_n={...uo,...ue,rowsMap:b({_:"rM",...EE})},bd={..._n,rowsMap:b({_:"rM",...PE})},as={...bd,rowsMap:b({_:"rM",...RE})},Sn={...as,...ke,rowsMap:b({_:"rM",...IE})},ss={...Sn,...he,rowsMap:b({_:"rM",...ME})},ok={...ss,..._e,rowsMap:b({_:"rM",...AE})};var VE=10,doe=VE*1024*1024,FE=["png","jpg","jpeg","gif"];function rk(){return FE.slice()}var OE="data-key",nk="data-wrapper-key";var yoe=[Go.P,Go.H1,Go.H2,Go.H3,Go.BLOCKQUOTE,Go.PRE];function ik(e,t=OE){for(;e.parentElement;){if(e.hasAttribute(t))return e;e=e.parentElement}return null}var Kr=(e,t,o)=>st(e,t,r=>{try{o(r)===!0&&r.preventDefault(),fh()||$u()}catch(n){V.error(n)}});var wi=class{constructor(){this._ids={}}generate(t){return $e(this._ids[t])?`${t}_${++this._ids[t]}`:(this._ids[t]=0,t)}};var Io=class e{constructor(t,o=null){this._block=t,this._element=o}className(){return this._element?`${this._block}__${this._element}`:this._block}getModifierClassName(t){return`${this.className()}_${t}`}getModifierWithValueClassName(t,o){return`${this.getModifierClassName(t)}_${o}`}createChildElementBemInfo(t){return B(!this._element),new e(this._block,t)}};function ak(e,t={}){let o=e.map(n=>n instanceof Io?n:new Io(n)),r=o.map(n=>n.className());for(let n of Object.keys(t)){let i=t[n];for(let a of o)i==null?r.push(a.getModifierClassName(n)):r.push(a.getModifierWithValueClassName(n,i))}return r.join(" ")}var sk=["h1","h2","h3"],ck=["blockquote","pullquote"];var kn={FULL:1180,MEDIUM:739};function Ul(){return window.innerWidth>kn.FULL}function Wl(){return window.innerWidth<=kn.FULL&&window.innerWidth>kn.MEDIUM}function $r(){return window.innerWidth<=kn.MEDIUM}function ql(e){let t=$r();return e<=15?"1.72":e<=21||e<=23&&!t?"1.68":e<=31&&t?"1.48":e<=31&&!t?"1.52":"normal"}var Mo=class{constructor({paragraph:t,bemInfo:o,blockBeforeType:r,blockAfterType:n,placeholder:i="",prompt:a="",paragraphIndex:s,direction:c,disableStyles:l=!1}){this._paragraph=t,this._direction=c,this._disableStyles=l,this.blockBeforeType=r||"",this.blockAfterType=n||"",this.paragraphIndex=s,this._isPrompt=!!a,this._className=this._getClassName(o),this.invertBold=sk.includes(this.type()),this.invertItalic=ck.includes(this.type()),this.renderId=t.key+t.viewType,this.placeholder=a||i}_getClassName(t){let o=t||new Io("paragraph"),r=`${o.className()}`;if(this._disableStyles||(r+=` ${o.getModifierClassName("with-styles")}`,r+=` ${o.getModifierWithValueClassName("type",this.type())}`),r+=` ${o.getModifierWithValueClassName("align",this.textAlign())}`,this._direction&&(r+=` ${o.getModifierWithValueClassName("dir",this._direction)}`),this._paragraph.characters.length===0){let n=this._isPrompt?"prompt":"empty";r+=` ${o.getModifierClassName(n)}`}return r}paragraph(){return this._paragraph}type(){return this._paragraph.viewType}textAlign(){return this._paragraph.textAlign}className(){return this._className}getLineHeightForFontSize(t){return ql(t)}getFontSize(t){if(t==="auto")throw Error("cannot set 'auto' font-size in default paragraph");return t}};var Gl={};function LE(e){return Gl[e]||(Gl[e]={}),Gl[e]}function KE(e){delete Gl[e]}function $E(e,t,o,r,n){if(!e)return null;let i=e.style,a={},s=new Set,c="",l=1;if(i.forEach(m=>{switch(m.name){case"bold":a["font-weight"]=o?"normal":"bold";break;case"italic":a["font-style"]=t?"normal":"italic";break;case"underline":s.add("underline");break;case"strikethrough":s.add("line-through");break;case"fontSize":{let p=r(m.size);a["font-size"]=W(p);let f=n(p);a["line-height"]=`${f}`;break}case"fontColor":a.color=`${m.color}`;break;case"textHighlightColor":{c=m.color;break}case"textHighlightOpacity":l=m.opacity;break;case"alignment":case"code":break;default:O(m)}}),e.url&&s.add("underline"),s.size&&(a["text-decoration"]=[...s].join(" ")),c&&c!==Xt){let[m,p,f]=we(c);a["background-color"]=`rgba(${m}, ${p}, ${f}, ${l})`}return a}function zE(e,t,o,r){return Pt(e,`:${t}`)`
<sup style=${r}>${{text:o}}</sup>`}function NE(e,t,o,r){return Pt(e,`:${t}`)`
<sub style=${r}>${{text:o}}</sub>`}function QE({rendererKey:e,id:t,text:o,textDecoration:r,alignment:n}){let i={"text-decoration":r};return n==="superscript"?zE(e,t,o,i):NE(e,t,o,i)}function mk({rendererKey:e,id:t,text:o,alignment:r,styles:n}){let i=r?n&&{...n,"text-decoration":null}:n,a=r?QE({rendererKey:e,id:t,text:o,alignment:r,textDecoration:n?n["text-decoration"]:""}):o;return{chunkStyles:i,content:a}}function lk(e){let{rendererKey:t,id:o,attributes:r={},className:n=null}=e,{content:i,chunkStyles:a}=mk(e),s=i instanceof Element?i:{text:i};return Pt(t,`:${o}`)`
<span
	style=${a}
	class=${n}
	data-richtext-inline-code=${r.richtextInlineCode||null}
>${s}</span>`}function HE(e){let{rendererKey:t,id:o,url:r,onOverHandler:n,attributes:i={},className:a=null}=e,{content:s,chunkStyles:c}=mk(e),l=s instanceof Element?s:{text:s};return Pt(t,`:${o}`)`
<a
	href=${r}
	target=_blank
	onmouseover=${n}
	class=${a}
	data-richtext-inline-code=${i.richtextInlineCode||null}
	style=${c}
>${l}</a>`}function Bd(e){return!!e&&ne.isInlineCodeMeta(e.styles)}function UE(e,t){let o,r,n=Bd(e[t-1]),i=Bd(e[t]),a=Bd(e[t+1]);return i&&(o=se("inline-code",i&&!n?"inline-code_start":null,i&&!a?"inline-code_end":null),r={richtextInlineCode:!0}),{className:o,attributes:r}}function Ei(e,t,o=!1,r=!1){let n=e.paragraph(),i=YS({characters:n.characters}),a=[],s=new wi,c=!1,l=LE(e.renderId);if(i.forEach((k,S)=>{let{className:C,attributes:y}=UE(i,S),v=$E(k.styles,e.invertItalic,e.invertBold,e.getFontSize.bind(e),e.getLineHeightForFontSize.bind(e)),D=s.generate(`${e.renderId}_${k.text}`),A=k.text;S==i.length-1&&A.endsWith(`
`)&&(A+=po.ZERO_WIDTH_SPACE);let $=Re.getAlignment(k.styles.style),H=k.styles.url;H&&(c=!0);let oe=H?HE({rendererKey:l,id:D,styles:v,text:A,url:H,alignment:$,onOverHandler:t,attributes:y,className:C}):lk({rendererKey:l,id:D,styles:v,text:A,alignment:$,attributes:y,className:C});a.push(oe)}),a.length)c&&KE(e.renderId);else{let k=s.generate(`${e.renderId}_empty`),S=lk({rendererKey:l,id:k,styles:null,text:po.ZERO_WIDTH_SPACE,alignment:null});a.push(S)}let m=`enter-blockquote-field-${e.paragraphIndex}`,p=`enter-paragraph-field-${e.paragraphIndex}`,f=r||o?null:e.placeholder,d=Pt(l,`:${e.renderId}`),x=e.className(),_=!r&&!o;switch(n.viewType){case"h1":return d`<h1 class=${x} data-key=${n.key} contenteditable=${_}>${a}</h1>`;case"h2":return d`<h2 class=${x} data-key=${n.key} contenteditable=${_}>${a}</h2>`;case"h3":return d`<h3 class=${x} data-key=${n.key} contenteditable=${_}>${a}</h3>`;case"blockquote":case"pullquote":return d`<blockquote class=${x} data-key=${n.key} data-at=${X(m)} contenteditable=${_}>${a}</blockquote>`}return d`
<p
	class=${x}
	data-key=${n.key}
	data-placeholder=${f}
	data-at=${X(p)}
	contenteditable=${_}
>${a}</p>`}var WE=u({$:"$",tooltipLink:"xd304d__tooltip-link"});function qE(e){let t={},o=[];return ne.hasStyle(e,"bold")&&(t["font-weight"]="bold"),ne.hasStyle(e,"italic")&&(t["font-style"]="italic"),ne.hasStyle(e,"underline")&&o.push("underline"),ne.hasStyle(e,"strikethrough")&&o.push("line-through"),o.length&&(t["text-decoration"]=o.join(" ")),t}function GE(e,{alignment:t,style:o,text:r}){return t==="superscript"?e`<sup style=${o}>${r}</sup>`:e`<sub style=${o}>${r}</sub>`}function pk(e,{style:t,text:o,alignment:r}){return r?GE(e,{alignment:r,text:o,style:t}):e`<span style=${t}>${o}</span>`}function YE(e,{style:t,text:o,url:r,urlTooltipEnabled:n,alignment:i}){let a=M();It({html:e,elementRef:a,text:{html:`<a href=${Au(r)} class=${WE.tooltipLink} target="_blank">${Au(r)}</a>`},size:"small",show:n,side:"bottom",stayOnHover:!0});let s=g(pk,{alignment:i,text:o,style:t});return e`<a href='${r}' save-ref=${a} target=_blank>${e(s)}</a>`}function jE(e,t,o){let r=qE(e.styles),n=Re.getAlignment(e.styles.style),i=e.styles.url,a=e.text;e.isLast&&a.endsWith(`
`)&&(a+=po.ZERO_WIDTH_SPACE);let s=t.generate(`chunk_${e.text}${i?"_url":"_text"}`);return i?le(s,YE,{style:r,text:a,url:i,urlTooltipEnabled:o,alignment:n}):le(s,pk,{style:r,text:a,alignment:n})}function ZE(e,t,o){t.length||t.push({text:po.ZERO_WIDTH_SPACE,styles:ne.create(),isLast:!0});let r=new wi;return e.renderAll(t,n=>jE(n,r,o))}function uk(e,{paragraph:t,placeholder:o="",className:r,autotestData:n,urlTooltipEnabled:i}){let a=K.getTextRuns(t),s=a.length?"":o,c=r&&s?r.split(" ").map(l=>`${l} ${l}_empty`).join(" "):r;return e`<p
	class=${c}
	data-key=${t.key}
	data-placeholder=${s}
	data-at=${X(n)}
>${ZE(e,a,i)}</p>`}var zr=u({$:"$",content:"xd3859__content",h1:"xd3859__h1",h2:"xd3859__h2",h3:"xd3859__h3",text:"xd3859__text",defaultParagraph:"xd3859__default-paragraph"});var pre={content:zr.content,h1:zr.h1,h2:zr.h2,h3:zr.h3,text:zr.text,ul:zr.text,ol:zr.text},fk=zr.defaultParagraph;function cs({html:e,side:t,component:o,closeOnOverlayClick:r,modalOverlayType:n,onBeforeClose:i}){let[a,s]=z(null),c=w(()=>{i&&i(),s(null)},[i]);return xi({html:e,side:t,createModal:()=>a&&g(o,a),close:r?()=>c():void 0,modalOverlayType:n}),I(()=>({open:s,close:()=>c()}),[c])}function dk(e,t,o=!1){let r=E({ref:e,select:t});P(()=>{let{ref:n,select:i}=r.current;if(i){n.current.focus({preventScroll:o});let a=n.current.value,s=i=="all"?0:a.length;n.current.setSelectionRange(s,a.length,"backward"),n.current.scrollLeft=0}},[o])}var ls=u({$:"$",textField:"x81fa5__text-field",textField_type_default:"x81fa5__text-field_type_default",textField_type_suffix:"x81fa5__text-field_type_suffix",textField_type_light:"x81fa5__text-field_type_light",input:"x81fa5__input",input_type_default:"x81fa5__input_type_default",input_password:"x81fa5__input_password",input_type_suffix:"x81fa5__input_type_suffix",input_type_light:"x81fa5__input_type_light",input_size_small:"x81fa5__input_size_small",input_size_medium:"x81fa5__input_size_medium",input_size_large:"x81fa5__input_size_large",input_size_xLarge:"x81fa5__input_size_xLarge",textField_error:"x81fa5__text-field_error",textField_disabled:"x81fa5__text-field_disabled",textField_focused:"x81fa5__text-field_focused",suffix:"x81fa5__suffix",eyeWrapper:"x81fa5__eye-wrapper",counter:"x81fa5__counter"});function XE(e,{value:t,onChange:o,onInput:r,onFocus:n,onBlur:i,onEnter:a,placeholder:s,state:c="normal",maxLength:l,selectionOnConnect:m,validation:p,type:f,inputType:d,size:x="medium",displayType:_,readOnly:k,autocomplete:S,preventScrollOnFocus:C,autotestData:y,onDisplayedValueChanged:v}){let D=ur(),A=E(!0),$=E(t),H=te(p),oe=w(()=>{if(!H.current||!H.current.onValidStateChange)return;let xe=H.current.validate(D.current.value);xe!=A.current&&(A.current=xe,H.current.onValidStateChange(xe,D.current.value))},[D,H]);ee(()=>{(D.current.value!==t||!t)&&(D.current.value=t,v(t),oe())},[D,t,oe,v]),P(()=>{p&&p.restoreOnSubmitInvalid==="value"&&!p.validate(t)&&console.error("ERROR: value is not valid")},[t,p]),G(D,"blur",()=>{if(p&&(p.onSubmitInvalid||p.restoreOnSubmitInvalid)&&!p.validate(D.current.value))switch(p.onSubmitInvalid&&p.onSubmitInvalid(D.current.value),p.restoreOnSubmitInvalid){case"value":D.current.value=$.current||"",v(D.current.value);break;case"focus":D.current.focus(),D.current.setSelectionRange(0,D.current.value.length);break}else $.current=D.current.value,o(D.current.value)}),G(D,"input",()=>{r&&r(D.current.value),p&&p.onValidStateChange&&oe(),v(D.current.value)}),G(D,"focus",()=>n&&n()),G(D,"blur",()=>i&&i()),yt(D,qe.ENTER,()=>{a&&a(),D.current.blur()}),dk(D,m,C);let ye=ls.input.withMods({size:x,type:_,password:f==="password"});return e`
<input
	type=${d}
	class=${ye}
	placeholder=${s}
	disabled=${c=="disabled"}
	maxlength=${l}
	readonly=${k}
	save-ref=${D}
	autocomplete=${S}
	data-at=${X(y)}
>`}function JE(e,{suffix:t}){return e`
<div class=${ls.suffix}>
	${t}
</div>
`}function eP(e,{showPassword:t,setShowPassword:o}){let r=E();G(r,"click",()=>o(!t));let n=t?g(mS,{}):g(lS,{});return e`
<div
	save-ref=${r}
	class=${ls.eyeWrapper}
>
	${e(n)}
</div>`}function gk(e,t){let{displayType:o,state:r}=t,[n,i]=z(!1),[a,s]=z(t.value.length),c=w(l=>s(l.length),[]);return e`
<div class=${ls.textField.withMods({type:o,focused:n,error:r=="error",disabled:r=="disabled"})}>
	${e(XE,{...t,onDisplayedValueChanged:c,inputType:t.type==="password"&&!t.showPassword?"password":"text",onFocus:()=>{t.onFocus&&t.onFocus(),i(!0)},onBlur:()=>{t.onBlur&&t.onBlur(),i(!1)}})}
	${e.renderIf(eP,()=>t.type==="password"&&{showPassword:t.showPassword,setShowPassword:t.setShowPassword})}
	${e.renderIf(JE,()=>t.displayType==="suffix"&&{suffix:t.suffix})}
	${e.renderIf(pS,()=>t.maxLength!==void 0&&t.displayType!=="suffix"&&{maxCount:t.maxLength,count:a},ls.counter)}
</div>`}function hk(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.5 4h-11A1.5 1.5 0 0 0 3 5.5v9A1.5 1.5 0 0 0 4.5 16h11a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 15.5 4zm-11-2A3.5 3.5 0 0 0 1 5.5v9A3.5 3.5 0 0 0 4.5 18h11a3.5 3.5 0 0 0 3.5-3.5v-9A3.5 3.5 0 0 0 15.5 2h-11zm.75 5.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm7.474 2.206a1 1 0 0 1 1.21.007l1.566 1.205V14.5h-11v-1.334l3.38-1.762a1 1 0 0 1 .908-.008L10 12l2.724-2.044z" fill="currentColor"/></svg>
`}function Nr(e){_l({...e,tooltipProps:{contentType:"text",text:e.text,type:e.type,size:e.size}})}function vd(e,{component:t,tooltipText:o,size:r,stayOnHover:n,show:i,side:a,align:s}){let c=E();return Nr({html:e,anchorRef:c,text:o,size:r,stayOnHover:n,show:i,side:a,align:s}),be(e,t,c)}function yk(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm9-7a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-7.65-3.15a1.35 1.35 0 1 1-2.7 0 1.35 1.35 0 0 1 2.7 0zM9 9.15a.85.85 0 0 0 0 1.7h.65v1.8h-1v1.7h3.7v-1.7h-1V10a.85.85 0 0 0-.85-.85H9z" fill="currentColor"/></svg>
`}var Td=u({$:"$",area:"x0f59e__area",button:"x0f59e__button",button_style_default:"x0f59e__button_style_default",button_style_dark:"x0f59e__button_style_dark",icon:"x0f59e__icon",button_size_xSmall:"x0f59e__button_size_xSmall",button_size_small:"x0f59e__button_size_small",button_size_medium:"x0f59e__button_size_medium",button_size_large:"x0f59e__button_size_large"});function xk(e,{onClick:t,style:o="default",icon:r=g(oi),size:n="small",autotestId:i}){function a(s){s.defaultPrevented||(s.preventDefault(),t())}return e`
<div
	class=${Td.area}
	onclick=${a}
	data-at=${X({[qh]:"OverlayButton",[ka]:i})}
>
	<button
		class=${Td.button.withMods({style:o,size:n})}
		onclick=${a}
	>
		${e(r,Td.icon)}
	</button>
</div>
`}var tP=u({$:"$",text:"x0bd83__text",text_multiline:"x0bd83__text_multiline"});function Yl(e,{text:t,maxLines:o,disableTooltip:r,direction:n,autotestData:i}){let a=M(),[s,c]=Jn(a,[t,o]);return It({html:e,elementRef:a,text:t,show:!r&&(s||c)}),ee(()=>{if(fc()){let{lineHeight:m}=window.getComputedStyle(a.current);a.current.setAttribute("style",`max-height: ${o*parseInt(m,10)}px;`)}else o>1&&a.current.setAttribute("style",`-webkit-line-clamp: ${o};`)},[o,a]),e`
<div
	save-ref=${a}
	class=${tP.text.withMods({multiline:o>1})}
	data-at=${X(i)}
	dir=${n}
>${t}</div>`}var oP=u({$:"$",badge:"x569ae__badge",badge_size_default:"x569ae__badge_size_default",badge_size_small:"x569ae__badge_size_small"}),rP=u({$:"$",badge:"x35e60__badge",badge_type_neutral:"x35e60__badge_type_neutral",badge_type_info:"x35e60__badge_type_info",badge_type_success:"x35e60__badge_type_success",badge_type_warning:"x35e60__badge_type_warning",badge_type_critical:"x35e60__badge_type_critical",badge_type_new:"x35e60__badge_type_new",badge_type_accent:"x35e60__badge_type_accent",icon:"x35e60__icon",text:"x35e60__text"}),nP=u({$:"$",badge:"x08c12__badge",badge_type_neutral:"x08c12__badge_type_neutral",badge_type_info:"x08c12__badge_type_info",badge_type_success:"x08c12__badge_type_success",badge_type_warning:"x08c12__badge_type_warning",badge_type_critical:"x08c12__badge_type_critical",badge_type_new:"x08c12__badge_type_new",badge_type_accent:"x08c12__badge_type_accent",icon:"x08c12__icon",text:"x08c12__text"}),iP=u({$:"$",badge:"x0a76c__badge",badge_size_default:"x0a76c__badge_size_default",badge_size_small:"x0a76c__badge_size_small",badge_type_neutral:"x0a76c__badge_type_neutral",icon:"x0a76c__icon",badge_type_info:"x0a76c__badge_type_info",badge_type_success:"x0a76c__badge_type_success",badge_type_warning:"x0a76c__badge_type_warning",badge_type_critical:"x0a76c__badge_type_critical",badge_type_new:"x0a76c__badge_type_new",badge_type_accent:"x0a76c__badge_type_accent",text:"x0a76c__text"});function _k(e,{type:t,size:o,style:r,text:n,icon:i,autotestData:a,direction:s}){let c=J(r,{primary:rP,secondary:nP,complementary:iP}),l=se(oP.badge.withMods({size:o}),c.badge.withMods({type:t,size:o}));return e`
<div
	class=${l}
	data-at=${X(a)}
	dir=${s}
>
	${e(i,c.icon)}
	${e(Zt,{text:n},c.text)}
</div>`}function Pi(e){e.stopPropagation()}function Ri(e){da(e,(t,o)=>{wt(t),delete e[o]})}function Sk({ref:e,enabled:t=!0,onDrag:o,onStart:r=()=>{},onEnd:n=()=>{}}){let i=te(o),a=te(r),s=te(n);P(()=>{if(!t)return;let c=e.current,l=null,m=null,p=Kr(c,"mousedown",f=>{f.preventDefault(),a.current(f),i.current(f),l=Kr(window,"mouseup",()=>{s.current(f),Ri([l,m])}),m=Kr(window,"mousemove",d=>{d.preventDefault(),i.current(d)})});return()=>Ri([l,p,m])},[t,i,s,a,e])}var Ck={"--font-display-large":"48px/56px var(--font-family, Roboto)","--font-display-medium":"40px/48px var(--font-family, Roboto)","--font-display-small":"32px/40px var(--font-family, Roboto)","--font-display-xlarge":"56px/64px var(--font-family, Roboto)","--font-header-large":"22px/30px var(--font-family, Roboto)","--font-header-medium":"20px/28px var(--font-family, Roboto)","--font-header-small":"18px/26px var(--font-family, Roboto)","--font-header-xlarge":"24px/32px var(--font-family, Roboto)","--font-header-xxlarge":"28px/36px var(--font-family, Roboto)","--font-text-large":"16px/22px var(--font-family, Roboto)","--font-text-medium":"14px/20px var(--font-family, Roboto)","--font-text-small":"13px/20px var(--font-family, Roboto)","--font-text-xlarge":"18px/26px var(--font-family, Roboto)","--font-text-xsmall":"12px/16px var(--font-family, Roboto)","--font-text-xxlarge":"20px/28px var(--font-family, Roboto)","--font-text-xxsmall":"10px/16px var(--font-family, Roboto)"};function bk(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m6.293 10.707 3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 0 0-1.414-1.414L11 10.586V3a1 1 0 1 0-2 0v7.586L7.707 9.293a1 1 0 0 0-1.414 1.414zM5 15a1 1 0 1 0-2 0v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 1 0-2 0v1H5v-1z" fill="currentColor"/></svg>
`}var aP=u({$:"$",input:"x644ca__input"});function jl(e,{browseRef:t,onChange:o,accept:r,multiple:n,autotestId:i}){let a=ur();ee(()=>{t.current=()=>a.current.click()},[t,a]);function s(){let l=a.current,m=l.files?[...l.files]:[];l.value="",o(m)}function c(l){l.stopPropagation()}return e`
<input
	save-ref=${a}
	class=${aP.input}
	type='file'
	accept=${r==null?void 0:r.join(", ")}
	multiple=${n}
	onchange=${s}
	onclick=${c}
	data-at=${X(i)}
>`}function Bk(){return E(()=>{})}var Ut=jy();var N=(e,t=o=>o)=>sP(e,t);function sP(e,t){let o=br(),r=te(t(e.get())),n=te(t);return P(()=>e.subscribe(i=>{let a=n.current(i);Object.is(a,r.current)||o()}),[r,n,e,o]),r.current}function Zl(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.52 2.729a1 1 0 1 0-1.944-.47l-.84 3.466a1 1 0 0 0 .622 1.171L7.4 8.036a1 1 0 0 0 .701-1.873l-.85-.319A5.75 5.75 0 1 1 4.5 10.75a1 1 0 1 0-2 0 7.75 7.75 0 1 0 3.674-6.591l.346-1.43z" fill="currentColor"/></svg>
`}var vk=u({$:"$",wrapper:"x49fc8__wrapper",wrapper_disabled:"x49fc8__wrapper_disabled",wrapper_size_small:"x49fc8__wrapper_size_small",wrapper_size_large:"x49fc8__wrapper_size_large",input:"x49fc8__input",input_size_small:"x49fc8__input_size_small",input_size_large:"x49fc8__input_size_large"});function Tk(e,{id:t,checked:o,onCheckedRequest:r,disabled:n=!1,size:i,onFocusedChange:a,autotestData:s}){let c=ur();ee(()=>{c.current.checked=o},[c,o]);function l(m){!m.defaultPrevented&&!o&&(m.preventDefault(),r())}return yo(c,{onFocusedChange:a}),e`
<div
	class=${vk.wrapper.withMods({disabled:n,size:i})}
	onclick=${n?void 0:l}
>
	<input
		save-ref=${c}
		class=${vk.input.withMods({size:i})}
		id=${t}
		type="radio"
		disabled=${n}
		onclick=${l}
		data-at=${X(s)}
	>
</div>`}function Dk(){let e=[];return{add(t){let o=e.length?e[0].state:null,r=t.state;if(o&&o.transactAction!=r.transactAction)throw new Error(`[model] states '${o.fullName}' and '${r.fullName}' belong to different models`);e.push(t)},commit(){for(;e.length;){let t=e.slice();e.length=0;let o=t[0].state.transactAction;Ut.dispatch(o(jg(t,r=>r.state.fullName,r=>r.setArg)))}}}}var Ii=null,Xl=0;function wk(){return Ii}function Ek(e){Xl==0&&!Ii&&(Ii=Dk()),++Xl;let t;try{e()}catch(o){t=o}if(--Xl,Xl==0&&Ii&&(t==null&&Ii.commit(),Ii=null),t!=null)throw t}function Rk({modelName:e,transactAction:t}){let o={},r=[];function n(l){if(o.hasOwnProperty(l))throw new Error(`[model ${e}] state '${l}' already defined`);return`${e}.${l}`}function i(l,m){let p=n(l),f=hf([p],m,()=>{});return o[l]=f,{get:()=>Ut.getState(f),subscribe:d=>Ut.subscribe(f,d),fullName:p,atom:f,transactAction:t}}function a(l,m){let p=n(l),f=Ic([`${p} [set]`]),d=hf([p],m,k=>{k(f,Pk),k(t,(S,C)=>C.hasOwnProperty(p)?Pk(S,C[p]):S)});o[l]=d;let x={get:()=>Ut.getState(d),subscribe:k=>Ut.subscribe(d,k),set:_,mutate:k=>_(S=>Ae(S,k)),fullName:p,atom:d,transactAction:t};function _(k){let S=wk();S?S.add({state:x,setArg:k}):Ut.dispatch(f(k))}return x}function s(l,m,p){let f=n(l),d=Mc(Zr(m,_=>_.atom)),x=Zy(f,d,p);return o[l]=x,{get:()=>Ut.getState(x),subscribe:_=>Ut.subscribe(x,_),fullName:f,atom:x,transactAction:t}}function c(l,m,p,f){let d=n(l),x=Mc(d,Zr(m,_=>_.atom));o[l]=x,r.push(()=>{if(f){let _=Ut.getState(x);p(_)}return Ut.subscribe(x,p)})}return{const:i,def:a,map:s,effect:c,subscribe:()=>{let l=Mc(o),m=Ut.subscribe(l,()=>{}),p=r.map(f=>f());return()=>{p.map(f=>f()),m()}}}}function Pk(e,t){return typeof t=="function"?t(e):t}var Dd={};function cP(e){return Dd[e]==null&&(Dd[e]=0),Dd[e]++}function Ik(e){let t=E(e),o=I(()=>{let r=t.current.parentModel,n=r?`${r.name}.${t.current.name}`:t.current.name,i=r?r.transactAction:Ic([Ue()]),a=Rk({modelName:`${n}#${cP(n)}`,transactAction:i}),s=t.current.getStates(a),c=t.current.getActions(s),l=t.current.defEffects;return l&&l(a,s,c),{name:n,states:s,actions:c,transactAction:i,subscribe:a.subscribe}},[]);return P(()=>o.subscribe(),[o]),o}function Mk(e){return Ik(e)}function Ak(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1H8zM6 4H3a1 1 0 0 0 0 2v10a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V6a1 1 0 1 0 0-2h-3a3 3 0 0 0-3-3H9a3 3 0 0 0-3 3zm9 12V6H5v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1zm-7-1a1 1 0 0 1-1-1V9a1 1 0 0 1 2 0v5a1 1 0 0 1-1 1zm3-1a1 1 0 1 0 2 0V9a1 1 0 1 0-2 0v5z" fill="currentColor"/></svg>
`}function Vk(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m5 7.5 5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function Jl({reducer:e,timingFn:t,duration:o,abortSignal:r,beforeAnimation:n,afterAnimation:i}){let a=Date.now(),s=!1,c=new $t;function l(){if(s)return;let p=Ct(Date.now()-a,0,o),f=t(p/o);e.animate(f),p<o?Yt(l):(i&&i(),r&&r.remove(m),c.dispatch(!0),Yt(()=>{e.complete()}))}n&&n(),Yt(l);function m(){s=!0,B(r).remove(m),c.dispatch(!1)}return r&&r.add(m),c}function em(e){return--e*e*e+1}function Fk(e,t){return e.top>t.top?"top":e.bottom<t.bottom?"bottom":"none"}function ms({setScrollValue:e,initialValue:t,delta:o,duration:r}){return o?Jl({duration:r,timingFn:em,reducer:{animate:i=>{e(t+o*i)},complete:()=>{},changedProperties:[]}}):null}function Mi({element:e,container:t,duration:o,scrollDirection:r,bounds:n,additionalOffset:i=0}){let a=e.getBoundingClientRect(),s=0;r==="top"&&n.top>a.top?s=a.top-n.top+i:r==="bottom"&&n.bottom<a.bottom&&(s=a.bottom-n.bottom+i),ms({initialValue:t.scrollTop,setScrollValue:c=>{t.scrollTop=c},delta:s,duration:o})}function Ok(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.212 1 .485.875 1.37 2.474a1 1 0 1 1-1.748.97l-.228-.412a2.5 2.5 0 1 0 3.5-1.582 1 1 0 0 1 .874-1.799 4.5 4.5 0 1 1-6.317 2.905l-.315.175a1 1 0 0 1-.97-1.75l2.474-1.37.875-.486zM2 6.5A1.5 1.5 0 0 1 3.5 5H7a1 1 0 0 0 0-2H3.5A3.5 3.5 0 0 0 0 6.5v8A3.5 3.5 0 0 0 3.5 18h10a3.5 3.5 0 0 0 3.5-3.5V13a1 1 0 0 0-2 0v1.5a1.5 1.5 0 0 1-1.5 1.5h-10A1.5 1.5 0 0 1 2 14.5v-8zm10.445 3.613a1 1 0 0 0-1.307-.092L8.5 12l-1.178-.587a1 1 0 0 0-.96.037L3.5 13.166V14.5h10v-3.332l-1.055-1.055zM4.75 10.5a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z" fill="currentColor"/></svg>
`}function Lk(e){return e.map(t=>`.${t}`)}function Kk(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{let o=st(document,"copy",r=>{r.clipboardData&&(r.clipboardData.setData("text/plain",e),r.preventDefault(),wt(o))});document.execCommand("copy")}}var wd=null,$k=null;function zk(e){wd=e}function Ne(e){if(!e.length||e.startsWith("data:")||e.startsWith("blob:"))return e;let t=e;return wd&&(t=`${wd}${e}`),$k&&(t=$k(t)),t}function mP(e,t){let o=e.width/t.width,r=e.height/t.height;return o>1||r>1?Math.max(o,r):1}function tm(e,t,o){let[r,n]=z(1),i=I(()=>ht(e),[e]),[a,s]=jt(t);return P(()=>{if(t.current){let c=t.current,l={width:o?o.width:c.clientWidth,height:o?o.height:c.clientHeight};n(mP(i,l))}},[t,i,o,a,s]),r}var Ed=u({$:"$",imageSelection:"xf3386__image-selection",imageContainer_origin:"xf3386__image-container_origin",imageContainer_fill:"xf3386__image-container_fill",image:"xf3386__image",image_decoration_none:"xf3386__image_decoration_none",image_decoration_border:"xf3386__image_decoration_border",image_decoration_shadow:"xf3386__image_decoration_shadow",image_radius_none:"xf3386__image_radius_none",image_radius_xsmall:"xf3386__image_radius_xsmall",image_radius_small:"xf3386__image_radius_small",image_radius_medium:"xf3386__image_radius_medium",image_radius_large:"xf3386__image_radius_large",image_radius_xlarge:"xf3386__image_radius_xlarge",image_radius_xxlarge:"xf3386__image_radius_xxlarge",image_radius_xxxlarge:"xf3386__image_radius_xxxlarge","image_with-zoom":"xf3386__image_with-zoom","image_with-link":"xf3386__image_with-link",imageContainer_backdrop:"xf3386__image-container_backdrop"});function pP(e){return e`
<img
	class=${Ed.imageSelection}
	src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="
	tabIndex="-1"
	aria-hidden=true
	draggable=false
/>
`}function uP(e,{image:t,onClick:o,withImageSelection:r,withSize:n,withZoom:i,withLink:a,withFullImageUrl:s,outContainerRef:c,containerLimit:l,isPlayer:m,decoration:p,radius:f}){let d=M(),x=I(()=>ht(t),[t]),_=tm(t,c,l),k=n?x.width/_:void 0,S=n?x.height/_:void 0,C=gx(t),y=s?t.src:Ne(t.src),v=Ed.image.withMods({"with-zoom":m&&!!i,"with-link":m&&!!a,radius:typeof f=="string"?f:"none",decoration:p!=null?p:"none"}),A={...k&&S?{width:`${k}px`,height:`${S}px`}:{},background:`url(${y}) no-repeat`,"background-size":`${C.width}% ${C.height}%`,"background-position":`${C.positionX}% ${C.positionY}%`};return e`
<div
	save-ref=${d}
	class=${v}
	style=${A}
	onclick=${o}
>
	${e.renderIf(pP,()=>r)}
</div>
`}function fP(e,{image:t,withSize:o,withBackdrop:r,withImageSelection:n,withZoom:i,withLink:a,withFullImageUrl:s,outContainerRef:c,containerLimit:l,className:m="",onClick:p,isPlayer:f,radius:d,decoration:x}){let _=M(),k=se(Ed.imageContainer.withMods({fill:!o,origin:!!o,backdrop:!!r}),m);return e`
<div class=${k} save-ref=${_}>
	${e(uP,{image:t,withZoom:i,withLink:a,withSize:o,withImageSelection:n,withFullImageUrl:s,onClick:p,outContainerRef:c!=null?c:_,containerLimit:l,isPlayer:f,radius:d,decoration:x})}
</div>
`}function Nk(e,{image:t,isPlayer:o=!1,...r}){let n=I(()=>{var a,s;return{...t,crop:(a=t.crop)!=null?a:sn(),clip:(s=t.clip)!=null?s:Br}},[t]),i={...r,image:n,isPlayer:o};return be(e,g(fP,i))}function Wt(e){var t;return(t=e.editedSrc)!=null?t:e.src}function Qk(e){return new URL(e).host.toLowerCase()}function dP(e,t){let o=t,r=[],n=e.path.map(i=>{let a=pi(o);if(a)return o=a,r.push(i),i;if(!so(i))return i;let{key:s,newKeys:c}=Kc(i,o,r);return r.push(s),o=c,s});return{...e,path:n,value:zt(e.value,o,r)}}function Hk(e,t){return e.map(o=>dP(o,t))}var Uk={type:"t",width:"w",height:"h",src:"s"},Wk={...Uk,...Ft},ps={...Wk,title:"tl",previewSrc:"pws"},gP={caseSensitive:"cs",answers:{_:"a",key:"k",text:"t",length:"l"}},hP=e=>({choices:{_:"ch",key:"k",content:{_:"c",...e},correct:"cr",length:"l"}}),yP=e=>({type:"t",correct:{_:"c",...e},incorrect:{_:"i",...e},answered:{_:"a",...e}}),Cn=(e,t)=>({_:"q",key:"k",type:"t",description:{_:"d",...e},attachment:{_:"a",...t},content:{_:"c",...hP(e),...gP},feedback:{_:"f",...yP(e)}}),us={...rt,settings:{_:"ss",includeInProgress:"iip",shuffleAnswers:"sa",showCorrectAnswers:"sca"},questions:Cn(Kl,Uk)},Pd={...us,questions:Cn(Kl,Wk)},Je={...Pd,questions:Cn(Kl,ps)},bn={...Je,questions:Cn(fd,ps),...ue},om={...bn,questions:Cn($l,ps),...ue},qk={...om,questions:Cn(dt,ps),...ue},Nae={...om,questions:Cn(FS,ps),...ue};var Gk={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Ar,...Pe,...Ee,...us})}},xP={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Gk}},_P={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Gk}},rm={intro:{_:"i",...xP},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",..._P})}},nm={main:{_:"m",navigationType:"nT",numberingEnabled:"nE",nextButtonEnabled:"nbE",copyingEnabled:"cE"},design:{_:"d",accentColor:"aC",headerFont:"hF",contentFont:"cF"}};var Yk={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Tl,...us})}},SP={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Yk}},kP={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Yk}},im={intro:{_:"i",...SP},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...kP})}},am=nm;var jk={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Fe,...Pd})}},CP={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...jk}},bP={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...jk}},sm={intro:{_:"i",...CP},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...bP})}},cm=am;var Zk={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Fe,...Je})}},BP={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Zk}},vP={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Zk}},lm={intro:{_:"i",...BP},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...vP})}},mm=cm;var Xk={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Fe,...Je,...Ht})}},TP={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Xk}},DP={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Xk}},pm={intro:{_:"i",...TP},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...DP})}},um=mm;var Jk={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Fe,...Je,...Ht,...is})}},wP={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Jk}},EP={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Jk}},Ai={intro:{_:"i",...wP},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...EP})}},fs=um;var fm=Ai,dm={...fs,main:{...fs.main,longreadType:"lT"}};var eC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Fe,...Je,...Ht,...is,...Rl})}},PP={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...eC}},RP={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...eC}},gm={intro:{_:"i",...PP},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...RP})}},hm=dm;var tC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Fe,...Je,...Ht,...uo,...no})}},IP={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...tC}},MP={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...tC}},Vi={intro:{_:"i",...IP},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...MP})}},ym=hm;var Fi=Vi,xm={...ym,advanced:{_:"a",direction:"d"}};var _m=Fi,Sm=xm;var oC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Fe,...Je,...Ht,...uo,...no,...jo})}},AP={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...oC}},VP={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...oC}},Oi={intro:{_:"i",...AP},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...VP})}},km=Sm;var FP={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Fe,...Je,...Ht,...uo,...no,...jo})}},OP={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...FP}},Li={...Oi,chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...OP})}},Cm=km;var rC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Fe,...Je,...Ya,...uo,...no,...jo})}},LP={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...rC}},KP={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...rC}},bm={intro:{_:"i",...LP},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...KP})}},Bm=Cm;var nC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...fe,...Pe,...Ee,...Fe,...Je,...Ya,...uo,...no,...jo,...AS})}},$P={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...nC}},zP={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...nC}},Ki={intro:{_:"i",...$P},chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...zP})}},vm=Bm;var iC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Qe,...St,...ro,..._t,...bn,...ft,..._n,...Fr,...Zo,...Ti,...Xo})}},NP={...Li.intro,contentState:{_:"cs",...iC}},QP={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...iC}},Bn={...Ki,intro:NP,chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...QP})}},Tm=vm;var aC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Qe,...St,...ro,..._t,...bn,...ft,..._n,...Fr,...Zo,...Ti,...Xo,...Bt})}},HP={...Bn.intro,contentState:{_:"cs",...aC}},UP={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...aC}},vn={...Bn,intro:HP,chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...UP})}},Dm=Tm;var sC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Qe,...St,...ro,..._t,...bn,...ft,..._n,...Fr,...Zo,...Ti,...Xo,...Bt,...sd})}},WP={...vn.intro,contentState:{_:"cs",...sC}},qP={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...sC}},Tn={...vn,intro:WP,chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...qP})}},wm=Dm;var cC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...ut,...St,...ro,..._t,...om,...ft,...bd,...qa,...Ua,...Xf,...ja,...Bt,...cd})}},GP={...Tn.intro,contentState:{_:"cs",...cC}},YP={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...cC}},Dn={...Tn,intro:GP,chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...YP})}},Em=wm;var lC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...He,...St,...ro,..._t,...qk,...ft,...as,...Ga,...hn,...Qa,...xn,...Bt,...Ci,...Xa})}},jP={...Dn.intro,contentState:{_:"cs",...lC}},ZP={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...lC}},wn={...Dn,intro:jP,chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...ZP})}},ds=Em;var mC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...He,...St,...ro,..._t,...Sd,...ft,...as,...Ga,...hn,...Qa,...xn,...Bt,...Ci,...Xa})}},XP={...wn.intro,key:"k",contentState:{_:"cs",...mC}},JP={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...mC}},En={...wn,intro:XP,chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...JP})}},Pm={...ds,main:{...ds.main,chaptersCount:"chc",grade:{_:"gd",mode:"gM",quizToGradeId:"qTG"}}};var pC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Le,...To,...dn,...Bo,...kd,...wo,...Sn,...Do,...vo,...gn,...Ro,...Eo,...bo,...Ja})}},e3={...En.intro,key:"k",contentState:{_:"cs",...pC}},t3={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...pC}},Pn={...En,intro:e3,chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...t3})}},Rm=Pm;var uC={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Le,...To,...dn,...Bo,...rs,...wo,...Sn,...Do,...vo,...gn,...Ro,...Eo,...bo,...Ja})}},o3={...Pn.intro,key:"k",contentState:{_:"cs",...uC}},r3={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...uC}},Rn={...Pn,intro:o3,chapters:{_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...r3})}},er=Rm;var Rd={...Rn.chapters.blocks.keys,header:{_:"h",title:"t",subtitle:"s",kicker:"k",designSettings:{_:"ds",textColor:"tc",coverInfoState:{_:"cis",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}}},navigationData:{_:"nd",hiddenHeaders:{_:"hh",length:"l"}}},In={pages:{...Rn.chapters,blocks:b({_:"B",...Rd})}},Im={...er,main:{_:"m",navigationType:er.main.navigationType,copyingEnabled:er.main.copyingEnabled,chaptersCount:er.main.chaptersCount,grade:er.main.grade},navigation:{_:"n",contentsDisplayType:"cdt",nextButtonEnabled:er.main.nextButtonEnabled,isNavigationPanelCollapsedByDefault:"inpc"}};var n3={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Le,...To,...dn,...Bo,...rs,...wo,...Sn,...Do,...vo,...gn,...Ro,...Eo,...bo,...ld})}},Id={...Rd,contentState:{_:"cs",...n3}},Mn={...In,pages:{...In.pages,blocks:b({_:"B",...Id})}},Mm=Im;var i3={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Ye,...El,...$a,...za,...ns,...Lr,...ss,...Il,...Vr,...Ha,...Vl,...Po,...Mr,...md,...yn})}},Md={...Id,contentState:{_:"cs",...i3}},An={...Mn,pages:{...Mn.pages,_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...Md})}},Am=Mm;var a3={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...Ye,...Wa,...$a,...Na,...ns,...Lr,...ss,...Il,...Vr,...Ha,...Za,...Po,...Mr,...pd,...yn})}},$i={...Md,contentState:{_:"cs",...a3}},Vn={...An,pages:{...An.pages,_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...$i})}},Vm=Am;var s3={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:b({_:"B",...xt,...Pl,...kS,...Dl,...qS,...Al,...ok,...IS,...wl,...Jf,...Fl,...Po,...vl,...VS,...Ml})}},c3={...$i,contentState:{_:"cs",...s3},header:{...$i.header,designSettings:{...$i.header.designSettings,coverInfoState:{...$i.header.designSettings.coverInfoState,...Co}}}},zi={...Vn,pages:{...Vn.pages,_:"c",order:{_:"o",length:"l"},blocks:b({_:"B",...c3})}},gs=Vm;var Ni=zi,fC={type:"t",id:"i"},Fm={...gs,design:{...gs.design,headerFont:{...fC,_:"hf"},contentFont:{...fC,_:"cf"}}};var Om=Ni,dC=Fm;function gC(e){_l({...e,tooltipProps:{contentType:"rich",type:e.type,content:e.content,size:e.size}})}var l3=500;function hC({itemRef:e,containerRef:t,scrollDuration:o=l3}){let r=t.current,n=e.current,i=r.getBoundingClientRect(),a=n.getBoundingClientRect(),s={top:i.top,bottom:i.bottom},c=Fk(i,a);Mi({element:n,container:r,duration:o,scrollDirection:c,bounds:s})}function Qr(e,t=[]){let o=I(()=>X_(e),[e]);return P(()=>{let r=e.current;if(!r)return;let n=()=>o.onScroll.dispatch();return r.addEventListener("scroll",n),()=>r.removeEventListener("scroll",n)},[e,o.onScroll,...t]),o}var Ad=0,yC=1024,xC=yC*1024,m3=xC*1024;function _C(e){return Math.round(e*10)/10}function p3(e){return Math.max(Ad,Math.round(e/yC))}function u3(e){return Math.max(Ad,_C(e/xC))}function f3(e){return Math.max(Ad,_C(e/m3))}function SC(e){let t=f3(e);if(t>1)return T("Common.FileSize.ToGb",{volume:t});let o=u3(e);return o>1?T("Common.FileSize.ToMb",{volume:o}):T("Common.FileSize.ToKb",{volume:p3(e)})}function kC(e,t,o,r){let n=E(window),i=uc(),a=i?qe.FF_DASH:qe.DASH,s=i?qe.FF_EQUALS:qe.EQUALS;yt(n,a,t,r),yt(n,s,e,r),yt(n,qe.NUM_MINUS,t,r),yt(n,qe.NUM_PLUS,e,r),yt(n,qe.ESC,o,r)}var d3=u({$:"$",fallbackImage:"x4680a__fallback-image"});function CC(e){return e`<div class=${d3.fallbackImage} />`}var bC=u({$:"$",container:"x555a9__container",container_decoration_none:"x555a9__container_decoration_none",container_decoration_border:"x555a9__container_decoration_border",container_decoration_shadow:"x555a9__container_decoration_shadow",container_transparent:"x555a9__container_transparent",container_radius_none:"x555a9__container_radius_none",container_radius_xsmall:"x555a9__container_radius_xsmall",container_radius_small:"x555a9__container_radius_small",container_radius_medium:"x555a9__container_radius_medium",container_radius_large:"x555a9__container_radius_large",container_radius_xlarge:"x555a9__container_radius_xlarge",container_radius_xxlarge:"x555a9__container_radius_xxlarge",container_radius_xxxlarge:"x555a9__container_radius_xxxlarge",image:"x555a9__image",image_loaded:"x555a9__image_loaded",image_loading:"x555a9__image_loading",image_animated:"x555a9__image_animated",imageFadeIn:"x555a9__image-fade-in",tiledImage:"x555a9__tiled-image"}),g3=50;var h3="loading";function BC(e,{width:t,height:o,src:r,fallback:n=g(CC),decoration:i,radius:a,position:s="center",alt:c="",fit:l="none",transparentBackground:m=!1,loading:p="lazy",imageRef:f}){let[d,x]=cS(()=>(Qo(r),h3),[r]),[_,k]=z(!1),S=E(),C=w(()=>{x("loaded")},[x]),y=w(()=>{x("failed")},[x]);_3({ref:S,onLoad:C,onError:y,src:r,loading:p}),P(()=>{let $=setTimeout(()=>{d==="loading"&&k(!0)},g3);return()=>clearTimeout($)},[d,k]);let v=bC.container.withMods({transparent:m,decoration:i||"none",radius:typeof a=="string"?a:"none"}),D=bC.image.withMods({loaded:d==="loaded",loading:_,animated:_&&d==="loaded"}),A={width:typeof t=="number"?W(t):t,height:typeof o=="number"?W(o):o,...S3(a)};return e`
<div
	class=${v}
	style=${A}
	save-ref=${S}
>
	${e.switch(()=>d==="failed"?n:l==="tile"?g(x3,{width:t,height:o,src:r,containerClassName:v,imageClassName:D,fit:l,position:s,imageRef:f}):g(y3,{width:t,height:o,src:r,containerClassName:v,imageClassName:D,fit:l,position:s,alt:c,imageRef:f}))}
</div>
`}function y3(e,{width:t,height:o,src:r,imageClassName:n,fit:i,position:a,alt:s,imageRef:c}){let l={width:typeof t=="number"?W(t):t,height:typeof o=="number"?W(o):o,"object-fit":i,"object-position":a};return e`
<img
	style=${l}
	src=${r}
	alt=${s}
	class=${n}
	save-ref=${c}
/>
`}function x3(e,{width:t,height:o,src:r,imageClassName:n,fit:i,position:a,imageRef:s}){let c={width:typeof t=="number"?W(t):t,height:typeof o=="number"?W(o):o,"background-image":`url("${r}")`,"background-repeat":"repeat","object-fit":i,"object-position":a};return e`
<div
	class=${n}
	style=${c}
	save-ref=${s}
/>`}function _3({ref:e,src:t,onLoad:o,onError:r,loading:n}){let i=E(!0),a=w(s=>{zc(s).then(()=>{o()}).catch(r),i.current=!1},[r,o]);j_({ref:e,onIntersect:()=>n==="lazy"&&a(t)}),P(()=>{n==="eager"&&a(t)},[a,n,t]),P(()=>{i.current||a(t)},[a,t])}function S3(e){if(!e||typeof e=="string")return{};if(typeof e=="number")return{"border-radius":`${e}px`};let t=o=>o?typeof o=="string"?`var(--radius-${o})`:`${o}px`:null;return{"border-start-start-radius":t(e.startStart),"border-start-end-radius":t(e.startEnd),"border-end-start-radius":t(e.endStart),"border-end-end-radius":t(e.endEnd)}}function vC(e){return!e.match(/.gif$/ig)}function TC({crop:e,width:t}){return e?t-e.left-e.right:t}function DC({crop:e,height:t}){return e?t-e.top-e.bottom:t}function wC(e,t){let[o,r]=z(!1),[n,i]=z(e.editedSrc),a=E(!1);return P(()=>{let s=e.crop;s&&!Cf(s)&&!e.editedSrc&&!a.current?(a.current=!0,hx({...e,crop:s,src:t?e.src:Ne(e.src)}).then(l=>{a.current=!1,r(!0),i(URL.createObjectURL(l))})):(i(Wt(e)),r(!1))},[e,i,t]),{cropped:o,src:n}}var Vd=u({$:"$",container:"x7eade__container",imageContainer_origin:"x7eade__image-container_origin",imageContainer_fill:"x7eade__image-container_fill",image:"x7eade__image",image_decoration_none:"x7eade__image_decoration_none",image_decoration_border:"x7eade__image_decoration_border",image_decoration_shadow:"x7eade__image_decoration_shadow","image_with-zoom":"x7eade__image_with-zoom","image_with-link":"x7eade__image_with-link",image_hidden:"x7eade__image_hidden"});function io(e,{image:t,...o}){let r=B3(t),n=yx(t)&&!t.editedSrc,i=!vC(t.src)&&n,a={...o,image:r,needRuntimeCrop:n};return e`
<div class=${Vd.container}>
	${e.renderIf(Nk,()=>i&&a)}
    ${e.renderIf(k3,()=>!i&&a)}
</div>`}function k3(e,{image:t,isPlayer:o=!1,withFullImageUrl:r=!1,needRuntimeCrop:n,...i}){let{src:a,cropped:s}=wC(t,r),c=I(()=>{var l;return{src:(l=a!=null?a:t.editedSrc)!=null?l:t.src,width:TC(t),height:DC(t),crop:sn(),clip:Br}},[t,a]);return be(e,g(C3,{...i,image:c,isPlayer:o,withFullImageUrl:s,hidden:n&&!s}))}function C3(e,{className:t="",outContainerRef:o,withSize:r,...n}){let i=M(),a=se(Vd.imageContainer.withMods({fill:!r,origin:!!r}),t);return e`
<div class=${a} save-ref=${i}>
	${e(b3,{outContainerRef:o!=null?o:i,withSize:r,...n})}
</div>
`}function b3(e,{image:t,onClick:o,outContainerRef:r,containerLimit:n,withFullImageUrl:i,withSize:a,withZoom:s,withLink:c,withBackdrop:l,isPlayer:m,radius:p,decoration:f,fit:d,position:x,imageRef:_,hidden:k}){let S=tm(t,r,n),C=a?t.width/S:Ju(100),y=a?t.height/S:Ju(100),v=Wt(t),D={width:C,height:y};return e`
<div
	class=${Vd.image.withMods({"with-zoom":m&&!!s,"with-link":m&&!!c,decoration:f!=null?f:"none",hidden:k})}
	style=${D}
	onclick=${o}
>
	${e(BC,{width:C,height:y,src:i?v:Ne(v),transparentBackground:!l,fit:d!=null?d:"contain",position:x,imageRef:_,radius:p})}
</div>
`}function B3({src:e,editedSrc:t,height:o,width:r,crop:n,clip:i}){let a=ya(e),s=E(e);return I(()=>((a==null?void 0:a.startsWith("blob:"))&&!e.startsWith("blob:")?s.current=a:(t||e!==a)&&(s.current=e),{src:s.current,editedSrc:t,width:r,height:o,crop:n,clip:i}),[i,n,t,o,a,e,r])}function EC(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 3a1 1 0 1 0-2 0v6H3a1 1 0 0 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3z" fill="currentColor"/></svg>
`}function Fd(){return"ontouchstart"in document.documentElement}function PC(e,t,o,r=300){let n=E(0),i=E(0);function a(){n.current=0,clearTimeout(i.current)}G(e,"click",c=>{c.preventDefault(),n.current+=1,n.current===1&&(i.current=setTimeout(()=>{o&&o(),a()},r)),n.current===2&&(t(),a())})}function RC(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.293 2.293a1 1 0 1 1 1.414 1.414L14.414 7H16a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1V4a1 1 0 1 1 2 0v1.586l3.293-3.293zm-14 14a1 1 0 1 0 1.414 1.414L7 14.414V16a1 1 0 1 0 2 0v-4a1 1 0 0 0-1-1H4a1 1 0 1 0 0 2h1.586l-3.293 3.293zM18 17v-4a1 1 0 1 0-2 0v3h-3a1 1 0 1 0 0 2h4a1 1 0 0 0 1-1zM3 2a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0V4h3a1 1 0 0 0 0-2H3z" fill="currentColor"/></svg>
`}function IC(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 10h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function Od(e,t,o,r){let n=Math.abs(o.width-window.innerWidth)/2/r,i=-n,a=Math.abs(o.height-window.innerHeight)/2/r,s=-a,c=Ct(e,i,n),l=Ct(t,s,a);return{fittedX:c,fittedY:l}}function Lm(e,t,o,r,n){let i=o.x+(e.x-t.x)/n,a=o.y+(e.y-t.y)/n,{fittedX:s,fittedY:c}=Od(i,a,r,n);return{x:s,y:c}}function Km(e,t){let o=e.current.offsetWidth*t,r=e.current.offsetHeight*t;return{horizontalOverflow:o>window.innerWidth,verticalOverflow:r>window.innerHeight}}function $m(e,t){let o=E({horizontalOverflow:!1,verticalOverflow:!1});return P(()=>{o.current=Km(e,t)},[e,o,t]),o}var zm={left:0,center:1,right:2},v3=1;function MC(e){return e.buttons===v3}function AC(e,t){P(()=>{function o(r){r.deltaY>0?t():e()}return window.addEventListener("wheel",o),()=>{window.removeEventListener("wheel",o)}},[t,e])}function T3(e,t,o,r,n){let i=E({x:0,y:0}),a=E(r),s=te(r),c=E({width:0,height:0}),l=te(n),m=$m(t,o);P(()=>{let p=null,f=null,d=null,x=()=>{Ri([f,d])},_=S=>{let C=S,y=l.current,v=s.current,D={x:C.clientX,y:C.clientY};MC(S)?(S.preventDefault(),v=Lm(D,i.current,a.current,c.current,o)):x(),y({x:m.current.horizontalOverflow?v.x:s.current.x,y:m.current.verticalOverflow?v.y:s.current.y})},k=S=>{let C=S,y=t.current.getBoundingClientRect();c.current={width:y.width,height:y.height},a.current=s.current,i.current={x:C.clientX,y:C.clientY},S.preventDefault(),d=Kr(window,"mouseup",x),f=Kr(window,"mousemove",_)};return(m.current.horizontalOverflow||m.current.verticalOverflow)&&(p=Kr(t.current,"mousedown",k)),()=>{Ri([p,f,d])}},[o,s,t,l,m])}function VC(e,t,o,r,n,i,a,s){AC(i,a),kC(i,a,s),T3(e,t,o,r,n)}function D3(e){let t={x:e[0].pageX,y:e[0].pageY},o={x:e[1].pageX,y:e[1].pageY};return[t,o]}function Ld(e){if(e.length===2){let[t,o]=D3(e);return Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2))}return 0}function FC(e,t,o,r,n){let i=E({startTouchPointsDist:0,startZoomScale:1,startDragPosition:{x:0,y:0},gesture:"none"}),a=$m(e,t),s=E(r),c=te(r),l=E(),m=te(n),p=w(C=>{i.current.gesture="pinch",i.current.startZoomScale=t,i.current.startTouchPointsDist=Ld(C.touches)},[t]),f=w(C=>{let v=Ld(C.touches)/i.current.startTouchPointsDist,D=t*v;o(D)},[t,o]),d=w(C=>{let y=e.current.getBoundingClientRect(),v=C.touches[0];l.current={width:y.width,height:y.height},i.current.startDragPosition={x:v.clientX,y:v.clientY},s.current=c.current,i.current.gesture="drag"},[c,e]),x=w(C=>{let y=m.current,v=c.current,D=C.touches[0],A={x:D.clientX,y:D.clientY};C.touches&&C.touches.length===1&&(v=Lm(A,i.current.startDragPosition,s.current,l.current,t)),y({x:a.current.horizontalOverflow?v.x:c.current.x,y:a.current.verticalOverflow?v.y:c.current.y})},[c,t,m,a]),_=w(C=>{C.cancelable&&C.preventDefault();let y=C;y.touches&&(y.touches.length===2&&i.current.gesture==="pinch"?f(y):y.touches.length===1&&i.current.gesture==="drag"&&(a.current.horizontalOverflow||a.current.verticalOverflow)&&x(y))},[x,f,a]),k=w(()=>{i.current.gesture="none",window.removeEventListener("touchmove",_),window.removeEventListener("touchend",k)},[_]),S=w(C=>{let y=C;y.touches&&(y.touches.length===2?p(y):y.touches.length===1&&d(y),window.addEventListener("touchmove",_,{passive:!1}),window.addEventListener("touchend",k))},[d,p,k,_]);P(()=>(window.addEventListener("touchstart",S),()=>{window.removeEventListener("touchstart",S)}),[S])}var Ln=u({$:"$",preview:"xa5d7a__preview",imageContainer:"xa5d7a__image-container",image:"xa5d7a__image",zoomTransition:"xa5d7a__zoom-transition",image_transition:"xa5d7a__image_transition",zoomToolbar:"xa5d7a__zoom-toolbar",zoomToolbar_style_light:"xa5d7a__zoom-toolbar_style_light",zoomToolbar_style_dark:"xa5d7a__zoom-toolbar_style_dark",imageContainer_touchscreen:"xa5d7a__image-container_touchscreen",image_touchscreen:"xa5d7a__image_touchscreen",centerButton:"xa5d7a__center-button",closeCross:"xa5d7a__close-cross"}),$d=.5,On=6,Fn=1;function w3(){let[e,t]=z(1);return{imageScale:e,setScale:a=>{a>=On?t(On):a<=Fn?t(Fn):t(a)},increaseScale:()=>{let a=e+$d;a<=On?t(a):t(On)},decreaseScale:()=>{let a=e-$d;a>=Fn?t(a):t(Fn)},resetScale:()=>{t(Fn)}}}function E3(e,t){let[o,r]=z(!0);return P(()=>{o?(e.current.style.bottom=Xn("--tool-bar-bottom"),t.current.style.top=Xn("--close-button-top")):(e.current.style.bottom=`-${e.current.offsetHeight}px`,t.current.style.top=`-${t.current.offsetHeight}px`)},[o,r,e,t]),{isToolsVisible:o,setUiVisibility:r}}function P3(e,{style:t,onClose:o}){return vd(e,{component:g(xk,{style:t==="dark"?"dark":"default",onClick:o},Ln.closeCross),tooltipText:T("Common.Close"),side:"bottom",align:"start"})}function R3(e,{style:t,icon:o,onClick:r,disabled:n}){return je(e,{style:J(t,{light:"ghost",dark:"ghostInversed"}),size:"small",onClick:r,structure:"icon",icon:o,state:n?"disabled":"default"})}function Kd(e,t){return vd(e,{component:g(R3,t),tooltipText:t.tooltipText,show:!Fd()})}function I3(e,{style:t,increaseScale:o,decreaseScale:r,resetScale:n,scale:i,ref:a}){return G(a,"click",s=>s.preventDefault()),e`
<div
	save-ref=${a}
	class=${Ln.zoomToolbar.withMods({style:t})}
>
	${e(Kd,{style:t,icon:g(IC),tooltipText:T("Common.ImageZoom.Tooltip.Decrease"),onClick:r,disabled:i==Fn})}
	${e(Kd,{style:t,icon:g(RC),tooltipText:T("Common.ImageZoom.Tooltip.ResetScale"),onClick:n,disabled:i==Fn},Ln.centerButton)}
	${e(Kd,{style:t,icon:g(EC),tooltipText:T("Common.ImageZoom.Tooltip.Increase"),onClick:o,disabled:i==On})}
</div>
`}function M3(e,{src:t,hasImageTransition:o,isTouchscreenDevice:r}){return e`
<img
	class=${Ln.image.withMods({transition:o,touchscreen:r})}
	src=${t}
	alt=''
/>`}function OC(e,{style:t,imageSrc:o,imageCrop:r,closeZoomFn:n}){let[i,a]=z(()=>({x:0,y:0})),[s,c]=z(!1),l=w3(),m=M(),p=M(),f=M(),d=M(),x=M(),_=Fd(),{isToolsVisible:k,setUiVisibility:S}=E3(d,f),C=xe=>{let Tt=Km(x,xe),{fittedX:jr,fittedY:pa}=Od(i.x,i.y,{width:x.current.offsetWidth*xe,height:x.current.offsetHeight*xe},xe);a({x:Tt.horizontalOverflow?jr:0,y:Tt.verticalOverflow?pa:0})};function y(xe){c(!1),l.setScale(xe),C(xe)}function v(){c(!0),l.increaseScale()}function D(){c(!0),l.decreaseScale(),C(l.imageScale-$d)}function A(){c(!0),l.resetScale(),a({x:0,y:0})}function $(xe){c(!1),a(xe)}function H(){_&&S(!k)}function oe(){_&&(k&&S(!1),l.imageScale>=On/2?A():(c(!0),l.setScale(On/2)))}G(d,"click",xe=>xe.preventDefault()),G(m,"click",xe=>{xe.defaultPrevented||(xe.preventDefault(),n())}),PC(x,oe,H),FC(x,l.imageScale,y,i,$),VC(m,x,l.imageScale,i,$,v,D,n),P(()=>{let xe=Km(x,l.imageScale),Tt=xe.horizontalOverflow||xe.verticalOverflow,jr=x.current.offsetWidth/2,pa=x.current.offsetHeight/2;x.current.style.cursor=Tt?"move":"default",x.current.style.transformOrigin=`${jr-i.x}px ${pa-i.y}px`,x.current.style.transform=`translate(${i.x}px, ${i.y}px) scale(${l.imageScale})`},[x,l.imageScale,i,a]),ee(()=>{m.current.style.height=W(window.innerHeight)});let ye={ref:x};return e`
<div
	class=${Ln.preview}
	save-ref=${m}
>
	<div
		class=${Ln.imageContainer.withMods({touchscreen:_})}
		save-ref=${p}
	>
		${e.renderIf(M3,()=>!r&&{src:o,hasImageTransition:s,isTouchscreenDevice:_},ye)}
		${e.renderIf(io,()=>r&&{image:r,withSize:!0,outContainerRef:p,className:Ln.image.withMods({transition:s,touchscreen:_})},ye)}
	</div>
	${e(I3,{style:t,increaseScale:v,decreaseScale:D,resetScale:A,scale:l.imageScale,ref:d})}
	${e(P3,{style:t,onClose:n},{ref:f})}
</div>`}function Nm(e,{style:t}){let o=cs({html:e,side:"center",component:OC,closeOnOverlayClick:!0,modalOverlayType:t});return w((r,n=void 0)=>o.open({imageSrc:r,imageCrop:n&&(n.crop||n.clip)?{...n,crop:n.crop||sn(),clip:n.clip||Br}:void 0,closeZoomFn:o.close,style:t}),[o,t])}function LC(e){return e`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="18.75" stroke="currentColor" stroke-width="2.5"/><path d="M13 21.667 17.397 26l9.353-11" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function KC(e,t){let[,o]=Jn(e,t);return o}function $C({product:e}){return J(e,{learn:"iSpring Learn",page:"iSpring Page",space:"iSpring Cloud",daily:"iSpring Port"})}var Qi=u({$:"$",watermark:"x8dda0__watermark",highlight:"x8dda0__highlight",highlight_dir_ltr:"x8dda0__highlight_dir_ltr",moveRight:"x8dda0__move-right",highlight_dir_rtl:"x8dda0__highlight_dir_rtl",moveLeft:"x8dda0__move-left",container:"x8dda0__container",logo:"x8dda0__logo",button:"x8dda0__button",arrowIcon:"x8dda0__arrow-icon",arrowIcon_dir_ltr:"x8dda0__arrow-icon_dir_ltr",arrowIcon_dir_rtl:"x8dda0__arrow-icon_dir_rtl"});function A3(e){return J(e,{islearn:"learn",isstudio:"page",isspace:"space",isdaily:"daily"})}function V3(e){let t=$C({product:A3(e)});return T("Watermark.Trial.Text",{product:t})}function Qm(e,{subscriptionProduct:t,watermarkUrl:o}){return e`
<a
	href=${o}
	target="_blank"
	class=${Qi.watermark}
>
	<div class=${Qi.highlight.withMods({dir:ho()})}></div>
	<div class=${Qi.container}>
		<div class=${Qi.logo}></div>
		<div>${V3(t)}</div>
		<div class=${Qi.button}>
			<div>${T("Common.LearnMore")}</div>
			<div class=${Qi.arrowIcon.withMods({dir:ho()})}></div>
		</div>
	</div>
</a>`}function F3(e){let t=e.state;return{type:"mc",selectedChoiceId:t?t.selectedChoiceId:null}}function O3(e){let t=e.state;return t?{type:"mr",choices:t.choices.map(o=>({id:o.id,selected:o.selected}))}:{type:"mr",choices:e.data.content.map(o=>({id:o.id,selected:!1}))}}function L3(e){let t=e.state;return{type:"ti",answer:t?t.answer:""}}function K3(e){return{type:"sq",sequence:B(e.state).order}}function $3(e){return{type:"mt",matches:B(e.state).matchedPairs}}function zd(e){let t,o=e.type;switch(o){case"mc":t=F3(e);break;case"mr":t=O3(e);break;case"ti":t=L3(e);break;case"sq":t=K3(e);break;case"mt":t=$3(e);break;default:throw O(o,`unknown question type ${o}`),Error()}return JSON.stringify(t)}var zC=1;function z3(e){let t=B(e.evaluation),o=ha(t.maxScore/e.questions.length,zC);return e.questions.map(r=>{let n=r.state;return n?{questionId:r.id,correct:n.correct,score:n.correct?o:0,maxScore:o,data:zd(r)}:{questionId:r.id,correct:!1,score:0,maxScore:o,data:zd(r)}})}function NC(e,t){let o=B(e.evaluation),r={version:1,attemptDate:Date.now(),timeSpent:e.timeSpent,evaluation:{passingScore:t.passingScore,maxScore:o.maxScore,quizPassed:o.quizPassed,score:ha(o.score,zC)},answers:z3(e)};return JSON.stringify(r)}function QC(e){let t=Et(),o=i=>{i.onCompleted.add(()=>{let a=B(e.session);t.dispatch({result:NC(a,e.settings),duration:a.quizDuration})})},r=()=>{let i=e.onSessionChanged.add(()=>{let a=e.session;a&&o(a),i()})},n=e.session;return n?o(n):r(),t}function Hm(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.654 5.02a6 6 0 0 1 8.6 2.08l-.432-.173a1 1 0 0 0-.744 1.857l2.625 1.052a1 1 0 0 0 1.3-.556l1.052-2.626A1 1 0 0 0 17.2 5.91l-.134.335a8 8 0 0 0-14.533.889 1 1 0 1 0 1.867.716 6 6 0 0 1 2.255-2.83zm6.693 10.07a6 6 0 0 1-8.583-2.05l.335.162a1 1 0 0 0 .873-1.8l-2.545-1.235a1 1 0 0 0-1.336.463L.856 13.175a1 1 0 1 0 1.8.873l.181-.375a8 8 0 0 0 14.632-.696 1 1 0 1 0-1.868-.717 6 6 0 0 1-2.255 2.83z" fill="currentColor"/></svg>
`}function HC(e,t,o,r){t&&o&&r&&e.appendChild(en(Qm)({subscriptionProduct:o,watermarkUrl:r}))}function Um(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.296 12.924 8.9 9.014a.787.787 0 0 0-1.094-.092.908.908 0 0 0-.214 1.151l2.586 4.553a1.293 1.293 0 0 0 1.927.374l.05-.041a1.442 1.442 0 0 0 .143-2.035zM22.691 4.51l-.023-.023a2.4 2.4 0 0 0-3.38 0l-.777.771a11.439 11.439 0 0 1 2.899 3.916l1.28-1.27.016-.015a2.39 2.39 0 0 0-.015-3.38zM15.13 2.4a2.4 2.4 0 0 0-2.4-2.4H9.055a2.4 2.4 0 0 0-2.4 2.4v.799a11.565 11.565 0 0 1 4.238-.799c1.497 0 2.927.283 4.24.799L15.13 2.4zM19 14a8 8 0 1 1-16 0 8 8 0 0 1 16 0zm2 0c0 5.523-4.477 10-10 10S1 19.523 1 14 5.477 4 11 4s10 4.477 10 10z" fill="currentColor"/></svg>
`}function Wm(e){return`url("data:image/svg+xml,${e.replace(/"/g,"'").replace(/\s{2,}/g," ").replace(/[\r\n%#()<>?[\\\]^`{|}]/g,encodeURIComponent)}")`}var UC=protobuf.Type,hs=protobuf.Field,N3=protobuf.Root;var qm={string:"string",int:"int32",float:"float",bool:"bool"},Q3=0,kt={String:e=>Y(e,qm.string),Int:e=>Y(e,qm.int),Bool:e=>Y(e,qm.bool),Float:e=>Y(e,qm.float)},H3=new N3;function U(e,t){t=t||`Type${++Q3}`;let o=new UC(t);for(let r of Object.keys(e)){let n=e[r],i=n.ref;if(typeof i=="string")o=o.add(new hs(r,n.id,i,n.rule));else if(i instanceof UC){let a=i;o=o.add(new hs(r,n.id,a.name,n.rule))}else{let a=U(i);o=o.add(new hs(r,n.id,a.name,n.rule))}}return H3.add(o),o}function Y(e,t,o="required"){return{id:e,ref:t,rule:o}}function ie(e,t){return typeof t=="function"&&(t=t(e).ref),Y(e,t,"repeated")}function pe(e,t){return typeof t=="function"&&(t=t(e).ref),Y(e,t,"optional")}function Lt(e){let t="type",o=U({}),r=U({}).add(new hs(t,0,"string","required"));for(let n of Object.keys(e))e[n]=e[n].add(new hs(t,0,"string","required"));return o.fromObject=function(n){return e[n[t]].fromObject(n)},o.toObject=function(n){return e[n[t]].toObject(n)},o.encode=function(n,i){return e[n[t]].encode(n,i)},o.decode=function(n,...i){if(n instanceof protobuf.Reader){let a=n.pos,s=r.decode(n,...i),c=e[s[t]];return n.pos=a,c.decode(n,...i)}throw new Error("top level union is not supported")},o.verify=function(n){let i=e[n[t]];return i?i.verify(n):`unknown type ${n[t]}`},o}function qC(e){let t=e.length;if(!t)return 0;let o=0;for(;--t%4>1&&e.charAt(t)==="=";)++o;return Math.ceil(e.length*3)/4-o}var U3=new Array(64),GC=new Array(123);for(let e=0;e<64;)GC[U3[e]=e<26?e+65:e<52?e+71:e<62?e-4:e-59|43]=e++;var WC="invalid encoding";function YC(e,t,o=0){let r=o,n=0,i;for(let a=0;a<e.length;){let s=e.charCodeAt(a++);if(s===61&&n>1)break;if((s=GC[s])===void 0)throw Error(WC);switch(n){case 0:i=s,n=1;break;case 1:t[o++]=i<<2|(s&48)>>4,i=s,n=2;break;case 2:t[o++]=(i&15)<<4|(s&60)>>2,i=s,n=3;break;case 3:t[o++]=(i&3)<<6|s,n=0;break}}if(n===1)throw Error(WC);return o-r}var tr=class{constructor(t){this.Type=t}};function jC(e,t){let o=new Uint8Array(qC(e));YC(e,o);let r=new Uint32Array(o.buffer.slice(0,Uint32Array.BYTES_PER_ELEMENT))[0],n=new Uint8Array(o.buffer.slice(Uint32Array.BYTES_PER_ELEMENT)),{Type:i}=t(r),a=i.decode(n);return i.toObject(a)}function ZC(e,t){P(()=>{if(t)return t(),e.onScroll.add(t)},[t,e])}var Hi={};Tu(Hi,{OverlayButton:()=>ys});var Gm=u({$:"$",button:"x99a57__button",button_state_default:"x99a57__button_state_default","button_circle-radius":"x99a57__button_circle-radius",button_size_medium:"x99a57__button_size_medium",button_type_icon:"x99a57__button_type_icon","button_type_icon-text":"x99a57__button_type_icon-text",button_size_small:"x99a57__button_size_small",button_size_xSmall:"x99a57__button_size_xSmall",background:"x99a57__background",icon:"x99a57__icon",text:"x99a57__text",button_scale:"x99a57__button_scale",button_state_hovered:"x99a57__button_state_hovered",button_state_pressed:"x99a57__button_state_pressed"}),W3=u({$:"$",button:"x7719d__button",button_state_default:"x7719d__button_state_default",background:"x7719d__background",icon:"x7719d__icon",text:"x7719d__text",button_state_hovered:"x7719d__button_state_hovered",button_state_pressed:"x7719d__button_state_pressed"}),q3=u({$:"$",button:"x1fdda__button",button_state_default:"x1fdda__button_state_default",button_state_pressed:"x1fdda__button_state_pressed",button_state_hovered:"x1fdda__button_state_hovered",background:"x1fdda__background",icon:"x1fdda__icon",text:"x1fdda__text"}),G3=u({$:"$",button:"x3fb3d__button",button_state_default:"x3fb3d__button_state_default",button_state_hovered:"x3fb3d__button_state_hovered",button_state_pressed:"x3fb3d__button_state_pressed",background:"x3fb3d__background",icon:"x3fb3d__icon",text:"x3fb3d__text"});function ys(e,t){let{style:o,state:r="default",type:n,size:i="medium",scale:a=!1,circleRadius:s=!1,autotestId:c,onClick:l,onMouseDown:m}=t,p=J(o,{ghost:W3,primary:q3,secondary:G3});function f(S){S.defaultPrevented||(S.preventDefault(),l&&l())}let d=se(Gm.button.withMods({state:r,size:i,type:n,"circle-radius":s,scale:a}),p.button.withMods({state:r})),x=se(Gm.icon,p.icon),_=se(Gm.text,p.text),k=se(Gm.background,p.background);return e`
<button
	class=${d}
	onclick=${f}
	onmousedown=${m}
	data-at=${X(c)}
>
	<div class=${k}></div>
	${e(Y3,{className:x,icon:t.icon})}
	${e.renderIf(j3,()=>t.type==="icon-text"&&{className:_,text:t.text})}
</button>`}function Y3(e,{icon:t,className:o}){return e`
<div class=${o}>
	${e(t)}
</div>
`}function j3(e,{text:t,className:o}){return e`
<div class=${o}>
	${e(Zt,{text:t})}
</div>
`}var Ui={};Tu(Ui,{PlayerButton:()=>qt});var Nd=u({$:"$",button:"x1a3bb__button",button_editable:"x1a3bb__button_editable",button_state_disabled:"x1a3bb__button_state_disabled",button_size_medium:"x1a3bb__button_size_medium",button_narrow:"x1a3bb__button_narrow",button_size_large:"x1a3bb__button_size_large",icon:"x1a3bb__icon",button_style_primary:"x1a3bb__button_style_primary",button_style_secondary:"x1a3bb__button_style_secondary",text:"x1a3bb__text",button_state_default:"x1a3bb__button_state_default",button_state_pressed:"x1a3bb__button_state_pressed",button_state_hovered:"x1a3bb__button_state_hovered"});function Qd(e,t=0,o=0,r=0){let[n,i,a]=ii(e.color),s=(n+t).toFixed(2),c=(i*100+o).toFixed(2),l=(a*100+r).toFixed(2);return`hsl(${s}, ${c}%, ${l}%, ${e.opacity})`}function Z3(e){return{"--color-default":Qd(e),"--color-hovered":Qd(e,0,0,-4),"--color-pressed":Qd(e,0,0,-8)}}function X3(e,{text:t}){return e`
<div>${t}</div>
`}function qt(e,t){let o=M(),{style:r,size:n,state:i="default",autotestData:a,leftIcon:s,backgroundColor:c,isNarrow:l=!1,isEditable:m=!1,focusBlockKey:p}=t,f=i==="disabled";function d(k){!f&&!k.defaultPrevented&&(k.preventDefault(),t.onClick&&t.onClick())}yo(o,{});let x=typeof t.content=="string"?g(X3,{text:t.content}):t.content,_=I(()=>c?Z3(c):void 0,[c]);return e`
<button
	class=${Nd.button.withMods({style:r,size:n,state:i,narrow:l,editable:m})}
	style=${_}
	disabled=${f}
	onclick=${d}
	save-ref=${o}
	data-at=${X(a)}
	data-focus-block-key=${p}
>
	${e(s,Nd.icon)}
	${e(x,Nd.text)}
</button>
`}function XC(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 0a1 1 0 0 1 1 1v2h2a1 1 0 1 1 0 2h-2v2a1 1 0 1 1-2 0V5h-2a1 1 0 1 1 0-2h2V1a1 1 0 0 1 1-1zM3.5 5A1.5 1.5 0 0 0 2 6.5v8A1.5 1.5 0 0 0 3.5 16h10a1.5 1.5 0 0 0 1.5-1.5V11a1 1 0 1 1 2 0v3.5a3.5 3.5 0 0 1-3.5 3.5h-10A3.5 3.5 0 0 1 0 14.5v-8A3.5 3.5 0 0 1 3.5 3H9a1 1 0 1 1 0 2H3.5zm0 4.25a1.25 1.25 0 1 0 2.5 0 1.25 1.25 0 0 0-2.5 0zm8.945.863a1 1 0 0 0-1.307-.092L8.5 12l-1.178-.587a1 1 0 0 0-.96.037L3.5 13.166V14.5h10v-3.332l-1.055-1.055z" fill="currentColor"/></svg>
`}function JC(e){return e`
<svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="39" cy="55" r="6" fill="currentColor"/><path d="M13 82h5v15h3v-7h3v10h-6v11h-5V96H7V84h3v9h3V82z" fill="#fff"/><path d="M13 82h5v15h3v-7h3v10h-6v11h-5V96H7V84h3v9h3V82z" fill="currentColor" fill-opacity=".6"/><path d="m95 61 42 50H53l42-50z" fill="#fff"/><path d="m95 61 42 50H53l42-50z" fill="currentColor" fill-opacity=".68"/><path d="m57 75 30 36H27l30-36z" fill="#fff"/><path d="m57 75 30 36H27l30-36z" fill="currentColor" fill-opacity=".24"/><path fill-rule="evenodd" clip-rule="evenodd" d="M34.419 111.001h-2.577c6.816-2.376 11.236-8.42 15.233-14.827.6-.962 1.192-1.933 1.78-2.899 1.785-2.93 3.545-5.82 5.452-8.29 1.842-2.386 3.853-4.424 6.21-5.762l.652.781c-2.259 1.242-4.222 3.198-6.07 5.592-1.87 2.422-3.589 5.243-5.366 8.16v.001c-.594.975-1.194 1.961-1.81 2.947-3.559 5.704-7.585 11.363-13.504 14.297zm11.531 0h-1.586c1.146-.872 2.199-1.881 3.184-2.988 2.575-2.896 4.66-6.433 6.707-9.908l.064-.107c2.054-3.487 4.084-6.918 6.524-9.438 1.396-1.441 2.937-2.596 4.704-3.301l.678.812c-1.742.628-3.262 1.738-4.663 3.185-2.341 2.417-4.312 5.736-6.382 9.25l-.087.148c-2.03 3.445-4.157 7.054-6.798 10.023a24.943 24.943 0 0 1-2.345 2.324zm10.222 0h-1.44a17.107 17.107 0 0 0 1.818-1.933c1.554-1.902 3.014-4.285 4.55-6.792l.599-.974c1.749-2.842 3.614-5.77 5.806-8.176a21.594 21.594 0 0 1 2.576-2.427l.64.768c-.87.684-1.692 1.47-2.477 2.332-2.12 2.328-3.943 5.181-5.694 8.027l-.592.965-.001.002-.004.006c-1.53 2.497-3.028 4.943-4.629 6.902-.375.458-.758.894-1.152 1.3zm8.87 0h-1.586c2.453-1.905 4.676-4.281 6.515-6.795 1.852-2.531 3.297-5.178 4.185-7.581.09-.247.176-.49.255-.73l.748.897-.065.18c-.925 2.502-2.418 5.23-4.316 7.824-1.632 2.231-3.576 4.379-5.735 6.205zm9.686 0h-1.21l.116-.171c1.739-2.56 3.703-5.166 6.777-7.735l.64.768c-2.834 2.369-4.692 4.767-6.323 7.138zm7.01 0h-1.614a46.061 46.061 0 0 1 4.3-3.09l.646.775a47.918 47.918 0 0 0-3.332 2.315z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M34.419 111.001h-2.577c6.816-2.376 11.236-8.42 15.233-14.827.6-.962 1.192-1.933 1.78-2.899 1.785-2.93 3.545-5.82 5.452-8.29 1.842-2.386 3.853-4.424 6.21-5.762l.652.781c-2.259 1.242-4.222 3.198-6.07 5.592-1.87 2.422-3.589 5.243-5.366 8.16v.001c-.594.975-1.194 1.961-1.81 2.947-3.559 5.704-7.585 11.363-13.504 14.297zm11.531 0h-1.586c1.146-.872 2.199-1.881 3.184-2.988 2.575-2.896 4.66-6.433 6.707-9.908l.064-.107c2.054-3.487 4.084-6.918 6.524-9.438 1.396-1.441 2.937-2.596 4.704-3.301l.678.812c-1.742.628-3.262 1.738-4.663 3.185-2.341 2.417-4.312 5.736-6.382 9.25l-.087.148c-2.03 3.445-4.157 7.054-6.798 10.023a24.943 24.943 0 0 1-2.345 2.324zm10.222 0h-1.44a17.107 17.107 0 0 0 1.818-1.933c1.554-1.902 3.014-4.285 4.55-6.792l.599-.974c1.749-2.842 3.614-5.77 5.806-8.176a21.594 21.594 0 0 1 2.576-2.427l.64.768c-.87.684-1.692 1.47-2.477 2.332-2.12 2.328-3.943 5.181-5.694 8.027l-.592.965-.001.002-.004.006c-1.53 2.497-3.028 4.943-4.629 6.902-.375.458-.758.894-1.152 1.3zm8.87 0h-1.586c2.453-1.905 4.676-4.281 6.515-6.795 1.852-2.531 3.297-5.178 4.185-7.581.09-.247.176-.49.255-.73l.748.897-.065.18c-.925 2.502-2.418 5.23-4.316 7.824-1.632 2.231-3.576 4.379-5.735 6.205zm9.686 0h-1.21l.116-.171c1.739-2.56 3.703-5.166 6.777-7.735l.64.768c-2.834 2.369-4.692 4.767-6.323 7.138zm7.01 0h-1.614a46.061 46.061 0 0 1 4.3-3.09l.646.775a47.918 47.918 0 0 0-3.332 2.315z" fill="currentColor" fill-opacity=".5"/><path d="M145 87h4v13h2v-6.5h3v9.5h-5v8h-4V99h-5V89h3v7h2v-9z" fill="#fff"/><path d="M145 87h4v13h2v-6.5h3v9.5h-5v8h-4V99h-5V89h3v7h2v-9z" fill="currentColor" fill-opacity=".6"/></svg>
`}function e0(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.841 31.182V19.068h1.803c.61 0 1.106.495 1.106 1.106v9.902c0 .61-.495 1.106-1.106 1.106H30.84zM14.25 17.68v15.166L28.773 34.5V15.75L14.25 17.68z" fill="#4169B4"/><path d="m23.61 27.043 1.118-6.117h1.705l-1.842 8.597H22.87l-1.352-5.751-1.351 5.75h-1.723l-1.842-8.596h1.705l1.124 6.105 1.369-6.105h1.448l1.363 6.117z" fill="#fff"/></svg>
`}function t0(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M14.658 26.355v2.895h-2.056v-8.531h3.404c.652 0 1.228.12 1.728.363.504.238.893.58 1.166 1.025.278.442.416.944.416 1.506 0 .832-.299 1.498-.896 1.998-.594.496-1.41.744-2.45.744h-1.312zm0-1.587h1.348c.398 0 .701-.1.908-.3.21-.198.316-.48.316-.843 0-.398-.107-.717-.322-.955-.215-.238-.508-.36-.879-.363h-1.37v2.46zM21.018 29.25v-8.531h2.748c.754 0 1.432.172 2.033.515a3.56 3.56 0 0 1 1.406 1.448c.34.62.512 1.318.516 2.091v.393c0 .781-.166 1.482-.498 2.104a3.619 3.619 0 0 1-1.395 1.453 3.956 3.956 0 0 1-2.003.527h-2.807zm2.056-6.943v5.361h.715c.59 0 1.043-.209 1.36-.627.316-.422.474-1.047.474-1.875v-.37c0-.823-.158-1.444-.474-1.862-.317-.418-.778-.627-1.383-.627h-.691zM34.749 25.852h-3.317v3.398h-2.056v-8.531h5.707v1.588h-3.65v1.963h3.316v1.582z" fill="#E05D36"/></svg>
`}function o0(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.5 31.25V19h1.75a1.5 1.5 0 0 1 1.5 1.5v9.25a1.5 1.5 0 0 1-1.5 1.5H30.5zM14.25 17.68v15.166L28.875 34.5V15.75L14.25 17.68z" fill="#D1684D"/><path d="M20.49 26.523v3.102h-1.746V20.82h3.305c.636 0 1.194.12 1.675.363a2.6 2.6 0 0 1 1.118 1.034c.26.443.39.95.39 1.518 0 .862-.286 1.544-.856 2.044-.566.496-1.352.744-2.357.744h-1.53zm0-1.47h1.559c.461 0 .812-.113 1.053-.339.244-.226.366-.548.366-.967 0-.432-.122-.78-.366-1.046-.245-.267-.582-.404-1.013-.412h-1.6v2.764z" fill="#fff"/></svg>
`}function r0(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/></svg>
`}function n0(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.5 31.25V19h1.75a1.5 1.5 0 0 1 1.5 1.5v9.25a1.5 1.5 0 0 1-1.5 1.5H30.5zM14.25 17.68v15.166L28.875 34.5V15.75L14.25 17.68z" fill="#468B5B"/><path d="m21.563 23.855 1.588-3.035h2.007l-2.467 4.366 2.531 4.439h-2.03l-1.63-3.084-1.629 3.084h-2.03l2.53-4.439-2.466-4.366h2.007l1.588 3.035z" fill="#fff"/></svg>
`}function i0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 1a7.7 7.7 0 0 1 7.7 7.7c0 2.527-1.466 4.578-2.91 6.598-.406.566-.81 1.13-1.178 1.702H8.388c-.369-.572-.772-1.136-1.177-1.702C5.766 13.278 4.3 11.227 4.3 8.7A7.7 7.7 0 0 1 12 1zm3.3 19.8V19H8.7v1.8a2.2 2.2 0 0 0 2.2 2.2h2.2a2.2 2.2 0 0 0 2.2-2.2zM12.725 3.044a1 1 0 0 0-.242 1.985 4 4 0 0 1 3.45 3.242 1 1 0 0 0 1.966-.365 6 6 0 0 0-5.174-4.862z" fill="currentColor"/></svg>
`}function a0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zm-9.68-4.98a1.62 1.62 0 1 1-3.24 0 1.62 1.62 0 0 1 3.24 0zM9.5 10.8a1 1 0 0 1 1-1h1.8a1 1 0 0 1 1 1v5h1.2v2h-4.4v-2h1.2v-4h-.8a1 1 0 0 1-1-1z" fill="currentColor"/></svg>
`}function s0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM7 11a1 1 0 1 0 0 2h10a1 1 0 1 0 0-2H7z" fill="currentColor"/></svg>
`}function c0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM13 7a1 1 0 1 0-2 0v4H7a1 1 0 1 0 0 2h4v4a1 1 0 1 0 2 0v-4h4a1 1 0 1 0 0-2h-4V7z" fill="currentColor"/></svg>
`}function l0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM9.998 8.834v-.009a1 1 0 0 1-2-.007c0-.351.117-.726.266-1.048.158-.344.394-.714.713-1.057.649-.7 1.654-1.295 3.021-1.295 2.64 0 4 1.876 4 3.4V9.563a3.24 3.24 0 0 1-2.604 3.176.493.493 0 0 0-.396.483v.576a1 1 0 1 1-2 0v-.576c0-1.188.839-2.211 2.004-2.444a1.24 1.24 0 0 0 .996-1.215V8.818c0-.392-.437-1.4-2-1.4-.734 0-1.23.304-1.555.655a2.104 2.104 0 0 0-.364.537c-.055.119-.073.193-.079.216a.033.033 0 0 1-.002.008zM12 16.02a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5z" fill="currentColor"/></svg>
`}function m0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zm-5.74-2.35a1 1 0 0 0-1.52-1.3l-5.296 6.18-2.737-2.737a1 1 0 0 0-1.414 1.414l3.5 3.5a1 1 0 0 0 1.466-.056l6-7z" fill="currentColor" opacity=".9"/></svg>
`}function p0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 5.32A2.4 2.4 0 0 0 1 7.425v9.151a2.4 2.4 0 0 0 1.25 2.107l8.6 4.69a2.4 2.4 0 0 0 2.299 0l8.6-4.69a2.4 2.4 0 0 0 1.25-2.107v-9.15a2.4 2.4 0 0 0-1.25-2.108l-8.6-4.69a2.4 2.4 0 0 0-2.299 0l-8.6 4.69zm6.857 2.372a1 1 0 0 0-1.414 1.414L10.586 12l-2.893 2.893a1 1 0 1 0 1.414 1.414L12 13.413l2.893 2.893a1 1 0 0 0 1.414-1.414L13.414 12l2.893-2.893a1 1 0 1 0-1.414-1.414L12 10.585 9.107 7.692z" fill="currentColor"/></svg>
`}function u0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.612 4.62c-1.149-2.031-4.075-2.031-5.224 0L1.53 18.525C.4 20.524 1.844 23 4.142 23h15.716c2.297 0 3.742-2.476 2.612-4.476L14.612 4.62zM12 8.5a1 1 0 0 1 1 1v5a1 1 0 0 1-2 0v-5a1 1 0 0 1 1-1zm1.5 9.8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" fill="currentColor"/></svg>
`}function f0(e){return e`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="18.75" stroke="currentColor" stroke-width="2.5"/><path d="m15 15 10 10m-10 0 10-10" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function d0(e){return e`
<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M36.878 13.465a3 3 0 0 1 4.243 0l1.414 1.414a3 3 0 0 1 0 4.243L33.657 28l8.878 8.878a3 3 0 0 1 0 4.243l-1.414 1.414a3 3 0 0 1-4.243 0L28 33.657l-8.88 8.88a3 3 0 0 1-4.242 0l-1.414-1.415a3 3 0 0 1 0-4.243l8.879-8.878-8.879-8.88a3 3 0 0 1 0-4.242l1.414-1.414a3 3 0 0 1 4.243 0L28 22.344l8.878-8.879z" fill="currentColor"/></svg>
`}function g0(e){return e`
<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M49.015 12.845a3 3 0 0 1 .041 4.242L24.301 42.328a6 6 0 0 1-8.616-.05L4.92 31.047a3 3 0 0 1 .09-4.242l1.445-1.383a3 3 0 0 1 4.241.09l9.338 9.743 23.31-23.768a3 3 0 0 1 4.243-.042l1.428 1.4z" fill="currentColor"/></svg>
`}function h0(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0zM7.636 6.364a.9.9 0 0 0-1.272 1.272L8.727 10l-2.363 2.364a.9.9 0 0 0 1.272 1.272L10 11.273l2.364 2.363a.9.9 0 1 0 1.272-1.272L11.273 10l2.363-2.364a.9.9 0 1 0-1.272-1.272L10 8.727 7.636 6.364z" fill="currentColor"/></svg>
`}function y0(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 19a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm3.636-10.364a.9.9 0 1 0-1.272-1.272L9 10.727 7.636 9.364a.9.9 0 0 0-1.272 1.272l2 2a.9.9 0 0 0 1.272 0l4-4z" fill="currentColor"/></svg>
`}function x0(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 2a1 1 0 0 0-2 0v2H2a1 1 0 0 0 0 2h2v8a2 2 0 0 0 2 2h8v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H6V2zm3 2a1 1 0 0 0 0 2h5v5a1 1 0 1 0 2 0V6a2 2 0 0 0-2-2H9z" fill="currentColor"/></svg>
`}function _0(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="6" y="6" width="8" height="8" rx="4" fill="currentColor"/></svg>
`}function S0(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.667 9.167V2m0 7.167L3 7.5m1.667 1.667L6.334 7.5M4.667 2 3 3.667M4.667 2l1.666 1.667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.962 17.917H9.504a.833.833 0 0 1-.58-.235l-3.822-3.698c-.569-.551-.488-1.488.216-1.851.487-.252 1.003-.466 1.349-.466.828 0 1.657.549 2.121.92.145.115.379.012.379-.173V4.667a1.667 1.667 0 1 1 3.333 0V8l3.543 1.288a2.5 2.5 0 0 1 1.611 2.765l-.87 5.169a.833.833 0 0 1-.822.695z" stroke="currentColor" stroke-width="2"/></svg>
`}function Ym(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.536 5.264a.9.9 0 0 0-1.272 1.272L10.727 12l-5.463 5.463a.9.9 0 1 0 1.272 1.273L12 13.273l5.464 5.463a.9.9 0 0 0 1.272-1.272L13.273 12l5.463-5.464a.9.9 0 1 0-1.272-1.272L12 10.727 6.536 5.264z" fill="currentColor"/></svg>
`}function k0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 11H3a1 1 0 1 0 0 2h18a1 1 0 1 0 0-2zm0-6H3a1 1 0 0 0 0 2h18a1 1 0 1 0 0-2zM3 19h18a1 1 0 1 0 0-2H3a1 1 0 1 0 0 2z" fill="currentColor"/></svg>
`}function jm(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.5 5.25a.752.752 0 0 0-.744-.75H3.244a.745.745 0 0 0-.744.75c0 .414.341.75.744.75h13.512c.411 0 .744-.333.744-.75zm0 5a.752.752 0 0 0-.744-.75H3.244a.745.745 0 0 0-.744.75c0 .414.341.75.744.75h13.512c.411 0 .744-.333.744-.75zm-15 5c0 .414.337.75.755.75h8.99a.75.75 0 1 0 0-1.5h-8.99a.75.75 0 0 0-.755.75z" fill="currentColor"/></svg>
`}function C0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12zm6.207-14.793a1 1 0 0 0-1.414-1.414L10 14.586l-2.793-2.793a1 1 0 0 0-1.414 1.414l3.5 3.5a1 1 0 0 0 1.414 0l7.5-7.5z" fill="currentColor"/></svg>
`}function b0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm4.736 7.264a.9.9 0 0 0-1.272 0L12 10.727 8.536 7.264l-.092-.081a.9.9 0 0 0-1.18.08l-.081.093a.9.9 0 0 0 .08 1.18L10.728 12l-3.463 3.464a.9.9 0 0 0 1.272 1.272L12 13.273l3.464 3.463.092.08a.9.9 0 0 0 1.18-.08l.08-.092a.9.9 0 0 0-.08-1.18L13.273 12l3.463-3.464a.9.9 0 0 0 0-1.272z" fill="currentColor"/></svg>
`}function J3(){return Ve([wr(T("Quiz.Editor.Choices.DefaultAnswer",{index:1}),!0),wr(T("Quiz.Editor.Choices.DefaultAnswer",{index:2}),!1),wr(T("Quiz.Editor.Choices.DefaultAnswer",{index:3}),!1)],e=>e.id)}function B0(e){return Sr(e.questions)?{...e,questions:me(e.questions,t=>t.type==="ti"?{...t,content:{...t.content,answers:Ve(t.content.answers,o=>o.id)}}:t)}:{...e,questions:Ve([{id:Ue(),description:L.create(),attachment:null,feedback:Wc(),type:"mc",content:J3()}],t=>t.id)}}function Wi(e,{text:t,onClick:o,disabled:r=!1}){return e(qt,{style:"primary",content:t,onClick:o,size:"medium",state:r?"disabled":"default"})}function v0(e){return`QM_PLAYER_PERSISTED_STATE_${JSON.stringify(e.intro).substring(0,100)}`}function Zm(e){return{type:e.type,correct:!1,submitted:!1,choices:e.content.order.reduce((t,o)=>(t[o]=!1,t),{})}}function Xm(){return{type:"ti",correct:!1,submitted:!1,answer:""}}var T0={type:"t",answer:"a",correct:"c",submitted:"s"},D0={correct:"c",submitted:"s",type:"t",choices:b({_:"cs"})},w0={type:"t",questionId:"qi"},qi={sessionState:{_:"ss"},attempts:{_:"a"},timerStartTime:{_:"tst"},timerStopTime:{_:"te"},questionsViewOrder:{_:"qvo"},timeSpent:{_:"ts"},choicesViewOrderMap:b({_:"cvo"}),typeInQuestionsState:b({_:"tqi",...T0}),choicesQuestionsState:b({_:"cqs",...D0}),currentSlide:{_:"cs",...w0},bestAttempt:"ba"};function Jm(e,t){let o=[],r=[];ce(e.content.matches,s=>{o.push(s.left.id),r.push(s.right.id)}),t&&No(o);let n=e.content.distractors.order,i=[...r,...n];No(i);let a=o.reduce((s,c)=>(s[c]=null,s),{});return{type:e.type,correct:!1,submitted:!1,leftPartsOrder:o,rightPartsOrder:i,matchedPairs:a}}function ep(e){let t=Ae(e.content.order,o=>No(o));return{type:e.type,correct:co(e.content.order,t),submitted:!1,order:t}}var eR={correct:"c",submitted:"s",type:"t",order:"o"},tR={correct:"c",submitted:"s",type:"t",leftPartsOrder:"lo",rightPartsOrder:"ro",matchedPairs:b({_:"mp"})};var Gi={...qi,sequenceQuestionsState:b({_:"sqs",...eR}),matchingQuestionsState:b({_:"mqs",...tR})};var E0=Gi,P0=1,tp=2;function R0(e){return{sessionState:e.states.sessionState.get(),attempts:e.states.usedAttempts.get(),timerStartTime:e.states.evaluationStartTime.get(),timerStopTime:e.states.evaluationStopTime.get(),questionsViewOrder:e.states.questionsViewOrder.get(),choicesViewOrderMap:e.states.choicesViewOrderMap.get(),typeInQuestionsState:e.states.typeInQuestionsState.get(),sequenceQuestionsState:e.states.sequenceQuestionsState.get(),choicesQuestionsState:e.states.choicesQuestionsState.get(),matchingQuestionsState:e.states.matchingQuestionsState.get(),currentSlide:e.states.currentSlide.get(),timeSpent:e.states.timeSpent.get(),bestAttempt:e.states.bestAttempt.get()}}function oR(e){switch(e){case 1:return qi;case 2:return Gi;default:throw Error(`cannot decode PersistedState with version ${e}`)}}function op(e){return{version:tp,state:xo(e,E0,[])}}function rp(e){let t="version"in e&&typeof e.version=="number"?e.version:1,o=oR(t),r=t>1&&"state"in e?e.state:e;return{state:zt(r,o,[]),version:t}}function fo(e){let[t]=ve.getBlocksArray(e.blockMap),o=re(t);if(!o)throw new Error("Richtext must consist only paragraph block");return Oe.getCharactersText(o)}function rR(e){let t=Et();function o(){t.dispatch()}let r=Xs(o).call;return requestAnimationFrame(()=>{e.states.usedAttempts.subscribe(r),e.states.session.subscribe(r)}),t}function nR(e){let t=Et();return e.states.currentSlide.subscribe(()=>t.dispatch()),t}function iR(e){let t=Et();return e.states.quizClosed.subscribe(()=>t.dispatch()),t}function aR(e){let t=Et();return e.states.sessionState.subscribe(o=>{o==="completed"&&t.dispatch()}),t}function sR(e){let t=Et();return e.states.sessionState.subscribe(o=>{o==="inProgress"&&t.dispatch()}),t}function xs(e,t){let o=Et(),r=t.states.questionsState.subscribe(n=>{let i=n[e];i&&i.submitted&&(o.dispatch(),r())});return o}function cR(e,t){return e==="completed"?{get quizPassed(){return t.states.quizPassed.get()},get score(){return t.states.score.get()},get maxScore(){return 100}}:null}function np(e){return{description:fo(e.description),attachment:e.attachment,feedback:{type:e.feedback.type,correct:fo(e.feedback.correct),incorrect:fo(e.feedback.incorrect),answered:fo(e.feedback.answered)}}}function lR(e,t){return{id:e.id,type:"ti",data:{...np(e),content:{...e.content,answers:ze(e.content.answers)}},get state(){let r=t.states.typeInQuestionsState.get()[e.id];return r?{correct:r.correct,answer:r.answer}:null},onSubmitted:xs(e.id,t)}}function mR(e){return{...np(e),content:e.content.order.map(t=>{let o=e.content.blocks[t];return{...o,text:fo(o.text)}})}}function pR(e,t){return{id:e.id,type:"sq",data:mR(e),get state(){let r=t.states.sequenceQuestionsState.get()[e.id];return r?{correct:r.correct,order:r.order}:null},onSubmitted:xs(e.id,t)}}function I0(e){return{...np(e),content:e.content.order.map(t=>{let o=e.content.blocks[t];return{...o,text:fo(o.text)}})}}function uR(e,t){return{id:e.id,type:"mc",data:I0(e),get state(){let r=t.states.choicesQuestionsState.get()[e.id];if(!r)return null;let n=r.choices,i=Object.keys(n).find(a=>n[a])||null;return{correct:r.correct,selectedChoiceId:i}},onSubmitted:xs(e.id,t)}}function fR(e){let t=e.content.matches.order.map(r=>{let n=e.content.matches.blocks[r];return{id:n.id,left:{id:n.left.id,text:fo(n.left.text)},right:{id:n.right.id,text:fo(n.right.text)}}}),o=e.content.distractors.order.map(r=>{let n=e.content.distractors.blocks[r];return{id:n.id,text:fo(n.text)}});return{...np(e),content:{matches:t,distractors:o}}}function dR(e,t){return{id:e.id,type:"mt",data:fR(e),get state(){let r=t.states.matchingQuestionsState.get()[e.id];return r?{correct:r.correct,leftPartsOrder:r.leftPartsOrder,rightPartsOrder:r.rightPartsOrder,matchedPairs:r.matchedPairs}:null},onSubmitted:xs(e.id,t)}}function gR(e,t){return{id:e.id,type:"mr",data:I0(e),get state(){let r=t.states.choicesQuestionsState.get()[e.id];if(!r)return null;let n=r.choices,a=t.states.choicesViewOrderMap.get()[e.id];return{correct:r.correct,choices:a.map(s=>({id:s,selected:n[s]}))}},onSubmitted:xs(e.id,t)}}function hR(e,t){let{questions:o}=t.states.quiz.get(),r=o.blocks[e];if(!r)throw new Error(`Unknown question with id=${e}`);switch(r.type){case"sq":return pR(r,t);case"ti":return lR(r,t);case"mc":return uR(r,t);case"mr":return gR(r,t);case"mt":return dR(r,t);default:O(r)}throw new Error("Unknown question type")}function yR(e){return e.states.questionsViewOrder.get().map(o=>hR(o,e))}function xR(e){let{intro:t}=e.states.quiz.get();return t?{title:fo(t.title),description:fo(t.description),attachment:t.attachment}:null}function _R(e){let t=e.states.sessionState.get();return t==="notStarted"?null:{get questions(){return yR(e)},get quizDuration(){return e.states.timerDuration.get()},get timeSpent(){return e.states.timeSpent.get()},get evaluation(){return cR(t,e)},onCompleted:aR(e)}}function SR(e){return{passingScore:e.states.playerSettings.get().passingScore}}function M0({title:e,model:t}){return{get title(){return e},get intro(){return xR(t)},get session(){return _R(t)},get sessionState(){return t.states.sessionState.get()},get settings(){return SR(t)},get currentSlideId(){let o=t.states.currentSlide.get();return o.type==="question"?o.questionId:o.type},get persistedState(){return JSON.stringify(op(R0(t)))},onPersistedStateChanged:rR(t),onSlideChanged:nR(t),onSessionChanged:sR(t),onCloseQuiz:iR(t)}}function Hr(){return{sessionState:"notStarted",currentSlide:{type:"intro"},typeInQuestionsState:{},choicesQuestionsState:{},sequenceQuestionsState:{},matchingQuestionsState:{},evaluationStartTime:null,evaluationStopTime:null,timeSpentBeforeSession:0,sessionStartTime:null,bestAttempt:null}}function A0(e,t){let o=[];ce(e.content,i=>{i.correct&&o.push(i.id)}),o=o.sort();let r=t.choices,n=Object.keys(r).filter(i=>r[i]).sort();return co(o,n)}function V0(e,t){return co(e.content.order,t.order)}function Hd(e){return e.replace(/\s\s+/g," ").trim()}function ip(e,t){return ze(e.answers).some(({text:o})=>{let r=Hd(o),n=Hd(t);return e.caseSensitive?r===n:r.toUpperCase()===n.toUpperCase()})}function F0(e,t){return e.content.matches.order.every(o=>{let r=e.content.matches.blocks[o],n=t.matchedPairs[r.left.id];return r.right.id===n})}function Yi(e,t){let o={};return ce(e.questions,r=>{switch(r.type){case"mc":case"mr":{let n=r.content.order;t.shuffleAnswersEnabled&&(n=Ae(n,i=>No(i))),o[r.id]=n;break}case"ti":case"sq":case"mt":break;default:O(r)}}),o}function ji(e,t){let o=e.questions.order;return t.shuffleQuestionsEnabled&&(o=Ae(o,r=>No(r))),o}function O0(e,{decodedPersistedState:t,quiz:o,playerSettings:r}){let n=Hr(),i=e.def("QuizPlayer.States.QuestionsState.TypeInQuestionsState",t?t.typeInQuestionsState:n.typeInQuestionsState),a=e.def("QuizPlayer.States.QuestionsState.ChoicesQuestionsState",t?t.choicesQuestionsState:n.choicesQuestionsState),s=e.def("QuizPlayer.States.QuestionsState.SequenceQuestionsState",t?t.sequenceQuestionsState:n.sequenceQuestionsState),c=e.def("QuizPlayer.States.QuestionsState.MatchingQuestionsState",t?t.matchingQuestionsState:n.matchingQuestionsState),l=e.map("QuizPlayer.States.QuestionsState",{typeInQuestionsState:i,choicesQuestionsState:a,sequenceQuestionsState:s,matchingQuestionsState:c},f=>({...f.typeInQuestionsState,...f.choicesQuestionsState,...f.sequenceQuestionsState,...f.matchingQuestionsState})),m=e.def("QuizPlayer.States.QuestionsState.\u0421hoicesViewOrderMap",t?t.choicesViewOrderMap:Yi(o.get(),r.get())),p=e.def("QuizPlayer.States.QuestionsState.QuestionsViewOrder",t?t.questionsViewOrder:ji(o.get(),r.get()));return{typeInQuestionsState:i,choicesQuestionsState:a,sequenceQuestionsState:s,matchingQuestionsState:c,questionsState:l,choicesViewOrderMap:m,questionsViewOrder:p}}function L0(e,t){function o(y){e.typeInQuestionsState.mutate(v=>{v[y]=Xm()})}function r({id:y,answer:v}){e.typeInQuestionsState.mutate(D=>{let A=D[y];A.type==="ti"?A.answer=v:V.error('"setTypeInAnswer" action available only for type in question')})}function n(y){e.typeInQuestionsState.mutate(v=>{let D=v[y.id];if(D){let A=y.content;D.correct=ip(A,D.answer),D.submitted=!0}else V.error(`TypeIn question with id=${y.id} state not initialized`)})}function i(y){e.choicesQuestionsState.mutate(v=>{v[y.id]=Zm(y)})}function a({questionId:y,choiceId:v}){e.choicesQuestionsState.mutate(D=>{let A=D[y],$=A.choices;if(A.type==="mr")$[v]=!$[v];else if(A.type==="mc"){if($[v])return;for(let H of Object.keys($))$[H]=H===v}else V.error('"toggleChoiceSelection" action available only for choices in questions')})}function s(y){e.choicesQuestionsState.mutate(v=>{let D=v[y.id];D?(D.correct=A0(y,D),D.submitted=!0):V.error(`Choices question with id=${y.id} state not initialized`)})}function c(y){e.sequenceQuestionsState.mutate(v=>{v[y.id]=ep(y)})}function l({newOrder:y,questionId:v}){e.sequenceQuestionsState.mutate(D=>{let A=D[v];A?A.order=y:V.error(`Selections question with id=${v} state not initialized`)})}function m(y){e.sequenceQuestionsState.mutate(v=>{let D=v[y.id];D?(D.correct=V0(y,D),D.submitted=!0):V.error(`Selections question with id=${y.id} state not initialized`)})}function p(y){e.matchingQuestionsState.mutate(v=>{v[y.id]=Jm(y,t.shuffleAnswersEnabled)})}function f({questionId:y,matchToConnect:v}){e.matchingQuestionsState.mutate(D=>{let A=D[y];if(A.type==="mt"){let{leftPartsOrder:$,rightPartsOrder:H,matchedPairs:oe}=A,ye=$.findIndex(Tt=>Tt===v.leftId),xe=H.findIndex(Tt=>Tt===v.rightId);Zg(H,ye,xe),oe[v.leftId]=v.rightId}else V.error('"connectMatch" action available only for matches in questions')})}function d({questionId:y,leftIdToDisconnect:v}){e.matchingQuestionsState.mutate(D=>{let A=D[y];A.type==="mt"?A.matchedPairs[v]=null:V.error('"disconnectMatch" action available only for matches in questions')})}function x(y){e.matchingQuestionsState.mutate(v=>{let D=v[y.id];D?(D.correct=F0(y,D),D.submitted=!0):V.error(`Matching question with id=${y.id} state not initialized`)})}function _(y){switch(y.type){case"ti":o(y.id);break;case"mc":case"mr":i(y);break;case"sq":c(y);break;case"mt":p(y);break;default:O(y)}}function k(y){switch(y.type){case"ti":n(y);break;case"mc":case"mr":s(y);break;case"sq":m(y);break;case"mt":x(y);break;default:O(y)}}function S(y){e.choicesViewOrderMap.set(y)}function C(y){e.questionsViewOrder.set(y)}return{setTypeInAnswer:r,toggleChoiceSelection:a,changeSequenceOrder:l,connectMatch:f,disconnectMatch:d,initQuestionState:_,answerQuestion:k,setChoicesViewOrderMap:S,setQuestionsViewOrder:C}}function K0(e,{decodedPersistedState:t,questionsState:o,quiz:r,playerSettings:n}){let i=Hr(),a=e.def("QuizPlayer.States.Session.SessionState",t?t.sessionState:i.sessionState),s=e.def("QuizPlayer.States.Session.UsedAttempts",t?t.attempts:0),c=t?t.currentSlide:i.currentSlide,l=e.def("QuizPlayer.States.CurrentSlide",c),m=e.def("QuizPlayer.States.QuizClosed",!1),p=e.def("QuizPlayer.States.Session.BestAttempt",t?t.bestAttempt:i.bestAttempt),f=e.map("QuizPlayer.States.QuizScore",{questionsState:o,quiz:r},_=>{let k=0;for(let C of Object.keys(_.questionsState)){let y=_.questionsState[C];y.submitted&&y.correct&&k++}let S=_.quiz.questions.order.length;return S?Math.round(k/S*100):0}),d=e.map("QuizPlayer.States.QuizCompleted",{questionsState:o,quiz:r},_=>{let k=Object.keys(_.questionsState);return k.length!==_.quiz.questions.order.length?!1:k.every(S=>_.questionsState[S].submitted)}),x=e.map("QuizPlayer.States.QuizPassed",{score:f,playerSettings:n},_=>_.score>=_.playerSettings.passingScore);return{sessionState:a,usedAttempts:s,currentSlide:l,bestAttempt:p,quizCompleted:d,quizPassed:x,score:f,quizClosed:m}}function $0(e){function t(i){e.sessionState.set(i)}function o(){e.usedAttempts.set(e.usedAttempts.get()+1)}function r(i){e.currentSlide.set(i)}function n(i){e.bestAttempt.set(i)}return{setSessionState:t,incrementAttempt:o,setCurrentSlide:r,setBestAttempt:n}}function ap(e){var t;return{...e,bestAttempt:(t=e.bestAttempt)!=null?t:null,sequenceQuestionsState:{},matchingQuestionsState:{}}}function sp({state:e,version:t}){return Er({document:e,initialVersion:P0,versionFrom:t,versionTo:tp,upgraders:[{targetVersion:2,upgradeFn:ap}]}).upgradedDocument}function z0(e,{timeLimitEnabled:t,timerLeftTime:o,evaluationStartTime:r,currentSlide:n}){let i=e.map("QuizPlayer.States.Popups.QuizEndTimePopupOpened",{timeLimitEnabled:t,timerLeftTime:o,currentSlide:n},s=>s.timeLimitEnabled&&s.timerLeftTime===0&&s.currentSlide.type==="question"),a=e.map("QuizPlayer.States.Popups.QuizStartInfoMessageOpened",{timeLimitEnabled:t,evaluationStartTime:r,currentSlide:n},s=>s.timeLimitEnabled&&s.evaluationStartTime==null&&s.currentSlide.type==="question");return{quizEndTimePopupOpened:i,quizStartInfoMessageOpened:a}}function N0(e,{decodedPersistedState:t,playerSettings:o,quizCompleted:r}){let n=Hr(),i=e.def("QuizPlayer.States.Timer.EvaluationStartTime",t?t.timerStartTime:n.evaluationStartTime),a=e.def("QuizPlayer.States.Timer.EvaluationStopTime",t?t.timerStopTime:n.evaluationStopTime),s=e.def("QuizPlayer.States.Timer.TimeSpentBeforeSession",t?t.timeSpent:n.timeSpentBeforeSession),c=e.def("QuizPlayer.States.Timer.CurrentTime",Date.now()),l=e.def("QuizPlayer.States.Timer.SessionStartTime",n.sessionStartTime),m=e.map("QuizPlayer.States.QuizTimeLimitEnabled",{playerSettings:o},_=>_.playerSettings.timeLimitEnabled),p=e.map("QuizPlayer.States.Timer.TimeSpent",{sessionStartTime:l,timeSpentBeforeSession:s,currentTime:c},_=>{if(!_.sessionStartTime)return 0;let k=Math.max(_.currentTime-_.sessionStartTime,0);return _.timeSpentBeforeSession+k}),f=e.map("QuizPlayer.States.Timer.TimerDuration",{currentTime:c,evaluationStartTime:i,evaluationStopTime:a},_=>_.evaluationStartTime?_.evaluationStopTime?_.evaluationStopTime-_.evaluationStartTime:_.currentTime-_.evaluationStartTime:0),d=e.map("QuizPlayer.States.Timer.TimerLeftTime",{timerDuration:f,playerSettings:o},_=>_.playerSettings.timeLimitEnabled?Math.max(_.playerSettings.timeLimit-_.timerDuration,0):0),x=e.map("QuizPlayer.States.Timer.CanContinueTimer",{timeLimitEnabled:m,timerLeftTime:d,quizCompleted:r},_=>_.timeLimitEnabled?!_.quizCompleted&&_.timerLeftTime>0:!_.quizCompleted);return{timerLeftTime:d,timeLimitEnabled:m,evaluationStopTime:a,evaluationStartTime:i,currentTime:c,sessionStartTime:l,timeSpentBeforeSession:s,timeSpent:p,timerDuration:f,canContinueTimer:x}}function Q0(e,t){let o=e.def("QuizPlayer.States.SubscriptionProduct",t.subscriptionProduct),r=e.def("QuizPlayer.States.WatermarkUrl",t.watermarkUrl),n=e.def("QuizPlayer.States.ShowWatermark",t.showWatermark),i=e.def("QuizPlayer.States.Quiz",t.quiz),a=e.def("QuizPlayer.States.QuizPlayerSettings",t.settings),s=e.def("QuizPlayer.States.InsertType",t.insertType),c=e.def("QuizPlayer.States.Direction",t.direction),l=t.persistedState?sp(rp(t.persistedState)):null,m=O0(e,{decodedPersistedState:l,quiz:i,playerSettings:a}),p=K0(e,{decodedPersistedState:l,quiz:i,questionsState:m.questionsState,playerSettings:a}),f=N0(e,{decodedPersistedState:l,playerSettings:a,quizCompleted:p.quizCompleted}),d=z0(e,{timeLimitEnabled:f.timeLimitEnabled,timerLeftTime:f.timerLeftTime,evaluationStartTime:f.evaluationStartTime,currentSlide:p.currentSlide}),x=e.map("QuizPlayer.States.Session",{sessionState:p.sessionState,currentSlide:p.currentSlide,typeInQuestionsState:m.typeInQuestionsState,sequenceQuestionsState:m.sequenceQuestionsState,matchingQuestionsState:m.matchingQuestionsState,choicesQuestionsState:m.choicesQuestionsState,questionsViewOrder:m.questionsViewOrder,choicesViewOrderMap:m.choicesViewOrderMap,evaluationStartTime:f.evaluationStartTime,evaluationStopTime:f.evaluationStopTime,timeSpentBeforeSession:f.timeSpentBeforeSession,sessionStartTime:f.sessionStartTime,bestAttempt:p.bestAttempt},k=>k),_=e.map("QuizPlayer.States.Player",{attempts:p.usedAttempts,quiz:i,playerSettings:a,session:x,subscriptionProduct:o,direction:c,watermarkUrl:r,showWatermark:n},k=>k);return{quiz:i,playerSettings:a,subscriptionProduct:o,direction:c,watermarkUrl:r,showWatermark:n,insertType:s,...f,...p,...m,...d,session:x,player:_}}var kR=500;function H0(e){function t(r){e.sessionStartTime.set(r);let n=e.evaluationStartTime.get()||r;e.evaluationStartTime.set(n),e.currentTime.set(n)}function o(){let r=setInterval(()=>{let n=e.canContinueTimer.get(),i=Date.now();e.currentTime.set(i),n||(clearInterval(r),e.evaluationStopTime.set(i))},kR)}return{setSessionStartTime:t,startTimer:o}}function U0(e){let t=$0(e),o=L0(e,e.playerSettings.get()),r=H0(e);function n(y){e.quiz.set(y),c()}function i(y){if(y.type==="question"){let v=y.questionId;if(!e.questionsState.get()[v]){let $=e.quiz.get().questions.blocks[v];if(!$){V.error(`Unknown question id=${v}`);return}o.initQuestionState($)}}t.setCurrentSlide(y)}function a(){e.quizClosed.set(!0)}function s(){let y=e.currentSlide.get();if(y.type!=="question"){V.error('"submitQuestion" action available only for questions');return}let{showCorrectAnswersEnabled:v,showFeedbackEnabled:D}=e.playerSettings.get(),A=y.questionId,H=e.questionsState.get()[A],{questions:oe}=e.quiz.get(),ye=oe.blocks[A];if(H.submitted){V.error(`Question with id=${A} already submitted`);return}o.answerQuestion(ye),!v&&!D&&m()}function c(){Ek(()=>{let y=e.quiz.get(),v=e.playerSettings.get(),D=ji(y,v),A=Yi(y,v),$=Hr();e.sessionState.set($.sessionState),e.currentSlide.set($.currentSlide),e.typeInQuestionsState.set($.typeInQuestionsState),e.choicesQuestionsState.set($.choicesQuestionsState),e.sequenceQuestionsState.set($.sequenceQuestionsState),e.matchingQuestionsState.set($.matchingQuestionsState),e.questionsViewOrder.set(D),e.choicesViewOrderMap.set(A),e.evaluationStartTime.set($.evaluationStartTime),e.evaluationStopTime.set($.evaluationStopTime),e.timeSpentBeforeSession.set($.timeSpentBeforeSession),e.sessionStartTime.set($.sessionStartTime)}),f()}function l(){let y=e.currentSlide.get();if(y.type==="question"){let $=e.questionsState.get()[y.questionId];if(!$)throw new Error("Current question must have state");$.submitted||s()}t.setSessionState("completed");let v=e.score.get(),D=e.bestAttempt.get();(D===null||v>D)&&t.setBestAttempt(v)}function m(){var D;let y=e.currentSlide.get(),v=e.questionsViewOrder.get();switch(y.type){case"intro":{let[A]=v;A&&i({type:"question",questionId:A})}break;case"results":V.error('"gotoNextSlide" action not available in results slide');break;case"question":{let A=y.questionId,$=v.findIndex(H=>H===A);if($>=0&&$<v.length-1){let H=v[$+1];i({type:"question",questionId:H})}else(D=e.quiz.get().results)!=null&&D.visible&&i({type:"results"})}break;default:O(y)}}function p(){let y=e.currentSlide.get(),{showCorrectAnswersEnabled:v,showFeedbackEnabled:D}=e.playerSettings.get();if(y.type==="question"){let $=e.questionsState.get()[y.questionId].submitted;!v&&!D&&$&&m()}}function f(){var D,A;let y=e.currentSlide.get().type,v=e.quiz.get();y==="intro"&&!((D=v.intro)!=null&&D.visible)&&C(),y==="results"&&!((A=v.results)!=null&&A.visible)&&a()}function d(y){e.timeLimitEnabled.get()&&y===0&&l()}function x(){f(),p();let y=e.timerLeftTime.get();d(y)}function _(){e.timeLimitEnabled.get()||(r.setSessionStartTime(Date.now()),r.startTimer())}function k(){e.timeLimitEnabled.get()&&(r.setSessionStartTime(Date.now()),r.startTimer())}function S(){if(e.sessionState.get()!=="inProgress")return;e.canContinueTimer.get()&&(r.setSessionStartTime(Date.now()),r.startTimer())}function C(){e.quiz.get().questions.order.length&&(_(),t.incrementAttempt(),t.setSessionState("inProgress"),m())}return{initQuizPlayer:x,resetQuiz:n,startQuiz:C,closeQuiz:a,restartQuiz:c,gotoSlide:i,gotoNextSlide:m,submitQuestion:s,...t,...o,...r,resumeEvaluation:S,startEvaluation:_,startEvaluationWithLimit:k,checkTimeIsUp:d}}function W0(e,t,o){e.effect("onTimerLeftTime",{timerLeftTime:t.timerLeftTime},r=>{o.checkTimeIsUp(r.timerLeftTime)}),e.effect("onQuizCompleted",{quizCompleted:t.quizCompleted,score:t.score,bestAttempt:t.bestAttempt},r=>{r.quizCompleted&&(o.setSessionState("completed"),(r.bestAttempt===null||r.score>r.bestAttempt)&&o.setBestAttempt(r.score))})}var q0=tt({});function G0(e,t){let o=Mk({name:"QuizPlayer.Model",getStates:n=>Q0(n,t),getActions:U0,defEffects:W0}),r=I(()=>M0({title:t.title,model:o}),[o,t.title]);return e.setContext(q0,o),t.initApi(r),P(()=>{let n=!1?o.states.player.subscribe(()=>{if(window.localStorage){let i=v0(o.states.quiz.get());window.localStorage.setItem(i,r.persistedState)}}):()=>{};return t.initApi(r),o.actions.initQuizPlayer(),t.persistedState&&o.actions.resumeEvaluation(),n},[r,r.persistedState,o.actions,o.states.player,o.states.quiz,t,t.persistedState]),o}function j(){return ae(q0)}function Kn(e){return e==="standalone"}var CR=600,Y0=20,bR=56,$n=tt({});function j0(e,t,o){if(!e)return;let r=e.scrollTop,n=!1,i=new $t;return Jl({duration:CR,timingFn:em,reducer:{animate:a=>{e.scrollTop=r+t*a},complete:()=>{o&&o(),n=!0},changedProperties:[]},abortSignal:i}),()=>{n||i.dispatch()}}function Z0(e,t){let{states:o}=j(),r=N(o.currentSlide),n=N(o.insertType);P(()=>{let i=e.current,a=t.current,s=i.getBoundingClientRect(),c=a.getBoundingClientRect();if(c.top<s.top){let l=Kn(n)?c.top-s.top:c.top-Y0-bR;return j0(i,l)}},[e,t,r,n])}function X0(e,t,o){let r=ae($n),{states:n}=j(),i=N(n.insertType);P(()=>{let a=r.current,c=e.current.getBoundingClientRect();if(c.bottom>window.innerHeight&&t){let l=c.bottom-window.innerHeight,m=Kn(i)?l:l+Y0;return j0(a,m,o)}},[r,e,t,o,i])}var Zi=tt({current:null});var Ud=u({$:"$",popup:"x799f4__popup",icon:"x799f4__icon",description:"x799f4__description"});function J0(e){let{states:t,actions:o}=j(),r=N(t.playerSettings),n=N(t.quiz),i=N(t.usedAttempts);return e`
<div class=${Ud.popup}>
	${e(Um,{},Ud.icon)}
	<p class=${Ud.description}>
		${T("Quiz.Player.QuizEndTimePopup.Description")}
	</p>
	${e.switch(()=>{var a;return(a=n.results)!=null&&a.visible?g(qt,{content:T("Quiz.Player.QuizEndTimePopup.ResultsButtonLabel"),onClick:()=>o.gotoSlide({type:"results"}),style:"primary",size:"medium"}):Zc(i,r.attempts)?g(qt,{content:T("Quiz.Player.Results.RestartQuiz"),leftIcon:g(Zl),onClick:o.restartQuiz,style:"secondary",size:"medium"}):null})}
</div>`}function e1(e){let{states:t}=j(),o=N(t.quizEndTimePopupOpened),r=ae(Zi);xi({html:e,side:"center",createModal:()=>o?g(J0,{}):null,layer:r.current||void 0,modalOverlayType:"light"})}var Wd=u({$:"$",container:"x13d70__container",icon:"x13d70__icon",text:"x13d70__text"});function t1(e,{text:t,icon:o}){return e`
<div class=${Wd.container}>
	${e(o,Wd.icon)}
	<span class=${Wd.text}>${t}</span>
</div>`}var BR=3e3;function o1({html:e,show:t,text:o,icon:r,onHide:n,layer:i}){P(()=>{if(t){let a=setTimeout(n,BR);return()=>clearTimeout(a)}},[t,n]),xi({html:e,side:"center",createModal:()=>t?g(t1,{text:o,icon:r}):null,modalOverlayType:"light",layer:i})}function r1(e){let t=Math.floor(e/6e4),o=Math.floor(e%6e4/1e3);return o===60&&(o=0,t+=1),{minutes:t,seconds:o}}function vR(e,t){let o="minutesAndSeconds";return e==0&&(o="seconds"),t==0&&(o="minutes"),o}function cp(e,t){let{minutes:o,seconds:r}=r1(e),n="",i=vR(o,r);switch(i){case"minutesAndSeconds":n=T(t.minutesAndSeconds,{minutes:o,seconds:r});break;case"minutes":n=T(t.minutes,{minutes:o});break;case"seconds":n=T(t.seconds,{seconds:r});break;default:O(i,`Unknown format type: ${i}`)}return n}function n1(e){let{states:t,actions:o}=j(),{timeLimit:r}=N(t.playerSettings),n=N(t.quizStartInfoMessageOpened),i=o.startEvaluationWithLimit,a=ae(Zi),s=cp(r,{minutes:lr("Quiz.Player.QuizStartInfoMessage.Description.WithoutSeconds"),seconds:lr("Quiz.Player.QuizStartInfoMessage.Description.WithoutMinutes"),minutesAndSeconds:lr("Quiz.Player.QuizStartInfoMessage.Description")});o1({html:e,show:n,text:s,icon:g(Um),onHide:()=>i(),layer:a.current||void 0})}var TR=u({$:"$",embed:"x68bb1__embed"}),DR=560,wR=315,ER=320;function PR(e){let t=new RegExp(/^http(?:s?):\/\/(?:www\.)?youtube\.[a-z]{2,3}\/embed\/[\w\-_]*$/i);return!!e.match(t)}function i1(e,t){let o=M();return P(()=>{let r=t.width?W(t.width):"100%",n=t.height?W(t.height):"100%";PR(t.src)&&(r=W(DR),n=W(wR)),Me(o.current,{"--width":r,"--height":n});let i=o.current.getBoundingClientRect(),a=ER/i.width;Me(o.current,{"--mobile-width":W(i.width*a),"--mobile-height":W(i.height*a)})},[o,t.width,t.height,t.src]),e`
<iframe
	save-ref=${o}
	class=${TR.embed}
	src=${t.src}
	allowfullscreen
>
</iframe>`}var a1=u({$:"$",container:"x8d490__container",img:"x8d490__img"}),RR=300;function s1(e,t){let o=M(),r=Nm(e,{style:"light"}),n=Wt(t),[i]=jt(o);return e`
<div
	save-ref=${o}
	class=${a1.container}
>
	${e(io,{image:t,withSize:!0,withZoom:!0,onClick:()=>r(Ne(n),t),outContainerRef:o,containerLimit:i?{width:i,height:RR}:void 0,className:a1.img})}
</div>`}function lp(e){return e?e.type==="i"?g(s1,e):g(i1,e):null}function De(e,t){return uk(e,{...t,className:fk,urlTooltipEnabled:!1})}var _s=u({$:"$",intro:"xead59__intro",intro_type_builtIn:"xead59__intro_type_builtIn",intro_indent:"xead59__intro_indent",intro_attach:"xead59__intro_attach",intro_type_standalone:"xead59__intro_type_standalone",title:"xead59__title",description:"xead59__description",button:"xead59__button",attachment:"xead59__attachment"});function c1(e,{showTopPanel:t}){let{states:o,actions:r}=j(),n=r.startQuiz,{intro:i}=N(o.quiz),a=N(o.insertType);if(!i)throw Error("'intro' is not defined");let s=i.attachment,[c]=ve.getBlocksArray(i.title.blockMap),[l]=ve.getBlocksArray(i.description.blockMap),m=c,p=l;return e`
<div
	class=${_s.intro.withMods({attach:!!s,type:a,indent:!t})}
>
	${e(lp(s),{className:_s.attachment})}
	${e.renderIf(De,()=>!!m.characters.length&&{paragraph:m},_s.title)}
	${e.renderIf(De,()=>!!p.characters.length&&{paragraph:p},_s.description)}
	${e(qt,{content:T("Quiz.Player.Intro.StartQuiz"),onClick:n,style:"primary",size:"medium"},_s.button)}
</div>`}var IR=u({$:"$",button:"x052dc__button",continueButton:"x052dc__continue-button",fadeIn:"x052dc__fadeIn",fadeOut:"x052dc__fadeOut"});function l1(e,{disabled:t,onClick:o}){let{actions:r}=j(),n=r.gotoNextSlide;return e`
<div class=${IR.continueButton}>
	${e(Wi,{text:T("Quiz.Player.Question.Continue"),onClick:()=>{n(),o()},disabled:t})}
</div>`}var MR=u({$:"$",buttons:"xd53e1__buttons"});function mp(e){let{states:t,actions:o}=j(),{attempts:r}=N(t.playerSettings),n=N(t.usedAttempts),i=N(t.insertType),a=o.closeQuiz,s=o.restartQuiz;return e`
<div class=${MR.buttons}>
	${e.renderIf(qt,()=>Kn(i)&&{content:T("Quiz.Player.Results.FinishQuiz"),onClick:a,style:"primary",size:"medium"})}
	${e.renderIf(qt,()=>Zc(n,r)&&{content:T("Quiz.Player.Results.RestartQuiz"),leftIcon:g(Zl),onClick:s,style:"secondary",size:"medium"})}
</div>`}var AR=u({$:"$",button:"x052dc__button",continueButton:"x052dc__continue-button",fadeIn:"x052dc__fadeIn",fadeOut:"x052dc__fadeOut"});function m1(e){return e`
<div class=${AR.continueButton}>
	${e(mp,{})}
</div>`}var VR=u({$:"$",button:"x052dc__button",continueButton:"x052dc__continue-button",fadeIn:"x052dc__fadeIn",fadeOut:"x052dc__fadeOut"});function p1(e){let{actions:t}=j(),o=t.gotoNextSlide;return e`
<div class=${VR.continueButton}>
	${e(Wi,{text:T("Quiz.Player.Question.GoToResults"),onClick:o})}
</div>`}var FR=u({$:"$",button:"x052dc__button",continueButton:"x052dc__continue-button",fadeIn:"x052dc__fadeIn",fadeOut:"x052dc__fadeOut"});function u1(e,{disabled:t,onClick:o}){let{actions:r}=j(),n=r.submitQuestion;return e`
<div class=${FR.button}>
	${e(Wi,{text:T("Quiz.Player.Question.Submit"),onClick:()=>{n(),o&&o()},disabled:t})}
</div>`}var qd=u({$:"$",description:"x836de__description",label:"x836de__label",text:"x836de__text"});function OR(e,t){let o=t.indexOf(e),r=t.length;return T("Quiz.Player.Question.Number.Label",{current:o+1,total:r})}function f1(e,{question:t,questionsViewOrder:o}){let[r]=ve.getBlocksArray(t.description.blockMap),n=r;return e`
<div class=${qd.description}>
	<p class=${qd.label}>${OR(t.id,o)}</p>
	${e.renderIf(De,()=>!!n.characters.length&&{paragraph:n},qd.text)}
</div>`}function d1(e,t){return J(e.type,{correctIncorrect:t?ve.getBlocksArray(e.correct.blockMap):ve.getBlocksArray(e.incorrect.blockMap),answered:ve.getBlocksArray(e.answered.blockMap)})}var pp=u({$:"$",feedback:"xa9ada__feedback",fadeIn:"xa9ada__fadeIn","feedback_with-separator":"xa9ada__feedback_with-separator",feedback_type_correct:"xa9ada__feedback_type_correct",icon:"xa9ada__icon",feedback_type_incorrect:"xa9ada__feedback_type_incorrect",title:"xa9ada__title",text:"xa9ada__text",fadeOut:"xa9ada__fadeOut"});function g1(e,{question:t,correct:o}){let r=o?g(LC):g(f0),n=o?T("Quiz.Player.Question.Feedback.Correct"):T("Quiz.Player.Question.Feedback.Incorrect"),[i]=d1(t.feedback,o);return e`
<div class=${pp.feedback.withMods({"with-separator":t.type!=="ti",type:o?"correct":"incorrect"})}>
	<div class=${pp.icon}>${e(r)}</div>
	<div class=${pp.title}>${n}</div>
	${e(De,{paragraph:i},pp.text)}
</div>`}function Ao({containerRef:e,mobileWidth:t=h1,callback:o}){let[r,n]=z(!1);return Ze({target:e,onResize:({width:i})=>{let a=i<=t;a!==r&&n(a),o==null||o(a)}}),r}var LR=u({$:"$",icon:"x4b2f4__icon",icon_position_absolute:"x4b2f4__icon_position_absolute",icon_dir_ltr:"x4b2f4__icon_dir_ltr",icon_dir_rtl:"x4b2f4__icon_dir_rtl",icon_position_fixed:"x4b2f4__icon_position_fixed",icon_type_correct:"x4b2f4__icon_type_correct",icon_type_incorrect:"x4b2f4__icon_type_incorrect"});function Vo(e,{correct:t,position:o="absolute"}){let{states:r}=j(),n=N(r.direction),i=t?g(C0):g(b0);return e`
<div
	class=${LR.icon.withMods({dir:n,type:t?"correct":"incorrect",position:o})}
>
	${e(i)}
</div>
`}var Gd=u({$:"$",choice:"x3bc39__choice",choice_submitted:"x3bc39__choice_submitted",choice_size_default:"x3bc39__choice_size_default",choice_size_small:"x3bc39__choice_size_small",choice_focused:"x3bc39__choice_focused",choice_selected:"x3bc39__choice_selected",control:"x3bc39__control",text:"x3bc39__text"});function y1(e,{type:t,choice:o,size:r,selected:n,questionId:i,submitted:a,showCorrectAnswers:s}){let{actions:c}=j(),l=c.toggleChoiceSelection,[m,p]=z(!1),f=t==="mc"?g(Tk,{size:"large",checked:n,disabled:a,onCheckedRequest:()=>!a&&l({questionId:i,choiceId:o.id}),onFocusedChange:p}):g(aS,{size:"large",checked:n,disabled:a,onCheckedRequest:()=>!a&&l({questionId:i,choiceId:o.id}),onFocusedChange:p}),[d]=ve.getBlocksArray(o.text.blockMap);function x(_){!_.defaultPrevented&&!a&&l({questionId:i,choiceId:o.id})}return e`
<div
	class=${Gd.choice.withMods({selected:n,submitted:a,size:r,focused:m})}
	onclick=${x}
>
	${e(f,Gd.control)}
	${e(De,{paragraph:d},Gd.text)}
	${e.renderIf(Vo,()=>s&&(n||o.correct)&&{correct:o.correct})}
</div>`}var KR=u({$:"$",content_withAnswers:"xd9c5b__content_withAnswers"});function x1(e,{question:t,questionState:o,choicesViewOrder:r,showCorrectAnswers:n,containerRef:i}){let a=Ao({containerRef:i});return e`
<div
	class=${KR.content.withMods({withAnswers:n})}
>
	${e.renderAll(r,s=>{let c=t.content.blocks[s];return le(s,y1,{type:t.type,choice:c,size:a?"small":"default",selected:o.choices[s],questionId:t.id,submitted:o.submitted,showCorrectAnswers:n})})}
</div>`}function or(e){let t=me(e.content.distractors,o=>o);return ce(e.content.matches,o=>Da(t,o.right)),t}function up(e,t){return Object.keys(e).find(o=>e[o]===t)||null}function Ss(e,t){return Object.values(e.content.matches.blocks).find(o=>o.left.id===t)||null}var Xi=tt({leftPartsRefs:{current:{}}});function $R(e,t){return`M 0 10
c 0 0 0 -10 10 -10
h ${e}
c 0 0 10 0 10 10
v ${t}
c 0 0 0 2 -2 2
h -4.8
a 6 11 0 1 0 0 10
h 4.8
c 0 0 2 0 2 2
v ${t}
c 0 0 0 10 -10 10
h -${e}
c 0 0 -10 0 -10 -10
z`.replace(/\n/g,"")}function zR(e,t){return`M 1 ${9+1}
c 0 0 0 -9 9 -9
h ${e}
c 0 0 9 0 9 9
v ${t}
c 0 0 0 2 -2 2
h -3
a 7 12 0 1 0 0 12
h 3
c 0 0 2 0 2 2
v ${t}
c 0 0 0 9 -9 9
h -${e}
c 0 0 -9 0 -9 -9
z`.replace(/\n/g,"")}function NR(e){return`
<svg xmlns="http://www.w3.org/2000/svg" fill="none">
	<path
        stroke="black"
        stroke-width="2"
        stroke-dasharray="5"
        stroke-dashoffset="3"
        stroke-linecap="square"
        d="${e}" />
</svg>`.replace(/\n/g,"")}function QR(e,t,o){return`
M 18 10
c 0 0 0 -10 10 -10
h ${e}
c 0 0 10 0 10 10
v ${t}
c 0 0 0 10 -10 10
h -${e}
c 0 0 -10 0 -10 -10
v -${o}
c 0 0 0 -2 -2 -2
h -3
a 7 12 0 1 1 0 -12
h 3
c 0 0 2 0 2 -2
v -${o}
z`.replace(/\n/g,"")}function HR(e,t,o){return`
M 19 ${9+1}
c 0 0 0 -9 9 -9
h ${e}
c 0 0 9 0 9 9
v ${t}
c 0 0 0 9 -9 9
h -${e}
c 0 0 -9 0 -9 -9
v -${o}
c 0 0 0 -2 -2 -2
h -4.8
a 6 11 0 1 1 0 -10
h 4.8
c 0 0 2 0 2 -2
v -${o}
z`.replace(/\n/g,"")}function _1(e,t){let o=t-20,r=(o-16)/2;return{verticalLine:o,verticalLineToUnion:r}}function S1(e,t){let o=e-20,{verticalLineToUnion:r}=_1(e,t),n=$R(o,r+1),i=zR(o,r),a=`path("${n}")`,s=`path(evenodd, "${n} ${i}")`,c=NR(n);return{premiseFillPath:a,premiseOutlinePath:s,premiseOutlineIntersectedSvg:c}}function k1(e,t){let o=e-18-20,{verticalLine:r,verticalLineToUnion:n}=_1(e,t),i=QR(o,r,n),a=HR(o,r,n+1);return{responseFillPath:`path("${i}")`,responseOutlinePath:`path(evenodd, "${i} ${a}")`}}var UR=u({$:"$",positionNumber:"x2243e__position-number"});function fp(e,{positionNumber:t}){let o=t===null?"x":t+1;return e`
<div class=${UR.positionNumber}>
	${o}.
</div>
`}var Yd=tt({});function C1(e,t){let[o,r]=z(()=>({})),n=w((s,c)=>{r(l=>({...l,[s]:c}))},[]),i=w(s=>{r(c=>{let l={...c};return delete l[s],l})},[]),a=I(()=>({setPartHeight:n,removePartHeight:i}),[i,n]);e.setContext(Yd,a),P(()=>{let s=Object.values(o).reduce((c,l)=>Math.max(c,l),0);Rt(t.current,"--matching-items-height",W(s))},[t,o])}function dp(e,t,o=!1){let{setPartHeight:r,removePartHeight:n}=ae(Yd),i=w(()=>{if(o)return;let a=t.current.offsetHeight;r(e,a)},[o,e,t,r]);Ze({target:t,onResize:i}),P(()=>{if(!o)return i(),()=>n(e)},[o,e,i,n])}var Ji=u({$:"$",container:"xe9dda__container",container_dir_ltr:"xe9dda__container_dir_ltr",background:"xe9dda__background",container_dir_rtl:"xe9dda__container_dir_rtl",fill:"xe9dda__fill",outline:"xe9dda__outline",container_intersected:"xe9dda__container_intersected",container_submitted:"xe9dda__container_submitted",container_incorrect:"xe9dda__container_incorrect",content:"xe9dda__content",text:"xe9dda__text"});function b1(e,{index:t,matchingPartLeft:o,submitted:r,correct:n,intersected:i,showCorrectAnswers:a}){let s=M(),c=M(),{leftPartsRefs:l}=ae(Xi),{states:m}=j(),p=N(m.direction),f=B(We(o.text.blockMap)),d=t;return WR(s),dp(o.id,c),P(()=>{l.current[o.id]=s},[l,o.id,s]),e`
<div
	class=${Ji.container.withMods({intersected:i,submitted:r,incorrect:!(n&&a),dir:p})}
	save-ref=${s}
>
	<div class=${Ji.background}>
		<div class=${Ji.fill}></div>
		<div class=${Ji.outline}></div>
	</div>
	<div class=${Ji.content} save-ref=${c}>
		${e.renderIf(fp,()=>a&&{positionNumber:d})}
		${e(De,{paragraph:f},Ji.text)}
	</div>
</div>`}function WR(e){let t=w(()=>{let o=e.current.getBoundingClientRect(),{premiseFillPath:r,premiseOutlinePath:n,premiseOutlineIntersectedSvg:i}=S1(o.width,o.height);Me(e.current,{"--clip-premise-fill":r,"--clip-premise-outline":n,"--mask-premise-outline-intersected":Wm(i)})},[e]);Ze({target:e,onResize:t}),P(()=>{t()},[t])}var zn=u({$:"$",container:"x8e764__container",container_submitted:"x8e764__container_submitted",container_state_dragged:"x8e764__container_state_dragged",background:"x8e764__background",container_dir_rtl:"x8e764__container_dir_rtl",fill:"x8e764__fill",outline:"x8e764__outline",content:"x8e764__content",text:"x8e764__text",container_state_normal:"x8e764__container_state_normal",container_state_hidden:"x8e764__container_state_hidden",container_incorrect:"x8e764__container_incorrect",container_connected:"x8e764__container_connected",container_dir_ltr:"x8e764__container_dir_ltr",rotateLtrAnimation:"x8e764__rotateLtrAnimation",rotateBackgroundRtlAnimation:"x8e764__rotateBackgroundRtlAnimation",rotateContentRtlAnimation:"x8e764__rotateContentRtlAnimation",dragIcon:"x8e764__drag-icon"});function jd(e,{index:t,matchingPartRight:o,submitted:r,state:n,correctIndex:i,connected:a,startDrag:s,showCorrectAnswers:c}){let l=M(),m=M(),p=t===i,{states:f}=j(),d=N(f.direction);G(l,"pointerdown",k=>{k.button===zm.left&&n!=="dragged"&&!r&&s(o.id,k,l)});let x=r?i:t,_=B(We(o.text.blockMap));return GR(l),dp(o.id,m,n==="dragged"),e`
<div
	class=${zn.container.withMods({state:n,submitted:r,incorrect:!(p&&c),connected:a,dir:d})}
	save-ref=${l}
>
	<div class=${zn.background}>
		<div class=${zn.fill}></div>
		<div class=${zn.outline}></div>
	</div>
	<div class=${zn.content} save-ref=${m}>
		${e.renderIf(fp,()=>c&&{positionNumber:x})}
		${e(De,{paragraph:_},zn.text)}
		${e(qR,{})}
	</div>
</div>
`}function qR(e){return e`
<div class=${zn.dragIcon}>
	${e(_i,{})}
</div>`}function GR(e){let t=w(()=>{let o=e.current.getBoundingClientRect(),{responseFillPath:r,responseOutlinePath:n}=k1(o.width,o.height);Me(e.current,{"--clip-response-fill":r,"--clip-response-outline":n})},[e]);Ze({target:e,onResize:t}),P(()=>{t()},[t])}var B1=15;function T1({draggedItemRef:e,listRef:t,onBeforeDragEnd:o,boundingContainerRef:r,scrollController:n}){let{leftPartsRefs:i}=ae(Xi),a=E(window),[s,c]=z(()=>null),l=E(!1),m=E(0);return G(a,"pointermove",s?x=>{if(!l.current||!s)return;let k=t.current.getBoundingClientRect(),S=e.current,C=S.getBoundingClientRect(),y=r.current.getBoundingClientRect(),v=x.clientX-s.itemRelativeXOffset,D=Ct(x.clientY-s.itemRelativeYOffset,y.top,y.bottom-C.height),A=v-k.left,$=D-k.top;S.style.top=W($),S.style.left=W(A);let H=v1(i.current,C),oe=s.listOffset+$;oe<n.getScrollTop()&&m.current>$?n.scrollBy(0,-B1):oe+C.height>n.getScrollTop()+n.getClientHeight()&&m.current<$&&n.scrollBy(0,+B1),m.current=$,c(ye=>({...B(ye),intersectedLeftPartId:H}))}:null),G(a,"pointerup",s?()=>{o(),c(null),l.current=!1}:null),{startDrag:w((x,_,k)=>{_.preventDefault();let C=k.current.getBoundingClientRect(),y=t.current,v=y.getBoundingClientRect(),D=_.clientX-C.x,A=_.clientY-C.y,$=C.x-v.x,H=C.y-v.y,oe=v1(i.current,C);c({draggedRightPartId:x,intersectedLeftPartId:oe,itemRelativeXOffset:D,itemRelativeYOffset:A,startOffsetX:$,startOffsetY:H,listOffset:n.getRelativeElementOffset(y).y}),l.current=!0},[i,t,n]),intersectedLeftPartId:s?s.intersectedLeftPartId:null,draggedRightPartId:s?s.draggedRightPartId:null,startOffsetX:s?s.startOffsetX:null,startOffsetY:s?s.startOffsetY:null}}function v1(e,t){let o=null,r=0;return Object.keys(e).forEach(n=>{let i=e[n];if(!i)return;let a=i.current.getBoundingClientRect(),s=sy(t,a);!s||s<r||(r=s,o=n)}),o}var Nn=u({$:"$",content:"x70f4a__content",resultsContainer:"x70f4a__results-container",partsContainer:"x70f4a__parts-container",itemWrapper:"x70f4a__item-wrapper",itemWrapper_dir_ltr:"x70f4a__item-wrapper_dir_ltr",itemWrapper_side_left:"x70f4a__item-wrapper_side_left",itemWrapper_connected:"x70f4a__item-wrapper_connected",itemWrapper_dir_rtl:"x70f4a__item-wrapper_dir_rtl",itemWrapper_side_right:"x70f4a__item-wrapper_side_right",draggedItem:"x70f4a__dragged-item",resultIcon:"x70f4a__result-icon"});function w1(e,t){return JR({html:e,question:t.question}),e`
<div>
	${e(YR,t)}
</div>`}function YR(e,{question:t,questionState:o,showCorrectAnswers:r}){let n=E(),i=E(),a=E(),{leftPartsOrder:s,rightPartsOrder:c,matchedPairs:l}=o,{actions:m}=j(),p=m.connectMatch,f=m.disconnectMatch,d=I(()=>or(t),[t]),x=H=>d.blocks[H]||null,_=I(()=>XR(t,s),[s,t]),k=H=>!!Object.values(l).find(oe=>oe===H);C1(e,i);let S=ae($n),C=Qr(S),{draggedRightPartId:y,intersectedLeftPartId:v,startDrag:D,startOffsetX:A,startOffsetY:$}=T1({draggedItemRef:n,listRef:a,boundingContainerRef:i,scrollController:C,onBeforeDragEnd:()=>{if(!y)return;let H=up(o.matchedPairs,y);H&&f({questionId:t.id,leftIdToDisconnect:H}),v&&p({questionId:t.id,matchToConnect:{leftId:v,rightId:y}})}});return e`
<div class=${Nn.content} save-ref=${i}>
	<div class=${Nn.partsContainer}>
		${e.renderAll(s,(H,oe)=>{let ye=B(Ss(t,H)),xe=l[ye.left.id],Tt=!!xe&&_[xe]===oe;return le(H,D1,{binding:g(b1,{index:oe,matchingPartLeft:ye.left,submitted:o.submitted,correct:Tt,intersected:v===H,showCorrectAnswers:r}),connected:!!l[H],side:"left"})})}
	</div>
	<div class=${Nn.partsContainer} save-ref=${a}>
		${e.renderAll(c,(H,oe)=>{let ye=k(H);return le(H,D1,{binding:g(jd,{index:oe,matchingPartRight:B(x(H)),submitted:o.submitted,state:H===y?"hidden":"normal",correctIndex:_[H],connected:ye,startDrag:D,showCorrectAnswers:r}),connected:ye,side:"right"})})}
		${e.renderIf(ZR,()=>!!y&&!!$o(A)&&!!$o($)&&{itemRef:n,binding:g(jd,{index:0,correctIndex:0,submitted:!1,connected:!1,state:"dragged",matchingPartRight:B(x(y)),startDrag:D,showCorrectAnswers:r}),startOffsetX:A,startOffsetY:$})}
	</div>
	${e.renderIf(jR,()=>r&&{question:t,questionState:o,rightPartsCorrectIndexesMap:_})}
</div>`}function jR(e,{question:t,questionState:o,rightPartsCorrectIndexesMap:r}){return e`
<div class=${Nn.resultsContainer}>
	${e.renderAll(o.leftPartsOrder,(n,i)=>{let a=B(Ss(t,n)),s=o.matchedPairs[a.left.id],c=!!s&&r[s]===i;return le(n,Vo,{correct:c,position:"fixed"},Nn.resultIcon)})}
</div>`}function D1(e,{binding:t,side:o,connected:r}){let{states:n}=j(),i=N(n.direction);return e`
<div class=${Nn.itemWrapper.withMods({connected:r,side:o,dir:i})}>
	${e(t)}
</div>`}function ZR(e,{itemRef:t,binding:o,startOffsetX:r,startOffsetY:n}){return ee(()=>{t.current.style.left=W(r),t.current.style.top=W(n)},[t,r,n]),e`
<div
	class=${Nn.draggedItem}
	save-ref=${t}
>
	${e(o)}
</div>`}function XR(e,t){let o={};or(e).order.forEach(i=>{o[i]=null});let n={};return ce(e.content.matches,i=>{n[i.left.id]=i}),t.forEach((i,a)=>{let s=n[i];o[s.right.id]=a}),o}function JR({question:e,html:t}){let o=E(eI(e)),r=I(()=>({leftPartsRefs:o}),[]);t.setContext(Xi,r)}function eI(e){let t={};return ce(e.content.matches,o=>{t[o.left.id]=null}),t}var gp=u({$:"$",footer:"xfd6c6__footer",extra:"xfd6c6__extra",buttons:"xfd6c6__buttons",gap:"xfd6c6__gap"});function E1(e,{buttons:t,extra:o}){return e`
<div class=${gp.footer}>
	${e(o,gp.extra)}
	<div class=${gp.gap}></div>
	${e(Y_,{buttons:t},gp.buttons)}
</div>`}var hp=u({$:"$",header:"xfaac4__header",titleContainer:"xfaac4__title-container",title:"xfaac4__title",close:"xfaac4__close"});function P1(e,{title:t,onClose:o}){return e`
<div class=${hp.header}>
	<div class=${hp.titleContainer}>
        ${e.switch(()=>typeof t=="string"?g(Zt,{text:t},hp.title):t)}
	</div>
	${e(je,{style:"secondary",structure:"icon",icon:g(oi),size:"medium",onClick:o,autotestData:"close-bottom-sheet",radius:"circle"},hp.close)}
</div>
`}var R1=u({$:"$",container:"x28174__container",content:"x28174__content"});function yp(e,t){let{content:o,header:r,footer:n}=t;return e`
<div class=${R1.container}>
	${e.renderIf(P1,()=>r)}
	${e(o,R1.content)}
	${e.renderIf(E1,()=>n)}
</div>`}var ks=u({$:"$",header:"xee279__header",text:"xee279__text",content:"xee279__content",answerBlock:"xee279__answer-block",title:"xee279__title",title_correct:"xee279__title_correct"});function M1(e,{matchId:t,questionId:o,onClose:r}){let{states:n}=j(),i=N(n.quiz),s=N(n.matchingQuestionsState)[o],c=i.questions.blocks[o],l=c.content.matches.blocks[t],m=We(l.left.text.blockMap),p=We(l.right.text.blockMap),f=I(()=>{let d=or(c),x=B(s.matchedPairs[l.left.id]);return We(d.blocks[x].text.blockMap)},[l.left.id,c,s.matchedPairs]);return yp(e,{header:{onClose:r,title:g(De,{paragraph:m},ks.header)},content:g(tI,{userAnswer:f,correctAnswer:p})})}function tI(e,{correctAnswer:t,userAnswer:o}){return e`
<div class=${ks.content}>
	${e(I1,{title:T("Quiz.Player.Question.YourAnswer"),correct:!1,answer:o})}
	${e(I1,{title:T("Quiz.Player.Question.CorrectAnswer"),correct:!0,answer:t})}
</div>`}function I1(e,{answer:t,correct:o,title:r}){return e`
<div class=${ks.answerBlock}>
	<span
		class=${ks.title.withMods({correct:o})}
	>
		${r}
	</span>
	${e(De,{paragraph:t},ks.text)}
</div>`}var Cs=u({$:"$",header:"x156db__header",text:"x156db__text",list:"x156db__list",listItem:"x156db__list-item",indicator:"x156db__indicator"});function A1(e,{onClose:t,matchId:o,questionId:r}){let{states:n}=j(),s=N(n.quiz).questions.blocks[r].content.matches.blocks[o],c=B(We(s.left.text.blockMap));return yp(e,{header:{onClose:t,title:g(De,{paragraph:c},Cs.header)},content:g(oI,{onClose:t,questionId:r,match:s})})}function oI(e,{onClose:t,questionId:o,match:r}){let{actions:n,states:i}=j(),a=N(i.quiz),s=N(i.matchingQuestionsState),c=n.connectMatch,l=n.disconnectMatch,m=a.questions.blocks[o],p=s[o],f=new Set(Object.values(p.matchedPairs)),d=I(()=>or(m),[m]),x=w(_=>{t();let k=up(p.matchedPairs,_);k&&l({questionId:o,leftIdToDisconnect:k}),c({questionId:o,matchToConnect:{leftId:r.left.id,rightId:_}})},[c,l,r.left.id,t,o,p.matchedPairs]);return e`
<div class=${Cs.list}>
	${e.renderAll(p.rightPartsOrder,_=>{let k=f.has(_),S=d.blocks[_],C=B(We(S.text.blockMap));return le(_,rI,{paragraph:C,selected:k,onClick:()=>x(_)})})}
</div>`}function rI(e,{paragraph:t,onClick:o,selected:r}){return e`
<div class=${Cs.listItem} onclick=${o}>
	${e(De,{paragraph:t},Cs.text)}
	${e.renderIf(_0,()=>r,Cs.indicator)}
</div>`}var rr=u({$:"$",container:"x4487e__container",matching:"x4487e__matching",matching_state_default:"x4487e__matching_state_default",matching_state_selected:"x4487e__matching_state_selected",matching_state_incorrect:"x4487e__matching_state_incorrect",matching_state_answered:"x4487e__matching_state_answered",header:"x4487e__header",responseContainer:"x4487e__response-container",divider:"x4487e__divider",placeholder:"x4487e__placeholder",icon:"x4487e__icon",matching_state_correct:"x4487e__matching_state_correct",text:"x4487e__text"});function nI(e){return e`
<svg class=${rr.divider} xmlns="http://www.w3.org/2000/svg">
	<line x1="0" y1="1" x2="100%" y2="0" stroke="currentColor" stroke-width=${1} stroke-dasharray="6 3" stroke-linecap="square"/>
</svg>
`}function iI({selected:e,responseSelected:t,submitted:o,correct:r,showCorrectAnswers:n}){return o?n?r?"correct":"incorrect":"answered":e||t?"selected":"default"}function aI(e){return e`
<span class=${rr.placeholder}>
	${T("Quiz.Player.Question.Matching.ChooseYourAnswer")}
</span>`}function sI(e){return e?B(We(e.text.blockMap)):null}function V1(e,{questionId:t,matchData:o,rightPartData:r,submitted:n,showCorrectAnswers:i}){let[a,s]=z(!1),c=B(We(o.left.text.blockMap)),l=sI(r),m=!!n&&!!r&&o.right.id===r.id,p=w(()=>s(!1),[]),{close:f,open:d}=cs({html:e,side:"bottom",component:M1,closeOnOverlayClick:!0}),{close:x,open:_}=cs({html:e,side:"bottom",component:A1,onBeforeClose:p,closeOnOverlayClick:!0}),k=w(()=>{if(n){!m&&i&&d({matchId:o.id,questionId:t,onClose:f});return}s(!0),_({onClose:x,matchId:o.id,questionId:t})},[f,x,m,o.id,d,_,t,i,n]),S=iI({selected:a,responseSelected:!!l,submitted:n,correct:m,showCorrectAnswers:i});return e`
<div class=${rr.container}>
	<div
		class=${rr.matching.withMods({state:S})}
		onclick=${k}
	>
		<div class=${rr.header}>
			${e(De,{paragraph:c},rr.text)}
		</div>
		<div class=${rr.responseContainer}>
			${e(nI,{})}
			${e.switch(()=>l?g(De,{paragraph:l},rr.text):g(aI))}
			<div class=${rr.icon}>
				${e.switch(()=>i&&S==="incorrect"?g(yk):n?null:g(Vk))}
			</div>
		</div>
	</div>
	${e.renderIf(Vo,()=>i&&{correct:m,position:"fixed"})}
</div>`}var cI=u({$:"$",content:"x73cb9__content"});function F1(e,{question:t,questionState:o,showCorrectAnswers:r}){let n=o.submitted,i=I(()=>or(t),[t]),a=w(s=>{let c=t.content.matches.blocks[s],l=o.matchedPairs[c.left.id];return l&&i.blocks[l]||null},[i,t.content.matches.blocks,o.matchedPairs]);return e`
<div class="${cI.content}">
	${e.renderAll(o.leftPartsOrder,s=>{let c=B(Ss(t,s));return le(c.id,V1,{questionId:t.id,matchData:c,rightPartData:a(c.id),submitted:n,showCorrectAnswers:r})})}

</div>`}var lI=600;function O1(e,{question:t,questionState:o,showCorrectAnswers:r,containerRef:n}){let i=Ao({containerRef:n,mobileWidth:lI});return e`
<div>
	${e.switch(()=>i?g(F1,{question:t,questionState:o,showCorrectAnswers:r}):g(w1,{question:t,questionState:o,showCorrectAnswers:r}))}
</div>`}var bs=u({$:"$",container:"x3f1b0__container",container_submitted:"x3f1b0__container_submitted",item:"x3f1b0__item",item_size_small:"x3f1b0__item_size_small",item_size_default:"x3f1b0__item_size_default",item_submitted:"x3f1b0__item_submitted",item_withBackground:"x3f1b0__item_withBackground",text:"x3f1b0__text",index:"x3f1b0__index",index_size_small:"x3f1b0__index_size_small",index_size_default:"x3f1b0__index_size_default",item_dragged:"x3f1b0__item_dragged",index_dragged:"x3f1b0__index_dragged",item_dragging:"x3f1b0__item_dragging",container_dir_ltr:"x3f1b0__container_dir_ltr",rotateLtrAnimation:"x3f1b0__rotateLtrAnimation",container_dir_rtl:"x3f1b0__container_dir_rtl",rotateRtlAnimation:"x3f1b0__rotateRtlAnimation",dragIcon:"x3f1b0__drag-icon",dragIcon_dragged:"x3f1b0__drag-icon_dragged",dragIcon_disabled:"x3f1b0__drag-icon_disabled"});function mI({color:e,dasharray:t,borderRadius:o}){return`
<svg xmlns="http://www.w3.org/2000/svg" fill="none">
	<rect
		width="100%"
		height="100%"
		fill="none"
		rx="${o}"
		ry="${o}"
		stroke="${e}"
		stroke-width="2"
		stroke-dasharray="${t.join(" ")}"
		stroke-linecap="square"
	></rect>
</svg>
`}function L1(e,{index:t,sequence:o,correctIndex:r,state:n,submitted:i,showCorrectAnswers:a,size:s}){let{states:c}=j(),l=N(c.direction),m=t===r,p=Sl(),f=M(),d=M();G(f,"pointerdown",C=>{let y=C.pointerType==="mouse",v=C.composedPath().includes(d.current);!y&&!v||C.button===zm.left&&n!=="dragged"&&!i&&p(o.id,C)});let[x]=ve.getBlocksArray(o.text.blockMap),_=a?r+1:t+1,k=n==="dragged",S=n==="hidden";return P(()=>{if(k)f.current.style.backgroundImage="";else{let C=S?ct().borderAccentDefault:ct().borderDefault,y=S?[5]:[];f.current.style.backgroundImage=Wm(mI({color:C,dasharray:y,borderRadius:10}))}},[k,S,f]),e`
<div
	class=${bs.container.withMods({submitted:i,dir:l})}
>
	<div class=${bs.index.withMods({dragged:k,size:s})}>${_}.</div>
	<div
		class=${bs.item.withMods({dragged:k,dragging:S,submitted:i,withBackground:a?!m:i,size:s})}
		save-ref=${f}
	>
		${e(De,{paragraph:x},bs.text)}
		${e.renderIf(Vo,()=>a&&{correct:m})}
		<div
			save-ref=${d}
			class=${bs.dragIcon.withMods({dragged:n==="dragged",disabled:i})}
		>
			${e(g(_i))}
		</div>
	</div>
</div>`}var K1=10,Bs=u({$:"$",content:"xf6cb4__content",answersList:"xf6cb4__answers-list",content_withAnswers:"xf6cb4__content_withAnswers",hint:"xf6cb4__hint",hintIcon:"xf6cb4__hint-icon",hintText:"xf6cb4__hint-text"});function $1(e,{question:t,questionState:o,showCorrectAnswers:r,containerRef:n}){let i=M(),a=Ao({containerRef:n}),{actions:s}=j(),c=s.changeSequenceOrder;ee(()=>{Rt(i.current,"--gap",W(K1))},[i]);let l=ae($n),m=Qr(l);return e`
<div
	save-ref=${i}
	class=${Bs.content.withMods({withAnswers:r})}
>
	<div class=${Bs.hint}>
		${e(S0,{},Bs.hintIcon)}
		<p class=${Bs.hintText}>${T("Quiz.Player.Sequence.Hint")}</p>
	</div>
	${e(kl,{items:o.order,getItemId:p=>p,getItemBinding:(p,f,d)=>le(p,L1,{index:f,sequence:t.content.blocks[p],correctIndex:t.content.order.indexOf(p),state:d,submitted:o.submitted,showCorrectAnswers:r,size:a?"small":"default"}),onItemsChange:p=>{c({newOrder:p,questionId:t.id})},scrollController:m,gap:K1},Bs.answersList)}
</div>`}function z1(e,t){return gk(e,{...t,displayType:"light"})}var vs=u({$:"$",typeIn:"x1bf48__type-in",field:"x1bf48__field",field_withAnswers:"x1bf48__field_withAnswers",textField:"x1bf48__text-field",typeIn_size_default:"x1bf48__type-in_size_default",typeIn_size_small:"x1bf48__type-in_size_small",correct:"x1bf48__correct",fadeIn:"x1bf48__fadeIn",answers:"x1bf48__answers",fadeOut:"x1bf48__fadeOut"});function pI(e,{question:t}){let o=ze(t.content.answers).map(r=>r.text).join(", ");return e`
<div class=${vs.correct}>
	${nh(T("Quiz.Player.TypeIn.CorrectAnswers"))}
	<span class=${vs.answers}>${o}</span>
</div>`}function N1(e,{question:t,questionState:o,showCorrectAnswers:r,containerRef:n}){let{actions:i}=j(),a=i.setTypeInAnswer,s=o.submitted?"disabled":"normal",c=Ao({containerRef:n});return e`
<div
	class=${vs.typeIn.withMods({size:c?"small":"default"})}
>
	<div class=${vs.field.withMods({withAnswers:r})}>
		${e(z1,{type:"text",size:"xLarge",value:o.answer,onInput:l=>a({id:t.id,answer:l}),onChange:()=>{},selectionOnConnect:fr()?void 0:"end",state:s,preventScrollOnFocus:!0},vs.textField)}
		${e.renderIf(Vo,()=>r&&{correct:o.correct})}
	</div>
	${e.renderIf(pI,()=>r&&{question:t})}
</div>`}function Q1({question:e,showCorrectAnswers:t,choicesQuestionsState:o,choicesViewOrderMap:r,typeInQuestionsState:n,sequenceQuestionsState:i,matchingQuestionsState:a,containerRef:s}){switch(e.type){case"ti":return g(N1,{question:e,questionState:n[e.id],showCorrectAnswers:t,containerRef:s});case"sq":return g($1,{question:e,questionState:i[e.id],showCorrectAnswers:t,containerRef:s});case"mc":case"mr":return g(x1,{question:e,questionState:o[e.id],choicesViewOrder:r[e.id],showCorrectAnswers:t,containerRef:s});case"mt":return g(O1,{question:e,questionState:a[e.id],showCorrectAnswers:t,containerRef:s});default:O(e)}return null}var Ts=u({$:"$",question:"xbb0b1__question",description:"xbb0b1__description",attachment:"xbb0b1__attachment",content:"xbb0b1__content",footer:"xbb0b1__footer"});function uI(e){switch(e.type){case"ti":return!!e.answer;case"mc":case"mr":return Object.values(e.choices).some(t=>t);case"sq":return!0;case"mt":return e.leftPartsOrder.every(t=>e.matchedPairs[t]!==null);default:O(e)}return!1}function H1(e,{question:t,questionState:o,isResultsVisible:r,containerRef:n}){let{states:i}=j(),{showCorrectAnswersEnabled:a,showFeedbackEnabled:s}=N(i.playerSettings),c=N(i.sessionState),l=N(i.quizCompleted),m=N(i.typeInQuestionsState),p=N(i.choicesQuestionsState),f=N(i.sequenceQuestionsState),d=N(i.matchingQuestionsState),x=N(i.choicesViewOrderMap),_=N(i.questionsViewOrder),k=a&&o.submitted,S=s&&o.submitted,C=c==="inProgress",y=M(),[v,D]=ri(!1),A=w(()=>D(!0,100),[D]),$=w(()=>D(!1,0),[D]);return X0(y,v,$),e`
<div class=${Ts.question}>
	${e(f1,{question:t,questionsViewOrder:_},Ts.description)}
	${e(lp(t.attachment),{className:Ts.attachment})}
	${e(Q1({question:t,showCorrectAnswers:k,choicesQuestionsState:p,choicesViewOrderMap:x,typeInQuestionsState:m,sequenceQuestionsState:f,matchingQuestionsState:d,containerRef:n}),Ts.content)}
	<div
		class=${Ts.footer}
		save-ref=${y}
	>
		${e.renderIf(g1,()=>S&&{question:t,correct:o.correct})}
		${e.switch(()=>l?r?g(p1):g(m1):k||S?g(l1,{disabled:!C,onClick:$}):g(u1,{disabled:!(uI(o)&&C),onClick:a||s?A:void 0}))}
	</div>
</div>`}var U1=Math.acos(.6666666666666667)*2,Qn=2*Math.PI*120-U1*120,Zd=7,Xd={x:124,y:124},xp=100;function W1(e){return{strokeDashArray:Qn,strokeDashOffset:Qn*(1+e/xp)}}function q1(e){return{strokeDashArray:Qn,strokeDashOffset:Qn*(1+e/xp)-Zd}}function G1(e){return{strokeDashArray:Qn,strokeDashOffset:Qn*(e/xp)+Zd}}var fI=u({$:"$",graph:"x76f0d__graph"});function Y1(e,{passingScore:t,quizPassed:o,score:r}){let n=ct(),i=o?n.actionPrimaryDefault:n.iconSubdued,a=n.backgroundBlue,s=W1(r),c=q1(t),l=G1(t);return e`
<svg
	fill="none"
	xmlns="http://www.w3.org/2000/svg"
	class=${fI.graph}
>
	<circle
		fill="white"
		r="119"
		cx="${Xd.x}"
		cy="${Xd.y}"
	></circle>
	<path
		d="M213.318 203.792C232.395 182.582 244 154.54 244 123.791C244 57.6322 190.274 4 124 4C57.7258 4 4 57.6322 4 123.791C4 154.64 15.6814 182.766 34.8694 204"
		stroke=${a} stroke-width="10" stroke-linecap="round" stroke-linejoin="round"
		stroke-dasharray="${c.strokeDashArray}"
		stroke-dashoffset="${c.strokeDashOffset}"
	/>
	<path
		d="M213.318 203.792C232.395 182.582 244 154.54 244 123.791C244 57.6322 190.274 4 124 4C57.7258 4 4 57.6322 4 123.791C4 154.64 15.6814 182.766 34.8694 204"
		stroke=${a} stroke-width="10" stroke-linecap="round" stroke-linejoin="round"
		stroke-dasharray="${l.strokeDashArray}"
		stroke-dashoffset="${l.strokeDashOffset}"
	/>
	<path
		style=${`display: ${r>0?"initial":"none"}`}
		d="M213.318 203.792C232.395 182.582 244 154.54 244 123.791C244 57.6322 190.274 4 124 4C57.7258 4 4 57.6322 4 123.791C4 154.64 15.6814 182.766 34.8694 204"
		stroke=${i} stroke-width="10" stroke-linecap="round" stroke-linejoin="round"
		stroke-dasharray="${s.strokeDashArray}"
		stroke-dashoffset="${s.strokeDashOffset}"
	/>
</svg>`}var Jd=u({$:"$",passingScoreContainer:"x6926a__passing-score-container",scoreDescription:"x6926a__score-description",scoreLabel:"x6926a__score-label"});function j1(e,{passingScore:t}){return e`
<div class=${Jd.passingScoreContainer}>
	<div class=${Jd.scoreDescription}>
		${T("Quiz.Player.Results.Graph.PassingScoreDescription")}
	</div>
	<div class=${Jd.scoreLabel}>
		${t}%
	</div>
</div>`}var eg=u({$:"$",textInfo:"xeb7d1__text-info",textInfo_dir_ltr:"xeb7d1__text-info_dir_ltr",textInfo_dir_rtl:"xeb7d1__text-info_dir_rtl",icon:"xeb7d1__icon",textInfo_result_success:"xeb7d1__text-info_result_success",textInfo_result_failed:"xeb7d1__text-info_result_failed",score:"xeb7d1__score"});function Z1(e,{quizPassed:t,score:o}){let{states:r}=j(),n=N(r.direction),i=t?g(g0):g(d0);return e`
<div class=${eg.textInfo.withMods({dir:n,result:t?"success":"failed"})}>
	${e(i,eg.icon)}
	<span class=${eg.score}>
		${o}%
	</span>
</div>`}var dI=u({$:"$",container:"xef23f__container",container_mobile:"xef23f__container_mobile","container_top-offset_normal":"xef23f__container_top-offset_normal","container_top-offset_large":"xef23f__container_top-offset_large"});function X1(e){let{states:t}=j(),{passingScore:o}=N(t.playerSettings),r=N(t.score),n=N(t.quizPassed);return e`
<div class=${dI.container.withMods({"top-offset":o>40&&o<60?"large":"normal",mobile:fr()})}>
	${e(Y1,{passingScore:o,quizPassed:n,score:r})}
	${e(Z1,{quizPassed:n,score:r})}
	${e(j1,{passingScore:o})}
</div>`}var Ds=u({$:"$",results:"x68a4d__results",results_diagram:"x68a4d__results_diagram",titleContainer:"x68a4d__title-container","titleContainer_with-graph":"x68a4d__title-container_with-graph",title:"x68a4d__title",messageContainer:"x68a4d__message-container","messageContainer_with-graph":"x68a4d__message-container_with-graph",message:"x68a4d__message"});function gI(e,t){return e.displayType==="hideResults"?e.completed:t?e.passed:e.failed}function J1(e){let{states:t}=j(),{results:o}=N(t.quiz);if(!o)throw Error("'results' is not defined");let r=N(t.quizPassed),n=gI(o,r),i=n.visibility==="titleAndMessage"||n.visibility==="titleOnly"?ve.getBlocksArray(n.title.blockMap)[0]:null,a=n.visibility==="titleAndMessage"||n.visibility==="messageOnly"?ve.getBlocksArray(n.message.blockMap)[0]:null,s=o.displayType==="showResults";return e`
<div
	class=${Ds.results.withMods({diagram:s})}
>
	${e.renderIf(X1,()=>s)}
	<div class=${Ds.titleContainer.withMods({"with-graph":s})}>
		${e.renderIf(De,()=>i&&{paragraph:i},Ds.title)}
	</div>
	<div class=${Ds.messageContainer.withMods({"with-graph":s})}>
		${e.renderIf(De,()=>a&&{paragraph:a},Ds.message)}
	</div>
	${e(mp,{})}
</div>`}function e2(e,{showTopPanel:t}){let{states:o}=j(),r=N(o.quiz),n=N(o.currentSlide),i=N(o.typeInQuestionsState),a=N(o.choicesQuestionsState),s=N(o.sequenceQuestionsState),c=N(o.matchingQuestionsState),l={...i,...a,...s,...c},m=M();return e`
<div
	save-ref=${m}
>
	${e((()=>{var f;switch(n.type){case"intro":return r.intro?g(c1,{showTopPanel:t}):null;case"results":return r.results?g(J1):null;case"question":{let d=n.questionId,x=r.questions.blocks[d];return x?g(H1,{question:x,questionState:l[d],isResultsVisible:!!((f=r.results)!=null&&f.visible),containerRef:m}):(V.error(`Unknown current slide ${n}`),null)}default:O(n)}})())}
</div>`}var hI=u({$:"$",content:"x1ce68__content","content_with-watermark":"x1ce68__content_with-watermark"});function t2(e,{showWatermark:t,showTopPanel:o,contentRef:r}){return n1(e),e1(e),e`
<div class=${hI.content.withMods({"with-watermark":t})}>
	${e(e2,{showTopPanel:o},{ref:r})}
</div>`}function o2(e){let t=M();return Nr({html:e,anchorRef:t,text:T("Learn.ProctoringBadge.Tooltip"),side:"bottom"}),be(e,g(_k,{style:"primary",type:"neutral",size:"default",text:T("Learn.ProctoringBadge.Label"),autotestData:"proctoring-badge"}),t)}var yI=u({$:"$",timer:"xed543__timer"});function r2(e){let{states:t}=j(),o=N(t.timerLeftTime),r=cp(o,{minutes:lr("Quiz.Player.Timer.WithoutSeconds"),seconds:lr("Quiz.Player.Timer.WithoutMinutes"),minutesAndSeconds:lr("Quiz.Player.Timer")});return e`
<div class=${yI.timer}>
	${r}
</div>`}var ws=u({$:"$",topPanel:"x24e8e__top-panel",title:"x24e8e__title",timer:"x24e8e__timer",topPanel_dir_ltr:"x24e8e__top-panel_dir_ltr",topPanel_dir_rtl:"x24e8e__top-panel_dir_rtl",closeButton:"x24e8e__close-button",watermark:"x24e8e__watermark",proctoring:"x24e8e__proctoring",topPanel_type_standalone:"x24e8e__top-panel_type_standalone",topPanel_type_builtIn:"x24e8e__top-panel_type_builtIn"});function n2(e,{previewMode:t,title:o,timeLimitEnabled:r,proctoringInProgress:n}){let{actions:i,states:a}=j(),s=N(a.insertType),c=N(a.direction),l=M(),m=ei(l);return It({html:e,elementRef:l,text:o,show:m}),e`
<div class=${ws.topPanel.withMods({dir:c,type:s})}>
	${e(Zt,{text:o},{className:ws.title,ref:l})}
	${e.renderIf(o2,()=>n,ws.proctoring)}
	${e.renderIf(r2,()=>r,ws.timer)}
	${e.renderIf(ys,()=>!t&&{type:"icon",style:"ghost",size:"medium",circleRadius:!0,scale:!0,icon:g(Ym),onClick:i.closeQuiz},ws.closeButton)}
</div>`}var i2={"--text-content-title":"700 44px/110% var(--header-font-family, Inter)","--text-content-subtitle":"400 24px/125% var(--header-font-family, Inter)","--text-content-h1":"700 32px/131.25% var(--header-font-family, Inter)","--text-content-h2":"700 26px/142% var(--header-font-family, Inter)","--text-content-h3":"700 20px/150% var(--header-font-family, Inter)","--text-content-quote-large":"italic 400 26px/152% var(--content-font-family, Inter)","--text-content-quote-small":"italic 400 18px/166% var(--content-font-family, Inter)","--text-content-paragraph":"400 18px/166% var(--content-font-family, Inter)","--text-content-question":"400 22px/32px var(--header-font-family, Inter)","--text-content-code":"400 16px/150% var(--code-font-family, Inter)","--text-content-description":"400 15px/150% var(--content-font-family, Inter)","--text-content-tag":"500 15px/115% var(--content-font-family, Inter)","--text-content-label":"700 16px/125% var(--header-font-family, Inter)"},a2={"--text-content-title":"700 32px/125% var(--header-font-family, Inter)","--text-content-subtitle":"400 22px/140% var(--header-font-family, Inter)","--text-content-h1":"700 28px/131.25% var(--header-font-family, Inter)","--text-content-h2":"700 24px/142% var(--header-font-family, Inter)","--text-content-h3":"700 18px/150% var(--header-font-family, Inter)","--text-content-quote-large":"italic 400 26px/152% var(--content-font-family, Inter)","--text-content-quote-small":"italic 400 16px/168% var(--content-font-family, Inter)","--text-content-paragraph":"400 16px/168% var(--content-font-family, Inter)","--text-content-question":"400 18px/150% var(--header-font-family, Inter)","--text-content-code":"400 14px/24px var(--code-font-family, Inter)","--text-content-description":"400 14px/150% var(--content-font-family, Inter)","--text-content-tag":"500 15px/115% var(--content-font-family, Inter)","--text-content-label":"700 16px/125% var(--header-font-family, Inter)"};function s2(e){Ao({containerRef:e,callback:t=>{let o=t?a2:i2;Me(e.current,o)}})}var xI=u({$:"$",quizPlayer:"xdd824__quiz-player",quizPlayer_type_standalone:"xdd824__quiz-player_type_standalone",quizPlayer_type_builtIn:"xdd824__quiz-player_type_builtIn"}),h1=1064;function c2(e,t){return G0(e,{subscriptionProduct:t.subscriptionProduct,watermarkUrl:t.watermarkUrl,showWatermark:t.showWatermark,quiz:t.quiz,settings:t.settings,direction:t.direction,persistedState:t.persistedState,initApi:t.initApi,title:t.title,insertType:t.insertType||"standalone"}),e`
<div>
	${e(_I,t)}
</div>`}function _I(e,{title:t,previewMode:o,proctoringInProgress:r,scrollableContainerRef:n}){let{states:i}=j(),a=N(i.subscriptionProduct),s=N(i.watermarkUrl),c=N(i.showWatermark),l=N(i.timeLimitEnabled),m=N(i.insertType),p=Kn(m),f=c&&!!a&&!!s,d=l||p,x=M(),_=M(),k=M(),S=n!=null?n:_,C=!p&&d?x:k;return e.setContext($n,S),Z0(S,C),s2(x),e`
<div
	save-ref=${x}
	class=${xI.quizPlayer.withMods({type:m})}
>
	${e.renderIf(Qm,()=>f&&{subscriptionProduct:a,watermarkUrl:s})}
	${e.renderIf(n2,()=>d&&{previewMode:o,title:t,proctoringInProgress:r,timeLimitEnabled:l})}
	${e(t2,{showWatermark:f,showTopPanel:d,contentRef:k},{ref:_})}
</div>`}var l2={text:{text:[16,16],none:[16,16],h1:[16,16],h2:[16,16],h3:[16,16],media:[16,16],"media-float-left":[16,16],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[16,16],attachment:[16,16],collage:[16,16],video:[16,16],note:[16,16],table:[16,16],"layout-column":[16,16],"layout-column-background":[32,32],"flip-cards":[16,16],"divider-line":[16,16],"divider-line-with-text":[16,16],"divider-arrow":[16,16],"divider-quotes":[16,16],"divider-diamonds":[16,16],continue:[16,16],snippet:[16,16],code:[16,16],ol:[16,16],ul:[16,16],blockquote:[16,16],pullquote:[16,16],"default-ul-item":[16,16],"default-ol-item":[16,16],"custom-ul-item":[16,16],"custom-ol-item":[16,16]},h1:{text:[56,4],none:[16,4],h1:[56,4],h2:[56,4],h3:[56,4],media:[56,4],"media-float-left":[56,4],"media-inner":[56,4],"media-outer":[56,4],"media-full":[56,4],quiz:[56,4],attachment:[56,4],collage:[56,4],video:[56,4],note:[56,4],table:[56,4],"layout-column":[56,4],"layout-column-background":[32,32],"flip-cards":[56,4],"divider-line":[56,4],"divider-line-with-text":[56,4],"divider-arrow":[56,4],"divider-quotes":[56,4],"divider-diamonds":[56,4],continue:[56,4],snippet:[56,4],code:[56,0],ol:[56,4],ul:[56,4],blockquote:[56,4],pullquote:[56,4],"default-ul-item":[56,4],"default-ol-item":[56,4],"custom-ul-item":[56,4],"custom-ol-item":[56,4]},h2:{text:[40,0],none:[16,0],h1:[40,0],h2:[40,0],h3:[40,0],media:[40,0],"media-float-left":[40,0],"media-inner":[40,0],"media-outer":[40,0],"media-full":[40,0],quiz:[40,0],attachment:[40,0],collage:[40,0],video:[40,0],note:[40,0],table:[40,0],"layout-column":[40,0],"layout-column-background":[32,32],"flip-cards":[40,0],"divider-line":[40,0],"divider-line-with-text":[40,0],"divider-arrow":[40,0],"divider-quotes":[40,0],"divider-diamonds":[40,0],continue:[40,0],snippet:[40,0],code:[40,0],ol:[40,0],ul:[40,0],blockquote:[40,0],pullquote:[40,0],"default-ul-item":[40,0],"default-ol-item":[40,0],"custom-ul-item":[40,0],"custom-ol-item":[40,0]},h3:{text:[24,0],none:[16,0],h1:[24,0],h2:[24,0],h3:[24,0],media:[24,0],"media-float-left":[24,0],"media-inner":[24,0],"media-outer":[24,0],"media-full":[24,0],quiz:[24,0],attachment:[24,0],collage:[24,0],video:[24,0],note:[24,0],table:[24,0],"layout-column":[24,0],"layout-column-background":[32,32],"flip-cards":[24,0],"divider-line":[24,0],"divider-line-with-text":[24,0],"divider-arrow":[24,0],"divider-quotes":[24,0],"divider-diamonds":[24,0],continue:[24,0],snippet:[24,0],code:[24,0],ol:[24,0],ul:[24,0],blockquote:[24,0],pullquote:[24,0],"default-ul-item":[24,0],"default-ol-item":[24,0],"custom-ul-item":[24,0],"custom-ol-item":[24,0]},quiz:{text:[40,40],none:[40,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40],"default-ul-item":[40,40],"default-ol-item":[40,40],"custom-ul-item":[40,40],"custom-ol-item":[40,40]},attachment:{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[8,8],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40],"default-ul-item":[40,40],"default-ol-item":[40,40],"custom-ul-item":[40,40],"custom-ol-item":[40,40]},snippet:{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[8,8],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40],"ul-item":[40,40],"ol-item":[40,40],"default-ul-item":[40,40],"default-ol-item":[40,40],"custom-ul-item":[40,40],"custom-ol-item":[40,40]},code:{text:[16,16],none:[16,16],h1:[16,16],h2:[16,16],h3:[16,16],media:[16,16],"media-float-left":[16,16],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[16,16],attachment:[16,16],collage:[16,16],video:[16,16],note:[16,16],table:[16,16],"layout-column":[16,16],"layout-column-background":[32,32],"flip-cards":[16,16],"divider-line":[16,16],"divider-line-with-text":[16,16],"divider-arrow":[16,16],"divider-quotes":[16,16],"divider-diamonds":[16,16],continue:[16,16],snippet:[16,16],code:[16,16],ol:[16,16],ul:[16,16],blockquote:[16,16],pullquote:[16,16],"default-ul-item":[16,16],"default-ol-item":[16,16],"custom-ul-item":[16,16],"custom-ol-item":[16,16]},collage:{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[16,16],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40],"default-ul-item":[16,16],"default-ol-item":[16,16],"custom-ul-item":[40,40],"custom-ol-item":[40,40]},video:{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[16,16],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40],"default-ul-item":[40,40],"default-ol-item":[40,40],"custom-ul-item":[40,40],"custom-ol-item":[40,40]},"media-float-left":{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40],"default-ul-item":[40,40],"default-ol-item":[40,40],"custom-ul-item":[40,40],"custom-ol-item":[40,40]},"media-inner":{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40],"default-ul-item":[40,40],"default-ol-item":[40,40],"custom-ul-item":[40,40],"custom-ol-item":[40,40]},"media-outer":{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40],"default-ul-item":[40,40],"default-ol-item":[40,40],"custom-ul-item":[40,40],"custom-ol-item":[40,40]},"media-full":{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40],"default-ul-item":[40,40],"default-ol-item":[40,40],"custom-ul-item":[40,40],"custom-ol-item":[40,40]},"flip-cards":{text:[40,40],none:[40,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40],"default-ul-item":[40,40],"default-ol-item":[40,40],"custom-ul-item":[40,40],"custom-ol-item":[40,40]},table:{text:[32,32],none:[16,32],h1:[32,32],h2:[32,32],h3:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],quiz:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"layout-column":[32,32],"layout-column-background":[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],snippet:[32,32],code:[32,32],ol:[32,32],ul:[32,32],blockquote:[32,32],pullquote:[32,32],"default-ul-item":[32,32],"default-ol-item":[32,32],"custom-ul-item":[32,32],"custom-ol-item":[32,32]},"layout-column":{text:[32,32],none:[32,32],h1:[32,32],h2:[32,32],h3:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],quiz:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"layout-column":[32,32],"layout-column-background":[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],snippet:[32,32],code:[32,32],ol:[32,32],ul:[32,32],blockquote:[32,32],pullquote:[32,32],"default-ul-item":[32,32],"default-ol-item":[32,32],"custom-ul-item":[32,32],"custom-ol-item":[32,32]},"layout-column-background":{text:[64,64],none:[64,64],h1:[64,64],h2:[64,64],h3:[64,64],media:[64,64],"media-float-left":[64,64],"media-inner":[64,64],"media-outer":[64,64],"media-full":[64,64],quiz:[64,64],attachment:[64,64],collage:[64,64],video:[64,64],note:[64,64],table:[64,64],"layout-column":[64,64],"layout-column-background":[64,64],"flip-cards":[64,64],"divider-line":[64,64],"divider-line-with-text":[64,64],"divider-arrow":[64,64],"divider-quotes":[64,64],"divider-diamonds":[64,64],continue:[64,64],snippet:[64,64],code:[64,64],ol:[64,64],ul:[64,64],blockquote:[64,64],pullquote:[64,64],"default-ul-item":[64,64],"default-ol-item":[64,64],"custom-ul-item":[64,64],"custom-ol-item":[64,64]},note:{text:[32,32],none:[16,32],h1:[32,32],h2:[32,32],h3:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],quiz:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"layout-column":[32,32],"layout-column-background":[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],snippet:[32,32],code:[32,32],ol:[32,32],ul:[32,32],blockquote:[32,32],pullquote:[32,32],"default-ul-item":[32,32],"default-ol-item":[32,32],"custom-ul-item":[32,32],"custom-ol-item":[32,32]},blockquote:{text:[24,24],none:[16,24],h1:[24,24],h2:[24,24],h3:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],quiz:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"layout-column":[24,24],"layout-column-background":[32,32],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],snippet:[24,24],code:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24],"default-ul-item":[24,24],"default-ol-item":[24,24],"custom-ul-item":[24,24],"custom-ol-item":[24,24]},pullquote:{text:[56,56],none:[24,56],h1:[56,56],h2:[56,56],h3:[56,56],media:[56,56],"media-float-left":[56,56],"media-inner":[56,56],"media-outer":[56,56],"media-full":[56,56],quiz:[56,56],attachment:[56,56],collage:[56,56],video:[56,56],note:[56,56],table:[56,56],"layout-column":[56,56],"layout-column-background":[32,32],"flip-cards":[56,56],"divider-line":[56,56],"divider-line-with-text":[56,56],"divider-arrow":[56,56],"divider-quotes":[56,56],"divider-diamonds":[56,56],continue:[56,56],snippet:[56,56],code:[56,56],ol:[56,56],ul:[56,56],blockquote:[56,56],pullquote:[56,56],"default-ul-item":[56,56],"default-ol-item":[56,56],"custom-ul-item":[56,56],"custom-ol-item":[56,56]},"divider-line":{text:[0,0],none:[0,0],h1:[0,0],h2:[0,0],h3:[0,0],media:[0,0],"media-float-left":[0,0],"media-inner":[0,0],"media-outer":[0,0],"media-full":[0,0],quiz:[0,0],attachment:[0,0],collage:[0,0],video:[0,0],note:[0,0],table:[0,0],"layout-column":[0,0],"layout-column-background":[32,32],"flip-cards":[0,0],"divider-line":[0,0],"divider-line-with-text":[0,0],"divider-arrow":[0,0],"divider-quotes":[0,0],"divider-diamonds":[0,0],continue:[0,0],snippet:[0,0],code:[0,0],ol:[0,0],ul:[0,0],blockquote:[0,0],pullquote:[0,0],"default-ul-item":[0,0],"default-ol-item":[0,0],"custom-ul-item":[0,0],"custom-ol-item":[0,0]},"divider-line-with-text":{text:[24,24],none:[16,24],h1:[24,24],h2:[24,24],h3:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],quiz:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"layout-column":[24,24],"layout-column-background":[32,32],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],snippet:[24,24],code:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24],"default-ul-item":[24,24],"default-ol-item":[24,24],"custom-ul-item":[24,24],"custom-ol-item":[24,24]},"divider-arrow":{text:[24,24],none:[24,24],h1:[24,24],h2:[24,24],h3:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],quiz:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"layout-column":[24,24],"layout-column-background":[32,32],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],snippet:[24,24],code:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24],"default-ul-item":[24,24],"default-ol-item":[24,24],"custom-ul-item":[24,24],"custom-ol-item":[24,24]},"divider-quotes":{text:[32,0],none:[24,0],h1:[32,0],h2:[32,0],h3:[32,0],media:[32,0],"media-float-left":[32,0],"media-inner":[32,0],"media-outer":[32,0],"media-full":[32,0],quiz:[32,0],attachment:[32,0],collage:[32,0],video:[32,0],note:[32,0],table:[32,0],"layout-column":[32,0],"layout-column-background":[32,32],"flip-cards":[32,0],"divider-line":[32,0],"divider-line-with-text":[32,0],"divider-arrow":[32,0],"divider-quotes":[32,0],"divider-diamonds":[32,0],continue:[32,0],snippet:[32,0],code:[32,0],ol:[32,0],ul:[32,0],blockquote:[32,0],pullquote:[32,0],"default-ul-item":[32,0],"default-ol-item":[32,0],"custom-ul-item":[32,0],"custom-ol-item":[32,0]},"divider-diamonds":{text:[24,24],none:[24,24],h1:[24,24],h2:[24,24],h3:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],quiz:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"layout-column":[24,24],"layout-column-background":[32,32],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],snippet:[24,24],code:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24],"default-ul-item":[24,24],"default-ol-item":[24,24],"custom-ul-item":[24,24],"custom-ol-item":[24,24]},continue:{text:[64,40],none:[64,40],h1:[64,40],h2:[64,40],h3:[64,40],media:[64,40],"media-float-left":[64,40],"media-inner":[64,40],"media-outer":[64,40],"media-full":[64,40],quiz:[64,40],attachment:[64,40],collage:[64,40],video:[64,40],note:[64,40],table:[64,40],"layout-column":[64,40],"layout-column-background":[32,32],"flip-cards":[64,40],"divider-line":[64,40],"divider-line-with-text":[64,40],"divider-arrow":[64,40],"divider-quotes":[64,40],"divider-diamonds":[64,40],continue:[64,40],snippet:[64,40],code:[64,40],ol:[64,40],ul:[64,40],blockquote:[64,40],pullquote:[64,40],"default-ul-item":[64,40],"default-ol-item":[64,40],"custom-ul-item":[64,40],"custom-ol-item":[64,40]},ol:{text:[32,32],none:[16,32],h1:[32,32],h2:[32,32],h3:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],quiz:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"layout-column":[32,32],"layout-column-background":[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],snippet:[32,32],code:[32,32],ol:[16,16],ul:[16,16],blockquote:[32,32],pullquote:[32,32],"default-ul-item":[16,16],"default-ol-item":[16,16],"custom-ul-item":[16,16],"custom-ol-item":[16,16]},ul:{text:[24,24],none:[16,24],h1:[24,24],h2:[24,24],h3:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],quiz:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"layout-column":[24,24],"layout-column-background":[32,32],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],snippet:[24,24],code:[24,24],ol:[8,8],ul:[8,8],blockquote:[24,24],pullquote:[24,24],"default-ul-item":[8,8],"default-ol-item":[8,8],"custom-ul-item":[8,8],"custom-ol-item":[8,8]},"default-ul-item":{text:[16,16],none:[16,16],h1:[16,16],h2:[16,16],h3:[16,16],media:[16,16],"media-float-left":[16,16],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[16,16],attachment:[16,16],collage:[16,16],video:[16,16],note:[16,16],table:[16,16],"layout-column":[16,16],"layout-column-background":[16,16],"flip-cards":[16,16],"divider-line":[16,16],"divider-line-with-text":[16,16],"divider-arrow":[16,16],"divider-quotes":[16,16],"divider-diamonds":[16,16],continue:[16,16],snippet:[16,16],code:[16,16],ol:[16,16],ul:[16,16],blockquote:[16,16],pullquote:[16,16],"default-ul-item":[8,8],"default-ol-item":[8,8],"custom-ul-item":[8,8],"custom-ol-item":[8,8]},"default-ol-item":{text:[16,16],none:[16,16],h1:[16,16],h2:[16,16],h3:[16,16],media:[16,16],"media-float-left":[16,16],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[16,16],attachment:[16,16],collage:[16,16],video:[16,16],note:[16,16],table:[16,16],"layout-column":[16,16],"layout-column-background":[16,16],"flip-cards":[16,16],"divider-line":[16,16],"divider-line-with-text":[16,16],"divider-arrow":[16,16],"divider-quotes":[16,16],"divider-diamonds":[16,16],continue:[16,16],snippet:[16,16],code:[16,16],ol:[16,16],ul:[16,16],blockquote:[16,16],pullquote:[16,16],"default-ul-item":[8,8],"default-ol-item":[8,8],"custom-ul-item":[8,8],"custom-ol-item":[8,8]},"custom-ul-item":{text:[32,32],none:[16,32],h1:[32,32],h2:[32,32],h3:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],quiz:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"layout-column":[32,32],"layout-column-background":[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],snippet:[32,32],code:[32,32],ol:[16,16],ul:[16,16],blockquote:[32,32],pullquote:[32,32],"default-ul-item":[8,8],"default-ol-item":[8,8],"custom-ul-item":[8,8],"custom-ol-item":[8,8]},"custom-ol-item":{text:[32,32],none:[16,32],h1:[32,32],h2:[32,32],h3:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],quiz:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"layout-column":[32,32],"layout-column-background":[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],snippet:[32,32],code:[32,32],ol:[16,16],ul:[16,16],blockquote:[32,32],pullquote:[32,32],"default-ul-item":[16,16],"default-ol-item":[16,16],"custom-ul-item":[16,16],"custom-ol-item":[16,16]}};function _p(e,t){return l2[e][t][0]}function m2(e,t){return l2[e][t][1]}function p2({currentBlockType:e,prevBlockType:t,defaultTopPadding:o}){return t==="none"&&$o(o)?o:_p(e,t)}function u2(e,t,o){G(e,t,o)}function Sp(e,t,o=window){let r=new CustomEvent(e,{detail:t});o.dispatchEvent(r)}var f2=u({$:"$",overlay:"xb5713__overlay",background:"xb5713__background",background_column:"xb5713__background_column",background_loading:"xb5713__background_loading",image:"xb5713__image",image_loading:"xb5713__image_loading"});function d2(e,{color:t,opacity:o,isLoading:r,position:n="cover",...i}){let a=M(),s=E(window),c={"background-color":ci({color:t,opacity:o})},l=br();P(()=>{a.current&&(a.current.style.display="")}),u2(s,"change-page",()=>{a.current&&(a.current.style.display="none",l())});let m=n==="column"?{endStart:"xlarge",endEnd:"xlarge"}:void 0;return e`
<div
	class=${f2.background.withMods({loading:r,column:n==="column"})}
	save-ref=${a}
	contenteditable="false"
>
	${e(io,{image:i,outContainerRef:a,fit:"cover",radius:m})}
	<div
		class=${f2.overlay}
		style=${c}
	/>
</div>`}var SI=72,kI=40;function g2(e,t){return e.designSettings.coverInfoState?t==="cover"?SI:kI:null}function kp(e){return e.replace(/^\s|\s$/,po.NBSP)}function Cp(e){let t=[];return ce(e,o=>{let r=Q.toLayoutBlock(o);r?t.push(r,...Q.getAllBlocks(r)):t.push(o)}),t}var CI=1;function h2(e){let t=[];return e.forEach(o=>{let{hiddenHeaders:r}=o.navigationData,n={key:o.key,title:o.header.title||T("Roll.Common.ChapterDefaultTitle"),childHeaders:[],hiddenContent:null};t.push(n);let{continueButtonKey:i}=o,a=[],s=vI(a,n),c=TI(a,n),l=Cp(o.contentState.blockMap),{remappedBlocks:m,nextContinueButton:p}=bI(l,i);p&&(n.hiddenContent={type:"continue",blockKey:p}),m.forEach(f=>BI({block:f,hiddenHeaders:r,headersQueue:a,pageProps:n,addHeaderBiggerThenLast:c,addHeaderSameWithLast:s})),y2(n)}),t}function bI(e,t){if(!$e(t))return{remappedBlocks:e,nextContinueButton:null};let o=[],r=!t;for(let n of e){let i=Be.toContinueBlock(n);if(i){if(i.key===t)r=!0;else if(r)return o.push(n),{remappedBlocks:o,nextContinueButton:i.key}}o.push(n)}return{remappedBlocks:o,nextContinueButton:null}}function BI({block:e,hiddenHeaders:t,headersQueue:o,pageProps:r,addHeaderSameWithLast:n,addHeaderBiggerThenLast:i}){let a=re(e);if(!a||a.viewType!=="h1"&&a.viewType!=="h2"&&a.viewType!=="h3"||t.includes(a.key))return;let s=a,c=s.viewType,l=o.length?og(o):null;if(!l){bp(Bp(s,Es(c)),o,r.childHeaders);return}let m=l.headerType,p=tg(c,m);p>0?bp(Bp(s,p),o,l.childHeaders):p===0?n(s):p<0&&i(s)}function bp(e,t,o){o.push(e),t.push(e)}function Bp(e,t){return{key:e.key,title:Oe.getCharactersText(e),offset:t,headerType:e.viewType,childHeaders:[]}}function vI(e,t){return o=>{e.pop();let r=og(e),n=r?tg(o.viewType,r.headerType):Es(o.viewType),i=(r==null?void 0:r.childHeaders)||t.childHeaders;bp(Bp(o,n),e,i)}}function TI(e,t){return o=>{let r=o.viewType;e.pop();let n=null,i=0;for(;!n;){if(!e.length){n=t,i=Es(r);continue}let a=og(e),s=a.headerType,c=tg(r,s);c<=0?e.pop():(n=a,i=c)}bp(Bp(o,i),e,n.childHeaders)}}function y2(e){let t=e.childHeaders.map(r=>r.offset),o=Math.min(...t);e.childHeaders.forEach(r=>{r.offset=r.offset-o+CI,y2(r)})}function tg(e,t){return Es(e)-Es(t)}function Es(e){return J(e,{h1:1,h2:2,h3:3})}function og(e){return Ws(e,-1)}var ao=tt({isReadonly:!1,isPagesDraggable:!1,onHiddenContentClick:()=>{},getEmptyStateText:()=>null,gotoPageHandler:()=>{},gotoHeaderHandler:()=>{},setPagesOrderHandler:()=>{},isPageDisabled:()=>!1,getPageTooltip:()=>null,getHiddenContentIndicatorText:()=>null,renderPagePrefix:()=>null,renderPageControls:()=>null,renderChildHeaderControls:()=>null});function x2(e,t){let o=ae(ao),r=I(()=>({...o,...t}),[t,o]);e.setContext(ao,r)}var _2=u({$:"$",hiddenIndicator:"x93ef0__hidden-indicator",tooltipContent:"x93ef0__tooltip-content"});function vp(e,{hiddenContent:t}){let o=E(),{onHiddenContentClick:r,getHiddenContentIndicatorText:n}=ae(ao);return gC({html:e,anchorRef:o,content:g(DI,{text:n(t)||""})}),e`
<button
	save-ref=${o}
	class=${_2.hiddenIndicator}
	onclick=${()=>r(t)}
>
	${e(sS,{})}
</button>`}function DI(e,{text:t}){return e`
<div
	class=${_2.tooltipContent}
>
    ${t}
</div>
`}var wI=u({$:"$",childHeadersContainer:"x3796a__child-headers-container","childHeadersContainer_with-separator":"x3796a__child-headers-container_with-separator"});function Tp(e,{pageKey:t,childHeaders:o,selectedHeader:r,withSeparator:n,hiddenContent:i,expandedHeaders:a}){return e`
<div
	class=${wI.childHeadersContainer.withMods({"with-separator":n})}
>
	${e.renderAll(o,s=>le(s.key,Dp,{pageKey:t,headerData:s,selectedHeader:r,expandedHeaders:a}))}
	${e.renderIf(vp,()=>i&&{hiddenContent:i})}
</div>`}var wp=u({$:"$",headerWrapper:"xfe90e__header-wrapper","headerWrapper_with-separator":"xfe90e__header-wrapper_with-separator",header:"xfe90e__header",header_selected:"xfe90e__header_selected",text:"xfe90e__text",moreButton:"xfe90e__more-button"}),EI=20;function Dp(e,{pageKey:t,headerData:o,selectedHeader:r,expandedHeaders:n}){let{key:i,title:a,childHeaders:s,offset:c}=o,l=I(()=>({marginInlineStart:EI*(c-1)}),[c]),m=!!s.length&&n.includes(i);return e`
<div
	class=${wp.headerWrapper.withMods({"with-separator":c>1})}
	style=${l}
>
	${e(PI,{pageKey:t,key:i,title:a,selectedHeader:r})}
	${e.renderIf(Tp,()=>m&&{childHeaders:s,pageKey:t,withSeparator:!0,hiddenContent:null,selectedHeader:r,expandedHeaders:n})}
</div>`}function PI(e,{pageKey:t,key:o,title:r,selectedHeader:n}){let{gotoHeaderHandler:i,renderChildHeaderControls:a}=ae(ao),s=c=>{c.defaultPrevented||i(t,o)};return e`
<div
	class="${wp.header.withMods({selected:n===o})}"
	onclick=${s}
>
	${e(Yl,{text:kp(r),maxLines:2},{className:wp.text})}
	${e(a(t,o,wp.moreButton))}
</div>`}var S2=u({$:"$",container:"xeb45c__container",dot:"xeb45c__dot",container_selected:"xeb45c__container_selected",selectAnimation:"xeb45c__selectAnimation"});function k2(e,{selected:t}){return e`
<div class=${S2.container.withMods({selected:t})}>
	<div class=${S2.dot}></div>
</div>`}var Ur=u({$:"$",chapterWrapper:"x0dfa5__chapter-wrapper",chapter:"x0dfa5__chapter",chapter_readonly:"x0dfa5__chapter_readonly",chapter_dragged:"x0dfa5__chapter_dragged",chapter_selected:"x0dfa5__chapter_selected",childHeadersWrapper:"x0dfa5__child-headers-wrapper",content:"x0dfa5__content",content_minimized:"x0dfa5__content_minimized",chapter_disabled:"x0dfa5__chapter_disabled",text:"x0dfa5__text",moreButton:"x0dfa5__more-button",icon:"x0dfa5__icon"}),RI=200;function II(e,{key:t,title:o,disableTooltip:r}){let{renderPageControls:n,renderPagePrefix:i}=ae(ao);return e`
<div
	class=${Ur.content.withMods({minimized:!1})}
>
	${e(i(t),Ur.icon)}
	${e(Yl,{text:kp(o),maxLines:2,disableTooltip:r},{className:Ur.text})}
	${e(n(t,Ur.moreButton))}
</div>`}function MI(e){let t=g(jm);return e`
<div
	class=${Ur.content.withMods({minimized:!0})}
>
	${e(t)}
</div>`}var AI=4;function C2(e,{pageData:t,state:o,isSelected:r,isMinimized:n,showHeaders:i,autotestData:a,selectedHeader:s,expandedHeaders:c,scrollContainerRef:l}){let{key:m,title:p,childHeaders:f,hiddenContent:d}=t,x=M();P(()=>{r&&hC({itemRef:x,containerRef:l,scrollDuration:RI})},[r,x,l]);let _=i&&r&&!n&&(!!f.length||!!d)&&o==="normal";return e`
<div
	class=${Ur.chapterWrapper}
	save-ref=${x}
>
	${e(FI,{key:m,title:p,state:o,isSelected:r,isMinimized:n,autotestData:a})}
	${e.renderIf(VI,()=>_&&{pageKey:m,hiddenContent:d,childHeaders:f,selectedHeader:s,expandedHeaders:c})}
</div>`}function VI(e,{pageKey:t,hiddenContent:o,childHeaders:r,expandedHeaders:n,selectedHeader:i}){return e`
<div class=${Ur.childHeadersWrapper}>
	${e(Tp,{pageKey:t,childHeaders:r,withSeparator:!1,hiddenContent:o,selectedHeader:i,expandedHeaders:n})}
</div>`}function FI(e,{key:t,title:o,state:r,isSelected:n,isMinimized:i,autotestData:a}){let s=M(),{isReadonly:c,isPagesDraggable:l,gotoPageHandler:m,isPageDisabled:p,getPageTooltip:f}=ae(ao),d=f(t)||"",x=!!d,_=p(t),k=A=>{A.defaultPrevented||_||c||m(t)},S=Sl(),C=E(0),y=E(!1);Sk({ref:s,enabled:l,onStart:A=>{C.current=A.clientY},onDrag:A=>{let $=Math.abs(A.clientY-C.current)>AI;!y.current&&$&&(y.current=!0,S(t,A))},onEnd:()=>{y.current=!1,C.current=0}});let[v,D]=z(!1);return yo(s,{focused:v,onFocusedChange:D}),G(s,"keydown",A=>{A.keyCode===qe.ENTER&&s.current.click()}),Nr({html:e,anchorRef:s,text:d,show:!!d}),e`
<div
	save-ref=${s}
	class=${Ur.chapter.withMods({selected:n,dragged:r==="dragged",readonly:c,disabled:_})}
	onclick=${k}
	data-at=${X(a)}
	tabindex="0"
>
	${e.switch(()=>i?g(MI):g(II,{key:t,title:o,disableTooltip:x}))}
</div>`}var Ps=u({$:"$",scrollContainer:"x5cf64__scroll-container",list:"x5cf64__list",headersList:"x5cf64__headers-list",emptyState:"x5cf64__empty-state"});function b2(e,{pages:t,selectedPageKey:o,isMinimized:r,showHeaders:n,expandedHeaders:i,selectedHeader:a}){let s=M(),c=Qr(s),{getEmptyStateText:l}=ae(ao);return e`
<div
	save-ref=${s}
	class=${Ps.scrollContainer}
	data-at=${X("navigation-panel-item-list")}
>
	${e.switch(()=>{if(t.length>1||!n)return g($I,{pages:t,selectedPageKey:o,isMinimized:r,showHeaders:n,scrollController:c,selectedHeader:a,expandedHeaders:i,scrollContainerRef:s},Ps.list);let m=B(t[0]);if(m.childHeaders.length||m.hiddenContent)return r?g(LI,{childHeaders:m.childHeaders,expandedHeaders:i,selectedHeader:a}):g(KI,{pageKey:m.key,childHeaders:m.childHeaders,selectedHeader:a,expandedHeaders:i,hiddenContent:m.hiddenContent},Ps.list);let p=l();return p&&!r?g(OI,{text:p}):null})}
</div>`}function OI(e,{text:t}){return e`
<div class="${Ps.emptyState}">
	${t}
</div>`}function LI(e,{childHeaders:t,expandedHeaders:o,selectedHeader:r}){let n=I(()=>{let i=[],a=[...t];for(;a.length;){let s=B(a.shift());o.includes(s.key)&&a.unshift(...s.childHeaders),i.push(s.key)}return i},[t,o]);return e`
<div>
	${e.renderAll(n,i=>le(i,k2,{selected:r===i}))}
</div>
`}function KI(e,{childHeaders:t,pageKey:o,selectedHeader:r,hiddenContent:n,expandedHeaders:i}){return e`
<div class=${Ps.headersList}>
	${e.renderAll(t,a=>le(a.key,Dp,{pageKey:o,headerData:a,selectedHeader:r,expandedHeaders:i}))}
	${e.renderIf(vp,()=>n&&{hiddenContent:n})}
</div>`}function $I(e,{pages:t,selectedPageKey:o,isMinimized:r,showHeaders:n,scrollController:i,selectedHeader:a,expandedHeaders:s,scrollContainerRef:c}){let{setPagesOrderHandler:l}=ae(ao);return kl(e,{items:t,getItemId:m=>m.key,onItemsChange:m=>{l(m.map(p=>p.key))},getItemBinding:(m,p,f)=>{let d=o===m.key;return le(m.key,C2,{pageData:m,state:f,isSelected:d,isMinimized:r,showHeaders:n,autotestData:{[ka]:"navigation-panel-chapter",[Wh]:d?"selected":"unselected"},selectedHeader:a,expandedHeaders:s,scrollContainerRef:c})},scrollController:i})}function B2(e,t,o){return I(()=>{if(!o)return[];let r=[],n=B(e.find(a=>a.key===t));return v2(r,n,o)?r.slice(1):[]},[e,t,o])}function v2(e,t,o){if(t.key===o)return e.push(t.key),!0;e.push(t.key);for(let r of t.childHeaders)if(v2(e,r,o))return!0;return e.pop(),!1}function Ep(e,t,o=50){let r=e.getBoundingClientRect(),n=t.getBoundingClientRect();return t.scrollTop+(r.top-n.top)-o}function T2(e,t){let o=Array.from(e.querySelectorAll("h1[data-key],h2[data-key],h3[data-key]")).filter(i=>{let a=i.getAttribute("data-key");return a&&t.includes(a)}),r=null,n=e.offsetHeight;for(let i of o){let a=Ep(i,e,n*.75);if(Math.floor(e.scrollTop)>=Math.floor(a))r=i.getAttribute("data-key");else break}return r}function D2(e){let{hiddenHeaders:t}=e.navigationData,o=[];return Cp(e.contentState.blockMap).forEach(r=>{let n=re(r);n&&["h1","h2","h3"].includes(n.viewType)&&!t.includes(r.key)&&o.push(r.key)}),o}var zI=400;function w2(e,t=()=>{}){let o=ms({initialValue:e.scrollTop,setScrollValue:r=>{e.scrollTop=r},delta:e.scrollTop*-1,duration:zI});o&&o.add(()=>t())}var NI=400;function E2({contentElement:e,onBeforeStartScroll:t,onCompleteScroll:o,checkNeedToScroll:r}){let n=te(r),i=te(o);return w((a,s)=>{if(!n.current(a))return;let c=B(e.querySelector(`[data-key="${s}"]`)),l=e.scrollTop,m=e.offsetHeight,f=Ep(c,e,m*.75)-l;if(Math.floor(f)===0)return;t&&t(s);let d=ms({initialValue:e.scrollTop,setScrollValue:x=>{e.scrollTop=x},delta:f,duration:NI});d&&d.addCallOnce(()=>i.current&&i.current(s))},[e,n,t,i])}var Rs={};Tu(Rs,{PageHeader:()=>QI});var P2=u({$:"$",tag:"x1802c__tag",content:"x1802c__content"});function R2(e,t){let o=M(),r=ei(o);return Nr({html:e,anchorRef:o,text:t,show:r,offset:{x:0,y:-12}}),o}function I2(e,{content:t,textColor:o,hasBackground:r}){let[n,i,a]=we(o),s=r?`rgba(${n}, ${i}, ${a}, 0.1)`:ct().surfaceSubdued;return e`
<div
	class=${P2.tag}
	style=${{backgroundColor:s}}
>
	${e(t,P2.content)}
</div>`}var ea=u({$:"$",header:"x79164__header",header_offset_medium:"x79164__header_offset_medium",header_offset_large:"x79164__header_offset_large","header_with-background":"x79164__header_with-background",header_column:"x79164__header_column",content:"x79164__content",content_lock:"x79164__content_lock","content_with-background":"x79164__content_with-background",kicker:"x79164__kicker",meta:"x79164__meta",title:"x79164__title",subtitle:"x79164__subtitle"});function QI(e,{background:t,content:o,autotestData:r,position:n}){let{textColor:i,isLocked:a,meta:s=null,kicker:c,title:l,subtitle:m,buttonGroup:p=null,collaborators:f=null}=o,d=M();return ee(()=>{Me(d.current,{"--roll-page-header-text-color":i,"--roll-page-header-meta-color":t?i:ct().textSubdued})},[t,d,i]),e`
<div
	class=${ea.header.withMods({"with-background":!!t,offset:s?"medium":"large",column:n==="column"})}
    data-at=${X(r)}
>
	${e.renderIf(d2,()=>!!t&&{src:t.src,editedSrc:t.editedSrc,width:t.width,height:t.height,color:t.color,opacity:t.opacity,isLoading:t.isLoading,crop:t.crop,position:n})}
	<div
		save-ref=${d}
		class=${ea.content.withMods({lock:a,"with-background":a&&!t})}
	>
		${e(p)}
		${e(s,ea.meta)}
		${e.renderIf(I2,()=>!!c&&{content:c,textColor:i,hasBackground:!!t&&n==="cover"},ea.kicker)}
		${e(l,ea.title)}
		${e(m,ea.subtitle)}
		${e(f)}
	</div>
</div>`}var M2="intro";!1&&(window.top.__HYPER_HTML_MODE__="development");var rg="_ismeta";function ng(e){let t=window.top.__ON_UPDATE_ELEMENT__;t&&t(e)}function ig(){let e=window.top.__UPDATE_ELEMENTS__;e&&e()}function Pp(e,t){!1&&!e[rg]&&(e[rg]={...e[rg],...t})}var HI=[gt.CLICK],oa=new Map,ag=new Map,ta=!1,sg=!1,UI=()=>null;function V2(){F2(),Yt(V2)}Yt(V2);function F2(){if(oa.size&&!sg){ta=!0;for(let e of oa.keys())e._redraw();ta=!1,oa.clear()}}function WI(e){oa.set(e,!0)}function A2(e){oa.delete(e)}function qI(e){return oa.has(e)}var Rp=class extends cr{constructor({bemInfo:t,blockName:o,block:r=o,relatedData:n,direction:i="ltr"}){super(),this._bemInfoArray=[],(t||r)&&this._addBemInfo(B(t||r)),this._childElements=null,this._childElementsRef=null,this._relatedData=n||this,this._modifiers={},this._browserEventSignals=null,this._domElement=null,this._onDidRedraw=null,this._onDomElementReCreatedCallback=null,this._childContext=new Map,this._direction=i}setDirection(t){this._direction=t}_setContext(t,o){js(this._childContext,t,o)}static renderInProgress(){return ta}static suspend(t){sg=t,t||F2()}domElement(){if(qI(this)&&!sg){let t=ta;ta=!0,this._redraw(),ta=t}return this._domElement?this._domElement:(this._redraw(),this.domElement())}onDidRedraw(){return this._onDidRedraw||(this._onDidRedraw=this._createSignal()),this._onDidRedraw}updateModifier(t,o){o?typeof o=="string"?this._modifiers[t]=o:o&&(this._modifiers[t]=null):delete this._modifiers[t],this._sheduleRender()}hasModifier(t){return Object.keys(this._modifiers).includes(t)}handleEvent(t){if(t.defaultPrevented&&HI.includes(t.type))return;let o=this._getBrowserEventSignalIfExists(t.type);o&&o.dispatch(t)}createChildBemInfo(t){return B(this._bemInfoArray[0]).createChildElementBemInfo(t)}addBemInfo(t,o){this._addBemInfo(t,o),this._sheduleRender()}setOnDomElementReCreatedCallback(t){this._onDomElementReCreatedCallback=t}clearCache(){this._relatedData={},this._sheduleRender()}_sheduleRender(){WI(this)}_redraw(){A2(this);let t=this._render();if(t!=this._domElement){let o=this._domElement;this._domElement=t,o&&(this._onDomElementReCreatedCallback?this._onDomElementReCreatedCallback():V.error(`[${this.constructor.name}] component element was changed`))}!1&&(t.component=this),this._onDidRedraw&&document.body.contains(this._domElement)&&this._onDidRedraw.dispatch()}_getBrowserEventSignalIfExists(t){return this._browserEventSignals&&this._browserEventSignals[t]||null}_getBrowserEventSignal(t){return this._browserEventSignals||(this._browserEventSignals={}),this._browserEventSignals[t]||(this._browserEventSignals[t]=this._createSignal(),this._sheduleRender()),this._browserEventSignals[t]}_activeListenerExists(t){let o=this._getBrowserEventSignalIfExists(t);return!!o&&o.handlersCount()>0}_getHandler(t){return this._activeListenerExists(t)?this:null}_addBemInfo(t,o){t instanceof Io||(t=new Io(t,o)),this._bemInfoArray.push(t)}_getCssClasses(){return this._bemInfoArray?ak(this._bemInfoArray,this._modifiers):""}_wasRendered(){return!!this._domElement}_html(t,...o){return this._generateElement("",t,...o)}_renderFunctionEx(t){return this._childElementsRef||(this._childElementsRef={}),this._childElementsRef[t]||(this._childElementsRef[t]={}),Jr(this._relatedData,t,this._childContext,this._childElementsRef[t])}_childHtml(t){ag.has(this)||ag.set(this,{});let o=ag.get(this);return o[t]||(o[t]=(r,...n)=>typeof r=="string"?this._childHtml(t+r):this._generateElement(t,r,...n),o[t].optional=(r,n)=>n?o[t](r):UI,!1&&(o[t].__hyperId=t)),o[t]}_getChildClass(t){return this.createChildBemInfo(t).className()}_getChildElement(t){if(this._childElementsRef&&this._childElementsRef[t])return B(this._childElementsRef[t].current);this.domElement();let o=this._childElements;return o&&o[t]||null}_generateElement(t,o,...r){let n=s=>s.map((c,l)=>{if(c instanceof Io)c=c.className();else if(c instanceof $t)c=c.dispatch.bind(c);else if(typeof c=="function")c=c.bind(this);else{if(c==this)return c.handleEvent.bind(this);if(c&&c!=this&&typeof c.domElement=="function")return typeof c.setOnDomElementReCreatedCallback=="function"&&c.setOnDomElementReCreatedCallback(()=>this._redraw()),this._addDisposable(c),c.domElement();if(Array.isArray(c))return n(c)}if(o[l]&&o[l].endsWith("passive-events="))for(let m of Object.keys(c))typeof c[m]=="function"&&(c[m]=c[m].bind(this));return c});r=n(r);let i=t&&`:${t}`,a=Pt(this._relatedData,i)(o,...r);if(t){if(this._childElements=this._childElements||{},!1){let s=this._childElements[t];s?(B(s==a,`[${this.constructor.name}] component child('${t}') element was changed`),ng(s)):(Pp(a,{id:Ue(),renderer:`${this.constructor.name}: ${t}`}),ig())}this._childElements[t]=a}else!1&&(this._domElement?ng(this._domElement):(Pp(a,{id:Ue(),renderer:this.constructor.name}),ig()));return!1&&Pp(a,{renderArgs:[o,...r]}),a}_render(){}_destruct(){A2(this),super._destruct()}};var O2={create(e){let t=[],o=t.length>0?0:-1;return{key:e.key,type:h.QUIZ,exercise:e,questionsState:t,selectedQuestionIndex:o}},toExerciseState(e){return e.type!==h.EXERCISE?null:e}};var vt={create(e){let t={},o={},r={},n={};return ce(e.state.questions,i=>{switch(i.type){case"ti":o[i.id]=Xm();break;case"mc":case"mr":t[i.id]=Zm(i);break;case"sq":r[i.id]=ep(i);break;case"mt":n[i.id]=Jm(i,e.settings.main.shuffleAnswersEnabled);break;default:O(i)}}),{key:e.key,type:h.QUIZ,quizData:e,attempts:0,timeSpent:0,timerStartTime:null,timerStopTime:null,sessionState:"notStarted",currentSlide:{type:"intro"},typeInQuestionsState:o,choicesQuestionsState:t,sequenceQuestionsState:r,matchingQuestionsState:n,questionsViewOrder:ji(e.state,e.settings.main),choicesViewOrderMap:Yi(e.state,e.settings.main),bestAttempt:null}},toQuizState(e){return e.type!==h.QUIZ?null:e}};function GI(e){let t=[];for(let o of e){let r=pt.toQuizBlock(o);r&&t.push(vt.create(r))}return t}var L2={create(e=[]){return{blockMap:L.createBlocks(e),blocksState:GI(e)}}};function Wr(e){let t=re(e);if(t)return t.viewType;let o=pt.toQuizBlock(e);if(o)return pt.getBlockType(o);let r=ln.toAttachmentBlock(e);if(r)return ln.getBlockType(r);let n=q.toCollageBlock(e);if(n)return q.getBlockType(n);let i=At.toNoteBlock(e);if(i)return At.getBlockType(i);let a=de.toTableBlock(e);if(a)return de.getBlockType(a);let s=Q.toLayoutBlock(e);if(s)return Q.getBlockType(s);let c=Z.toFlipCardsBlock(e);if(c)return Z.getBlockType(c);let l=Se.toDividerBlock(e);if(l)return Se.getBlockType(l);let m=Be.toContinueBlock(e);if(m)return Be.getBlockType(m);let p=Nt.toVideoBlock(e);if(p)return Nt.getBlockType(p);let f=fi.toEmbedBlock(e);if(f)return Dr.getBlockType(f);let d=Pr.toSnippetBlock(e);if(d)return Pr.getBlockType(d);let x=bt.toCodeBlock(e);if(x)return bt.getBlockType(x);let _=ge.toListItemBlock(e);return _?ge.getBlockType(_):""}var cg=u({$:"$",mediaResource:"x5420e__media-resource",image:"x5420e__image",overlay:"x5420e__overlay",image_stub:"x5420e__image_stub"});function YI(e,{mediaResource:t,position:o,showStub:r}){let n=M(),i=M(),a=I(()=>(t==null?void 0:t.resource)||{width:0,height:0,src:""},[t]),s=cg.image.withMods({stub:!a.src&&r});return P(()=>{var c;(c=i.current)==null||c.setAttribute("data-background-image","true")},[i]),e`
<div class=${s} save-ref=${n}>
	${e.renderIf(io,()=>!!Wt(a)&&{image:a,imageRef:i,outContainerRef:n,fit:"cover",position:`${o.x}% ${o.y}%`})}
</div>`}function K2(e,{block:t,showStub:o=!0}){let r=rl(t),n={"background-color":ci((r==null?void 0:r.overlay)||Jx)};return e`
<div
	class=${cg.mediaResource}
	contenteditable="false"
>
	${e(YI,{mediaResource:rl(t),showStub:o,position:t_(t)||Xx})}
	<div
		class=${cg.overlay}
		style=${n}
	></div>
</div>`}var lg=u({$:"$",blockWrapper:"x45b52__block-wrapper",blockWrapper_hidden:"x45b52__block-wrapper_hidden",blockWrapper_list:"x45b52__block-wrapper_list","blockWrapper_float-left":"x45b52__block-wrapper_float-left","blockWrapper_clear-both":"x45b52__block-wrapper_clear-both",blockWrapper_dir_ltr:"x45b52__block-wrapper_dir_ltr",blockWrapper_dir_rtl:"x45b52__block-wrapper_dir_rtl","blockWrapper_fit-content":"x45b52__block-wrapper_fit-content","blockWrapper_before-lists":"x45b52__block-wrapper_before-lists",alignmentBlockWrapper:"x45b52__alignment-block-wrapper","alignmentBlockWrapper_align_float-left":"x45b52__alignment-block-wrapper_align_float-left",alignmentBlockWrapper_align_inner:"x45b52__alignment-block-wrapper_align_inner",alignmentBlockWrapper_align_outer:"x45b52__alignment-block-wrapper_align_outer",alignmentBlockWrapper_align_full:"x45b52__alignment-block-wrapper_align_full","alignmentBlockWrapper_align_full-layout":"x45b52__alignment-block-wrapper_align_full-layout",indentationBlockWrapper:"x45b52__indentation-block-wrapper"}),jI=.89,ZI=32,$2=e=>$r()?e*jI:e,mg=(e,t,o)=>{var r,n;return $2(e.designSettings&&((n=(r=e.designSettings)==null?void 0:r.padding)==null?void 0:n.top)!==void 0?e.designSettings.padding.top:p2({currentBlockType:Wr(e),prevBlockType:t,defaultTopPadding:o}))},pg=(e,t)=>{var o;return $2(e.designSettings&&((o=e.designSettings.padding)==null?void 0:o.bottom)!==void 0?e.designSettings.padding.bottom:m2(Wr(e),t))},XI=(e,t)=>{let o=ge.toOrderedListItemBlock(e);if(!o)return"";let r=t!==void 0,n=o.listViewType==="default"?`nesting-${mo(e)}`:"linear-counter";return!r&&o.counterReset===null?"":`${n} ${t!=null?t:o.counterReset}`};function Ip(e,{selectionBinding:t,controlsBinding:o,blockWrapperExtendClassList:r,...n}){let{block:i,blockAfterType:a,continueProps:s,listItemProps:c,direction:l}=n,m=M(),p=!!ge.toListItemBlock(i),f=i.type===h.LAYOUT?i.key:null,d=I(()=>{let _=Dr.toAbstractMediaBlock(i),k=re(i),S=a==="ol"||a==="ul";return se(lg.blockWrapper.withMods({"fit-content":q.isCollageBlock(i),"float-left":!!_&&_.alignment==="float-left","clear-both":!k,"before-lists":S,dir:l,hidden:!!s&&s.isHidden,list:p}),r)},[i,a,l,s,p,r]),x=I(()=>{var k,S;return{"background-color":ci((S=(k=i.designSettings)==null?void 0:k.background)==null?void 0:S.color),"counter-reset":XI(i,c==null?void 0:c.counterReset)}},[i,c]);return e`
<div
	save-ref=${m}
    class=${d}
	style=${x}
    draggable="false"
    data-wrapper-key=${i.key}
	data-context-block-key=${f}
	data-at=${X("block-wrapper")}
>
	${e.renderIf(K2,()=>ol(i)&&{block:i})}
	${e(t)}
	${e(o)}
	${e(JI,{...n,wrapperRef:ol(i)?m:void 0})}
</div>`}function JI(e,t){let{block:o,blockBeforeType:r,blockAfterType:n,defaultTopPadding:i,sizeWrapperExtendClassList:a}=t,s=M(),c=I(()=>se(a),[a]),l=I(()=>{let m={"padding-block-start":W(mg(o,r,i)),"padding-block-end":W(pg(o,n))};return s&&s.current&&(Rt(s.current,"--top-padding-height",m["padding-block-start"]),Rt(s.current,"--bottom-padding-height",m["padding-block-end"])),m},[o,n,r,i,s]);return e`
<div
	class=${c}
	save-ref=${s}
	style=${l}
    draggable="false"
>
	${e(eM,t)}
</div>`}function eM(e,t){let{block:o}=t,r=tl(o),n=Q.toLayoutBlock(o),i=Z.toFlipCardsBlock(o),a="inner";return n&&n.alignment==="full"?a="full-layout":i?a="full":r&&(a=r),e`
<div
    class=${lg.alignmentBlockWrapper.withMods({align:a})}
    draggable="false"
>
	${e(tM,{...t,indentationAvailable:a==="inner"})}
</div>`}function tM(e,{indentationAvailable:t,content:o,columnsDropAreaBinding:r,contextKey:n,...i}){var l;let s=((l=i.block.designSettings)==null?void 0:l.indent)||0,c=t&&s?{"padding-inline-start":W(s*ZI)}:null;return e`
<div
    class=${lg.indentationBlockWrapper}
	style=${c}
    draggable="false"
>
	${e(o,i)}
	${e(r)}
</div>`}var Mp=0;function Ap(e){let t={},o=0,r=null,n=null,i=[],a=ve.getBlocksArray(e);return oM(a,t),a.forEach(s=>{Be.toContinueBlock(s)&&(r=o);let l=ge.toOrderedListItemBlock(s);if(!l)return;let m=(n==null?void 0:n.listViewType)||l.listViewType,p=mo(n||l),f=mo(l),d=Math.abs(p-f),x=l.listViewType!==m,_=p<f&&!x,k=p>f&&!x,S=_||k||x||!!l.counterReset||r!==null;if(_){i.push(o);for(let C=0;C<d-1;C++)i.push(Mp)}if(S){if(o=l.counterReset?l.counterReset-1:r||Mp,_&&(o=Mp),k)for(let C=0;C<d;C++)o=i.pop()||Mp;t[l.key]=o,r=null}n=l,o++}),t}function oM(e,t){let o=e.find(r=>ge.toOrderedListItemBlock(r));o&&(t[o.key]=0)}function fg(e,t){let o=e[t-1];return o?Wr(o):"none"}function dg(e,t){let o=e[t+1];return o?Wr(o):"none"}var ug={},Vp=class extends Rp{constructor({blockName:t,direction:o,defaultTopPadding:r}){super({blockName:t,direction:o}),this._renderers={},this._readonlyMode=!1,this._renderedBlockIndex=0,this._defaultTopPadding=r,this.onHyperlinkOver=this._createSignal(),this._relatedGroupData={},this._wrapperRenderFn=Ip}setDefaultTopPadding(t){this._defaultTopPadding!==t&&(this._defaultTopPadding=t,this._sheduleRender())}getLockedBlocks(){return[]}setReadonlyMode(t){this._readonlyMode!==t&&(this._readonlyMode=t,this._sheduleRender())}setDirection(t){this._direction!==t&&(super.setDirection(t),this._sheduleRender())}registerRenderer(t,o){this._renderers[t]=o}_getReadonlyMode(){return this._readonlyMode}_getBlockMap(){}_getVisibleBlocks(){}_getParagraphPlaceholder(t){return""}_getParagraphPrompt(t){return""}_getGroupRelatedData(){return this._relatedGroupData}isLock(t){return!1}isHidden(t){return!1}isSelected(t){}_resetRenderBlockIndex(){this._renderedBlockIndex=0}_renderBlock(t,o,r){let n=this._getPrevBlockType(this._renderedBlockIndex),i=this._getNextBlockType(this._renderedBlockIndex);this.isHidden(t)||this._renderedBlockIndex++;let a=re(t),s=a?{placeholder:this._getParagraphPlaceholder(a),prompt:this._getParagraphPrompt(a),paragraphIndex:o}:void 0,l=ge.toListItemBlock(t)?{counterReset:r}:void 0,m=this._renderers[t.type],p=m({block:t,blockBeforeType:n,blockAfterType:i,defaultTopPadding:this._defaultTopPadding,onHyperlinkOverFn:this.onHyperlinkOver.toFn(),readonlyMode:this._readonlyMode,isLock:this.isLock(t),direction:this._direction,isSelected:this.isSelected(t),paragraphProps:s,listItemProps:l});if(p instanceof Element)return p;let f=Dr.toAbstractMediaBlock(t);return f&&f.alignment==="float-left"&&(this._prevFloatedElementRenderer=p),p.domElement()}bindingBlockRenderer(t,o,r,n){return r in ug||(ug[r]={}),en(this._wrapperRenderFn)({...o,content:t},Jr(ug[r],o.block.key,n))}_getPrevBlockType(t){let o=this._getVisibleBlocks();return fg(o,t)}_getNextBlockType(t){let o=this._getVisibleBlocks();return dg(o,t)}_processBlock({blocks:t,block:o}){t.push(o)}_getCounterResetMap(){return Ap(this._getBlockMap())}_renderBlocks(t){let o=[];ve.forEach(t,i=>{this._processBlock({blocks:o,block:i})});let r=this._getCounterResetMap(),n=[];return o.forEach((i,a)=>n.push(this._renderBlock(i,a,r[i.key]))),n}};var Fp=class extends Vp{constructor({blockName:t,blockMap:o,direction:r,defaultTopPadding:n,autotestData:i}){super({blockName:t,direction:r,defaultTopPadding:n}),this._blockMap=o,this._autotestData=i}updateBlockMap(t){this._blockMap!==t&&(this._blockMap=t,this._sheduleRender())}isLock(t){return!0}isSelected(t){return!1}_getBlockMap(){return this._blockMap}_getVisibleBlocks(){return ze(this._blockMap)}_renderContent(){}_render(){return this._html`
			<div class=${this._getCssClasses()} data-at=${X(this._autotestData)}>
				${this._renderContent()}
			</div>`}};var nr=u({$:"$",attachmentSubblock_uploading:"x00877__attachment-subblock_uploading",attachmentBlock:"x00877__attachment-block",attachmentBlock_clickable:"x00877__attachment-block_clickable",attachmentBlock_lock:"x00877__attachment-block_lock",attachmentSubblock:"x00877__attachment-subblock",attachmentIcon:"x00877__attachment-icon",attachmentInfo:"x00877__attachment-info",attachmentName:"x00877__attachment-name",attachmentSize:"x00877__attachment-size",attachmentButtons:"x00877__attachment-buttons",placeholder:"x00877__placeholder"});function rM(e,{disabled:t,onReplace:o,onDownload:r}){return e`
<div class=${nr.attachmentButtons}>
	${e.renderIf(qf,()=>o&&{component:g(je,{state:t?"disabled":"default",style:"linkSecondary",structure:"icon",icon:g(Hm),size:"small",onClick:o}),tooltipText:T("Roll.Editor.AttachmentBlock.UpdateButtonTooltip")})}
	${e(qf,{component:g(je,{state:t?"disabled":"default",style:"linkSecondary",structure:"icon",icon:g(bk),size:"small",onClick:r}),tooltipText:T("Roll.Editor.AttachmentBlock.DownloadButtonTooltip")})}
</div>`}function nM(e,{extension:t}){return e`
<div class=${nr.attachmentIcon}>
	${e.switch(()=>{switch(t){case"doc":case"docx":return g(e0,{});case"ppt":case"pptx":return g(o0,{});case"xls":case"xlsx":return g(n0,{});case"pdf":return g(t0,{});default:return g(r0,{})}})}
</div>`}function iM(e){return e`
<img class=${nr.placeholder} aria-hidden=true src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" />`}function z2(e,{key:t,fileName:o,fileSize:r,fileExtension:n,isLoading:i,isPlayer:a,disabled:s,onReplace:c,onDownload:l}){let m=E();return G(m,"click",()=>{a&&l()}),e`
<div
	class=${nr.attachmentBlock.withMods({clickable:a,lock:!!s})}
	save-ref=${m}
	draggable=true
>
	${e.switch(()=>i?g(Xy,{size:"medium"},nr.attachmentIcon):g(nM,{extension:n}))}
	<div class=${nr.attachmentSubblock.withMods({uploading:i})}>
		<div class=${nr.attachmentInfo}>
			${e(Zt,{text:o},nr.attachmentName)}
			<div class=${nr.attachmentSize}>${SC(r)}</div>
		</div>
		${e(rM,{disabled:!!s,onReplace:c,onDownload:a?()=>{}:l})}
		${e.renderIf(iM,()=>!a&&!i)}
	</div>
</div>`}var N2=u({$:"$",collageBlock:"x2706e__collage-block",collageBlockWrapper:"x2706e__collage-block-wrapper","collageBlockWrapper_single-image":"x2706e__collage-block-wrapper_single-image",newImagePlaceholder:"x2706e__new-image-placeholder",collageBlock_addingAnimated:"x2706e__collage-block_addingAnimated",blockMenuButton:"x2706e__block-menu-button","collageBlock_one-image":"x2706e__collage-block_one-image",collageBlock_lock:"x2706e__collage-block_lock","collageBlock_dnd-mode":"x2706e__collage-block_dnd-mode","collageBlock_read-only":"x2706e__collage-block_read-only",collageBlock_selected:"x2706e__collage-block_selected",selectionFrame:"x2706e__selection-frame",imageDndIcon:"x2706e__image-dnd-icon"});var Is=u({$:"$",stubContainer:"xfe9a1__stub-container",preloaderContainer:"xfe9a1__preloader-container",preloader:"xfe9a1__preloader",loadingLabel:"xfe9a1__loading-label",loadingText:"xfe9a1__loading-text",selectionImage:"xfe9a1__selection-image",cropImage:"xfe9a1__crop-image"});function aM(e){return e`
<div class=${Is.stubContainer}>
	<div class=${Is.preloaderContainer}>
		${e(hr,{},Is.preloader)}
		<div class=${Is.loadingLabel}>
			${e(hk,{})}
			<div class=${Is.loadingText}>
				${T("Roll.Editor.ImageLoading.Label")}
			</div>
		</div>
	</div>
</div>`}function sM(e,{image:t,onClick:o,isPlayer:r}){let n=to.isEnabled(t.zoom),i=eo.isEnabled(t.link),a=Tr.getRadius(t.rounding),s=vr.getFrameType(t.frame);return be(e,g(io,{image:t,withImageSelection:!0,onClick:o,withZoom:n,withLink:i,isPlayer:r,radius:cM(a),decoration:s==="none"?void 0:s}))}function cM(e){return zh(e,{none:void 0,medium:"large",large:"xxlarge"})}function Q2(e,{imageBlock:t,className:o,onClick:r,isPlayer:n}){let{isBlob:i,src:a}=t,[s,c]=z(!i);return ee(()=>{if(i){let l=new Image;l.onload=()=>c(!0),l.onerror=()=>c(!1),l.src=a}else c(!0)},[a,i]),e`
<div>
	${e.switch(()=>s?g(sM,{image:t,onClick:r,isPlayer:n},o):g(aM,{},o))}
</div>`}function H2(e){let t=e.map(n=>{let i=ht(n);return i.crop?i.width/i.height:n.width/n.height}),o=Math.min(...t);return{imagesGrows:t.map(n=>n/o),minImageRatio:o}}var lM=u({$:"$",dividerContainer:"x5e46c__divider-container"});function ra(e,{figure:t}){return e`
<div class=${lM.dividerContainer}>
	${e(t)}
</div>`}var mM=16,pM=56;function uM(e){return e`
<svg width=${mM} height=${pM} fill="currentColor">
	<mask id="path-1-inside-1_915_7477" fill="white">
		<path fill-rule="evenodd" clip-rule="evenodd" d="M9.25149 1.25C9.25149 0.559644 8.69185 0 8.00149 0C7.31114 0 6.75149 0.559644 6.75149 1.25V43.25H1.78966C1.00734 43.25 0.527991 44.1078 0.93801 44.7741L7.14854 54.8661C7.53903 55.5006 8.46138 55.5006 8.85186 54.8661L15.0622 44.7741C15.4722 44.1078 14.9929 43.25 14.2105 43.25H9.25149V1.25Z"/>
	</mask>
	<path fill-rule="evenodd" clip-rule="evenodd" d="M9.25149 1.25C9.25149 0.559644 8.69185 0 8.00149 0C7.31114 0 6.75149 0.559644 6.75149 1.25V43.25H1.78966C1.00734 43.25 0.527991 44.1078 0.93801 44.7741L7.14854 54.8661C7.53903 55.5006 8.46138 55.5006 8.85186 54.8661L15.0622 44.7741C15.4722 44.1078 14.9929 43.25 14.2105 43.25H9.25149V1.25Z"/>
	<path d="M6.75149 43.25V44.25H7.75149V43.25H6.75149ZM0.93801 44.7741L0.0863544 45.2982L0.086355 45.2982L0.93801 44.7741ZM7.14854 54.8661L6.29689 55.3902L7.14854 54.8661ZM8.85186 54.8661L9.70352 55.3901L9.70352 55.3901L8.85186 54.8661ZM15.0622 44.7741L14.2105 44.25V44.25L15.0622 44.7741ZM9.25149 43.25H8.25149V44.25H9.25149V43.25ZM8.00149 1C8.13956 1 8.25149 1.11193 8.25149 1.25H10.2515C10.2515 0.0073592 9.24413 -1 8.00149 -1V1ZM7.75149 1.25C7.75149 1.11193 7.86342 1 8.00149 1V-1C6.75885 -1 5.75149 0.0073592 5.75149 1.25H7.75149ZM7.75149 43.25V1.25H5.75149V43.25H7.75149ZM1.78966 44.25H6.75149V42.25H1.78966V44.25ZM1.78966 44.25L1.78966 44.25V42.25C0.225014 42.25 -0.73368 43.9657 0.0863544 45.2982L1.78966 44.25ZM8.0002 54.342L1.78966 44.25L0.086355 45.2982L6.29689 55.3902L8.0002 54.342ZM8.0002 54.342H8.0002L6.29689 55.3902C7.07786 56.6592 8.92256 56.6592 9.70352 55.3901L8.0002 54.342ZM14.2105 44.25L8.0002 54.342L9.70352 55.3901L15.9139 45.2982L14.2105 44.25ZM14.2105 44.25L14.2105 44.25L15.9139 45.2982C16.7339 43.9656 15.7752 42.25 14.2105 42.25V44.25ZM9.25149 44.25H14.2105V42.25H9.25149V44.25ZM8.25149 1.25V43.25H10.2515V1.25H8.25149Z" mask="url(#path-1-inside-1_915_7477)"/>
</svg>`}function U2(e){return ra(e,{figure:g(uM,{})})}var fM=3,W2=10,q2=6;function dM(e){let t=(W2+q2)*fM-q2;return e`
<svg width=${t} height=${W2} fill="currentColor">
	<polygon points="0 5, 5 10, 10 5, 5 0"/>
	<polygon points="16 5, 21 10, 26 5, 21 0"/>
	<polygon points="32 5, 37 10, 42 5, 37 0"/>
</svg>`}function G2(e){return ra(e,{figure:g(dM,{})})}var Op=32;function gM(e){return e`
<svg width=${Op} height=${Op} fill="currentColor">
	<path d="M8.252 28.704C6.756 28.704 5.532 28.398 4.58 27.786C3.628 27.174 2.846 26.392 2.234 25.44C1.554 24.284 1.078 23.094 0.806 21.87C0.602 20.578 0.5 19.524 0.5 18.708C0.5 15.376 1.35 12.35 3.05 9.63C4.60865 7.13616 6.96757 5.07104 10.1268 3.43463C10.6108 3.18392 11.2007 3.38941 11.4445 3.87694C11.704 4.39597 11.4683 5.02324 10.9526 5.28938C9.247 6.16963 7.7348 7.4125 6.416 9.018C4.92 10.922 4.54672 11.7378 4.30005 13.5C4.05338 15.2622 4.59605 16.362 4.80005 16.974C5.88805 16.09 6.824 15.648 8.252 15.648C10.02 15.648 11.55 16.226 12.842 17.382C14.134 18.538 14.78 20.136 14.78 22.176C14.78 24.08 14.134 25.644 12.842 26.868C11.55 28.092 10.02 28.704 8.252 28.704Z" />
	<path d="M25.252 28.704C23.756 28.704 22.532 28.398 21.58 27.786C20.628 27.174 19.846 26.392 19.234 25.44C18.554 24.284 18.078 23.094 17.806 21.87C17.602 20.578 17.5 19.524 17.5 18.708C17.5 15.376 18.35 12.35 20.05 9.63C21.6087 7.13616 23.9676 5.07104 27.1268 3.43463C27.6108 3.18392 28.2007 3.38941 28.4445 3.87694C28.704 4.39597 28.4683 5.02324 27.9526 5.28938C26.247 6.16963 24.7348 7.4125 23.416 9.018C21.92 10.922 21.5467 11.7378 21.3 13.5C21.0534 15.2622 21.596 16.362 21.8 16.974C22.888 16.09 23.824 15.648 25.252 15.648C27.02 15.648 28.55 16.226 29.842 17.382C31.134 18.538 31.78 20.136 31.78 22.176C31.78 24.08 31.134 25.644 29.842 26.868C28.55 28.092 27.02 28.704 25.252 28.704Z" />
</svg>
`}function hM(e){return e`
<svg width=${Op} height=${Op} fill="currentColor">
	<path d="M13.918 3.71393L13.338 7.94794C11.83 7.83194 10.728 8.14127 10.032 8.87593C9.336 9.6106 8.91067 10.5966 8.756 11.8339C8.60133 13.0713 8.56267 14.4053 8.64 15.8359H13.918V28.0739H4V13.5159C4 9.9586 4.88933 7.2906 6.668 5.51193C8.48533 3.73327 10.902 3.13393 13.918 3.71393Z" />
	<path d="M27.918 3.71393L27.338 7.94794C25.83 7.83194 24.728 8.14127 24.032 8.87593C23.336 9.6106 22.9107 10.5966 22.756 11.8339C22.6013 13.0713 22.5627 14.4053 22.64 15.8359H27.918V28.0739H18V13.5159C18 9.9586 18.8893 7.2906 20.668 5.51193C22.4853 3.73327 24.902 3.13393 27.918 3.71393Z" />
</svg>
`}function yM(e){switch(e){case"quote_1":return g(gM);case"quote_2":return g(hM);default:throw O(e,`Unknown quotes divider style: ${e}`),new Error}}function Y2(e,{style:t}){return ra(e,{figure:yM(t)})}function Lp(e,{lineWidth:t=2}){let o=t/2;return e`
<svg width="100%" height=${t}>
	<line x1="0" y1="${o}" x2="100%" y2="${o}" stroke="currentColor" stroke-width=${t} stroke-linecap="round"/>
</svg>`}function Kp(e,{lineWidth:t=2,isReverse:o=!1}){let r=t/2,n=["0","100%"];o&&n.reverse();let[i,a]=n;return e`
<svg width="100%" height=${t}>
	<line x1="${i}" y1="${r}" x2="${a}" y2="${r}" stroke="currentColor" stroke-width=${t} stroke-dasharray="6 6" stroke-linecap="round"/>
</svg>`}function j2(e,{blockKey:t,lineWidth:o=2}){let r=o/2;return e`
<svg width="100%" height=${o}>
	<line x1="0" y1="${r}" x2="100%" y2="${r}" stroke="url(#linear_gradient_${t})" stroke-width=${o} />
	<defs>
		<linearGradient id="linear_gradient_${t}" x1="100%" y1="0" x2="0" y2="0" gradientUnits="userSpaceOnUse">
			<stop stop-color="currentColor" stop-opacity="0"/>
			<stop offset="0.5" stop-color="currentColor"/>
			<stop offset="1" stop-color="currentColor" stop-opacity="0"/>
		</linearGradient>
	</defs>
</svg>`}function Z2(e,{blockKey:t,lineWidth:o=2,isReverse:r=!1}){let n=o/2,i=[1,0];r&&i.reverse();let[a,s]=i;return e`
<svg width="100%" height=${o}>
	<line x1="0" y1="${n}" x2="100%" y2="${n}" stroke="url(#linear_gradient_${t}_${r})" stroke-width=${o} />
	<defs>
		<linearGradient id="linear_gradient_${t}_${r}" x1="0" y1="0" x2="100%" y2="0" gradientUnits="userSpaceOnUse">
			<stop stop-color="currentColor" stop-opacity="${a}"/>
			<stop offset="1" stop-color="currentColor" stop-opacity="${s}"/>
		</linearGradient>
	</defs>
</svg>`}var xM=u({$:"$",dividerContainer:"x5445a__divider-container"}),_M=u({$:"$",lineContainer:"x4d987__line-container"});function SM(e,{blockKey:t,style:o,isReverse:r}){return e`
<div class=${_M.lineContainer}>
	${e.switch(()=>{switch(o){case"solid":return g(Lp,{});case"dotted":return g(Kp,{isReverse:r});case"faded":return g(j2,{blockKey:t});default:return O(o,`unknown line style ${o}`),null}})}
</div>
`}function X2(e,{block:t,direction:o}){let r=o==="rtl";return e`
<div class=${xM.dividerContainer}>
	${e(SM,{style:t.style,blockKey:t.key,isReverse:r})}
</div>`}function nt(e,t){let{isLock:o,onHyperlinkOverFn:r,readonlyMode:n,paragraphClassName:i,wrapperClassName:a="",paragraphStyles:s}=t,c=kM(t),l=I(()=>{let m=Ei(c,r,n,o);return i&&m.classList.add(...i.split(" ")),s&&Me(m,s),m},[c,r,n,o,i,s]);return e`
<div contenteditable=${!n&&!o} class=${a} data-name="paragraph-wrapper">
	${l}
</div>`}function kM(e){return I(()=>{switch(e.propsType){case"paragraphData":return new Mo({paragraph:e.paragraph,idPrefix:e.idPrefix,placeholder:e.placeholder,disableStyles:e.disableStyles});case"wrappedParagraph":return e.wrappedParagraph;default:Sa(e)}},[e])}var $p=u({$:"$",dividerContainer:"x77f45__divider-container",textWrapper:"x77f45__text-wrapper",textWrapper_style_rounded:"x77f45__text-wrapper_style_rounded",textWrapper_style_squared:"x77f45__text-wrapper_style_squared",paragraphWrapper:"x77f45__paragraph-wrapper",dividerText:"x77f45__divider-text"}),CM=u({$:"$",lineContainer:"x4d987__line-container"});function J2(e,{blockKey:t,style:o,isReverse:r}){return e`
<div class=${CM.lineContainer}>
	${e.switch(()=>{switch(o){case"solid":return g(Lp,{});case"dotted":return g(Kp,{isReverse:r});case"faded":return g(Z2,{blockKey:t,isReverse:r});default:return O(o,`unknown line style ${o}`),null}})}
</div>
`}function bM(e,{paragraph:t,paragraphStyle:o,dividerColor:r,isLock:n,readonlyMode:i,onHyperlinkOverFn:a}){let s=I(()=>{let m=r.opacity,p=we(mt.whiteDefault),f=[...we(r.color),m],[d,x,_]=ai(p,f);return{background:`rgb(${d}, ${x}, ${_})`}},[r]),c=$p.textWrapper.withMods({style:o}),l=se($p.dividerText,"divider-text");return e`
<div class=${c} style=${s}>
	${e(nt,{propsType:"paragraphData",paragraph:t,idPrefix:"divider-block",isLock:n,readonlyMode:i,onHyperlinkOverFn:a,paragraphClassName:l},$p.paragraphWrapper)}
</div>`}function eb(e,{block:t,onHyperlinkOverFn:o,readonlyMode:r,isLock:n,direction:i}){let a=i==="rtl";return e`
<div class=${$p.dividerContainer}>
	${e(J2,{style:t.style,blockKey:t.key,isReverse:!a})}
	${e(bM,{paragraph:t.paragraph,paragraphStyle:t.paragraphStyle,dividerColor:t.dividerColor,isLock:n,readonlyMode:r,onHyperlinkOverFn:o})}
	${e(J2,{style:t.style,blockKey:t.key,isReverse:a})}
</div>`}var tb=u({$:"$",dividerContent:"x576d6__divider-content",draggableBackground:"x576d6__draggable-background"});function BM(e){let t=we(e.color),o=e.opacity;return{color:`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${o})`}}function ob(e,{block:t,isLock:o,onHyperlinkOverFn:r,readonlyMode:n,direction:i}){let a=I(()=>BM(t.dividerColor),[t.dividerColor]);return e`
<div
	class=${tb.dividerContent}
	style=${a}
>
	${e.switch(()=>{switch(t.dividerType){case"line":return g(X2,{block:t,direction:i});case"line-with-text":return g(eb,{block:t,isLock:o,onHyperlinkOverFn:r,readonlyMode:n,direction:i});case"arrow":return g(U2,{});case"diamonds":return g(G2,{});case"quotes":return g(Y2,{style:t.style})}})}
	<div class=${tb.draggableBackground} draggable="true"></div>
</div>`}var rb=u({$:"$",dividerBlock:"xce5f1__divider-block",menuButton:"xce5f1__menu-button",dividerBlock_lock:"xce5f1__divider-block_lock",selectionFrame:"xce5f1__selection-frame"});var vM=u({$:"$",dndIcon:"x18434__dnd-icon"});function nb(e,{onClick:t,className:o,autotestData:r}){return e`
<div
	class=${se(vM.dndIcon,o)}
	draggable="true"
	contenteditable="false"
	data-at=${X(r)}
>
	${e(TM,{onClick:t})}
</div>`}function TM(e,{state:t,onClick:o}){return ys(e,{type:"icon",style:"ghost",size:"xSmall",state:t,icon:g(_i),onClick:o!=null?o:()=>{}})}var DM=.76;function ib(e,t,o){let r=[...we(e),t],n=we(mt.whiteDefault),i=ai(n,r),[,,a]=ff(i[0],i[1],i[2]);return a<=o?"light":"dark"}function wM({setStyle:e,background:t,lightnessLimitValue:o}){let r=new FastAverageColor,n=Ne(t.imageSrc);r.getColorAsync(n).then(i=>{i.error||e(ib(i.hexa,1,o))}),r.destroy()}function zp({background:e,lightnessLimitValue:t=DM,setStyle:o}){if(!e){o("dark");return}e.type==="color"?o(ib(e.color,e.opacity,t)):e.type==="image"&&wM({background:e,lightnessLimitValue:t,setStyle:o})}function Np(e){return e?e.type==="color"?{type:"color",color:e.color,opacity:e.opacity}:{type:"image",imageSrc:Wt(e.image)}:null}function ab(e){return e?{type:"image",imageSrc:Wt(e)}:null}function sb(e,{cardSideData:t}){let o=E(),r=I(()=>PM(t),[t]);return e`
<div
	save-ref=${o}
	onconnected=${()=>EM(o.current,r)}
>
	${e(Hm,{})}
</div>
`}function EM(e,t){zp({background:t,setStyle:r=>{let n=ct(),i=J(r,{dark:{background:n.overlayHovered,color:n.iconPlaceholder},light:{background:n.overlayModalsDefault,color:n.iconOncolorSecondary}});Rt(e,"--color",i.color),Rt(e,"--background",i.background)}})}function PM(e){switch(e.type){case"image":return ab(e.image);case"imageWithText":case"text":return Np(e.background);default:return null}}function RM({onUpload:e,accept:t,type:o}){let r=Bk();return{multiple:o==="multi",browseRef:r,accept:t,onChange:n=>{n.length&&e(o==="multi"?n:n[0])}}}function Qp(e){let t=Lk(rk());return RM({onUpload:e,accept:t,type:"single"})}function Hp(e){return e.startsWith("blob:")}var cb=u({$:"$",imageTemp:"xe820c__image-temp"});function Up(e,{image:t,isTemporary:o}){let r=M();return P(()=>{o?r.current.classList.add(cb.imageTemp):r.current.classList.remove(cb.imageTemp)},[r,o]),be(e,g(io,{image:t,fit:"cover"}),r)}var na=u({$:"$",image:"x0e062__image",imageToolbar:"x0e062__image-toolbar",divider:"x0e062__divider",imageContainer:"x0e062__image-container",overlay:"x0e062__overlay"});function IM(e,{image:t,isLoading:o}){let r=M();return ee(()=>{t.overlay&&t.overlay.color!==Xt?(r.current.style.background=t.overlay.color,r.current.style.opacity=`${t.overlay.opacity}`):(r.current.style.background="",r.current.style.opacity="")},[t.overlay,r]),e`
<div class=${na.imageContainer}>
	${e(Up,{image:t,isTemporary:o})}
	<div
		class=${na.overlay}
		save-ref=${r}
	>
	</div>
</div>
`}function MM(e,{onReplaceImage:t,onDeleteImage:o,onCropImage:r}){return e`
<div class=${na.imageToolbar}>
	${e(je,{style:"ghostInversed",structure:"icon",icon:g(Ok),onClick:t,tooltip:T("Common.Editor.ImageControls.MediaToolbar.Replace")})}
	<div class=${na.divider}></div>
	${e(je,{style:"ghostInversed",structure:"icon",icon:g(x0),onClick:r,tooltip:T("Common.Editor.CropImage.TooltipText")})}
	<div class=${na.divider}></div>
	${e(je,{style:"ghostInversed",structure:"icon",icon:g(Ak),onClick:o,tooltip:T("Common.Editor.DeleteImage.TooltipText")})}
</div>`}function lb(e,{imageData:t,readonlyMode:o,onUploadImage:r,onDeleteImage:n,onCropImage:i,onOpenFileDialog:a}){let s=Hp(t.src),c=Qp(r),l=w(()=>{c.browseRef.current(),a()},[c.browseRef,a]);function m(p){Pi(p)}return e`
<div class=${na.image} oninput=${m}>
	${e.renderIf(jl,()=>!o&&c)}
	${e(IM,{image:t,isLoading:s})}
	${e.renderIf(MM,()=>!o&&!s&&{onReplaceImage:l,onDeleteImage:n,onCropImage:i})}
</div>`}var ia=u({$:"$",content:"x817a7__content",imageWithDownload:"x817a7__image-with-download",imageWithStub:"x817a7__image-with-stub",downloadStub:"x817a7__download-stub",downloadStubText:"x817a7__download-stub-text",stubIcon:"x817a7__stub-icon"});function AM(e,{onUploadImage:t,onOpenFileDialog:o}){let r=Qp(t),n=w(()=>{r.browseRef.current(),o()},[r.browseRef,o]);function i(a){Pi(a)}return e`
<div
	class=${ia.imageWithDownload}
	oninput=${i}
>
	${e(jl,r)}
	<div
		class=${ia.downloadStub}
		onclick=${n}
	>
		${e(XC,{})}
		<span class=${ia.downloadStubText}>
			${T("Roll.Editor.FlipCardsBlock.AddImage.Placeholder")}
		</span>
	</div>
</div>`}function VM(e){return e`
<div class=${ia.imageWithStub}>
	${e(JC,{},ia.stubIcon)}
</div>
`}function Wp(e,{image:t,readonlyMode:o,onUploadImage:r,onOpenFileDialog:n,onDeleteImage:i,onCropImage:a}){return e`
<div class=${ia.content}>
	${e.switch(()=>t?g(lb,{imageData:t,readonlyMode:o,onDeleteImage:i,onUploadImage:r,onOpenFileDialog:n,onCropImage:()=>a(t)}):o?g(VM):g(AM,{onUploadImage:r,onOpenFileDialog:n}))}
</div>`}var FM=u({$:"$",imageSideContent:"x69ff6__image-side-content"});function mb(e,{sideData:t,readonlyMode:o,onUploadImage:r,onOpenFileDialog:n,onDeleteImage:i,onCropImage:a}){return e`
<div class=${FM.imageSideContent}>
 	${e(Wp,{image:t.image,readonlyMode:o,onUploadImage:r,onOpenFileDialog:n,onDeleteImage:i,onCropImage:a})}
</div>
`}var qp=class extends Mo{constructor({paragraph:t,bemInfo:o,blockBeforeType:r,idPrefix:n,placeholder:i,prompt:a,paragraphIndex:s,flipCardSideRef:c}){super({paragraph:t,bemInfo:o,blockBeforeType:r,idPrefix:n,placeholder:i,prompt:a,paragraphIndex:s}),this._flipCardSideElement=c}getFontSize(t){if(t!=="auto")return t;let o=this._flipCardSideElement.current;if(!o)return 0;let{width:r}=o.getBoundingClientRect();return r>=420?24:r>=260?20:r>=200?18:16}};var pb=u({$:"$",cardParagraphWrapper:"x09a27__card-paragraph-wrapper",flipCardParagraph:"x09a27__flip-card-paragraph","flipCardParagraph_current-side_front":"x09a27__flip-card-paragraph_current-side_front","flipCardParagraph_current-side_back":"x09a27__flip-card-paragraph_current-side_back","cardParagraphWrapper_vertical-align_top":"x09a27__card-paragraph-wrapper_vertical-align_top","cardParagraphWrapper_vertical-align_middle":"x09a27__card-paragraph-wrapper_vertical-align_middle","cardParagraphWrapper_vertical-align_bottom":"x09a27__card-paragraph-wrapper_vertical-align_bottom"});function Gp(e,{blockKey:t,cardKey:o,sideData:r,flipCardRef:n,activeSide:i,currentSide:a,isLock:s,readonlyMode:c,onHyperlinkOverFn:l}){let m=r.text,p=r.verticalTextAlign,f=I(()=>{let d=Ei(new qp({paragraph:m,placeholder:T("Roll.Editor.FlipCardsBlock.Card.TextPlaceholder"),idPrefix:"flip-card-paragraph",flipCardSideRef:n}),l,c,s),x=pb.flipCardParagraph.withMods({"current-side":a});return d.classList.add(...x.split(" ")),d},[a,n,s,l,m,c]);return e`
<div
	contenteditable=${!c&&!s}
	class=${pb.cardParagraphWrapper.withMods({"vertical-align":p})}
	data-name='flip-card-text-field'
	data-flip-cards-key=${t}
	data-card-key=${o}
	data-side=${i}
>
	${f}
</div>
`}function Yp(e){return I(()=>{let t=e.background;if(!t||t.type!=="color"||t.color===Xt)return null;let[o,r,n]=we(t.color),i=t.opacity;return`background: rgba(${o}, ${r}, ${n}, ${i})`},[e])}var gg=u({$:"$",imageWithTextSideContent:"x1ac52__image-with-text-side-content",imageWrapper:"x1ac52__image-wrapper",textWrapper:"x1ac52__text-wrapper",flipCardParagraph:"x1ac52__flip-card-paragraph"});function ub(e,{onUploadImage:t,onOpenFileDialog:o,onDeleteImage:r,onCropImage:n,...i}){let{sideData:a,readonlyMode:s}=i,c=a.image,l=Yp(a);return e`
<div class=${gg.imageWithTextSideContent}>
	<div class=${gg.imageWrapper}>
		${e(Wp,{image:c,readonlyMode:s,onUploadImage:t,onOpenFileDialog:o,onDeleteImage:r,onCropImage:n})}
	</div>
	<div class=${gg.textWrapper} style=${l}>
		${e(Gp,i)}
	</div>
</div>`}var hg=u({$:"$",textSideContent:"xb3cac__text-side-content",textSideBackgroundImage:"xb3cac__text-side-background-image",textSideBackgroundImageOverlay:"xb3cac__text-side-background-image-overlay"});function fb(e,t){let{sideData:o}=t,r=Yp(o);return e`
<div
	class=${hg.textSideContent}
	style=${r}
>
	${e.renderIf(OM,()=>o.background.type==="image"&&{background:o.background})}
	${e(Gp,t)}
</div>`}function OM(e,{background:t}){let o=I(()=>({image:t.image,isTemporary:Hp(t.image.src)}),[t.image]),r=w(()=>{let n=t==null?void 0:t.overlay;if(!n||n.color===Xt)return null;let[i,a,s]=we(n.color),c=n.opacity;return`background: rgba(${i}, ${a}, ${s}, ${c})`},[t==null?void 0:t.overlay]);return e`
<div class=${hg.textSideBackgroundImage}>
	${e(Up,o)}
	<div
		class=${hg.textSideBackgroundImageOverlay}
		style=${r()}
	/>
</div>`}var Fo=u({$:"$",flipCard:"xa3b2e__flip-card",flipCard_readonly:"xa3b2e__flip-card_readonly",cardFlipContainer:"xa3b2e__card-flip-container",flipCardSide:"xa3b2e__flip-card-side",frontSide:"xa3b2e__front-side",backSide:"xa3b2e__back-side","flipCard_active-side-back":"xa3b2e__flip-card_active-side-back",cardFlipHint:"xa3b2e__card-flip-hint",cardDndControl:"xa3b2e__card-dnd-control",flipCard_mobile:"xa3b2e__flip-card_mobile",cardSideContent:"xa3b2e__card-side-content"});function jp(e,{isLock:t,readonlyMode:o,onHyperlinkOverFn:r,cardData:n,activeSide:i,blockKey:a,showDnd:s,onUploadImage:c,onOpenFileDialog:l,onDeleteImage:m,onCropImage:p}){let f=E(),d=LM(f),x=w((_,k)=>{switch(_.type){case"image":return g(mb,{sideData:_,readonlyMode:o,onUploadImage:S=>c("content",S),onOpenFileDialog:l,onDeleteImage:()=>m("content"),onCropImage:S=>p==null?void 0:p("image",S)},Fo.cardSideContent);case"imageWithText":return g(ub,{blockKey:a,cardKey:n.key,sideData:_,flipCardRef:d,activeSide:i,isLock:t,readonlyMode:o,onHyperlinkOverFn:r,onUploadImage:S=>c("content",S),onOpenFileDialog:l,onDeleteImage:()=>m("content"),onCropImage:S=>p==null?void 0:p("imageWithText",S),currentSide:k},Fo.cardSideContent);case"text":return g(fb,{blockKey:a,cardKey:n.key,sideData:_,flipCardRef:d,activeSide:i,isLock:t,readonlyMode:o,onHyperlinkOverFn:r,currentSide:k},Fo.cardSideContent);default:throw new Error(`Unknown side data: ${_}`)}},[i,a,n,t,r,o,c,l,m,p,d]);return e`
<div
	class=${Fo.flipCard.withMods({"active-side-back":i==="back",readonly:o,mobile:fr()})}
	data-card-key=${n.key}
	save-ref=${f}
>
	<div class=${Fo.cardFlipContainer}>
		${e(db,{cardData:n.frontSide,sideComponent:x(n.frontSide,"front"),readonlyMode:o,showDnd:s},Fo.frontSide)}
		${e(db,{cardData:n.backSide,sideComponent:x(n.backSide,"back"),readonlyMode:o,showDnd:s},Fo.backSide)}
	</div>
</div>
`}function db(e,{cardData:t,sideComponent:o,readonlyMode:r,showDnd:n}){return e`
<div class=${Fo.flipCardSide}>
	${e(o)}
	${e.renderIf(nb,()=>n&&{autotestData:"flip-card-dnd-button"},{className:Fo.cardDndControl})}
	${e.renderIf(sb,()=>r&&{cardSideData:t},Fo.cardFlipHint)}
</div>
`}function LM(e){let[t]=jt(e),[o,r]=z(()=>({current:null}));return P(()=>{e.current&&r({current:e.current})},[e,t]),o}var yg=u({$:"$",flipCardsList:"xd8b34__flip-cards-list",listContainer:"xd8b34__list-container",newCardPlaceholder:"xd8b34__new-card-placeholder",newCardPlaceholder_visible:"xd8b34__new-card-placeholder_visible",newCardPlaceholder_animated:"xd8b34__new-card-placeholder_animated"}),KM=12,gb=180,$M=468,zM=599,NM=.93;var QM={inner:{defaultScreen:{gap:24,horizontalPadding:0},smallScreen:{gap:20,horizontalPadding:0}},outer:{defaultScreen:{gap:24,horizontalPadding:56},smallScreen:{gap:20,horizontalPadding:20}},"full-width":{defaultScreen:{gap:24,horizontalPadding:56},smallScreen:{gap:20,horizontalPadding:20}}};function hb(e,t){let{block:o,onContentWidthChange:r,insertionPoint:n}=t,i=M(),[a]=jt(i),[s,c]=z(()=>null),[l,m]=z(()=>null),p=I(()=>{if(!i.current||!a)return null;let _=i.current,k=Nh(_,o.key);if(!(k!=null&&k.offsetWidth))return null;let{gap:S,horizontalPadding:C}=WM(k.offsetWidth,o.cardsLayout);c({gap:S,horizontalPadding:C});let y=Z.getFlipCardsCount(o),v=Math.min(o.maxCardsInRow,y),D=Math.floor((a+S)/(gb+S)),A=Math.min(v,D);return m(A),{"grid-template-columns":`repeat(${A}, minmax(${gb}px, ${$M}px))`,"padding-inline":`${C}px`,gap:`${S}px`}},[o,i,a]),f=(n==null?void 0:n.blockKey)===o.key,d=s&&s.gap,{updateSelectionWidth:x}=UM(l,d,f,r);return e`
<div
	class=${yg.flipCardsList}
	save-ref=${i}
>
	${e.renderIf(HM,()=>!!p&&{...t,updateSelectionWidth:x,flipCardsListStyles:p,currentCardsCountInRow:l})}
</div>
`}function HM(e,{isLock:t,readonlyMode:o,onHyperlinkOverFn:r,updateSelectionWidth:n,block:i,direction:a,activeSide:s,cardRenderFn:c=jp,firstCardRef:l,onUploadImage:m,onOpenFileDialog:p,onDeleteImage:f,flipCardsListStyles:d,showPlaceholder:x,currentCardsCountInRow:_,insertionPoint:k}){let S=M(),C=i.cardsBlockMap,{visible:y,animated:v}=qM(S,!!x),D=YM(i,_,k);GM(i,S);let A=oe=>{if(D.before.includes(oe))return"start";if(D.after.includes(oe))return"end"},$=yg.newCardPlaceholder.withMods({visible:y,animated:v}),H=!o&&!t&&C.order.length!==1;return e`
<div
	class=${yg.listContainer}
	style=${d}
>
	${e.renderAll(C.order,oe=>le(oe,c,{isLock:t,direction:a,readonlyMode:o,onHyperlinkOverFn:r,cardData:C.blocks[oe],activeSide:s,blockKey:i.key,onSizeChange:n,isFirstCard:C.order[0]===oe,firstCardRef:l,shifted:A(oe),showDnd:H,onUploadImage:(ye,xe)=>{m({type:ye,cardKey:oe,sideType:s,file:xe})},onOpenFileDialog:p,onDeleteImage:ye=>{f({type:ye,cardKey:oe,sideType:s})}}))}
	<div class=${$} save-ref=${S}/>
</div>
`}function UM(e,t,o,r){return{updateSelectionWidth:w(i=>{if(!t||!e||!r||!i)return;let a=e*i+(e-1)*t,s=o?a+KM*2:a;r==null||r(s)},[e,t,r,o])}}function WM(e,t){let{defaultScreen:o,smallScreen:r}=QM[t];return e>zM?o:r}function qM(e,t){let[o,r]=z(!1),[n,i]=z(!1),[a,s]=z(!1);return P(()=>{let c=()=>{s(!1),r(!1)},l=()=>s(!0),m=e.current;return t?(r(!0),requestAnimationFrame(()=>i(!0))):(i(!1),a||r(!1),m.addEventListener("transitionend",c),m.addEventListener("transitionstart",l)),()=>{m.removeEventListener("transitionend",c),m.removeEventListener("transitionstart",l)}},[e,t,a]),{animated:n,visible:o}}function GM(e,t){var r,n;let o=(n=(r=e.designSettings)==null?void 0:r.background)==null?void 0:n.color;P(()=>{let i=a=>{let s=ct(),c=J(a,{dark:s.borderDefault,light:s.borderOncolorDefault});Rt(t.current,"--placeholder-color",c)};zp({background:Np(o?{type:"color",...o}:null),lightnessLimitValue:NM,setStyle:i})},[o,t])}function YM(e,t,o){return I(()=>{if(!t||!o||o.blockKey!==e.key)return{before:[],after:[]};let{insertBefore:r,cardKey:n}=o,i=e.cardsBlockMap.order,a=i.indexOf(n),s=a%t,c=a-s,l=a+(t-s),m=r?a:a+1,p=i.slice(c,m),f=i.slice(m,l);return{before:p,after:f}},[e,t,o])}var yb=u({$:"$",orderedListItemBlock:"xeec1c__ordered-list-item-block",orderedListItemBlock_type_default:"xeec1c__ordered-list-item-block_type_default",orderedListItemBlock_indent_0:"xeec1c__ordered-list-item-block_indent_0",orderedListItemBlock_indent_1:"xeec1c__ordered-list-item-block_indent_1",orderedListItemBlock_indent_2:"xeec1c__ordered-list-item-block_indent_2",orderedListItemBlock_type_custom:"xeec1c__ordered-list-item-block_type_custom",paragraph:"xeec1c__paragraph"});function xb(e,t){let{block:o,onHyperlinkOverFn:r,readonlyMode:n,isLock:i}=t,a=I(()=>K.create(o),[o]),s=yb.orderedListItemBlock.withMods({type:o.listViewType,indent:`${mo(o)}`});return e`
<div class=${s}>
    ${e(nt,{propsType:"paragraphData",paragraph:a,idPrefix:"ordered-list-item-text",onHyperlinkOverFn:r,readonlyMode:n,isLock:i},yb.paragraph)}
</div>
`}var _b=u({$:"$",unorderedListItemBlock:"xa6f1f__unordered-list-item-block",unorderedListItemBlock_type_default:"xa6f1f__unordered-list-item-block_type_default",unorderedListItemBlock_indent_0:"xa6f1f__unordered-list-item-block_indent_0",unorderedListItemBlock_indent_1:"xa6f1f__unordered-list-item-block_indent_1",unorderedListItemBlock_indent_2:"xa6f1f__unordered-list-item-block_indent_2",unorderedListItemBlock_type_custom:"xa6f1f__unordered-list-item-block_type_custom",paragraph:"xa6f1f__paragraph"});function Sb(e,t){let{block:o,onHyperlinkOverFn:r,readonlyMode:n,isLock:i}=t,a=I(()=>K.create(o),[o]),s=_b.unorderedListItemBlock.withMods({type:o.listViewType,indent:`${mo(o)}`});return e`
<div class=${s}>
    ${e(nt,{propsType:"paragraphData",paragraph:a,idPrefix:"list-item-text",onHyperlinkOverFn:r,readonlyMode:n,isLock:i},_b.paragraph)}
</div>
`}function Zp(e,t){let o=t.block,r=o.listType;switch(r){case"ul":return e(Sb,{...t,block:o});case"ol":return e(xb,{...t,block:o});default:throw O(r),new Error(`Unknown list type: ${r}`)}}var jM=u({$:"$",paragraphBlock:"x1fda9__paragraph-block",paragraphBlock_type_ul:"x1fda9__paragraph-block_type_ul",paragraphBlock_type_ol:"x1fda9__paragraph-block_type_ol",paragraphBlock_type_h1:"x1fda9__paragraph-block_type_h1",paragraphBlock_type_h2:"x1fda9__paragraph-block_type_h2",paragraphBlock_type_h3:"x1fda9__paragraph-block_type_h3",paragraphBlock_type_text:"x1fda9__paragraph-block_type_text",paragraphBlock_type_blockquote:"x1fda9__paragraph-block_type_blockquote",paragraphBlock_type_pullquote:"x1fda9__paragraph-block_type_pullquote"});function Xp(e,{block:t,blockBeforeType:o,blockAfterType:r,readonlyMode:n,isLock:i,onHyperlinkOverFn:a,direction:s,paragraphProps:c={}}){let l=I(()=>new Mo({paragraph:t,blockBeforeType:o,blockAfterType:r,direction:s,...c}),[r,o,s,t,c]);return e`
<div
	class=${jM.paragraphBlock.withMods({type:l.type()})}
	tabindex="-1"
>
	${Ei(l,a,n,i)}
</div>`}function kb(e,t){let o=ze(e);return{blockBeforeType:fg(o,t),blockAfterType:dg(o,t)}}function Cb(e){let t=I(()=>Ap(e),[e]);return w(o=>{let r,n=ge.toOrderedListItemBlock(o);return n&&(r={counterReset:t[n.key]}),r},[t])}function bb(e,{contentState:t,innerWidth:o=80,getBlockRendererFn:r,...n}){let i=t.blockMap,a=Cb(i);return e`
<div style="--inner-width: ${o}%; --inner-max-width: ${o}%" >
	${e.renderAll(i.order,(s,c)=>{let l=i.blocks[s],m=kb(i,c),p=a(l);return le(s,Ip,{...n,...m,contextKey:s,block:l,listItemProps:p,content:r(l.type,{...n,...m,listItemProps:p,block:l,isSelected:!1})})})}
</div>
`}var qr=u({$:"$",snippetContent:"x981f6__snippet-content",text:"x981f6__text",heading:"x981f6__heading",description:"x981f6__description",refContainer:"x981f6__ref-container",favicon:"x981f6__favicon",url:"x981f6__url",image:"x981f6__image"});function ZM(e,{description:t}){return e`
<p class=${qr.description}>
	${t}
</p>`}function XM(e,{iconSrc:t}){return e`
<img class=${qr.favicon} src=${Ne(t)}/>
`}function JM(e,{imageSrc:t}){return e`
<img class=${qr.image} src=${Ne(t)}/>
`}function Bb(e,{block:t}){return e`
<div class=${qr.snippetContent}>
	<div class=${qr.text}>
		<p class=${qr.heading}>
			${t.title}
		</p>
		${e.renderIf(ZM,()=>!!t.description&&{description:t.description})}
		<div class=${qr.refContainer}>
			${e.renderIf(XM,()=>!!t.iconSrc&&{iconSrc:t.iconSrc})}
			<p class=${qr.url}>${Qk(t.url)}</p>
		</div>
	</div>
	${e.renderIf(JM,()=>!!t.imageSrc&&{imageSrc:t.imageSrc})}
</div>`}var vb=u({$:"$",tableBlock:"x7f9b2__table-block"});var Tb=u({$:"$",tableScrollContainer:"x744d0__table-scroll-container"});function Db(e,t,o){let r={"font-size":"","caret-color":"","line-height":""},n=t==null?void 0:t.style;if(n){let i=Re.getFontSize(n);if(i&&i!=="auto"&&(r["font-size"]=W(i),r["line-height"]=o(i)),!Xh()&&z_(e)===0){let a=Re.getFontColor(n);a&&(r["caret-color"]=a)}}return r}function Jp(e){return e<=27?"1.5":e<=31?"1.35":e<=56?"1.25":"normal"}var eu=class extends Mo{getLineHeightForFontSize(t){return Jp(t)}};var aa=tt({});function wb(e){let t=I(()=>({tableRef:{current:{}},onCellFocus:()=>{},onCellBlur:()=>{},onCellMouseOver:()=>{},onCellMouseOut:()=>{},onCellKeydown:()=>{},onHyperlinkOverFn:()=>{},onTableCellTabPress:()=>{},onTableCellShiftTabPress:()=>{},onTableCellEnterPress:()=>{},onTableCellUpArrowPress:()=>{},onTableCellDownArrowPress:()=>{},onTableCellRightArrowPress:()=>{},onTableCellLeftArrowPress:()=>{},getCellElementRef:{current:()=>null}}),[]);e.setContext(aa,t)}var Gr=(e,t,o=!0)=>r=>{r.target===e.current&&(o&&r.preventDefault(),t(r))};function Eb(e,{ref:t,onTableCellDownArrowPress:o,onTableCellEnterPress:r,onTableCellLeftArrowPress:n,onTableCellRightArrowPress:i,onTableCellShiftTabPress:a,onTableCellTabPress:s,onTableCellUpArrowPress:c}){yt(t,qe.TAB,Gr(t,s),{shift:!1},!1,!1),yt(t,qe.TAB,Gr(t,a),{shift:!0},!1,!1),yt(t,qe.ENTER,Gr(t,r),{shift:!1},!1,!1),yt(t,qe.UP,Gr(t,c,!1),void 0,!1,!1),yt(t,qe.DOWN,Gr(t,o,!1),void 0,!1,!1),yt(t,qe.RIGHT,Gr(t,i,!1),void 0,!1,!1),yt(t,qe.LEFT,Gr(t,n,!1),void 0,!1,!1)}var Ms=u({$:"$",table:"xbb12b__table",tableRow:"xbb12b__table-row",tableCell:"xbb12b__table-cell","table_pin-header-column":"xbb12b__table_pin-header-column",tableCellContent:"xbb12b__table-cell-content","tableCellContent_vertical-align_top":"xbb12b__table-cell-content_vertical-align_top","tableCellContent_vertical-align_middle":"xbb12b__table-cell-content_vertical-align_middle","tableCellContent_vertical-align_bottom":"xbb12b__table-cell-content_vertical-align_bottom",cellParagraph:"xbb12b__cell-paragraph"});function Pb(e,{block:t,isLock:o,readonlyMode:r}){let{getCellElementRef:n,tableRef:i}=ae(aa),a=E({});return P(()=>{i.current&&(n.current=s=>{let c=a.current[s];return c&&c.current})},[n,i]),e`
<table
	save-ref=${i}
	contenteditable="false"
	class="${Ms.table.withMods({"pin-header-column":Q_(t)})}"
>
	${e.renderAll(t.rowsOrder,s=>le(s,eA,{block:t,rowKey:s,readonlyMode:r,isLock:o,cellsRefsMap:a}))}
</table>`}function eA(e,{block:t,rowKey:o,readonlyMode:r,isLock:n,cellsRefsMap:i}){return e`
<tr
	contenteditable="false"
	class=${Ms.tableRow}
	data-row-key=${o}
>
	${e.renderAll(t.colsOrder,a=>le(a,tA,{rowKey:o,block:t,colKey:a,readonlyMode:r,isLock:n,cellsRefsMap:i}))}
</tr>`}function tA(e,{rowKey:t,block:o,colKey:r,readonlyMode:n,isLock:i,cellsRefsMap:a}){let s=M(),c=o.rowsMap[t].colsMap[r],l=re(c.content);if(!l)throw new Error;P(()=>{a.current[c.key]=s},[c.key,a,s]);let{onCellBlur:m,onCellFocus:p,onCellKeydown:f,onCellMouseOut:d,onCellMouseOver:x,onHyperlinkOverFn:_,onTableCellTabPress:k,onTableCellShiftTabPress:S,onTableCellEnterPress:C,onTableCellUpArrowPress:y,onTableCellDownArrowPress:v,onTableCellRightArrowPress:D,onTableCellLeftArrowPress:A}=ae(aa),$=()=>p(c.key),H=()=>m(c.key),oe=()=>x({cellKey:c.key,rowKey:t,colKey:r}),ye=()=>d({cellKey:c.key,rowKey:t,colKey:r});Eb(e,{ref:s,onTableCellTabPress:k,onTableCellShiftTabPress:S,onTableCellEnterPress:C,onTableCellUpArrowPress:y,onTableCellDownArrowPress:v,onTableCellRightArrowPress:D,onTableCellLeftArrowPress:A});let xe=I(()=>oA(c.meta),[c.meta]),Tt=I(()=>Db(B(re(c.content)),N_(c),Jp),[c]),jr=Ms.tableCellContent.withMods({"vertical-align":c.verticalTextAlign}),pa=I(()=>new eu({paragraph:l,idPrefix:"divider-block"}),[l]);return e`
<td
	save-ref=${s}
	style=${xe}
	data-table-key=${o.key}
	data-cell-key=${c.key}
	data-row-key=${t}
	data-col-key=${r}
	contenteditable=${!n&&!i}
	class=${Ms.tableCell}
	onmouseover=${oe}
	onmouseout=${ye}
	onfocus=${$}
	onblur=${H}
	onkeydown=${f}
>
	${e(nt,{propsType:"wrappedParagraph",wrappedParagraph:pa,isLock:i,readonlyMode:n,paragraphStyles:Tt,onHyperlinkOverFn:_,paragraphClassName:`${Ms.cellParagraph}`,wrapperClassName:jr})}
</td>`}function oA(e){let t="",o="",r=1;if(e.forEach(n=>{switch(n.name){case"backgroundColor":o=n.color;break;case"backgroundOpacity":r=n.opacity;break;case"charactersMeta":break;default:throw O(n),new Error(`unknown meta ${n}`)}}),o){let n=we(mt.whiteDefault),i=[...we(o),r],[a,s,c]=ai(n,i);t+=`background-color: rgb(${a}, ${s}, ${c});`}return t}var rA=u({$:"$",tableShadowContainer:"x12c9c__table-shadow-container",tableShadowContainer_dir_ltr:"x12c9c__table-shadow-container_dir_ltr",tableShadowContainer_dir_rtl:"x12c9c__table-shadow-container_dir_rtl","tableShadowContainer_left-shadow":"x12c9c__table-shadow-container_left-shadow","tableShadowContainer_right-shadow":"x12c9c__table-shadow-container_right-shadow"});function Rb(e,{direction:t,tableRef:o,tableScrollContainerRef:r}){let[n,i]=z(!1),[a,s]=z(!1),c=w(()=>{if(!r.current)return;let l=r.current,m=t==="rtl"?Math.abs(Math.ceil(l.scrollLeft)):Math.ceil(l.scrollLeft),p=Math.ceil(l.scrollWidth-l.clientWidth);i(m>0),s(m<p)},[t,r]);return Ze({target:o,onResize:c}),Ze({target:r,onResize:c}),G(r,"scroll",c),e`
<div class=${rA.tableShadowContainer.withMods({dir:t,"left-shadow":n,"right-shadow":a})}></div>`}function Ib(){let e=B(getComputedStyle(document.body));return{top:parseFloat(e.getPropertyValue("--top-bar-height"))||0,bottom:window.innerHeight}}function Mb(e,{block:t}){let o=t,{src:r,fileName:n}=o;return be(e,g(z2,{...o,isPlayer:!0,onDownload:()=>{let i=document.createElement("a");i.setAttribute("href",Ne(B(r))),i.setAttribute("download",n),i.click()}}))}function Ab(e){let t=[];for(let o of e)if(o.nodeType===cc.TEXT){if(o.textContent){let r=document.createElement("span");r.textContent=o.textContent,t.push(r)}}else o.nodeType===cc.ELEMENT&&(o.childNodes.length===1&&o.childNodes[0].nodeType===cc.TEXT?t.push(o):t.push(...Ab(o.childNodes)));return t}function Vb(e,t){hljs.configure({classPrefix:`${xg}-`});let o=hljs.highlight(e,{language:t}),r=document.createElement("div");r.innerHTML=o.value;let n=Ab(r.childNodes),[i]=n.slice(-1);if(!i)return po.ZERO_WIDTH_SPACE;i.innerHTML.endsWith(`
`)&&(i.innerHTML+=po.ZERO_WIDTH_SPACE);let a=document.createElement("div");return a.append(...n),a.innerHTML}var sa=u({$:"$",codeBlockView:"x8f193__code-block-view",codeTextWrapper:"x8f193__code-text-wrapper",codeBlockControls:"x8f193__code-block-controls",languageLabel:"x8f193__language-label",copyButton:"x8f193__copy-button","codeTextWrapper_overflow-left":"x8f193__code-text-wrapper_overflow-left","codeTextWrapper_overflow-right":"x8f193__code-text-wrapper_overflow-right",codeTextWrapper_rtl:"x8f193__code-text-wrapper_rtl",codeText:"x8f193__code-text",codeText_empty:"x8f193__code-text_empty"}),xg="code-text";function nA(e,{textToCopy:t}){let o=()=>{Kk(t),wy(T("Roll.Common.CodeBlock.Copied"))};return je(e,{style:"linkSecondary",structure:"text",text:T("Roll.Common.CodeBlock.CopyCode"),onClick:o,size:"xSmall"})}function iA(e,{block:t}){return e`
<div class=${sa.codeBlockControls}>
	${e(nA,{textToCopy:Oe.getCharactersText(t.paragraph)},sa.copyButton)}
	<div class=${sa.languageLabel}>${uS(t.language)}</div>
</div>`}function aA(e,t){let[o,r]=z(!1),[n,i]=z(!1),a=Qr(e),s=w(()=>{let c=t==="rtl"?Math.abs(Math.ceil(e.current.scrollLeft)):Math.ceil(e.current.scrollLeft),l=Math.ceil(e.current.scrollWidth-e.current.clientWidth),m=c>0,p=c<l;o!==m&&r(m),n!==p&&i(p)},[t,e,o,n]);return ZC(a,s),Ze({target:e,onResize:s}),{"overflow-left":o,"overflow-right":n}}function sA(e,{block:t,readonlyMode:o,isLock:r}){let n=!r&&!o,i=o?null:T("Roll.Common.CodeBlock.Placeholder"),a=se(sa.codeText.withMods({empty:K.isEmptyParagraph(t.paragraph)}),xg),s=I(()=>Vb(Oe.getCharactersText(t.paragraph),t.language),[t.language,t.paragraph]),c=t.fontSize==="auto"?{lineHeight:"auto"}:{fontSize:W(t.fontSize),lineHeight:ql(t.fontSize)};return e`
<pre
    class=${a}
    data-key=${t.paragraph.key}
    contenteditable=${n}
	data-placeholder=${i}
	style=${c}
>${{html:s}}</pre>`}function cA(e,{block:t,readonlyMode:o,isLock:r,direction:n}){let i=M(),a=!o&&!r,s=aA(i,n);return e`
<div
	save-ref=${i}
	class=${sa.codeTextWrapper.withMods({rtl:n==="rtl",...s})}
	contenteditable="${a}"
>
	${e(sA,{block:t,readonlyMode:o,isLock:r})}
</div>`}function tu(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n}){let i=t;return e`
<div class=${sa.codeBlockView} dir="ltr">
	${e(cA,{block:i,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,direction:"ltr"})}
	${e(iA,{block:i})}
</div>`}var Fb=u({$:"$",imageBlockWrapper:"x84f51__image-block-wrapper",imageBlockWrapper_zoomable:"x84f51__image-block-wrapper_zoomable",imageBlockWrapper_clickable:"x84f51__image-block-wrapper_clickable",imageBlockWrapper_lock:"x84f51__image-block-wrapper_lock",imageBlockPlaceholder:"x84f51__image-block-placeholder"});function Ob(e,{imageBlock:t,isDraggable:o=!1,preventCollaging:r=!1,isLock:n,onClick:i,imageContentBinding:a,isPlayer:s}){let c=ht(t).width,m=ht(t).height/c*100,p=eo.isEnabled(t.link),f=to.isEnabled(t.zoom),d=r?W(c):null,x=a!=null?a:g(Q2,{imageBlock:t,className:"collaged-image",onClick:i,isPlayer:s});return e`
<div
	draggable=${o}
	class=${Fb.imageBlockWrapper.withMods({lock:n,zoomable:s&&f,clickable:s&&p})}
	style=${{"max-width":d}}
>
	${e(x)}
	<div class=${Fb.imageBlockPlaceholder} style=${{"padding-bottom":`${m}%`}}></div>
</div>`}var _g=u({$:"$",captionWrapper_lock:"x15c10__caption-wrapper_lock",captionWrapper:"x15c10__caption-wrapper",paragraphWrapper:"x15c10__paragraph-wrapper",imageText:"x15c10__image-text"});function Lb(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,isSelected:i}){let a=se(_g.imageText,"image-text"),s=Ge.getText(t.caption),c=K.create({key:t.key,characters:s,textAlign:"center"});return e`
<figcaption
	class=${_g.captionWrapper.withMods({lock:o})}
>
	${e(nt,{propsType:"paragraphData",paragraph:c,idPrefix:"image-block",isLock:o,readonlyMode:r,onHyperlinkOverFn:n,placeholder:i?T("Roll.Editor.MediaCaptionDefaultText"):"",paragraphClassName:a},_g.paragraphWrapper)}
</figcaption>`}var lA=u({$:"$",imageBlock:"xd0f6a__image-block",imageBlock_collaged:"xd0f6a__image-block_collaged",imageBlock_lock:"xd0f6a__image-block_lock",imageBlock_first:"xd0f6a__image-block_first",imageBlock_last:"xd0f6a__image-block_last",imageControls:"xd0f6a__image-controls",imageDndIcon:"xd0f6a__image-dnd-icon",imageBlock_blob:"xd0f6a__image-block_blob"});function Kb(e,{block:t,readonlyMode:o,isLock:r,onHyperlinkOverFn:n,grow:i,imageContentBinding:a,imageControlsBinding:s,onClick:c,isFirst:l=!1,isLast:m=!1,isDraggable:p=!1,isSelected:f=!1,preventCollaging:d=l&&m,isPlayer:x=!1}){let _=t,k=t,S=Ge.isEnabled(_.caption),C=lA.imageBlock.withMods({lock:!1,blob:k.isBlob,collaged:!!k.parentCollageKey,first:l,last:m}),y=i?{flex:`${i} 0 0`}:null;return e`
<figure
	data-collaged-key=${t.key}
	data-parent-collage-key=${k.parentCollageKey}
	class=${C}
	style="${y}"
	contenteditable="false"
	tabindex="-1"
>
	${e(Ob,{imageBlock:_,imageContentBinding:a,isDraggable:p,isLock:r,preventCollaging:d,onClick:c,isPlayer:x})}
	${e.renderIf(Lb,()=>S&&{block:_,isLock:r,readonlyMode:o,onHyperlinkOverFn:n,isSelected:f})}
	${e(s)}
</figure>
`}function mA(e,t="_blank"){let o=document.createElement("a");o.setAttribute("target",t),o.setAttribute("href",e),o.click(),o.remove()}function $b(e,t){let o=t.block,r=to.isEnabled(o.zoom),n=eo.isEnabled(o.link),i=Nm(e,{style:"light"}),a=()=>{let c=eo.getUrl(o.link);c&&mA(c,"_blank")},s=()=>{let c=Wt(o);i(Ne(c),o)};return be(e,g(Kb,{...t,onClick:()=>{n?a():r&&s()},isPlayer:!0}))}var zb=N2,pA=740;function ou(e,{renderImageFn:t=$b,block:o,isSelected:r,...n}){let i=M(),a=o,s=q.isOneImageCollage(a),c=s,l=s?a.images[0].key:null,{imagesGrows:m}=H2(a.images),p=uA(a,c,i),f=!0;return e`
<div
	save-ref=${i}
	data-key=${a.key}
	class=${zb.collageBlockWrapper.withMods({"single-image":c})}>
	<figure
		class=${zb.collageBlock.withMods({lock:!1,addingAnimated:!1,"dnd-mode":!1,"one-image":s,"read-only":f,selected:r})}
		style=${p}
		data-key=${a.key}
		data-collaged-key=${l}
		data-block-type="${h.COLLAGE}"
		draggable="false"
		contenteditable="false"
		tabindex="-1"
	>
		${e.renderAll(a.images,(d,x)=>le(d.key,t,{...n,isSelected:r,block:d,grow:m[x],isFirst:!x,isLast:x===a.images.length-1,readonlyMode:f,isLock:!1,preventCollaging:c},"media-block_collaged"))}
	</figure>
</div>`}function uA(e,t,o){let[r]=jt(o);if(q.isOneImageCollage(e)&&(document.body.clientWidth<=pA||e.alignment==="float-left"||t)){let n=e.images[0],i=ht(n).width;return{[i<r?"min-width":"width"]:W(i)}}return null}var Nb=u({$:"$",button:"x6aaa6__button",paragraphWrapper:"x6aaa6__paragraph-wrapper"});function Qb(e,{block:t,isLock:o,onHyperlinkOverFn:r,onClick:n=()=>{},readonlyMode:i}){let a=I(()=>g(nt,{propsType:"paragraphData",paragraph:t.paragraph,idPrefix:"continue-block",isLock:o,readonlyMode:i,onHyperlinkOverFn:r,paragraphClassName:"continue-text",disableStyles:!0},Nb.paragraphWrapper),[t.paragraph,o,r,i]);return be(e,g(qt,{style:"primary",size:"large",content:a,onClick:n,isEditable:!i&&!o,backgroundColor:t.continueColor,focusBlockKey:t.key},Nb.button))}var Hb=u({$:"$",continueWrapper:"x9dc22__continue-wrapper",continueContent:"x9dc22__continue-content"});function Ub(e,{block:t,isLock:o,onHyperlinkOverFn:r,readonlyMode:n,onClick:i}){let a=t;return e`
<div class=${Hb.continueWrapper}>
	${e(Qb,{block:a,isLock:o,onHyperlinkOverFn:r,readonlyMode:n,onClick:i},{className:Hb.continueContent})}
</div>`}function Wb(e){let t=e.current;return ik(t,nk)}function fA(e){let t=Wb(e),o=t&&t.parentElement;return o&&o.nextElementSibling}function qb(e,{block:t,continueProps:o,...r}){let n=M(),i=w(()=>{if(o){let a=fA(n);o.onContinueClick(t.key);let s=Wb(n),c=s?s.getBoundingClientRect().height:0;a&&o.scrollToContinueGroupFn(a,c)}},[t.key,o,n]);return e`
<div
	data-key=${t.key}
	save-ref=${n}
	contenteditable="false"
	tabindex="-1"
>
	${e(Ub,{...r,block:t,onClick:i,readonlyMode:!0})}
</div>`}var Gb={create({title:e="",subtitle:t="",kicker:o="",designSettings:r={textColor:ct().textDefault,coverInfoState:null}}){return{title:e,subtitle:t,kicker:o,designSettings:r}}};var Yb={create(e){return{key:e.key,header:e.header,contentState:e.contentState,index:e.index||0,progress:e.progress||0,continueButtonKey:"",navigationData:{hiddenHeaders:e.hiddenHeaders||[]}}}};function dA(e,t){let o=t+1;return e[o]||null}var Ce={sections(e){return[...e.pages]},nextSection(e){return dA(e.pages,e.selectedSectionIndex)},getSectionByKey(e,t){return e.pages.find(o=>o.key===t)||null},selectedSection(e){let t=e.selectedSectionIndex;return e.pages[t]},getContinueButtons(e){let t=this.selectedSection(e),o=[];return ve.forEach(t.contentState.blockMap,r=>{let n=Be.toContinueBlock(r);n&&o.push(n)}),o},getLastContinueButtonKey(e){let t=this.getContinueButtons(e);return t.length?t[t.length-1].key:null},create(e,t=!1){return{pages:e,selectedSectionIndex:0,navigationPanelShowed:t}}};var gA=rb;function ru(e,{block:t,onHyperlinkOverFn:o,direction:r}){let n=t;return e`
<figure
	data-key=${n.key}
	class=${gA.dividerBlock.withMods({lock:!1})}
	contenteditable="false"
>
	${e(ob,{block:n,readonlyMode:!0,isLock:!1,onHyperlinkOverFn:o,direction:r})}
</figure>
`}var hA=u({$:"$",embedIframe:"x52083__embed-iframe",embedIframe_rounded:"x52083__embed-iframe_rounded",embedIframe_active:"x52083__embed-iframe_active"});function jb(e,{block:t,active:o,onContentResize:r}){let n=w(i=>{let a=i.target;try{let s=B(a.contentWindow),c=new ResizeObserver(()=>{c.unobserve(s.document.body),r(s.document.body.clientHeight/s.document.body.clientWidth)});c.observe(s.document.body)}catch{}},[r]);return e`
<iframe
	onload=${n}
	src=${t.src}
	allowfullscreen
	loading="lazy"
	class=${hA.embedIframe.withMods({rounded:t.alignment!=="full",active:o})}
>
</iframe>
`}var Sg=u({$:"$",embedContainer:"x94664__embed-container",embedContent:"x94664__embed-content",embedBlockPlaceholder:"x94664__embed-block-placeholder"});function yA(e,t){return e.width?{"padding-bottom":`${(t||e.height/e.width)*100}%`}:{width:"100%",height:W(e.height)}}function Zb(e,{block:t,isDraggable:o=!1,isActive:r}){let[n,i]=z(0),a=yA(t,n);return e`
<div class=${Sg.embedContainer} draggable=${o}>
	${e(jb,{block:t,active:r,onContentResize:i},Sg.embedContent)}
	<div class=${Sg.embedBlockPlaceholder} style=${a}></div>
</div>`}var kg=u({$:"$",paragraphWrapper:"x0c2ca__paragraph-wrapper",embedText:"x0c2ca__embed-text",captionWrapper:"x0c2ca__caption-wrapper"});function Xb(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,isSelected:i}){let a=M(),s=Ge.getText(t.caption),c=se(kg.embedText,"embed-text"),l=K.create({key:t.key,characters:s,textAlign:"center"});return P(()=>{a.current&&(a.current.style.display=s.length?"block":"")},[s.length,a]),e`
<div
	save-ref=${a}
	class=${kg.captionWrapper}
>
	${e(nt,{propsType:"paragraphData",paragraph:l,idPrefix:"embed-block",isLock:o,readonlyMode:r,onHyperlinkOverFn:n,placeholder:i?T("Roll.Editor.MediaCaptionDefaultText"):"",paragraphClassName:c},kg.paragraphWrapper)}
</div>`}var Jb=u({$:"$",embedBlockView:"xfd90b__embed-block-view",embedContainer:"xfd90b__embed-container",embedBlockView_active:"xfd90b__embed-block-view_active"});function nu(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,isSelected:i,isActive:a=!0,isDraggable:s=!1}){let c=t,l=Ge.isEnabled(c.caption);return e`
<div
	class=${Jb.embedBlockView.withMods({active:a})}
>
	${e(Zb,{block:c,isDraggable:s,isActive:a},Jb.embedContainer)}
	${e.renderIf(Xb,()=>l&&{block:c,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,isSelected:i})}
</div>`}var xA=u({$:"$",playerFlipCard:"x936d4__player-flip-card"});function eB(e,t){let o=E(),[r,n]=z(t.activeSide),i=w(a=>{let s=a.target&&_A(a.target);!a.defaultPrevented&&!s&&n(r==="front"?"back":"front")},[r]);return e`
<div
	class=${xA.playerFlipCard}
	save-ref=${o}
	onclick=${i}
>
	${e(jp,{...t,activeSide:r})}
</div>
`}function _A(e){return e.tagName===Go.A}var SA=u({$:"$",flipCardsBlock:"xb8526__flip-cards-block",blockMenuButton:"xb8526__block-menu-button",flipCardsBlock_align_inner:"xb8526__flip-cards-block_align_inner",flipCardsBlock_align_outer:"xb8526__flip-cards-block_align_outer","flipCardsBlock_align_full-width":"xb8526__flip-cards-block_align_full-width"});function tB(e,{block:t,isLock:o,onHyperlinkOverFn:r,direction:n}){let i=t,a=SA.flipCardsBlock.withMods({align:i.cardsLayout});return e`
<figure
	class=${a}
	contenteditable="false"
	draggable="false"
>
	${e(hb,{direction:n,block:i,isLock:o,readonlyMode:!0,onHyperlinkOverFn:r,activeSide:"front",cardRenderFn:eB,onUploadImage:()=>{},onOpenFileDialog:()=>{},onDeleteImage:()=>{}})}
</figure>
`}var iu=u({$:"$",layoutBlock:"xa812c__layout-block",colContainer:"xa812c__col-container","colContainer_vertical-align_top":"xa812c__col-container_vertical-align_top","colContainer_vertical-align_middle":"xa812c__col-container_vertical-align_middle","colContainer_vertical-align_bottom":"xa812c__col-container_vertical-align_bottom",col:"xa812c__col","layoutBlock_type_layout-column-1":"xa812c__layout-block_type_layout-column-1","layoutBlock_type_layout-column-2":"xa812c__layout-block_type_layout-column-2","layoutBlock_type_layout-column-3":"xa812c__layout-block_type_layout-column-3","layoutBlock_type_layout-column-4":"xa812c__layout-block_type_layout-column-4"});function kA(e,{countCol:t,columnData:o,colKey:r,controlBinding:n,richTextRenderFn:i,getBlockRendererFn:a,...s}){let{width:c,...l}=o,m=s.block;return e`
<div
	class="${iu.colContainer.withMods({"vertical-align":m.verticalBlockAlign})}"
	style="--col-fr: ${c};"
>
	<div
		class="${iu.col} ${iu.col}-${c}"
		contenteditable=${!s.readonlyMode}
		data-context-col-key=${r}
	>
		${e(i,{...s,defaultTopPadding:null,contentState:l,innerWidth:100,getBlockRendererFn:a})}
	</div>
	${e(n)}
</div>`}function oB(e,{controlsBindings:t={},...o}){let r=o.block,n={type:Q.getColumnType(r)},i=I(()=>{let a=mg(r,o.blockBeforeType,o.defaultTopPadding),s=pg(r,o.blockAfterType);return{"min-height":`calc(${o_(r)} - ${a}px - ${s}px)`}},[r,o.blockAfterType,o.blockBeforeType,o.defaultTopPadding]);return e`
<div
	class=${iu.layoutBlock.withMods(n)}
	style=${i}
	data-key=${r.key}
>
	${e.renderAll(r.colsOrder,a=>{let s=r.colsMap[a];return le(a,kA,{...o,countCol:r.colsOrder.length,columnData:s,colKey:a,controlBinding:t[a]})})}
</div>`}var ca=u({$:"$",noteBlockView:"x3cdf3__note-block-view",dndLayer:"x3cdf3__dnd-layer",noteTextWrapper:"x3cdf3__note-text-wrapper","noteTextWrapper_with-icon":"x3cdf3__note-text-wrapper_with-icon",paragraph:"x3cdf3__paragraph",noteText:"x3cdf3__note-text",iconWrapper:"x3cdf3__icon-wrapper","iconWrapper_with-icon":"x3cdf3__icon-wrapper_with-icon"});function CA(e){switch(e){case"correct":return g(m0);case"incorrect":return g(p0);case"info":return g(a0);case"minus":return g(s0);case"plus":return g(c0);case"question":return g(l0);case"warning":return g(u0);case"bulb":return g(i0);case"withoutIcon":return null;default:O(e,`Unknown note type: ${e}`)}}function bA(e,{iconBinding:t,iconColor:o}){return e`
<div
	style=${{color:o.color,opacity:o.opacity}}
>
	${e(t)}
</div>`}function BA(e,{backgroundColor:t,draggable:o}){return e`
<div
	draggable=${o}
	class=${ca.dndLayer}
	style=${{background:t.color,opacity:t.opacity}}
></div>`}function au(e,{block:t,isLock:o,onHyperlinkOverFn:r,readonlyMode:n}){var m;let i=t,a=!n&&!o,s=CA(i.noteType),c=I(()=>K.create({key:i.key,characters:i.characters}),[i.characters,i.key]),l=se(ca.noteText,"note-text");return e`
<div class=${ca.noteBlockView}>
	${e(BA,{backgroundColor:(m=i.customBackgroundColor)!=null?m:Pa.getBackgroundColorData(i.noteType),draggable:a})}
	<div class=${ca.iconWrapper.withMods({"with-icon":!!s})}>
		${e.renderIf(bA,()=>{var p;return!!s&&{iconBinding:s,iconColor:(p=i.customIconColor)!=null?p:Pa.getIconColorData(i.noteType)}})}
	</div>
	<div
		class=${ca.noteTextWrapper.withMods({"with-icon":!!s})}
		contenteditable="false"
	>
		${e(nt,{propsType:"paragraphData",paragraph:c,idPrefix:"note-text",onHyperlinkOverFn:r,readonlyMode:n,isLock:o,paragraphClassName:l,placeholder:T("Roll.Note.Placeholder")},ca.paragraph)}
	</div>
</div>`}var vA=u({$:"$",snippetBlock:"xc9172__snippet-block"});function su(e,{block:t}){let o=t;return e`
<figure
	data-key=${t.key}
	class=${vA.snippetBlock}
	contenteditable="false"
>
	<a href="${o.url}" target="_blank">
		${e(Bb,{block:o})}
	</a>
</figure>
`}function rB(e,{src:t,posterSrc:o}){function r(i){Pi(i)}let n=o?t:`${t}#t=0.001`;return e`
<video
	src=${Ne(n)}
	poster=${o&&Ne(o)}
	preload="metadata"
	controls
	controlsList="nodownload"
	oninput=${r}
></video>`}var Cg=u({$:"$",videoContainer:"xcc6b1__video-container",video:"xcc6b1__video",videoPlaceholder:"xcc6b1__video-placeholder"});function nB(e,{content:t,width:o,height:r,isDraggable:n=!1}){let i=o>=r?r/o*100:100;return e`
<div
	draggable=${n}
	class=${Cg.videoContainer}
>
	${e(t,Cg.video)}
	<div class=${Cg.videoPlaceholder} style=${{"padding-bottom":`${i}%`}}></div>
</div>`}var bg=u({$:"$",paragraphWrapper:"x49174__paragraph-wrapper",videoText:"x49174__video-text",captionWrapper:"x49174__caption-wrapper"});function iB(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,isSelected:i}){let a=M(),s=Ge.getText(t.caption),c=K.create({key:t.key,characters:s,textAlign:"center"});P(()=>{a.current&&(a.current.style.display=s.length?"block":"")},[s.length,a]);let l=se(bg.videoText,"video-text");return e`
<div
	save-ref=${a}
	class=${bg.captionWrapper}
>
	${e(nt,{propsType:"paragraphData",paragraph:c,idPrefix:"video-block",isLock:o,readonlyMode:r,onHyperlinkOverFn:n,placeholder:i?T("Roll.Editor.MediaCaptionDefaultText"):"",paragraphClassName:l},bg.paragraphWrapper)}
</div>`}var aB=u({$:"$",videoBlockView:"x8aecf__video-block-view",videoContainer:"x8aecf__video-container",videoBlockView_loading:"x8aecf__video-block-view_loading",videoBlockView_active:"x8aecf__video-block-view_active"});function cu(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,content:i,isSelected:a,isActive:s=!0,isLoading:c=!1,isDraggable:l=!1}){let m=t,p=Ge.isEnabled(m.caption);return e`
<div
	class=${aB.videoBlockView.withMods({active:s,loading:c})}
>
	${e(nB,{content:i||g(rB,{src:m.src,posterSrc:m.posterSrc}),width:m.width,height:m.height,isDraggable:l},aB.videoContainer)}
	${e.renderIf(iB,()=>p&&{block:m,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,isSelected:a})}
</div>`}function sB(e,t){let o=w((r,n)=>{switch(r){case Jt.DIVIDER:return g(ru,n);case Jt.EMBED:return g(nu,n);case Jt.NOTE:return g(au,n);case Jt.VIDEO:return g(cu,n);case Jt.COLLAGE:return g(ou,n);case Jt.PARAGRAPH:return g(Xp,n);case Jt.LIST_ITEM:return g(Zp,n);case Jt.SNIPPET:return g(su,n);case Jt.CODE:return g(tu,n);default:throw Error(`Unsupported layout block ${r}`)}},[]);return be(e,g(oB,{...t,getBlockRendererFn:o,richTextRenderFn:bb,readonlyMode:!0}))}var cB="continue-block-group",TA=`${cB}_hidden`,lu=class{constructor(t,o){this.continueButtonKey=t,this.blockMap=Ve(o,r=>r.key)}},mu=class extends Fp{constructor({state:t,continueKey:o,direction:r=ho(),defaultTopPadding:n}){super({blockName:"player-rich-text-editor",blockMap:t.blockMap,direction:r,defaultTopPadding:n,autotestData:"player-rich-text-editor"}),this._state=t,this._continueKey=o,this._passedContinueButtonKeys=[],this._invalidatePassedContinueButtonKeys()}updateState(t,o){this._state===t&&this._continueKey===o||(this._state=t,this._continueKey=o,this.updateBlockMap(this._state.blockMap),this._invalidatePassedContinueButtonKeys(),this._sheduleRender())}_invalidatePassedContinueButtonKeys(){if(!this._continueKey)return;let t=[],o=this._getBlockMap();for(let r of o.order)if(Be.toContinueBlock(o.blocks[r])&&t.push(r),r===this._continueKey)break;this._passedContinueButtonKeys=t}isHidden(t){let o=Be.toContinueBlock(t);return o?this._passedContinueButtonKeys.includes(o.key):!1}_getContinueGroupId(t){return t.blockMap.order.reduce((o,r)=>`${o}-${r}`,"")}_getContinueGroups(){let t=this._getBlockMap(),o=[],r=[];if(ve.forEach(t,n=>{r.push(n);let i=Be.toContinueBlock(n);if(i){let a=new lu(i.key,r);o.push(a),r=[]}}),r.length){let n=new lu("none",r);o.push(n)}return o}_getVisibleBlocks(){return ze(this._getBlockMap()).filter(t=>!this.isHidden(t))}_renderContinueGroups(){this._resetRenderBlockIndex();let t=this._passedContinueButtonKeys.indexOf(this._continueKey);return this._getContinueGroups().map((o,r)=>{let n=super._renderBlocks(o.blockMap),i=Pt(this._getGroupRelatedData(),this._getContinueGroupId(o)),a=r>t+1,s=se(cB,a?TA:null);return i`<div class=${s}>${n}</div>`})}_renderContent(){return this._renderContinueGroups()}};var Bg=u({$:"$",quizBlock:"xad480__quiz-block",quizPlayer:"xad480__quiz-player",infoMessagesLayout:"xad480__info-messages-layout"}),DA={title:"",previewMode:!0,proctoringInProgress:!1,subscriptionProduct:null,watermarkUrl:"",showWatermark:!1};function lB(e){let t={sessionState:e.sessionState,attempts:e.attempts,currentSlide:e.currentSlide,typeInQuestionsState:e.typeInQuestionsState,choicesQuestionsState:e.choicesQuestionsState,sequenceQuestionsState:e.sequenceQuestionsState,matchingQuestionsState:e.matchingQuestionsState,questionsViewOrder:e.questionsViewOrder,choicesViewOrderMap:e.choicesViewOrderMap,timeSpent:e.timeSpent,timerStartTime:e.timerStartTime,timerStopTime:e.timerStopTime,bestAttempt:e.bestAttempt};return op(t)}function mB(e,t){let o=E(),r=t.block,n=B(t.quizProps),i=n.quizState,a=r.longreadQuizId,s=n.setQuizApi,[c,l]=z(()=>lB(i));P(()=>{l(p=>{let f=lB(i);return Object.assign(p,f)})},[i]);let m=w(p=>{let f=r.settings.main.isGraded;s({quizBlockKey:r.key,quizId:a,isGraded:f,api:p})},[r.settings.main.isGraded,r.key,a,s]);return e.setContext(Zi,o),e`
	<div
		class=${Bg.quizBlock}
		data-key=${r.key}
	>
		${e(c2,{...DA,quiz:r.state,settings:r.settings.main,direction:t.direction,persistedState:c,initApi:m,insertType:"builtIn",scrollableContainerRef:n.scrollableContainerRef},Bg.quizPlayer)}
		<div save-ref=${o} class=${Bg.infoMessagesLayout}></div>
	</div>`}var wA=Tb;function pB(e,{tableScrollContainerRef:t,block:o,readonlyMode:r,isLock:n,direction:i}){return e`
<div
	save-ref=${t}
	class="${wA.tableScrollContainer}"
	contenteditable="false"
>
	${e(Pb,{block:o,direction:i,isLock:n,readonlyMode:r})}
</div>`}var EA=vb;function uB(e,t){return wb(e),e`
<div>
	${e(PA,t)}
</div>`}function PA(e,{block:t,direction:o,isLock:r,readonlyMode:n}){let i=t,a=E(),{tableRef:s}=ae(aa);return e`
<figure
	class=${EA.tableBlock}
	contenteditable="false"
	draggable="false"
	data-key=${t.key}
	tabindex="-1"
>
	${e(pB,{block:i,tableScrollContainerRef:a,direction:o,isLock:r,readonlyMode:n})}
	${e(Rb,{direction:o,tableRef:s,tableScrollContainerRef:a})}
</figure>`}function fB({getState:e,updateStateFn:t,setQuizApi:o,scrollableContainerRef:r,scrollToContinueGroupFn:n,headerPosition:i="cover"}){let a=Ce.selectedSection(e()),s=a.contentState,c=a.continueButtonKey,l=g2(a.header,i),m=new mu({state:s,continueKey:c,direction:ho(),defaultTopPadding:l});return m.registerRenderer(h.PARAGRAPH,p=>m.bindingBlockRenderer(Xp,p,h.PARAGRAPH)),m.registerRenderer(h.COLLAGE,p=>m.bindingBlockRenderer(ou,p,h.COLLAGE)),m.registerRenderer(h.EMBED,p=>m.bindingBlockRenderer(nu,p,h.EMBED)),m.registerRenderer(h.QUIZ,p=>{let f=B(RA(e(),p.block.key));return m.bindingBlockRenderer(mB,{...p,quizProps:{quizState:f,setQuizApi:o,scrollableContainerRef:r}},h.QUIZ)}),m.registerRenderer(h.ATTACHMENT,p=>m.bindingBlockRenderer(Mb,p,h.ATTACHMENT)),m.registerRenderer(h.NOTE,p=>m.bindingBlockRenderer(au,p,h.NOTE)),m.registerRenderer(h.TABLE,p=>m.bindingBlockRenderer(uB,p,h.TABLE)),m.registerRenderer(h.FLIP_CARDS,p=>m.bindingBlockRenderer(tB,p,h.FLIP_CARDS)),m.registerRenderer(h.DIVIDER,p=>m.bindingBlockRenderer(ru,p,h.DIVIDER)),m.registerRenderer(h.CONTINUE,p=>m.bindingBlockRenderer(qb,{...p,continueProps:{onContinueClick:f=>t(d=>{Ce.selectedSection(d).continueButtonKey=f}),isHidden:m.isHidden(p.block),scrollToContinueGroupFn:n}},h.CONTINUE)),m.registerRenderer(h.VIDEO,p=>m.bindingBlockRenderer(cu,p,h.VIDEO)),m.registerRenderer(h.SNIPPET,p=>m.bindingBlockRenderer(su,p,h.SNIPPET)),m.registerRenderer(h.CODE,p=>m.bindingBlockRenderer(tu,p,h.CODE)),m.registerRenderer(h.LAYOUT,p=>m.bindingBlockRenderer(sB,p,h.LAYOUT)),m.registerRenderer(h.LIST_ITEM,p=>m.bindingBlockRenderer(Zp,p,h.LIST_ITEM)),m}function RA(e,t){let n=Ce.selectedSection(e).contentState.blocksState.find(i=>t===i.key);return n&&n.type===h.QUIZ?n:null}function IA(e){return J(`${e}`,{4:rm,5:im,6:sm,7:lm,8:pm,9:Ai,10:fm,11:gm,12:Vi,13:Fi,14:_m,15:Oi,16:Li,17:bm,18:Ki,19:Bn,20:vn,21:Tn,22:Dn,23:wn,24:En,25:Pn,26:Rn,27:In,28:Mn,29:An,30:Vn,31:zi,32:Ni,33:Om})}function dB(e,t){let o=IA(t);return Hk(e,o).map(r=>({...r,value:zo(r.value,Si)}))}function MA(e){return J(`${e}`,{4:rm,5:im,6:sm,7:lm,8:pm,9:Ai,10:fm,11:gm,12:Vi,13:Fi,14:_m,15:Oi,16:Li,17:bm,18:Ki,19:Bn,20:vn,21:Tn,22:Dn,23:wn,24:En,25:Pn,26:Rn,27:In,28:Mn,29:An,30:Vn,31:zi,32:Ni,33:Om})}function pu(e,t){let o=MA(t),r=zt(e,o,[]);return zo(r,Si)}function gB(e,t,o){return Ty(pu(e,o),dB(t,o))}function AA(e){return J(`${e}`,{4:nm,5:am,6:cm,7:mm,8:um,9:fs,10:dm,11:hm,12:ym,13:xm,14:Sm,15:km,16:Cm,17:Bm,18:vm,19:Tm,20:Dm,21:wm,22:Em,23:ds,24:Pm,25:Rm,26:er,27:Im,28:Mm,29:Am,30:Vm,31:gs,32:Fm,33:dC})}function hB(e,t){let o=AA(t);return zt(e,o,[])}var yB="data-1.bin",xB="data-1.json";function VA(e){return{...e,verticalTextAlign:"top"}}function FA(e){for(let t of e.rowsOrder)for(let o of e.colsOrder){let r=de.getCell(e,t,o);e.rowsMap[t].colsMap[o]=VA(r)}}function _B(e){return e.type==="image"?e:{...e,meta:[]}}function OA(e){e.frontSide=_B(e.frontSide),e.backSide=_B(e.backSide)}function LA(e){ce(e.cardsBlockMap,OA)}function SB(e){ce(e,t=>{t.type===h.TABLE&&FA(t),t.type===h.FLIP_CARDS&&LA(t)})}function KA(e){return Ae(e,t=>{SB(t.intro.contentState.blockMap),ce(t.chapters,o=>{SB(o.contentState.blockMap)})})}function kB({content:e,settings:t}){return{content:KA(e),settings:t}}function $A(e){return{...e,advanced:{direction:"ltr"}}}function CB({content:e,settings:t}){return{content:e,settings:$A(t)}}function zA(e,t){return e[t].meta.url}function NA(e,t,o=e.characters.length){for(let r=t;r<o;++r)if(zA(e.characters,r))return!0;return!1}function QA(e){return e.characters.reduce((t,o)=>t+o.text,"")}function HA(e){return me(e,t=>{let o=t.contentState.blockMap,r=We(o),n=null;r&&r.type===h.PARAGRAPH&&(n=r);let i={order:[...o.order],blocks:{...o.blocks}},a="";return n&&n.viewType==="subheader"&&!NA(n,0)&&(a=QA(n),Cr(i,n.key)),{...t,contentState:{blockMap:i},header:{title:t.header.title,subtitle:a}}})}function UA(e){return{...e,chapters:HA(e.chapters)}}function bB({content:e,settings:t}){return{settings:t,content:UA(e)}}function BB(e){ce(e,t=>{if(t.type===h.NOTE){let o=t;o.customIconColor=null,o.customBackgroundColor=null}})}function WA(e){return Ae(e,t=>{BB(t.intro.contentState.blockMap),ce(t.chapters,o=>{BB(o.contentState.blockMap)})})}function vB({content:e,settings:t}){return{content:WA(e),settings:t}}function TB(e){return me(e,t=>{if(t.type===h.FLIP_CARDS){let o=t;return{cardsBlockMap:o.cardsBlockMap,maxCardsInRow:o.maxCardsInRow,cardsLayout:o.cardsLayout,type:o.type,key:o.key,designSettings:{background:o.background&&o.background.type==="color"?{color:o.background.color,opacity:o.background.opacity}:null,paddingTop:null,paddingBottom:null}}}return{...t,designSettings:{background:null,paddingTop:null,paddingBottom:null}}})}function qA(e){return Ae(e,t=>{t.intro.contentState.blockMap=TB(t.intro.contentState.blockMap),ce(t.chapters,o=>{o.contentState.blockMap=TB(o.contentState.blockMap)})})}function DB({content:e,settings:t}){return{content:qA(e),settings:t}}function EB(e){return{...e,viewType:y_(e.viewType)}}function GA(e){let t=e.colsMap,o=e.colsOrder,r={};return o.forEach(n=>{let i=t[n].blockMap,a=me(i,s=>s.type===h.PARAGRAPH?EB(s):s);r[n]={blockMap:a}}),{...e,colsMap:r}}function wB(e){return me(e,t=>t.type===h.PARAGRAPH?EB(t):t.type===h.LAYOUT?GA(t):{...t})}function YA(e){return{...e,intro:{...e.intro,contentState:{blockMap:wB(e.intro.contentState.blockMap)}},chapters:me(e.chapters,t=>({...t,contentState:{blockMap:wB(t.contentState.blockMap)}}))}}function PB({content:e,settings:t}){return{content:YA(e),settings:t}}function RB(e){return me(e,t=>{if(t.type===h.EXERCISE){let o=t,r=o.questions.map(a=>a.type==="ti"?{id:a.key,type:a.type,description:a.description,attachment:a.attachment,feedback:a.feedback,content:{caseSensitive:a.content.caseSensitive,answers:a.content.answers.map(l=>({id:l.key,text:l.text}))}}:{id:a.key,type:a.type,description:a.description,attachment:a.attachment,feedback:a.feedback,content:Ve(a.content.choices.map(c=>({id:c.key,text:c.content,correct:c.correct})),c=>c.id)}),n={intro:null,questions:Ve(r,a=>a.id),results:null};return{key:o.key,type:h.QUIZ,longreadQuizId:null,isLoading:!1,alignment:"inner",designSettings:o.designSettings,settings:{main:{attempts:jc,passingScore:80,timeLimit:20*6e4,timeLimitEnabled:!1,shuffleAnswersEnabled:o.settings.shuffleAnswers,shuffleQuestionsEnabled:!1,showCorrectAnswersEnabled:o.settings.showCorrectAnswers,isGraded:!1}},state:n}}return t})}function jA(e){return Ae(e,t=>{let o={key:M2,contentState:{blockMap:RB(t.intro.contentState.blockMap)},header:t.intro.header},r=ze(t.chapters).map(n=>({...n,contentState:{blockMap:RB(n.contentState.blockMap)},header:n.header}));t.chapters=Ve(r,n=>n.key),t.intro=o})}function ZA(e){return{...e,main:{...e.main,chaptersCount:-1,grade:{mode:"noGrade"}}}}function MB({content:e,settings:t}){let o=jA(e),r=ZA(t);return{content:o,settings:r}}function vg(e){let{designSettings:t}=e;if(!t)return{...e,designSettings:void 0};let o={},r=t.paddingTop!==void 0&&t.paddingTop!==null,n=t.paddingBottom!==void 0&&t.paddingBottom!==null;return t.background!==void 0&&t.background!==null&&(o.background={color:t.background}),(r||n)&&(o.padding={},r&&(o.padding.top=t.paddingTop),n&&(o.padding.bottom=t.paddingBottom)),{...e,designSettings:o}}function XA(e){let t=vg(e).designSettings,o=e.colsMap,r=e.colsOrder,n={};return r.forEach(i=>{let a=o[i].blockMap,s=me(a,c=>vg(c));n[i]={blockMap:s}}),{...e,colsMap:n,layoutType:"column",designSettings:t}}function AB(e){return me(e,t=>t.type===h.LAYOUT?XA(t):vg(t))}function VB({content:e,settings:t}){return{settings:t,content:{...e,intro:{...e.intro,contentState:{blockMap:AB(e.intro.contentState.blockMap)}},chapters:me(e.chapters,o=>({...o,contentState:{blockMap:AB(o.contentState.blockMap)}}))}}}function FB(e){return me(e,t=>{var o;if(t.type===h.QUIZ){let r=t;return{...r,state:B0(r.state),alignment:(o=r.alignment)!=null?o:"inner",settings:{...r.settings,main:{...r.settings.main,showFeedbackEnabled:!0}}}}return t})}function JA(e){return Ae(e,t=>{t.intro.contentState.blockMap=FB(t.intro.contentState.blockMap),ce(t.chapters,o=>{o.contentState.blockMap=FB(o.contentState.blockMap)})})}function OB({content:e,settings:t}){return{content:JA(e),settings:t}}var eV=72,tV="#FFFFFF",oV="#323537";function rV(e){var r,n;let o=((r=e.designSettings)!=null&&r.padding&&$e(e.designSettings.padding.top)?e.designSettings.padding.top:_p(Wr(e),"none"))+eV;return{...e,designSettings:{...e.designSettings,padding:{...(n=e.designSettings)==null?void 0:n.padding,top:o}}}}function nV(e){if(!Sr(e))return e;let[t,...o]=ze(e);return Ve([rV(t),...o],r=>r.key)}function iV(e){return{...e,contentState:{blockMap:e.header.coverInfoState?nV(e.contentState.blockMap):e.contentState.blockMap},header:{title:e.header.title,subtitle:"",kicker:e.header.kicker.toUpperCase(),designSettings:{textColor:e.header.coverInfoState?tV:oV,coverInfoState:e.header.coverInfoState?{src:e.header.coverInfoState.src,width:e.header.coverInfoState.width,height:e.header.coverInfoState.height,color:e.header.coverInfoState.color,opacity:e.header.coverInfoState.opacity,isBlob:e.header.coverInfoState.isBlob}:null}},navigationData:{hiddenHeaders:[]}}}function aV({chapter:e,index:t,needToMigrateNumbering:o,totalChaptersCount:r}){return{...e,header:{title:e.header.title,subtitle:e.header.subtitle,kicker:o?T("Roll.Common.CurrentChapterFromTotal",{current:t+1,total:r}):"",designSettings:{textColor:"#323537",coverInfoState:null}},navigationData:{hiddenHeaders:[]}}}function sV(e,t,o){let r=ze(e.chapters);return{pages:Ve(sr([!o&&iV(e.intro),...ze(e.chapters).map((i,a)=>aV({chapter:i,index:a,totalChaptersCount:r.length,needToMigrateNumbering:o?!1:t.main.numberingEnabled}))]),i=>i.key)}}function cV(e){return{...e,main:{navigationType:e.main.navigationType,copyingEnabled:e.main.copyingEnabled,chaptersCount:e.main.chaptersCount,grade:e.main.grade},navigation:{contentsDisplayType:e.main.longreadType==="multiplePage"?"withPages":"hidden",nextButtonEnabled:e.main.nextButtonEnabled,isNavigationPanelCollapsedByDefault:e.main.longreadType==="multiplePage"}}}function LB(e,t){return{content:sV(e.content,e.settings,t),settings:t?e.settings:cV(e.settings)}}var lV=24;function mV(e){let t=e.colsMap,o={},r=lV/e.colsOrder.length;return e.colsOrder.forEach(n=>{o[n]={blockMap:t[n].blockMap,width:r}}),{...e,colsMap:o}}function pV(e){return me(e,t=>t.type===h.LAYOUT?mV(t):t)}function uV(e){return Ae(e,t=>{ce(t.pages,o=>{o.contentState.blockMap=pV(o.contentState.blockMap)})})}function KB({content:e,settings:t}){return{content:uV(e),settings:t}}function fV(e){return e.viewType==="ul"?{type:h.LIST_ITEM,key:e.key,designSettings:e.designSettings,characters:e.characters,listType:"ul",listViewType:"custom"}:e.viewType==="ol"?{type:h.LIST_ITEM,key:e.key,designSettings:e.designSettings,characters:e.characters,listType:"ol",listViewType:"custom",counterReset:e.isOrderedListFirstItem?1:null}:{type:e.type,key:e.key,designSettings:e.designSettings,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,defaultCharactersMeta:e.defaultCharactersMeta}}function dV(e){let t=e.colsMap,o={};return e.colsOrder.forEach(r=>{let n=t[r].blockMap,i=me(n,$B);o[r]={...t[r],blockMap:i}}),{...e,colsMap:o}}function $B(e){return e.type===h.PARAGRAPH?fV(e):e.type===h.LAYOUT?dV(e):e}function gV(e){return me(e,$B)}function zB({content:e,settings:t}){return{settings:t,content:{pages:me(e.pages,o=>({...o,contentState:{...o.contentState,blockMap:gV(o.contentState.blockMap)}}))}}}function Tg({enabled:e,text:t}){return{enabled:e||!1,value:t||[]}}function hV({enabled:e}){return{enabled:e||!1}}function yV({enabled:e,url:t}){return{enabled:e||!1,value:t||""}}function xV(e){let t={key:e.key,type:h.COLLAGE,alignment:e.alignment,images:kV(e.images)};return t.designSettings&&(t.designSettings=e.designSettings),t}function _V(e){let t={key:e.key,type:h.VIDEO,alignment:e.alignment,width:e.width,height:e.height,caption:Tg({enabled:e.paragraph&&!!e.paragraph.characters.length,text:e.paragraph.characters}),src:e.src,isLoading:e.isLoading};return e.posterSrc&&(t.posterSrc=e.posterSrc),e.designSettings&&(t.designSettings=e.designSettings),t}function SV(e){let t={key:e.key,type:h.EMBED,alignment:e.alignment,width:e.width,height:e.height,caption:Tg({enabled:e.characters&&!!e.characters.length,text:e.characters}),src:e.src};return e.designSettings&&(t.designSettings=e.designSettings),t}function kV(e){let t=!!e.find(o=>o.characters.length);return e.map(o=>CV(o,t))}function CV(e,t){let o={key:e.key,type:h.IMAGE,parentCollageKey:e.parentCollageKey,src:e.src,isBlob:e.isBlob,width:e.width,height:e.height,alignment:e.alignment,caption:Tg({enabled:t,text:e.characters}),zoom:hV({enabled:!0}),link:yV({enabled:!1,url:""})};return e.designSettings&&(o.designSettings=e.designSettings),e.crop&&(o.crop=e.crop),o}function bV(e){let t=e.colsMap,o={};return e.colsOrder.forEach(r=>{let n=t[r].blockMap,i=me(n,NB);o[r]={...t[r],blockMap:i}}),{...e,colsMap:o}}function NB(e){return e.type===h.COLLAGE?xV(e):e.type===h.VIDEO?_V(e):e.type===h.EMBED?SV(e):e.type===h.LAYOUT?bV(e):e}function BV(e){return me(e,NB)}function QB({content:e,settings:t}){return{settings:t,content:{pages:me(e.pages,o=>({...o,contentState:{...o.contentState,blockMap:BV(o.contentState.blockMap)}}))}}}function HB({content:e,settings:t}){return{settings:t,content:{pages:me(e.pages,o=>({...o,contentState:{...o.contentState,blockMap:vV(o.contentState.blockMap)}}))}}}function vV(e){return me(e,UB)}function UB(e){return e.type===h.LAYOUT?TV(e):e.type===h.COLLAGE?DV(e):e}function TV(e){let t=e.colsMap,o={};return e.colsOrder.forEach(r=>{let n=t[r].blockMap,i=me(n,UB);o[r]={...t[r],blockMap:i}}),{...e,colsMap:o}}function DV(e){let t={...e,images:EV(e.images)};return t.designSettings&&(t.designSettings=e.designSettings),t}function wV(e){if(!e.length)return e;let t=e.map(r=>r.caption.enabled);return t.every(r=>r)||t.every(r=>!r)?e:e.map(r=>({...r,caption:{...r.caption,enabled:!0}}))}function EV(e){return wV(e).map(o=>PV(o))}function PV(e){let t={...e,frame:{type:"none"},rounding:{radius:"none"}};return e.designSettings&&(t.designSettings=e.designSettings),e.crop&&(t.crop=e.crop),t}function RV(e){return{...e,design:Ax(e.design)}}function WB({content:e,settings:t},o){return{content:e,settings:o?t:RV(t)}}function IV(e){return{pages:me(e.pages,t=>({...t,header:{...t.header,designSettings:{...t.header.designSettings,textColor:ct().textDefault}}}))}}var qB=(e,t)=>t?{content:IV(e.content),settings:e.settings}:e;function GB(e){return me(e,t=>{if(t.type===h.IMAGE){let o=t;return{alignment:o.alignment,key:o.key,type:h.COLLAGE,images:[{key:F(),type:o.type,parentCollageKey:o.key,width:o.width,height:o.height,src:o.src,characters:o.characters,isBlob:o.isBlob,alignment:"inner"}]}}if(t.type===h.EMBED){let o=t;return{key:o.key,type:o.type,width:o.width,height:o.height,src:o.src,alignment:o.alignment,characters:o.characters}}return t})}function MV(e){return Ae(e,t=>{t.intro.contentState.blockMap=GB(t.intro.contentState.blockMap),ce(t.chapters,o=>{o.contentState.blockMap=GB(o.contentState.blockMap)})})}function YB({content:e,settings:t}){return{content:MV(e),settings:t}}function AV(e){return{...e,main:{...e.main,longreadType:"multiplePage"}}}function jB({content:e,settings:t}){return{content:e,settings:AV(t)}}function uu({document:e,versionFrom:t,isNews:o=!1}){return Er({document:e,initialVersion:4,versionFrom:t,versionTo:33,upgraders:[{targetVersion:5,upgradeFn:YB},{targetVersion:6,upgradeFn:oo},{targetVersion:7,upgradeFn:oo},{targetVersion:8,upgradeFn:oo},{targetVersion:9,upgradeFn:oo},{targetVersion:10,upgradeFn:jB},{targetVersion:11,upgradeFn:oo},{targetVersion:12,upgradeFn:kB},{targetVersion:13,upgradeFn:CB},{targetVersion:14,upgradeFn:oo},{targetVersion:15,upgradeFn:oo},{targetVersion:16,upgradeFn:bB},{targetVersion:17,upgradeFn:vB},{targetVersion:18,upgradeFn:oo},{targetVersion:19,upgradeFn:DB},{targetVersion:20,upgradeFn:oo},{targetVersion:21,upgradeFn:oo},{targetVersion:22,upgradeFn:PB},{targetVersion:23,upgradeFn:oo},{targetVersion:24,upgradeFn:MB},{targetVersion:25,upgradeFn:VB},{targetVersion:26,upgradeFn:OB},{targetVersion:27,upgradeFn:i=>LB(i,o)},{targetVersion:28,upgradeFn:KB},{targetVersion:29,upgradeFn:zB},{targetVersion:30,upgradeFn:QB},{targetVersion:31,upgradeFn:HB},{targetVersion:32,upgradeFn:i=>WB(i,o)},{targetVersion:33,upgradeFn:i=>qB(i,o)}]})}function XB(e,t=!1){if("content"in e&&"settings"in e&&"version"in e){let o=e.version,r=e.content,n="patches"in e?e.patches:null,i=n?gB(r,n,o):pu(r,o),a=hB(e.settings,o);return uu({document:{content:i,settings:a},versionFrom:o,isNews:t})}throw Error("cannot load roll document")}function ev(e,t){return new Promise((o,r)=>{if(e=e,typeof e.arrayBuffer=="undefined"){let n=new FileReader;st(n,gt.LOAD_END,()=>{n.result||r();let i=n.result;o(JB(i,t))}),st(n,gt.ERROR,r),n.readAsArrayBuffer(e)}else e.arrayBuffer().then(n=>o(JB(n,t))).catch(r)})}function JB(e,t){let o=new Uint32Array(e.slice(0,Uint32Array.BYTES_PER_ELEMENT))[0],r=new Uint8Array(e.slice(Uint32Array.BYTES_PER_ELEMENT)),{Type:n}=t(o),i=n.decode(r),a=n.toObject(i);return{version:o,data:a}}var Oo={ACCENT_COLOR:"ACCENT_COLOR",PLAYER_MAIN_FONT:"PLAYER_MAIN_FONT",CONTENT_FONT:"CONTENT_FONT"};var go={TOOLTIP:"tooltip",PLAYER_MAIN:"playerMain",CONTENT:"content"};var{String:Gt,Int:Yr,Bool:As}=kt,VV=U({start:Yr(1),end:Yr(2),style:Gt(3)}),FV=U({start:Yr(1),end:Yr(2),url:Gt(3)}),Hn=U({text:Gt(1),inlineStyleRanges:ie(2,VV),urls:ie(3,FV)}),OV=U({src:Gt(1),width:Yr(2),height:Yr(3)}),LV=U({src:Gt(1),width:Yr(2),height:Yr(3)}),Dg=Lt({i:LV,e:OV}),tv=U({key:Gt(1),text:Y(2,Hn),correct:As(3)}),KV=U({choices:ie(1,tv)}),$V=U({choices:ie(1,tv)}),zV=U({key:Gt(1),text:Gt(2)}),NV=U({caseSensitive:As(1),answers:ie(2,zV)}),wg=U({type:Gt(1),correct:Y(2,Hn),incorrect:Y(3,Hn),answered:Y(4,Hn)}),QV=U({includeInProgress:As(1),shuffleAnswers:As(2),showCorrectAnswers:As(3)}),HV=U({key:Gt(1),description:Y(2,Hn),attachment:pe(3,Dg),content:Y(4,KV),feedback:Y(5,wg)}),UV=U({key:Gt(1),description:Y(2,Hn),attachment:pe(3,Dg),content:Y(4,$V),feedback:Y(5,wg)}),WV=U({key:Gt(1),description:Y(2,Hn),attachment:pe(3,Dg),content:Y(4,NV),feedback:Y(5,wg)}),qV=Lt({mc:HV,mr:UV,ti:WV}),ov=U({key:Gt(1),settings:Y(2,QV),questions:ie(3,qV)});var{String:et,Int:Lo,Float:GV}=kt,Un=U({start:Lo(1),end:Lo(2),url:et(3)}),Eg=U({start:Lo(1),end:Lo(2),style:et(3)}),YV=U({key:et(1),text:et(2),viewType:et(3),inlineStyleRanges:ie(4,Eg),urls:ie(5,Un)}),jV=U({key:et(1),src:et(2),width:Lo(3),height:Lo(4),alignment:et(5),text:et(6),inlineStyleRanges:ie(7,Eg),urls:ie(8,Un)}),ZV=U({key:et(1),src:et(2),width:Lo(3),height:Lo(4),alignment:et(5),text:et(6),inlineStyleRanges:ie(7,Eg),urls:ie(8,Un)}),rv=Lt({[h.PARAGRAPH]:YV,[h.IMAGE]:jV,[h.EMBED]:ZV,[h.EXERCISE]:ov}),nv=U({intro:Y(1,{kicker:et(1),title:et(2),coverSrc:pe(3,et),coverWidth:pe(4,Lo),coverHeight:pe(5,Lo),blocks:ie(6,rv),coverColor:pe(7,et),coverOpacity:pe(8,GV)}),chapters:ie(2,{key:et(1),title:et(2),blocks:ie(3,rv)})});var{String:Wn,Bool:fu}=kt,XV=U({content:Y(1,nv),publishSettings:Y(2,{navigationType:Wn(1),searchEnabled:fu(2),numberingEnabled:fu(3),nextButtonEnabled:fu(4),copyingEnabled:pe(6,fu),fonts:Y(5,{[go.TOOLTIP]:Wn(1),[go.PLAYER_MAIN]:Wn(2),[go.CONTENT]:Wn(3)})}),cssReplacements:Y(3,{[Oo.ACCENT_COLOR]:Wn(1),[Oo.CONTENT_FONT]:Wn(2),[Oo.PLAYER_MAIN_FONT]:Wn(3)})}),du=new tr(XV);var iv=du;var{String:Kt,Int:ir,Bool:Vs,Float:JV}=kt,e6=U({start:ir(1),end:ir(2),style:Y(3,{name:Kt(1),size:pe(2,ir),color:pe(3,Kt),opacity:pe(4,JV)})}),t6=U({start:ir(1),end:ir(2),url:Kt(3)}),qn=U({text:Kt(1),inlineStyleRanges:ie(2,e6),urls:ie(3,t6)}),o6=U({src:Kt(1),width:ir(2),height:ir(3)}),r6=U({src:Kt(1),width:ir(2),height:ir(3)}),Pg=Lt({i:r6,e:o6}),av=U({key:Kt(1),text:Y(2,qn),correct:Vs(3)}),n6=U({choices:ie(1,av)}),i6=U({choices:ie(1,av)}),a6=U({key:Kt(1),text:Kt(2)}),s6=U({caseSensitive:Vs(1),answers:ie(2,a6)}),Rg=U({type:Kt(1),correct:Y(2,qn),incorrect:Y(3,qn),answered:Y(4,qn)}),c6=U({includeInProgress:Vs(1),shuffleAnswers:Vs(2),showCorrectAnswers:Vs(3)}),l6=U({key:Kt(1),description:Y(2,qn),attachment:pe(3,Pg),content:Y(4,n6),feedback:Y(5,Rg)}),m6=U({key:Kt(1),description:Y(2,qn),attachment:pe(3,Pg),content:Y(4,i6),feedback:Y(5,Rg)}),p6=U({key:Kt(1),description:Y(2,qn),attachment:pe(3,Pg),content:Y(4,s6),feedback:Y(5,Rg)}),u6=Lt({mc:l6,mr:m6,ti:p6}),sv=U({key:Kt(1),settings:Y(2,c6),questions:ie(3,u6)});var{String:Ke,Int:Ko,Float:lv,Bool:f6}=kt,Ig=U({start:Ko(1),end:Ko(2),style:Y(3,{name:Ke(1),size:pe(2,Ko),color:pe(3,Ke),opacity:pe(4,lv)})}),d6=U({key:Ke(1),text:Ke(2),viewType:Ke(3),inlineStyleRanges:ie(4,Ig),urls:ie(5,Un),textAlign:pe(6,Ke),isOrderedListFirstItem:pe(7,f6)}),g6=U({key:Ke(1),src:Ke(2),width:Ko(3),height:Ko(4),alignment:Ke(5),text:Ke(6),inlineStyleRanges:ie(7,Ig),urls:ie(8,Un)}),h6=U({key:Ke(1),src:Ke(2),width:Ko(3),height:Ko(4),alignment:Ke(5),text:Ke(6),inlineStyleRanges:ie(7,Ig),urls:ie(8,Un)}),y6=U({key:Ke(1),fileName:Ke(2),fileExtension:Ke(3),fileSize:Ko(4)}),cv=Lt({[h.PARAGRAPH]:d6,[h.IMAGE]:g6,[h.EMBED]:h6,[h.EXERCISE]:sv,[h.ATTACHMENT]:y6}),mv=U({intro:Y(1,{kicker:Ke(1),title:Ke(2),coverSrc:pe(3,Ke),coverWidth:pe(4,Ko),coverHeight:pe(5,Ko),blocks:ie(6,cv),coverColor:pe(7,Ke),coverOpacity:pe(8,lv)}),chapters:ie(2,{key:Ke(1),title:Ke(2),blocks:ie(3,cv)})});var{String:Gn,Bool:gu}=kt,x6=U({content:Y(1,mv),publishSettings:Y(2,{navigationType:Gn(1),searchEnabled:gu(2),numberingEnabled:gu(3),nextButtonEnabled:gu(4),copyingEnabled:pe(6,gu),fonts:Y(5,{[go.TOOLTIP]:Gn(1),[go.PLAYER_MAIN]:Gn(2),[go.CONTENT]:Gn(3)})}),cssReplacements:Y(3,{[Oo.ACCENT_COLOR]:Gn(1),[Oo.CONTENT_FONT]:Gn(2),[Oo.PLAYER_MAIN_FONT]:Gn(3)})}),pv=new tr(x6);function uv(e){return e.publishSettings.copyingEnabled=!0,e}function fv(e){return zf(e.content.intro.blocks),e.content.chapters&&e.content.chapters.forEach(t=>{zf(t.blocks)}),e}function dv(e,t=!1){let o=e.questions,r=o?S6(o,t):[];return S_.create({key:t?F():e.key,settings:_6(e.settings),questions:r})}function _6(e){return hl.create({includeInProgress:e.includeInProgress,showCorrectAnswers:e.showCorrectAnswers,shuffleAnswers:e.shuffleAnswers})}function S6(e,t){return e.map(o=>k6(o,t))}function k6(e,t){let o=e.type,r=e.attachment;return gl.create({key:t?F():e.key,type:o,description:Fs(e.description),attachment:r?C6(r):void 0,content:B6(o,e.content,t),feedback:b6(e.feedback)})}function C6(e){let t={crop:e.crop||void 0,title:e.title||void 0,previewSrc:e.previewSrc||void 0};return x_.create({type:e.type,width:e.width,height:e.height,src:e.src,...t})}function b6(e){return dl.create({type:e.type,correct:Fs(e.correct),incorrect:Fs(e.incorrect),answered:Fs(e.answered)})}function Fs(e){return hi({text:e.text,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls})}function B6(e,t,o){switch(e){case"mc":case"mr":return v6(t,o);case"ti":return D6(t,o);default:throw O(e),new Error(`Unknown question type: ${e}`)}}function v6(e,t){let o=e.choices,r=o?o.map(n=>T6(n,t)):[];return pl.create({choices:r})}function T6(e,t){return yi.create({key:t?F():e.key,text:Fs(e.text),correct:e.correct})}function D6(e,t){let o=e.answers,r=o?o.map(n=>w6(n,t)):[];return fl.create({caseSensitive:e.caseSensitive,answers:r})}function w6(e,t){return ul.create({key:t?F():e.key,text:e.text})}function E6(e){let t=e.text||"",o={key:e.key,type:h.PARAGRAPH,viewType:e.viewType,textAlign:e.textAlign,characters:hi({text:t,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls})};return e.viewType==="ol"&&(o.isOrderedListFirstItem=e.isOrderedListFirstItem||!1),o}function P6(e){let t=e.text||"";return{key:e.key,type:h.IMAGE,src:e.src,isBlob:!1,width:e.width,height:e.height,alignment:e.alignment,characters:hi({text:t,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls})}}function R6(e){let t=e.text||"";return{key:e.key,alignment:e.alignment,type:h.EMBED,width:e.width,height:e.height,src:e.src,characters:hi({text:t,inlineStyleRanges:e.inlineStyleRanges||[],urls:e.urls})}}function I6(e){return{key:e.key,type:h.ATTACHMENT,fileName:e.fileName,fileSize:e.fileSize,fileExtension:e.fileExtension,isLoading:!1,src:e.src}}function M6(e){switch(e.type){case h.PARAGRAPH:return E6(e);case h.IMAGE:return P6(e);case h.EMBED:return R6(e);case h.EXERCISE:return dv(e);case h.ATTACHMENT:return I6(e)}return V.error(`unknown block type ${e.type}`),null}function gv(e){let t=[];return e.forEach(o=>{let r=M6(o);r&&t.push(r)}),t}function hv(e){let t=gv(e),o={order:[],blocks:{}};for(let r of t)o.order.push(r.key),o.blocks[r.key]=r;return{blockMap:o}}function A6(e){let t={kicker:e.kicker,title:e.title,coverInfoState:null};return e.coverSrc&&e.coverColor&&e.coverWidth!=null&&e.coverHeight!=null&&e.coverOpacity!=null&&(t.coverInfoState={src:e.coverSrc,width:e.coverWidth,height:e.coverHeight,color:e.coverColor,opacity:e.coverOpacity,isBlob:!1}),{header:{kicker:t.kicker,title:t.title,coverInfoState:t.coverInfoState},contentState:hv(e.blocks)}}function V6(e){return{key:e.key,header:{title:e.title},contentState:hv(e.blocks)}}function yv(e){let t=A6(e.intro),o=(e.chapters||[]).map(r=>V6(r));return{intro:t,chapters:Ve(o,r=>r.key)}}function xv({content:e,publishSettings:t,cssReplacements:o}){return{content:yv(e),settings:{main:{navigationType:t.navigationType,numberingEnabled:t.numberingEnabled,nextButtonEnabled:t.nextButtonEnabled,copyingEnabled:t.copyingEnabled},design:{accentColor:o[Oo.ACCENT_COLOR],headerFont:t.fonts[go.PLAYER_MAIN],contentFont:t.fonts[go.CONTENT]}}}}function _v({playerDocument:e,versionFrom:t}){let o=[{targetVersion:2,upgradeFn:uv},{targetVersion:3,upgradeFn:fv},{targetVersion:4,upgradeFn:xv}],{upgradedDocument:r}=Er({document:e,initialVersion:1,versionFrom:t,versionTo:4,upgraders:o});return r}async function F6(e){let t=await ev(e,n=>{switch(n){case 1:return du;case 2:return iv;case 3:return pv;default:throw Error("invalid blob document format")}}),{version:o,data:r}=t;return _v({playerDocument:r,versionFrom:o})}async function Sv(e){if(e instanceof Blob){let t=await F6(e),{upgradedDocument:o}=uu({document:t,versionFrom:4,isNews:!1});return o}else{let{upgradedDocument:t}=XB(e);return t}}function O6(e,t){return{...e,...t}}function L6(e,t){for(let o of t){let r=e.findIndex(a=>o.key===a.key),n=e[r];if(r===-1||!n)continue;let i=vt.toQuizState(n);if(i){e[r]=O6(i,o);continue}throw new Error(`Unexpected block state type: ${n.type}`)}}function Mg(e,t){let{pages:o,selectedChapter:r}=t;o&&e.pages.forEach((n,i)=>{let a=o[i];if(a){let{progress:s,blocksState:c,continueButtonKey:l}=a;s&&(n.progress=s),l&&(n.continueButtonKey=l),c&&L6(n.contentState.blocksState,c)}}),typeof r=="number"&&r>=0&&(e.selectedSectionIndex=r)}function K6(e){let t=[];for(let o of e.blockMap.order)t.push(Ie(e.blockMap.blocks[o]));return L2.create(t)}function $6(e){return e.order.map((t,o)=>{let r=Ie(e.blocks[t]);return Yb.create({key:r.key,index:o,header:Gb.create(r.header),contentState:K6(r.contentState),hiddenHeaders:r.navigationData.hiddenHeaders})})}function kv(e,t){let o=$6(e.pages),{isNavigationPanelCollapsedByDefault:r}=t.navigation;return Ce.create(o,!r)}var Cv={...qi,_:"b",key:"k",type:"t"},bv={intro:{_:"i",progress:"p",blocksState:Cv,continueButtonKey:"c"},chapters:{_:"c",progress:"p",blocksState:Cv,continueButtonKey:"c"},selectedChapter:"s"};var Bv={...Gi,_:"b",key:"k",type:"t"},hu={intro:{_:"i",progress:"p",blocksState:Bv,continueButtonKey:"c"},chapters:{_:"c",progress:"p",blocksState:Bv,continueButtonKey:"c"},selectedChapter:"s"};var vv={pages:{...hu.chapters,_:"ps"},selectedChapter:"s"};function Tv(e){switch(e){case 1:return bv;case 2:return hu;case 3:return vv;default:throw Error(`cannot decode ResumeState with version ${e}`)}}function Dv(e,t){let o=zo(e,Cl),r=Tv(t);return xo(o,r,[])}function wv(e,t){let o=Tv(t),r=zt(e,o,[]);return zo(r,Si)}function Ev(e){return e.replace(/(["'])/g,"\\$1")}function Pv(e){return e.replace(/\\(["'])/g,"$1")}function Rv(e){let t=vt.toQuizState(e);return t?{...t,...ap(t)}:e}function Iv(e){return sc({...e,intro:e.intro&&{...e.intro,blocksState:e.intro.blocksState&&e.intro.blocksState.map(Rv)},chapters:e.chapters&&e.chapters.map(t=>({...t,blocksState:t.blocksState&&t.blocksState.map(Rv)}))})}function Mv(e){let t=z6(e);return sc({pages:t.intro&&t.chapters?[t.intro,...t.chapters]:void 0,selectedChapter:tn(t.selectedChapter)?t.selectedChapter+1:void 0})}function z6(e){let t=e.chapters&&e.chapters.length?N6(e.chapters[0],e.chapters):[];return{...e,chapters:t}}function N6(e,t){let r=Object.keys(e).filter(n=>!isNaN(Number(n)));return r.length?r.sort((n,i)=>Number(n)-Number(i)).map((n,i)=>{var a;return{...e[n],blocksState:(a=t[i])==null?void 0:a.blocksState}}):t}function xu({resumeState:e,version:t}){return Er({document:e,initialVersion:1,versionFrom:t,versionTo:3,upgraders:[{targetVersion:2,upgradeFn:Iv},{targetVersion:3,upgradeFn:Mv}]}).upgradedDocument}var{Int:H6,Bool:_u,String:la}=kt,Av=U({key:la(1),selected:_u(2)}),U6=U({choicesState:ie(1,Av)}),W6=U({choicesState:ie(1,Av)}),q6=U({answer:la(1)}),G6=U({key:la(1),answered:_u(2),contentState:Y(3,U6)}),Y6=U({key:la(1),answered:_u(2),contentState:Y(3,W6)}),j6=U({key:la(1),answered:_u(2),contentState:Y(3,q6)}),Z6=Lt({mc:G6,mr:Y6,ti:j6}),Vv=U({key:la(1),selectedQuestionIndex:H6(2),questionsState:ie(3,Z6)});var{Float:Fv,Int:X6,String:Ov}=kt,Lv=Lt({[h.EXERCISE]:Vv}),J6=U({intro:Y(1,{progress:pe(1,Fv),blocksState:ie(2,Lv),continueButtonKey:pe(3,Ov)}),chapters:ie(2,{progress:pe(1,Fv),blocksState:ie(2,Lv),continueButtonKey:pe(3,Ov)}),selectedChapter:pe(3,X6)}),Kv=new tr(J6);function e5({questionState:e,questionData:t,choicesQuestionsState:o,choicesViewOrderMap:r}){if(e.type!=="mr"&&e.type!=="mc")return;let i=e.contentState.choicesState;if(!i)return;let a=ze(t.content).filter(p=>p.correct),s=[],c={},l=[];i.forEach(p=>{s.push(p.key),c[p.key]=p.selected,p.selected&&l.push(p.key)});let m=e.answered&&a.length===l.length&&a.every(p=>c[p.id]);o[e.key]={type:e.type,correct:m,submitted:e.answered,choices:c},r[e.key]=s}function t5({questionState:e,questionData:t,typeInQuestionsState:o}){let r=e.contentState,n=ip(t.content,r.answer);o[e.key]={type:"ti",correct:n,submitted:e.answered,answer:r.answer}}function o5(e,t){let{questionsState:o,selectedQuestionIndex:r,key:n}=e,i=[],a={},s={},c={};return o.forEach(l=>{i.push(l.key);let m=t.state.questions.blocks[l.key];m&&((l.type==="mr"||l.type==="mc")&&(m.type==="mr"||m.type==="mc")?e5({questionState:l,questionData:m,choicesQuestionsState:s,choicesViewOrderMap:c}):m.type==="ti"&&t5({questionState:l,questionData:m,typeInQuestionsState:a}))}),{key:n,type:h.QUIZ,attempts:0,timeSpent:0,timerStartTime:null,timerStopTime:null,sessionState:"inProgress",currentSlide:{type:"question",questionId:Ie(o[r]).key},typeInQuestionsState:a,choicesQuestionsState:s,questionsViewOrder:i,choicesViewOrderMap:c,bestAttempt:null}}function $v(e,t){return e.map(o=>{let r=O2.toExerciseState(o),n=pt.toQuizBlock(Ie(t.blocks[o.key]));return r&&n?o5(o,n):o})}function zv(e,t){let[o,...r]=t.pages;return{...e,intro:e.intro?{...e.intro,blocksState:e.intro.blocksState&&$v(e.intro.blocksState,Ie(o).contentState.blockMap)}:void 0,chapters:e.chapters?e.chapters.map((n,i)=>{let a=r[i];return{...n,blocksState:n.blocksState&&$v(n.blocksState,Ie(a).contentState.blockMap)}}):void 0}}function Nv(e,t){let o=jC(e,()=>Kv),r=zv(o,t);return xu({resumeState:r,version:1})}function Ag(e,t){let o=kv(e.content,e.settings);if(t)try{let{version:r,state:n}=JSON.parse(Pv(t)),i=wv(n,r),a=xu({resumeState:i,version:r});return Mg(o,a),o}catch{r5(o,t)}return o}function r5(e,t){try{let o=Nv(t,e);Mg(e,o)}catch(o){V.warn(o)}}var Su=class{constructor(t){this.chaptersCount=t.main.chaptersCount,this.navigationType=t.main.navigationType,this.nextButtonEnabled=t.navigation.nextButtonEnabled,this.copyingEnabled=t.main.copyingEnabled,this.contentsDisplayType=t.navigation.contentsDisplayType,this.isNavigationPanelCollapsedByDefault=t.navigation.isNavigationPanelCollapsedByDefault}};var n5="cubic-bezier(0.24, 0.84, 0.26, 0.99)";function Qv(e){let t=new KeyframeEffect(e,[{transform:"translateY(50px)",opacity:0,"overflow-y":"hidden"},{transform:"translateY(0)",opacity:1,"overflow-y":"visible"}],{duration:600,easing:n5});new Animation(t).play()}function Vg(e,{meta:t,kicker:o,title:r,subtitle:n,designSettings:i,position:a="cover"}){return Rs.PageHeader(e,{background:i.coverInfoState?{src:i.coverInfoState.src,editedSrc:i.coverInfoState.editedSrc,color:i.coverInfoState.color,opacity:i.coverInfoState.opacity,width:i.coverInfoState.width,height:i.coverInfoState.height,crop:i.coverInfoState.crop,isLoading:!1}:null,content:{textColor:i.textColor,isLocked:!1,meta:t,kicker:o?g(i5,{text:o}):null,title:g(Hv,{text:r}),subtitle:n?g(Hv,{text:n}):null},position:a,autotestData:"page-header"})}function i5(e,{text:t}){let o=R2(e,t);return e`
<div save-ref=${o}>${t}</div>`}function Hv(e,{text:t}){return e`
<div>${t}</div>`}var a5={$:"$",rollPlayer:"_1-HQ__",withWatermark:"_tJ1gT3",copyingDisabled:"_iT3UbE",main:"_kMYupD",content:"_M9tjg-",header:"_rl7RJv",nextSectionContentContainer:"_VVPutZ",next:"_n2c_9c",overlay:"_VBmcL-",fadeIn:"_QDa4kf",completeSectionContentContainer:"_ySTEOm",nextSectionLabel:"_wVacDF",tooltipWithTail:"_XQFRlM"},ma=a5;function Uv({contentRef:e,nextButtonRef:t,onSelectedSectionProgress:o,richTextRenderer:r}){let n=w(()=>{let i=e.current,a=r.domElement(),s=t.current,c=s?s.clientHeight:0,l=a.children,m=i.scrollHeight-a.scrollHeight-c;for(let p of l)m+=p.scrollHeight;return m},[e,t,r]);return w(()=>{let i=e.current;if(!i)return;let a=n(),s=Ct(Math.ceil(i.scrollTop+i.clientHeight)/a,0,1);o(s)},[e,n,o])}var s5={$:"$",topPanel:"_xrlGKJ",buttons:"_M0NxBi",navigationButton:"_NE6qwI",closeButton:"_LlZVXp"},Wv=s5;var ku=u(Wv);function qv(e,{previewMode:t,showNavigationPanel:o,autotestData:r,onShowNavigationButton:n,onCloseButton:i}){return e`
<div
	class=${ku.topPanel}
	data-at=${X(r)}
>
	<div class=${ku.buttons}>
		<div class=${ku.navigationButton}>
			${e.renderIf(Hi.OverlayButton,()=>o&&{style:"ghost",type:"icon",icon:g(k0),onClick:n,circleRadius:!0,scale:!0})}
		</div>
		<div class=${ku.closeButton}>
			${e.renderIf(Hi.OverlayButton,()=>!t&&{style:"ghost",type:"icon",icon:g(Ym),onClick:i,circleRadius:!0,scale:!0})}
		</div>
	</div>
</div>`}var Os=u(ma);function Gv({state:e,settings:t,onGotoNextChapter:o,onClosePlayerRequest:r}){let n=w(()=>t.nextButtonEnabled?Ce.nextSection(e):null,[t.nextButtonEnabled,e]),i=w(()=>{let c=Ce.getLastContinueButtonKey(e),l=Ce.selectedSection(e).continueButtonKey,m=!!c&&c!==l;return t.nextButtonEnabled&&!m},[t.nextButtonEnabled,e]),a=w(()=>{let c=t.navigationType==="sequence",l=Ce.selectedSection(e);return c&&l.progress<1},[t.navigationType,e]),s=w(()=>{let c=n();return c?T("Roll.Player.GotoNextChapterLink",{title:c.header.title||T("Roll.Common.ChapterDefaultTitle")}):""},[n]);return I(()=>i()?n()?g(l5,{labelText:s(),disabled:a(),onGotoNextChapter:()=>{Sp("change-page",{}),o()}}):g(c5,{onClosePlayerRequest:r}):null,[s,n,a,i,r,o])}function c5(e,{onClosePlayerRequest:t}){return e`
<div
	class=${Os.completeSectionContentContainer}
	data-at=${X("complete-section-content-container")}
>
	${e(Ui.PlayerButton,{style:"primary",content:T("Roll.Player.Complete"),onClick:()=>t(),size:"large"},Os.next)}
</div>`}function l5(e,{disabled:t,onGotoNextChapter:o,labelText:r}){return e`
<div class=${Os.nextSectionContentContainer}>
	<div class=${Os.nextSectionLabel}>
		${r}
	</div>
	${e(Ui.PlayerButton,{style:"primary",content:T("Roll.Player.Continue"),onClick:t?()=>{}:()=>o(),size:"large",state:t?"disabled":"default",isNarrow:!0},Os.next)}
</div>`}var m5=500;function Yv({state:e,setQuizApi:t,updateStateFn:o,contentRef:r}){let n=te(e),i=I(()=>fB({getState:()=>n.current,updateStateFn:o,setQuizApi:t,scrollableContainerRef:r,scrollToContinueGroupFn:(c,l)=>{let m={top:0,bottom:l!=null?l:0};Mi({element:c,container:r.current,duration:m5,scrollDirection:"bottom",bounds:m})}}),[r,t,n,o]),a=w(()=>Ce.selectedSection(e).contentState,[e]),s=w(()=>Ce.selectedSection(e).continueButtonKey,[e]);return P(()=>{let c=a(),l=s();i.updateState(c,l)},[s,a,i]),i}var jv=u(ma);function Zv(e,{settings:t,state:o,setQuizApi:r,updateStateFn:n,onClosePlayerRequest:i,onGotoNextChapter:a,onSelectedSectionProgress:s,previewMode:c,showNavigationPanel:l,onShowNavigationButton:m,onCloseButton:p}){let f=E(),d=E(),x=Ce.selectedSection(o),_=Yv({state:o,updateStateFn:n,setQuizApi:r,contentRef:f}),k=Gv({state:o,settings:t,onGotoNextChapter:a,onClosePlayerRequest:i}),S=Uv({contentRef:f,nextButtonRef:d,richTextRenderer:_,onSelectedSectionProgress:s});return p5(S),P(()=>{Qv(f.current),S(),Qo(x.key)},[S,x.key]),ee(()=>{f.current.scrollTop=0,Qo(x.key)},[f,x.key]),e`
<div
	class=${jv.content}
	onscroll=${S}
	save-ref=${f}
>
	${e(qv,{previewMode:c,showNavigationPanel:l,autotestData:"roll-top-panel",onShowNavigationButton:m,onCloseButton:p})}
	<div class=${jv.header}>
		${e(Vg,x.header)}
	</div>
	${_.domElement()}
	${e(k,{ref:d})}
</div>`}function p5(e){P(()=>{if(uc()){let t=()=>{Yt(()=>{e(),t()})};t()}},[e])}function u5(e){return e.contentState.blocksState.filter(t=>vt.toQuizState(t))}function Xv(e){let t=u5(e),o=[],r=[];return t.forEach(n=>{let i=n.quizData.settings.main;if(i.isGraded){let s=i.passingScore;n.bestAttempt!==null&&(n.bestAttempt>=s&&r.push(n),o.push(n))}else r.push(n),o.push(n)}),o.length!==t.length?"notCompleted":r.length===t.length?"passed":"failed"}function Jv(e,{articleTitle:t}){let o=M(),r=KC(o);return It({html:e,elementRef:o,text:t,show:r}),e`
<div save-ref=${o}>${t}</div>`}var f5={$:"$",navigationPanel:"_N0pLaP",navigationPanel_showed:"_IBSstB",navigationPanel_inOverlay:"_0WUUJX",mainPanel:"_H4Fb8u",articleTitle:"_JpKzke",progress:"_cT99hf"},eT=f5;var d5={$:"$",totalProgress:"_nx2KVG",numeric:"_iv0_mf",indicatorContainer:"_KtKMDV",indicatorProgress:"_UK4nAH"},Ls=d5;function tT(e,{progress:t}){let o=Math.floor(t*100)+"%";return e`
<div class=${Ls.totalProgress}>
	<div class=${Ls.numeric}>${o}</div>
	<div class=${Ls.indicatorContainer}>
		<div class=${Ls.indicatorProgress} style=${`width: ${o}`}></div>
	</div>
</div>`}var g5={$:"$",correct:"_T6sMOZ",incorrect:"_9HmMPg"},Fg=g5;function oT(e,{passed:t}){return e`
<div>
	${e.switch(()=>t?g(y0,{},Fg.correct):g(h0,{},Fg.incorrect))}
</div>`}var h5={$:"$",progressBar:"_iFmRHS",bar:"_751-kS"},Og=h5;function rT(e,{progress:t}){let r=Math.PI*18,n=(100-t*100)/100*r;return e`
		<div class=${Og.progressBar}>
			<svg width="22" height="22" viewPort="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg">
				<circle r="${9}" cx="11" cy="11" fill="transparent" stroke-dasharray="56.5" stroke-dashoffset="0"></circle>
				<circle class=${Og.bar} r="${9}" cx="11" cy="11" fill="transparent" stroke-dasharray="56.5" stroke-dashoffset="${n}"></circle>
			</svg>
		</div>`}var y5=400,x5=50;function nT({playerContentRef:e,continueButtonKey:t}){let o=Ie(e.current.querySelector(`[data-key="${t}"]`));Mi({element:o,container:e.current,duration:y5,scrollDirection:"bottom",additionalOffset:x5,bounds:Ib()})}function iT({selectedPageKey:e,gotoPageHandler:t,playerContentRef:o,setIgnoreChangeSelectedHeader:r}){let n=te(t);return w(i=>{e===i?(r(!0),w2(o.current,()=>r(!1))):n.current(i)},[n,r,o,e])}function aT(e,{selectedPageKey:t,playerContentRef:o,pageStateMap:r,setIgnoreChangeSelectedHeader:n,onGotoPage:i}){let a=iT({selectedPageKey:t,playerContentRef:o,setIgnoreChangeSelectedHeader:n,gotoPageHandler:i}),s=E2({contentElement:o.current,checkNeedToScroll:d=>d===t,onBeforeStartScroll:()=>n(!0),onCompleteScroll:()=>n(!1)}),c=w(d=>{let x=r[d];if(!x)return null;switch(x.state){case"completed":return g(oT,{passed:x.passed});case"notStarted":return g(jm);case"inProgress":return g(rT,{progress:x.progress})}},[r]),l=w(d=>{let x=r[d];return x?x.state==="notStarted"&&x.disabled:!0},[r]),m=w(d=>{let x=r[d];return x&&x.state==="notStarted"&&x.disabled?T("Roll.Player.Navigation.DisabledPage.Tooltip.Text"):null},[r]),p=w(d=>{d.type==="continue"&&nT({playerContentRef:o,continueButtonKey:d.blockKey})},[o]),f=I(()=>({isReadonly:!1,isPagesDraggable:!1,gotoPageHandler:a,gotoHeaderHandler:s,renderPagePrefix:c,isPageDisabled:l,getPageTooltip:m,getHiddenContentIndicatorText:d=>{if(d.type==="continue")return T("Roll.Player.Navigation.HiddenContent.Tooltip.Text")},onHiddenContentClick:p}),[m,a,s,l,p,c]);x2(e,f)}function sT({state:e,contentElementRef:t,showHeaders:o,ignoreChangeSelectedHeader:r}){let[n,i]=z(null),a=E(null),s=I(()=>{let c=Ce.selectedSection(e);return D2(c)},[e]);return P(()=>{!r&&a.current&&i(a.current)},[r]),G(t,"scroll",()=>{if(!o){i(null);return}let c=T2(t.current,s);r?a.current=c:i(c)}),n}var Cu=u(eT);function cT(e,{state:t,totalProgress:o,settings:r,playerContentRef:n,onSectionClick:i,onTransitionEnd:a}){let s=E(),c=E(window),[l,m]=z(!1),p=I(()=>Ie(t.pages[0]).header.title||T("Roll.Common.IntroDefaultTitle"),[t.pages]);G(c,"resize",()=>{s.current&&(s.current.style.height=`${window.innerHeight}`)}),ee(()=>{Me(s.current,{"--font-family":"var(--header-font-family)",...Ck})},[s]);let d=Ce.selectedSection(t).key,x=I(()=>h2(t.pages),[t.pages]),_=I(()=>_5(t,r.navigationType==="sequence"),[r.navigationType,t]);aT(e,{selectedPageKey:d,playerContentRef:n,pageStateMap:_,onGotoPage:C=>{let y=Ce.getSectionByKey(t,C);y&&i(y)},setIgnoreChangeSelectedHeader:m});let k=sT({state:t,contentElementRef:n,showHeaders:r.contentsDisplayType==="withPagesAndHeaders",ignoreChangeSelectedHeader:l}),S=B2(x,d,k);return e`
<div
	save-ref=${s}
	class=${Cu.navigationPanel.withMods({showed:t.navigationPanelShowed,inOverlay:Wl()||$r()})}
	ontransitionend=${a}
>
	<div class=${Cu.mainPanel}>
		${e(Jv,{articleTitle:p},Cu.articleTitle)}
		${e(tT,{progress:o},Cu.progress)}
		${e(b2,{pages:x,selectedPageKey:d,isMinimized:!1,showHeaders:r.contentsDisplayType==="withPagesAndHeaders",selectedHeader:k,expandedHeaders:S})}
	</div>
</div>`}function _5(e,t){let o={},r=-1;return Ce.sections(e).forEach((n,i)=>{let a=n.progress;n===Ce.selectedSection(e)&&(r=a<1?i:i+1);let c=t&&r!==-1&&i>r&&a===0,l=Xv(n),m=l==="passed"||l==="failed";n.progress===1&&m?o[n.key]={state:"completed",passed:l==="passed"}:n.progress===0?o[n.key]={state:"notStarted",disabled:c}:o[n.key]={state:"inProgress",progress:n.progress}}),o}var S5={$:"$",progressBarWrapper:"_DVdpAm",progressBar:"_-ksFmB"},lT=S5;var mT=u(lT);function pT(e,{progress:t}){let o={width:`calc(100% * ${t})`};return e`
<div
	class=${mT.progressBarWrapper}
>
	<div
		class=${mT.progressBar}
		style=${o}
	></div>
</div>`}function uT(e){let t=I(()=>{try{if(window.top&&window.top.location.href)return window.top}catch{}return window},[]),o=w(()=>{let r=Ie(t).innerHeight;e.current.style.height=`${r}px`},[e,t]);P(()=>{if(Jh()){o();let r=[st(Ie(t),gt.RESIZE,()=>{o()}),st(Ie(t),gt.SCROLL,()=>{o()}),st(Ie(t),gt.ORIENTATIONCHANGE,()=>{setTimeout(()=>Ie(t).scrollTo(0,0),500)})];return()=>r.forEach(wt)}},[o,t])}var Ks=u(ma);function fT(e,{state:t,settings:o,previewMode:r,updateStateFn:n,setQuizApi:i,showWatermark:a,progress:s,onClosePlayerRequest:c,onGotoNextChapter:l,onSectionClick:m,onToggleNavigationButtonClick:p,onSelectedSectionProgress:f}){let d=E(),x=E(),[_,k]=z(!0),S=Ce.selectedSection(t),C=w(()=>{k(!0)},[]),y=w(($=!1)=>{Ul()||!_||(k($),p())},[_,p]),v=w($=>{$===S?y(!1):(y(!0),Sp("change-page",{})),m($)},[y,m,S]);uT(d);let D=(Wl()||$r())&&t.navigationPanelShowed||!_,A=o.contentsDisplayType!=="hidden";return e`
<div
	class=${se(Ks.rollPlayer,!o.copyingEnabled&&Ks.copyingDisabled,a&&Ks.withWatermark)}
	save-ref=${d}
>
	${e.renderIf(cT,()=>A&&{state:t,totalProgress:s,settings:o,playerContentRef:x,onSectionClick:v,onTransitionEnd:C})}
	<div
		class=${Ks.main}
		data-at=${X("roll-player-main")}
	>
		${e(pT,{progress:S.progress})}
		${e(Zv,{settings:o,state:t,setQuizApi:i,updateStateFn:n,onClosePlayerRequest:c,onGotoNextChapter:l,onSelectedSectionProgress:f,previewMode:r,showNavigationPanel:A,onShowNavigationButton:p,onCloseButton:c,progress:S.progress},{ref:x})}
	</div>
	${e.renderIf(k5,()=>D&&{hideNavigationPanel:y})}
</div>`}function k5(e,{hideNavigationPanel:t}){return e`
<div
	class=${Ks.overlay}
	passive-events=${{ontouchstart:t}}
	onmousedown=${t}
></div>`}function C5(e){return{key:e.key,type:h.QUIZ,sessionState:e.sessionState,attempts:e.attempts,currentSlide:e.currentSlide,typeInQuestionsState:e.typeInQuestionsState,choicesQuestionsState:e.choicesQuestionsState,sequenceQuestionsState:e.sequenceQuestionsState,matchingQuestionsState:e.matchingQuestionsState,questionsViewOrder:e.questionsViewOrder,choicesViewOrderMap:e.choicesViewOrderMap,timeSpent:e.timeSpent,timerStartTime:e.timerStartTime,timerStopTime:e.timerStopTime,bestAttempt:e.bestAttempt}}function b5(e){return e.map(t=>{let o=vt.toQuizState(t);if(o)return C5(o);throw new Error(`Unexpected block state type: ${t.type}`)})}function dT(e){return{pages:e.pages.map(t=>({progress:t.progress,blocksState:b5(t.contentState.blocksState),continueButtonKey:t.continueButtonKey})),selectedChapter:e.selectedSectionIndex}}var bu=class{constructor({longreadMainSettings:t,updateQuizState:o,onQuizToGradeCompleted:r,onQuizStatisticChange:n}){this._longreadMainSettings=t,this._onQuizStatisticChange=n,this._updateQuizState=o,this._onQuizToGradeCompleted=r,this._quizKeyToApiMap=new Map,this._quizKeyToUnsubs=new Map}setApi({quizBlockKey:t,quizId:o,isGraded:r,api:n}){let i=this._quizKeyToApiMap.get(t);if(i){if(i===n)return;Ie(this._quizKeyToUnsubs.get(t)).forEach(c=>c())}let a=QC(n);this._quizKeyToApiMap.set(t,n),this._quizKeyToUnsubs.set(t,sr([n.onPersistedStateChanged.add(()=>this._onQuizPersistedStateChanged(t,n)),r&&!!o&&a.add(s=>this._onQuizStatisticChangedHandler(n,o,s))]))}_onQuizStatisticChangedHandler(t,o,r){var i;let n=this._longreadMainSettings.grade;if(n.mode==="gradeByQuiz"&&n.quizToGradeId===o){let a=(i=t.session)==null?void 0:i.evaluation;a&&this._onQuizToGradeCompleted({passed:a.quizPassed,score:a.score})}this._onQuizStatisticChange.dispatch({...r,quizId:o})}_onQuizPersistedStateChanged(t,o){let r=sp(rp(JSON.parse(o.persistedState)));this._updateQuizState(t,r)}};function gT(e){let t=Date.now(),o=setInterval(()=>{let n=Date.now()-t;e(n)},100);return()=>clearInterval(o)}var Lg=3e3;var $s=class extends cr{constructor({container:t,playerData:o,previewMode:r=!1,resumeState:n,showWatermark:i}){super();let a=Ag(o,n);this._attemptDate=Date.now(),this._state=a,this._settings=o.settings,this.onSelectedSectionChange=this._createSignal(),this.onPersistedStateChange=this._createSignal(),this.onSectionProgressChange=this._createSignal(),this.onQuizStatisticChange=this._createSignal(),this.onLongreadResultChange=this._createSignal(),this._longreadResult=this._calculateLongreadResult(),this._quizApiMap=new bu({longreadMainSettings:o.settings.main,updateQuizState:this._updateQuizState.bind(this),onQuizToGradeCompleted:this._onQuizToGradeCompleted.bind(this),onQuizStatisticChange:this.onQuizStatisticChange}),this._playerProps={state:this._state,updateStateFn:this._updateState.bind(this),setQuizApi:this._quizApiMap.setApi.bind(this._quizApiMap),previewMode:r,settings:new Su(this._settings),showWatermark:i,progress:0,onToggleNavigationButtonClick:()=>this._toggleNavigationPanel(),onSectionClick:c=>this._selectSection(c),onGotoNextChapter:()=>this._gotoNextChapter(),onSelectedSectionProgress:c=>{this._setSelectedSectionProgress(c),this._setLongreadProgress(this._getLongreadProgress()),c>=1&&this._onSectionProgressChangeWithThrottle.flush()},onClosePlayerRequest:()=>this._onClosePlayer()},this._setPlayerProps=Ih(fT,c=>{t.appendChild(c)}),this._renderView(),this._onLongreadResultChangedWithThrottle=ac(this.onLongreadResultChange.toFn(),Lg),this._onPersistedStateChangeWithThrottle=ac(this.onPersistedStateChange.toFn(),Lg),this._onSectionProgressChangeWithThrottle=ac(this.onSectionProgressChange.toFn(),Lg),this.onClosePlayerRequest=this._createSignal(),gT(c=>{this._longreadResult.duration=c});let s=mc(()=>this.setInitialNavigationToggleState(),100);this._lastWindowWidth=0,this._listen(window,gt.RESIZE,s.call),this.setInitialNavigationToggleState()}isGraded(){let t=this._settings.main.grade;return t.mode==="gradeByQuiz"&&!!t.quizToGradeId}getTitle(){return Ie(this._state.pages[0]).header.title||T("Roll.Common.IntroDefaultTitle")}getChaptersCount(){return this._state.pages.length}getCurrentSectionIndex(){return this._state.selectedSectionIndex}getCurrentSectionProgress(){return Ce.selectedSection(this._state).progress}getCurrentSectionsStateProgress(){return this._state.pages.map(t=>t.progress===1)}getSuspendData(){let t=Dv(dT(this._state),3);return Ev(JSON.stringify({state:t,version:3}))}getArticle(){return{pages:this._state.pages.map(t=>({key:t.key,title:t.header.title}))}}getLongreadResult(){return this._longreadResult}setInitialNavigationToggleState(){let t=window.innerWidth;if(this._lastWindowWidth>kn.FULL&&Ul())return;this._lastWindowWidth=t;let o=t>kn.FULL&&!this._settings.navigation.isNavigationPanelCollapsedByDefault;this._updateState(r=>{if(o===r.navigationPanelShowed){o&&this._renderView();return}r.navigationPanelShowed!==o&&(r.navigationPanelShowed=o)})}_renderView(t={}){this._playerProps={...this._playerProps,...t},this._setPlayerProps(this._playerProps)}_getAllChaptersArray(){return[...this._state.pages]}_getSettingsChaptersCount(){return this._settings.main.chaptersCount===-1?this._getAllChaptersArray().length:this._settings.main.chaptersCount}_getGradedQuizProgressPortion(t){let o=0;return t.contentState.blocksState.forEach(r=>{let n=vt.toQuizState(r);n&&n.quizData.settings.main.isGraded&&o++}),o?(1-.75)/o:0}_verifyProgress(t){return ha(t,10)>=1?1:t}_getLongreadProgress(){let t=this._getAllChaptersArray();return t.reduce((o,r)=>o+r.progress,0)/t.length}_getLongreadProgressState(){let t=this._getAllChaptersArray(),o=this._getSettingsChaptersCount(),r=0;return t.forEach(n=>{n.progress===1&&r++}),r>=o}_updateState(t){let o=Ae(this._state,r=>{t(r)});this._state!==o&&(this._state=o,this._renderView({state:o}),this._state.selectedSectionIndex!==o.selectedSectionIndex&&this.onSelectedSectionChange.dispatch(),this._onPersistedStateChangeWithThrottle())}_selectSection(t){this._updateState(o=>{o.selectedSectionIndex=o.pages.findIndex(r=>r.key===t.key)})}_updateQuizState(t,o){this._updateState(r=>{let n=Ce.selectedSection(r),i=n.contentState,a=this._getGradedQuizProgressPortion(n);i.blocksState.forEach((s,c)=>{let l=vt.toQuizState(s);l&&l.quizData.key===t&&(l.quizData.settings.main.isGraded&&_a(l.bestAttempt)&&!_a(o.bestAttempt)&&(n.progress=this._verifyProgress(n.progress+a)),i.blocksState[c]={...l,...o})})}),this._setLongreadProgress(this._getLongreadProgress())}_gotoNextChapter(){this._updateState(t=>{let o=Ce.nextSection(t);o&&(t.selectedSectionIndex=t.pages.findIndex(r=>r.key===o.key))})}_onQuizToGradeCompleted({score:t,passed:o}){let r=this._longreadResult.score;(!r||t>r)&&(this._longreadResult.score=t,this._longreadResult.longreadPassed=o,this._longreadResult.completed=!0,this.onLongreadResultChange.dispatch())}_setLongreadProgress(t){t>this._playerProps.progress&&this._renderView({progress:t});let o=this._normalizeProgress(t);if(this._longreadResult.progress!==o){if(this._longreadResult.progress=o,!this.isGraded()){let r=this._getLongreadProgressState();this._longreadResult.longreadPassed=r,this._longreadResult.completed=r}this._onSectionProgressChangeWithThrottle(),this._onLongreadResultChangedWithThrottle()}}_setSelectedSectionProgress(t){this._updateState(o=>{let r=Ce.selectedSection(o);if(isNaN(t)||r.progress>=t)return;let n=this._getGradedQuizProgressPortion(r),i=0;r.contentState.blocksState.forEach(s=>{let c=vt.toQuizState(s);c&&c.quizData.settings.main.isGraded&&!_a(c.bestAttempt)&&(i+=n)});let a=n?this._verifyProgress(t*.75+i):t;r.progress>=a||(r.progress=a)})}_toggleNavigationPanel(){this._updateState(t=>{t.navigationPanelShowed=!t.navigationPanelShowed})}_calculateLongreadResult(){let t=this._settings.main.grade,o=this._attemptDate,r=this._normalizeProgress(this._getLongreadProgress());if(t.mode!=="gradeByQuiz"||!t.quizToGradeId){let a=this._getLongreadProgressState();return{longreadPassed:a,progress:r,score:null,completed:a,attemptDate:o,duration:0}}let n=this._findQuizToGrade(t.quizToGradeId);if(!n)throw new Error(`graded quiz with id ${t.quizToGradeId} is not found`);let i=n.quizData.settings.main.passingScore;return n.bestAttempt?{longreadPassed:n.bestAttempt>=i,progress:r,score:n.bestAttempt,completed:!0,attemptDate:o,duration:0}:{longreadPassed:!1,progress:r,score:null,completed:!1,attemptDate:o,duration:0}}_findQuizToGrade(t){return this._state.pages.reduce((r,n)=>(r.push(...n.contentState.blocksState),r),[]).find(r=>{let n=vt.toQuizState(r);return n&&n.quizData.longreadQuizId===t})}_normalizeProgress(t){return t*100}_onClosePlayer(){this.onLongreadResultChange.dispatch(),this.onClosePlayerRequest.dispatch()}};function Bu(e){switch(e){case 400:case 600:case 700:return e;default:Sa(e,`Unknown font weight: ${e}`)}}function vu(e){switch(e){case"normal":case"italic":return e;default:Sa(e,`Unknown font style: ${e}`)}}function yT(e){try{return Object.entries(e).map(([t,o])=>({id:t,originalId:t,name:o.name,fallback:o.fallback,fontFaces:o.fontFaces.map(r=>({src:Oy(r.path),weight:Bu(r.weight),style:vu(r.style)}))}))}catch{return[]}}var xT=[];function _T(){return xT}function ST(){let e=document.querySelector("#builtInDynamicFonts");if(e instanceof HTMLInputElement){let t=JSON.parse(e.value);xT=yT(t)}}function Kg(e){let o=(e.type==="builtIn"?_T():kT()).find(r=>r.id===e.id);return o||(console.warn(`Font with id: ${e.id} is not defined`),null)}function $g(e,t){let o=t!=null?t:Kg(e);if(!o)return"";let r=`"${o.name}"`;return o.fallback?`${r}, "${o.fallback}"`:r}function CT(e){return e?e.map(({name:t,fonts:o,combinedId:r})=>({id:r.settingsFontFamilyId,originalId:r.originalFontFamilyId,name:t!=null?t:"",fontFaces:o?o.map(n=>({src:Ne(n.path),weight:Bu(n.weight),style:vu(n.style)})):[]})):[]}var bT=[];function BT(e){return e.sort((t,o)=>t.name.localeCompare(o.name))}function B5(e){bT=BT(e)}function kT(){return bT}function vT(e){let t=CT(e);B5(BT(t))}var v5="condensed";function T5({font:e,fonts:t=document.fonts}){return[...t].some(o=>o.family===e.family&&o.style===e.style&&o.weight===e.weight)}function D5(e,t){let o=new FontFace(e,`url(${t.src})`,{style:t.style,weight:String(t.weight),stretch:v5});return o.load().then(()=>document.fonts.add(o))}async function w5(e,t){let o=e.name;await Promise.all(e.fontFaces.map(r=>T5({font:{family:o,style:r.style,weight:r.weight.toString()}})?void 0:D5(o,r))).catch(()=>{t&&Dy(T("Common.Editor.Settings.Design.Font.Toast.LoadFailed",{name:o}))})}function TT(e,t=!1){let o=r=>{let n=Kg(r);n&&w5(n,t)};e.forEach(r=>o(r))}function DT({customFonts:e,documentFonts:t,showFailToast:o=!1}){ST(),vT(e),TT(t,o)}function wT({element:e=document.documentElement,designSettings:t}){Ay({element:e,baseFonts:{headerFontFamily:$g(t.headerFont),contentFontFamily:$g(t.contentFont)}}),E5({element:e,accentColor:t.accentColor})}function E5({element:e=document.documentElement,accentColor:t}){Me(e,{"--roll-player-accent-color":t})}function ET({settings:e,customFonts:t,resourcesBaseUrl:o}){o&&zk(o),Uh(e.advanced.direction),DT({customFonts:t,documentFonts:[e.design.headerFont,e.design.contentFont]}),wT({designSettings:e.design}),Vy({baseColors:{accent:e.design.accentColor}})}function PT(e){e.appendChild(Ta("popup")),e.appendChild(Ta("popover")),e.appendChild(Ta("tooltip")),e.appendChild(Ta("uploader"))}function RT(e){let t=en(By)({});Bc("toast",t),e.appendChild(t)}async function P5(){let e=await ef(xB);return e||(e=await Hh(yB),e)?e:null}function R5(){PT(document.body),RT(document.body)}function IT({i18nFileName:e,showWatermark:t,resumeState:o,subscriptionProduct:r,watermarkUrl:n}){return new Promise(i=>{Promise.all([ef(e),P5()]).then(([a,s])=>{if(!s)throw new Error;rh(a||{}),Sv(s).then(l=>{if(!l)throw new Error;ET({settings:l.settings,customFonts:ic(s)&&s.customFonts}),HC(document.body,t,r,n);let m=new $s({container:document.body,playerData:l,resumeState:o,showWatermark:t});i(m),R5()})})})}function I5(e,t,o,r,n,i){return IT({i18nFileName:e,showWatermark:i||!1,resumeState:o,subscriptionProduct:r,watermarkUrl:n})}Ng("start",I5);})();
